import{r as S}from"./react-915dfabc.js";function O(s){let e;const n=new Set,t=(c,u)=>{const r=typeof c=="function"?c(e):c;if(r!==e){const o=e;e=u?r:Object.assign({},e,r),n.forEach(l=>l(e,o))}},i=()=>e,g=(c,u=i,r=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=u(e);function l(){const b=u(e);if(!r(o,b)){const R=o;c(o=b,R)}}return n.add(l),()=>n.delete(l)},a={setState:t,getState:i,subscribe:(c,u,r)=>u||r?g(c,u,r):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=s(t,i,a),a}const m=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),v=m?S.useEffect:S.useLayoutEffect;function E(s){const e=typeof s=="function"?O(s):s,n=(t=e.getState,i=Object.is)=>{const[,g]=S.useReducer(y=>y+1,0),f=e.getState(),d=S.useRef(f),a=S.useRef(t),c=S.useRef(i),u=S.useRef(!1),r=S.useRef();r.current===void 0&&(r.current=t(f));let o,l=!1;(d.current!==f||a.current!==t||c.current!==i||u.current)&&(o=t(f),l=!i(r.current,o)),v(()=>{l&&(r.current=o),d.current=f,a.current=t,c.current=i,u.current=!1});const b=S.useRef(f);v(()=>{const y=()=>{try{const w=e.getState(),h=a.current(w);c.current(r.current,h)||(d.current=w,r.current=h,g())}catch{u.current=!0,g()}},p=e.subscribe(y);return e.getState()!==b.current&&y(),p},[]);const R=l?o:r.current;return S.useDebugValue(R),R};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const i=t.length<=0;return{value:t.shift(),done:i}}}},n}function D(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;const n=Object.keys(s);if(n.length!==Object.keys(e).length)return!1;for(let t=0;t<n.length;t++)if(!Object.prototype.hasOwnProperty.call(e,n[t])||!Object.is(s[n[t]],e[n[t]]))return!1;return!0}const j=s=>(e,n,t)=>{const i=t.subscribe;return t.subscribe=(f,d,a)=>{let c=f;if(d){const u=(a==null?void 0:a.equalityFn)||Object.is;let r=f(t.getState());c=o=>{const l=f(o);if(!u(r,l)){const b=r;d(r=l,b)}},a!=null&&a.fireImmediately&&d(r,r)}return i(c)},s(e,n,t)};export{j as a,E as c,D as s};
//# sourceMappingURL=zustand-7d50ec68.js.map
