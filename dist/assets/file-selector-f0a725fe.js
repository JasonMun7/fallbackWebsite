import{_ as p,a as s,b as y}from"./tslib-bba439c1.js";var j=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function c(t,i){var n=z(t);if(typeof n.path!="string"){var e=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof i=="string"?i:typeof e=="string"&&e.length>0?e:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function z(t){var i=t.name,n=i&&i.lastIndexOf(".")!==-1;if(n&&!t.type){var e=i.split(".").pop().toLowerCase(),a=j.get(e);a&&Object.defineProperty(t,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return t}var E=[".DS_Store","Thumbs.db"];function M(t){return p(this,void 0,void 0,function(){return s(this,function(i){return u(t)&&F(t)?[2,O(t.dataTransfer,t.type)]:P(t)?[2,_(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,k(t)]:[2,[]]})})}function F(t){return u(t.dataTransfer)}function P(t){return u(t)&&u(t.target)}function u(t){return typeof t=="object"&&t!==null}function _(t){return l(t.target.files).map(function(i){return c(i)})}function k(t){return p(this,void 0,void 0,function(){var i;return s(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(e){return e.getFile()}))];case 1:return i=n.sent(),[2,i.map(function(e){return c(e)})]}})})}function O(t,i){return p(this,void 0,void 0,function(){var n,e;return s(this,function(a){switch(a.label){case 0:return t===null?[2,[]]:t.items?(n=l(t.items).filter(function(r){return r.kind==="file"}),i!=="drop"?[2,n]:[4,Promise.all(n.map(T))]):[3,2];case 1:return e=a.sent(),[2,g(x(e))];case 2:return[2,g(l(t.files).map(function(r){return c(r)}))]}})})}function g(t){return t.filter(function(i){return E.indexOf(i.name)===-1})}function l(t){if(t===null)return[];for(var i=[],n=0;n<t.length;n++){var e=t[n];i.push(e)}return i}function T(t){if(typeof t.webkitGetAsEntry!="function")return h(t);var i=t.webkitGetAsEntry();return i&&i.isDirectory?b(i):h(t)}function x(t){return t.reduce(function(i,n){return y(i,Array.isArray(n)?x(n):[n])},[])}function h(t){var i=t.getAsFile();if(!i)return Promise.reject(t+" is not a File");var n=c(i);return Promise.resolve(n)}function A(t){return p(this,void 0,void 0,function(){return s(this,function(i){return[2,t.isDirectory?b(t):D(t)]})})}function b(t){var i=t.createReader();return new Promise(function(n,e){var a=[];function r(){var w=this;i.readEntries(function(f){return p(w,void 0,void 0,function(){var m,d,v;return s(this,function(o){switch(o.label){case 0:if(f.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return m=o.sent(),n(m),[3,4];case 3:return d=o.sent(),e(d),[3,4];case 4:return[3,6];case 5:v=Promise.all(f.map(A)),a.push(v),r(),o.label=6;case 6:return[2]}})})},function(f){e(f)})}r()})}function D(t){return p(this,void 0,void 0,function(){return s(this,function(i){return[2,new Promise(function(n,e){t.file(function(a){var r=c(a,t.fullPath);n(r)},function(a){e(a)})})]})})}export{M as f};
//# sourceMappingURL=file-selector-f0a725fe.js.map
