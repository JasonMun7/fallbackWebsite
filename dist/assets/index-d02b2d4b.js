function i8(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function xc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var GL={exports:{}},Vy={},HL={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=Symbol.for("react.element"),s8=Symbol.for("react.portal"),o8=Symbol.for("react.fragment"),a8=Symbol.for("react.strict_mode"),l8=Symbol.for("react.profiler"),c8=Symbol.for("react.provider"),u8=Symbol.for("react.context"),f8=Symbol.for("react.forward_ref"),d8=Symbol.for("react.suspense"),h8=Symbol.for("react.memo"),p8=Symbol.for("react.lazy"),i3=Symbol.iterator;function m8(n){return n===null||typeof n!="object"?null:(n=i3&&n[i3]||n["@@iterator"],typeof n=="function"?n:null)}var VL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WL=Object.assign,$L={};function fh(n,e,t){this.props=n,this.context=e,this.refs=$L,this.updater=t||VL}fh.prototype.isReactComponent={};fh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};fh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function jL(){}jL.prototype=fh.prototype;function A2(n,e,t){this.props=n,this.context=e,this.refs=$L,this.updater=t||VL}var E2=A2.prototype=new jL;E2.constructor=A2;WL(E2,fh.prototype);E2.isPureReactComponent=!0;var s3=Array.isArray,XL=Object.prototype.hasOwnProperty,M2={current:null},JL={key:!0,ref:!0,__self:!0,__source:!0};function YL(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)XL.call(e,r)&&!JL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:l0,type:n,key:s,ref:o,props:i,_owner:M2.current}}function g8(n,e){return{$$typeof:l0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function C2(n){return typeof n=="object"&&n!==null&&n.$$typeof===l0}function v8(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var o3=/\/+/g;function Fx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?v8(""+n.key):e.toString(36)}function o1(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case l0:case s8:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Fx(o,0):r,s3(i)?(t="",n!=null&&(t=n.replace(o3,"$&/")+"/"),o1(i,e,t,"",function(c){return c})):i!=null&&(C2(i)&&(i=g8(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(o3,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",s3(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Fx(s,a);o+=o1(s,e,t,l,i)}else if(l=m8(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Fx(s,a++),o+=o1(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kg(n,e,t){if(n==null)return n;var r=[],i=0;return o1(n,r,"","",function(s){return e.call(t,s,i++)}),r}function y8(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ri={current:null},a1={transition:null},_8={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:a1,ReactCurrentOwner:M2};Zt.Children={map:kg,forEach:function(n,e,t){kg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kg(n,function(){e++}),e},toArray:function(n){return kg(n,function(e){return e})||[]},only:function(n){if(!C2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Zt.Component=fh;Zt.Fragment=o8;Zt.Profiler=l8;Zt.PureComponent=A2;Zt.StrictMode=a8;Zt.Suspense=d8;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_8;Zt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=WL({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=M2.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)XL.call(e,l)&&!JL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:l0,type:n.type,key:i,ref:s,props:r,_owner:o}};Zt.createContext=function(n){return n={$$typeof:u8,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:c8,_context:n},n.Consumer=n};Zt.createElement=YL;Zt.createFactory=function(n){var e=YL.bind(null,n);return e.type=n,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(n){return{$$typeof:f8,render:n}};Zt.isValidElement=C2;Zt.lazy=function(n){return{$$typeof:p8,_payload:{_status:-1,_result:n},_init:y8}};Zt.memo=function(n,e){return{$$typeof:h8,type:n,compare:e===void 0?null:e}};Zt.startTransition=function(n){var e=a1.transition;a1.transition={};try{n()}finally{a1.transition=e}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(n,e){return Ri.current.useCallback(n,e)};Zt.useContext=function(n){return Ri.current.useContext(n)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(n){return Ri.current.useDeferredValue(n)};Zt.useEffect=function(n,e){return Ri.current.useEffect(n,e)};Zt.useId=function(){return Ri.current.useId()};Zt.useImperativeHandle=function(n,e,t){return Ri.current.useImperativeHandle(n,e,t)};Zt.useInsertionEffect=function(n,e){return Ri.current.useInsertionEffect(n,e)};Zt.useLayoutEffect=function(n,e){return Ri.current.useLayoutEffect(n,e)};Zt.useMemo=function(n,e){return Ri.current.useMemo(n,e)};Zt.useReducer=function(n,e,t){return Ri.current.useReducer(n,e,t)};Zt.useRef=function(n){return Ri.current.useRef(n)};Zt.useState=function(n){return Ri.current.useState(n)};Zt.useSyncExternalStore=function(n,e,t){return Ri.current.useSyncExternalStore(n,e,t)};Zt.useTransition=function(){return Ri.current.useTransition()};Zt.version="18.2.0";HL.exports=Zt;var B=HL.exports;const oe=xc(B),x8=i8({__proto__:null,default:oe},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8=B,w8=Symbol.for("react.element"),A8=Symbol.for("react.fragment"),E8=Object.prototype.hasOwnProperty,M8=S8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C8={key:!0,ref:!0,__self:!0,__source:!0};function KL(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E8.call(e,r)&&!C8.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w8,type:n,key:s,ref:o,props:i,_owner:M8.current}}Vy.Fragment=A8;Vy.jsx=KL;Vy.jsxs=KL;GL.exports=Vy;var ce=GL.exports;var Lw={},ZL={exports:{}},Cs={},QL={exports:{}},qL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,J){var Y=G.length;G.push(J);e:for(;0<Y;){var X=Y-1>>>1,$=G[X];if(0<i($,J))G[X]=J,G[Y]=$,Y=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Y=G.pop();if(Y!==J){G[0]=Y;e:for(var X=0,$=G.length,re=$>>>1;X<re;){var ie=2*(X+1)-1,ae=G[ie],ue=ie+1,fe=G[ue];if(0>i(ae,Y))ue<$&&0>i(fe,ae)?(G[X]=fe,G[ue]=Y,X=ue):(G[X]=ae,G[ie]=Y,X=ie);else if(ue<$&&0>i(fe,Y))G[X]=fe,G[ue]=Y,X=ue;else break e}}return J}function i(G,J){var Y=G.sortIndex-J.sortIndex;return Y!==0?Y:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=G)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function A(G){if(_=!1,S(G),!v)if(t(l)!==null)v=!0,Q(M);else{var J=t(c);J!==null&&ne(A,J.startTime-G)}}function M(G,J){v=!1,_&&(_=!1,g(T),T=-1),m=!0;var Y=d;try{for(S(J),f=t(l);f!==null&&(!(f.expirationTime>J)||G&&!O());){var X=f.callback;if(typeof X=="function"){f.callback=null,d=f.priorityLevel;var $=X(f.expirationTime<=J);J=n.unstable_now(),typeof $=="function"?f.callback=$:f===t(l)&&r(l),S(J)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var ie=t(c);ie!==null&&ne(A,ie.startTime-J),re=!1}return re}finally{f=null,d=Y,m=!1}}var C=!1,R=null,T=-1,b=5,L=-1;function O(){return!(n.unstable_now()-L<b)}function k(){if(R!==null){var G=n.unstable_now();L=G;var J=!0;try{J=R(!0,G)}finally{J?z():(C=!1,R=null)}}else C=!1}var z;if(typeof x=="function")z=function(){x(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,j=V.port2;V.port1.onmessage=k,z=function(){j.postMessage(null)}}else z=function(){y(k,0)};function Q(G){R=G,C||(C=!0,z())}function ne(G,J){T=y(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Q(M))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var Y=d;d=J;try{return G()}finally{d=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=d;d=G;try{return J()}finally{d=Y}},n.unstable_scheduleCallback=function(G,J,Y){var X=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,G={id:u++,callback:J,priorityLevel:G,startTime:Y,expirationTime:$,sortIndex:-1},Y>X?(G.sortIndex=Y,e(c,G),t(l)===null&&G===t(c)&&(_?(g(T),T=-1):_=!0,ne(A,Y-X))):(G.sortIndex=$,e(l,G),v||m||(v=!0,Q(M))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var J=d;return function(){var Y=d;d=J;try{return G.apply(this,arguments)}finally{d=Y}}}})(qL);QL.exports=qL;var b8=QL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD=B,Ss=b8;function Ye(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tD=new Set,vm={};function Ku(n,e){Ud(n,e),Ud(n+"Capture",e)}function Ud(n,e){for(vm[n]=e,n=0;n<e.length;n++)tD.add(e[n])}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dw=Object.prototype.hasOwnProperty,T8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a3={},l3={};function R8(n){return Dw.call(l3,n)?!0:Dw.call(a3,n)?!1:T8.test(n)?l3[n]=!0:(a3[n]=!0,!1)}function P8(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function I8(n,e,t,r){if(e===null||typeof e>"u"||P8(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$r[n]=new Pi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];$r[e]=new Pi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){$r[n]=new Pi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$r[n]=new Pi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$r[n]=new Pi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){$r[n]=new Pi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){$r[n]=new Pi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){$r[n]=new Pi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){$r[n]=new Pi(n,5,!1,n.toLowerCase(),null,!1,!1)});var b2=/[\-:]([a-z])/g;function T2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(b2,T2);$r[e]=new Pi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(b2,T2);$r[e]=new Pi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(b2,T2);$r[e]=new Pi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){$r[n]=new Pi(n,1,!1,n.toLowerCase(),null,!1,!1)});$r.xlinkHref=new Pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){$r[n]=new Pi(n,1,!1,n.toLowerCase(),null,!0,!0)});function R2(n,e,t,r){var i=$r.hasOwnProperty(e)?$r[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I8(e,t,i,r)&&(t=null),r||i===null?R8(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var al=eD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ng=Symbol.for("react.element"),qf=Symbol.for("react.portal"),ed=Symbol.for("react.fragment"),P2=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),nD=Symbol.for("react.provider"),rD=Symbol.for("react.context"),I2=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),Uw=Symbol.for("react.suspense_list"),B2=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),iD=Symbol.for("react.offscreen"),c3=Symbol.iterator;function ip(n){return n===null||typeof n!="object"?null:(n=c3&&n[c3]||n["@@iterator"],typeof n=="function"?n:null)}var Yn=Object.assign,Ux;function Op(n){if(Ux===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ux=e&&e[1]||""}return`
`+Ux+n}var kx=!1;function Nx(n,e){if(!n||kx)return"";kx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{kx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Op(n):""}function B8(n){switch(n.tag){case 5:return Op(n.type);case 16:return Op("Lazy");case 13:return Op("Suspense");case 19:return Op("SuspenseList");case 0:case 2:case 15:return n=Nx(n.type,!1),n;case 11:return n=Nx(n.type.render,!1),n;case 1:return n=Nx(n.type,!0),n;default:return""}}function kw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ed:return"Fragment";case qf:return"Portal";case Ow:return"Profiler";case P2:return"StrictMode";case Fw:return"Suspense";case Uw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rD:return(n.displayName||"Context")+".Consumer";case nD:return(n._context.displayName||"Context")+".Provider";case I2:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B2:return e=n.displayName||null,e!==null?e:kw(n.type)||"Memo";case Bl:e=n._payload,n=n._init;try{return kw(n(e))}catch{}}return null}function L8(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kw(e);case 8:return e===P2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sD(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function D8(n){var e=sD(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zg(n){n._valueTracker||(n._valueTracker=D8(n))}function oD(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=sD(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function O1(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Nw(n,e){var t=e.checked;return Yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function u3(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=lc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aD(n,e){e=e.checked,e!=null&&R2(n,"checked",e,!1)}function zw(n,e){aD(n,e);var t=lc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Gw(n,e.type,t):e.hasOwnProperty("defaultValue")&&Gw(n,e.type,lc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function f3(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Gw(n,e,t){(e!=="number"||O1(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Fp=Array.isArray;function xd(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+lc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Hw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Yn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function d3(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ye(92));if(Fp(t)){if(1<t.length)throw Error(Ye(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:lc(t)}}function lD(n,e){var t=lc(e.value),r=lc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function h3(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function cD(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?cD(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gg,uD=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gg=Gg||document.createElement("div"),Gg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ym(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var $p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O8=["Webkit","ms","Moz","O"];Object.keys($p).forEach(function(n){O8.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),$p[e]=$p[n]})});function fD(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$p.hasOwnProperty(n)&&$p[n]?(""+e).trim():e+"px"}function dD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=fD(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var F8=Yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ww(n,e){if(e){if(F8[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function $w(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function L2(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xw=null,Sd=null,wd=null;function p3(n){if(n=f0(n)){if(typeof Xw!="function")throw Error(Ye(280));var e=n.stateNode;e&&(e=Jy(e),Xw(n.stateNode,n.type,e))}}function hD(n){Sd?wd?wd.push(n):wd=[n]:Sd=n}function pD(){if(Sd){var n=Sd,e=wd;if(wd=Sd=null,p3(n),e)for(n=0;n<e.length;n++)p3(e[n])}}function mD(n,e){return n(e)}function gD(){}var zx=!1;function vD(n,e,t){if(zx)return n(e,t);zx=!0;try{return mD(n,e,t)}finally{zx=!1,(Sd!==null||wd!==null)&&(gD(),pD())}}function _m(n,e){var t=n.stateNode;if(t===null)return null;var r=Jy(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ye(231,e,typeof t));return t}var Jw=!1;if(Ja)try{var sp={};Object.defineProperty(sp,"passive",{get:function(){Jw=!0}}),window.addEventListener("test",sp,sp),window.removeEventListener("test",sp,sp)}catch{Jw=!1}function U8(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var jp=!1,F1=null,U1=!1,Yw=null,k8={onError:function(n){jp=!0,F1=n}};function N8(n,e,t,r,i,s,o,a,l){jp=!1,F1=null,U8.apply(k8,arguments)}function z8(n,e,t,r,i,s,o,a,l){if(N8.apply(this,arguments),jp){if(jp){var c=F1;jp=!1,F1=null}else throw Error(Ye(198));U1||(U1=!0,Yw=c)}}function Zu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function yD(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function m3(n){if(Zu(n)!==n)throw Error(Ye(188))}function G8(n){var e=n.alternate;if(!e){if(e=Zu(n),e===null)throw Error(Ye(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return m3(i),n;if(s===r)return m3(i),e;s=s.sibling}throw Error(Ye(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ye(189))}}if(t.alternate!==r)throw Error(Ye(190))}if(t.tag!==3)throw Error(Ye(188));return t.stateNode.current===t?n:e}function _D(n){return n=G8(n),n!==null?xD(n):null}function xD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xD(n);if(e!==null)return e;n=n.sibling}return null}var SD=Ss.unstable_scheduleCallback,g3=Ss.unstable_cancelCallback,H8=Ss.unstable_shouldYield,V8=Ss.unstable_requestPaint,fr=Ss.unstable_now,W8=Ss.unstable_getCurrentPriorityLevel,D2=Ss.unstable_ImmediatePriority,wD=Ss.unstable_UserBlockingPriority,k1=Ss.unstable_NormalPriority,$8=Ss.unstable_LowPriority,AD=Ss.unstable_IdlePriority,Wy=null,ta=null;function j8(n){if(ta&&typeof ta.onCommitFiberRoot=="function")try{ta.onCommitFiberRoot(Wy,n,void 0,(n.current.flags&128)===128)}catch{}}var bo=Math.clz32?Math.clz32:Y8,X8=Math.log,J8=Math.LN2;function Y8(n){return n>>>=0,n===0?32:31-(X8(n)/J8|0)|0}var Hg=64,Vg=4194304;function Up(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function N1(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Up(a):(s&=o,s!==0&&(r=Up(s)))}else o=t&~i,o!==0?r=Up(o):s!==0&&(r=Up(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-bo(e),i=1<<t,r|=n[t],e&=~i;return r}function K8(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z8(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-bo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=K8(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Kw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ED(){var n=Hg;return Hg<<=1,!(Hg&4194240)&&(Hg=64),n}function Gx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function c0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bo(e),n[e]=t}function Q8(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-bo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function O2(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-bo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var gn=0;function MD(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var CD,F2,bD,TD,RD,Zw=!1,Wg=[],Xl=null,Jl=null,Yl=null,xm=new Map,Sm=new Map,Fl=[],q8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v3(n,e){switch(n){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":Jl=null;break;case"mouseover":case"mouseout":Yl=null;break;case"pointerover":case"pointerout":xm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sm.delete(e.pointerId)}}function op(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=f0(e),e!==null&&F2(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function e6(n,e,t,r,i){switch(e){case"focusin":return Xl=op(Xl,n,e,t,r,i),!0;case"dragenter":return Jl=op(Jl,n,e,t,r,i),!0;case"mouseover":return Yl=op(Yl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return xm.set(s,op(xm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sm.set(s,op(Sm.get(s)||null,n,e,t,r,i)),!0}return!1}function PD(n){var e=fu(n.target);if(e!==null){var t=Zu(e);if(t!==null){if(e=t.tag,e===13){if(e=yD(t),e!==null){n.blockedOn=e,RD(n.priority,function(){bD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function l1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Qw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);jw=r,t.target.dispatchEvent(r),jw=null}else return e=f0(t),e!==null&&F2(e),n.blockedOn=t,!1;e.shift()}return!0}function y3(n,e,t){l1(n)&&t.delete(e)}function t6(){Zw=!1,Xl!==null&&l1(Xl)&&(Xl=null),Jl!==null&&l1(Jl)&&(Jl=null),Yl!==null&&l1(Yl)&&(Yl=null),xm.forEach(y3),Sm.forEach(y3)}function ap(n,e){n.blockedOn===e&&(n.blockedOn=null,Zw||(Zw=!0,Ss.unstable_scheduleCallback(Ss.unstable_NormalPriority,t6)))}function wm(n){function e(i){return ap(i,n)}if(0<Wg.length){ap(Wg[0],n);for(var t=1;t<Wg.length;t++){var r=Wg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Xl!==null&&ap(Xl,n),Jl!==null&&ap(Jl,n),Yl!==null&&ap(Yl,n),xm.forEach(e),Sm.forEach(e),t=0;t<Fl.length;t++)r=Fl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Fl.length&&(t=Fl[0],t.blockedOn===null);)PD(t),t.blockedOn===null&&Fl.shift()}var Ad=al.ReactCurrentBatchConfig,z1=!0;function n6(n,e,t,r){var i=gn,s=Ad.transition;Ad.transition=null;try{gn=1,U2(n,e,t,r)}finally{gn=i,Ad.transition=s}}function r6(n,e,t,r){var i=gn,s=Ad.transition;Ad.transition=null;try{gn=4,U2(n,e,t,r)}finally{gn=i,Ad.transition=s}}function U2(n,e,t,r){if(z1){var i=Qw(n,e,t,r);if(i===null)Zx(n,e,r,G1,t),v3(n,r);else if(e6(i,n,e,t,r))r.stopPropagation();else if(v3(n,r),e&4&&-1<q8.indexOf(n)){for(;i!==null;){var s=f0(i);if(s!==null&&CD(s),s=Qw(n,e,t,r),s===null&&Zx(n,e,r,G1,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Zx(n,e,r,null,t)}}var G1=null;function Qw(n,e,t,r){if(G1=null,n=L2(r),n=fu(n),n!==null)if(e=Zu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=yD(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return G1=n,null}function ID(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W8()){case D2:return 1;case wD:return 4;case k1:case $8:return 16;case AD:return 536870912;default:return 16}default:return 16}}var kl=null,k2=null,c1=null;function BD(){if(c1)return c1;var n,e=k2,t=e.length,r,i="value"in kl?kl.value:kl.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return c1=i.slice(n,1<r?1-r:void 0)}function u1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $g(){return!0}function _3(){return!1}function bs(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$g:_3,this.isPropagationStopped=_3,this}return Yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$g)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$g)},persist:function(){},isPersistent:$g}),e}var dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N2=bs(dh),u0=Yn({},dh,{view:0,detail:0}),i6=bs(u0),Hx,Vx,lp,$y=Yn({},u0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lp&&(lp&&n.type==="mousemove"?(Hx=n.screenX-lp.screenX,Vx=n.screenY-lp.screenY):Vx=Hx=0,lp=n),Hx)},movementY:function(n){return"movementY"in n?n.movementY:Vx}}),x3=bs($y),s6=Yn({},$y,{dataTransfer:0}),o6=bs(s6),a6=Yn({},u0,{relatedTarget:0}),Wx=bs(a6),l6=Yn({},dh,{animationName:0,elapsedTime:0,pseudoElement:0}),c6=bs(l6),u6=Yn({},dh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),f6=bs(u6),d6=Yn({},dh,{data:0}),S3=bs(d6),h6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=m6[n])?!!e[n]:!1}function z2(){return g6}var v6=Yn({},u0,{key:function(n){if(n.key){var e=h6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=u1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?p6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z2,charCode:function(n){return n.type==="keypress"?u1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?u1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y6=bs(v6),_6=Yn({},$y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w3=bs(_6),x6=Yn({},u0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z2}),S6=bs(x6),w6=Yn({},dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),A6=bs(w6),E6=Yn({},$y,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),M6=bs(E6),C6=[9,13,27,32],G2=Ja&&"CompositionEvent"in window,Xp=null;Ja&&"documentMode"in document&&(Xp=document.documentMode);var b6=Ja&&"TextEvent"in window&&!Xp,LD=Ja&&(!G2||Xp&&8<Xp&&11>=Xp),A3=String.fromCharCode(32),E3=!1;function DD(n,e){switch(n){case"keyup":return C6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var td=!1;function T6(n,e){switch(n){case"compositionend":return OD(e);case"keypress":return e.which!==32?null:(E3=!0,A3);case"textInput":return n=e.data,n===A3&&E3?null:n;default:return null}}function R6(n,e){if(td)return n==="compositionend"||!G2&&DD(n,e)?(n=BD(),c1=k2=kl=null,td=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LD&&e.locale!=="ko"?null:e.data;default:return null}}var P6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!P6[n.type]:e==="textarea"}function FD(n,e,t,r){hD(r),e=H1(e,"onChange"),0<e.length&&(t=new N2("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Jp=null,Am=null;function I6(n){XD(n,0)}function jy(n){var e=id(n);if(oD(e))return n}function B6(n,e){if(n==="change")return e}var UD=!1;if(Ja){var $x;if(Ja){var jx="oninput"in document;if(!jx){var C3=document.createElement("div");C3.setAttribute("oninput","return;"),jx=typeof C3.oninput=="function"}$x=jx}else $x=!1;UD=$x&&(!document.documentMode||9<document.documentMode)}function b3(){Jp&&(Jp.detachEvent("onpropertychange",kD),Am=Jp=null)}function kD(n){if(n.propertyName==="value"&&jy(Am)){var e=[];FD(e,Am,n,L2(n)),vD(I6,e)}}function L6(n,e,t){n==="focusin"?(b3(),Jp=e,Am=t,Jp.attachEvent("onpropertychange",kD)):n==="focusout"&&b3()}function D6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jy(Am)}function O6(n,e){if(n==="click")return jy(e)}function F6(n,e){if(n==="input"||n==="change")return jy(e)}function U6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Bo=typeof Object.is=="function"?Object.is:U6;function Em(n,e){if(Bo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Dw.call(e,i)||!Bo(n[i],e[i]))return!1}return!0}function T3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function R3(n,e){var t=T3(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=T3(t)}}function ND(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ND(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function zD(){for(var n=window,e=O1();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=O1(n.document)}return e}function H2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function k6(n){var e=zD(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ND(t.ownerDocument.documentElement,t)){if(r!==null&&H2(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=R3(t,s);var o=R3(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var N6=Ja&&"documentMode"in document&&11>=document.documentMode,nd=null,qw=null,Yp=null,eA=!1;function P3(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;eA||nd==null||nd!==O1(r)||(r=nd,"selectionStart"in r&&H2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yp&&Em(Yp,r)||(Yp=r,r=H1(qw,"onSelect"),0<r.length&&(e=new N2("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=nd)))}function jg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var rd={animationend:jg("Animation","AnimationEnd"),animationiteration:jg("Animation","AnimationIteration"),animationstart:jg("Animation","AnimationStart"),transitionend:jg("Transition","TransitionEnd")},Xx={},GD={};Ja&&(GD=document.createElement("div").style,"AnimationEvent"in window||(delete rd.animationend.animation,delete rd.animationiteration.animation,delete rd.animationstart.animation),"TransitionEvent"in window||delete rd.transitionend.transition);function Xy(n){if(Xx[n])return Xx[n];if(!rd[n])return n;var e=rd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in GD)return Xx[n]=e[t];return n}var HD=Xy("animationend"),VD=Xy("animationiteration"),WD=Xy("animationstart"),$D=Xy("transitionend"),jD=new Map,I3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sc(n,e){jD.set(n,e),Ku(e,[n])}for(var Jx=0;Jx<I3.length;Jx++){var Yx=I3[Jx],z6=Yx.toLowerCase(),G6=Yx[0].toUpperCase()+Yx.slice(1);Sc(z6,"on"+G6)}Sc(HD,"onAnimationEnd");Sc(VD,"onAnimationIteration");Sc(WD,"onAnimationStart");Sc("dblclick","onDoubleClick");Sc("focusin","onFocus");Sc("focusout","onBlur");Sc($D,"onTransitionEnd");Ud("onMouseEnter",["mouseout","mouseover"]);Ud("onMouseLeave",["mouseout","mouseover"]);Ud("onPointerEnter",["pointerout","pointerover"]);Ud("onPointerLeave",["pointerout","pointerover"]);Ku("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ku("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ku("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ku("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ku("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ku("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H6=new Set("cancel close invalid load scroll toggle".split(" ").concat(kp));function B3(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,z8(r,e,void 0,n),n.currentTarget=null}function XD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B3(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B3(i,a,c),s=l}}}if(U1)throw n=Yw,U1=!1,Yw=null,n}function Pn(n,e){var t=e[sA];t===void 0&&(t=e[sA]=new Set);var r=n+"__bubble";t.has(r)||(JD(e,n,2,!1),t.add(r))}function Kx(n,e,t){var r=0;e&&(r|=4),JD(t,n,r,e)}var Xg="_reactListening"+Math.random().toString(36).slice(2);function Mm(n){if(!n[Xg]){n[Xg]=!0,tD.forEach(function(t){t!=="selectionchange"&&(H6.has(t)||Kx(t,!1,n),Kx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Xg]||(e[Xg]=!0,Kx("selectionchange",!1,e))}}function JD(n,e,t,r){switch(ID(e)){case 1:var i=n6;break;case 4:i=r6;break;default:i=U2}t=i.bind(null,e,t,n),i=void 0,!Jw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Zx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vD(function(){var c=s,u=L2(t),f=[];e:{var d=jD.get(n);if(d!==void 0){var m=N2,v=n;switch(n){case"keypress":if(u1(t)===0)break e;case"keydown":case"keyup":m=y6;break;case"focusin":v="focus",m=Wx;break;case"focusout":v="blur",m=Wx;break;case"beforeblur":case"afterblur":m=Wx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=x3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=o6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=S6;break;case HD:case VD:case WD:m=c6;break;case $D:m=A6;break;case"scroll":m=i6;break;case"wheel":m=M6;break;case"copy":case"cut":case"paste":m=f6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=w3}var _=(e&4)!==0,y=!_&&n==="scroll",g=_?d!==null?d+"Capture":null:d;_=[];for(var x=c,S;x!==null;){S=x;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,g!==null&&(A=_m(x,g),A!=null&&_.push(Cm(x,A,S)))),y)break;x=x.return}0<_.length&&(d=new m(d,v,null,t,u),f.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&t!==jw&&(v=t.relatedTarget||t.fromElement)&&(fu(v)||v[Ya]))break e;if((m||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?fu(v):null,v!==null&&(y=Zu(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=x3,A="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(_=w3,A="onPointerLeave",g="onPointerEnter",x="pointer"),y=m==null?d:id(m),S=v==null?d:id(v),d=new _(A,x+"leave",m,t,u),d.target=y,d.relatedTarget=S,A=null,fu(u)===c&&(_=new _(g,x+"enter",v,t,u),_.target=S,_.relatedTarget=y,A=_),y=A,m&&v)t:{for(_=m,g=v,x=0,S=_;S;S=xf(S))x++;for(S=0,A=g;A;A=xf(A))S++;for(;0<x-S;)_=xf(_),x--;for(;0<S-x;)g=xf(g),S--;for(;x--;){if(_===g||g!==null&&_===g.alternate)break t;_=xf(_),g=xf(g)}_=null}else _=null;m!==null&&L3(f,d,m,_,!1),v!==null&&y!==null&&L3(f,y,v,_,!0)}}e:{if(d=c?id(c):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var M=B6;else if(M3(d))if(UD)M=F6;else{M=D6;var C=L6}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(M=O6);if(M&&(M=M(n,c))){FD(f,M,t,u);break e}C&&C(n,d,c),n==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Gw(d,"number",d.value)}switch(C=c?id(c):window,n){case"focusin":(M3(C)||C.contentEditable==="true")&&(nd=C,qw=c,Yp=null);break;case"focusout":Yp=qw=nd=null;break;case"mousedown":eA=!0;break;case"contextmenu":case"mouseup":case"dragend":eA=!1,P3(f,t,u);break;case"selectionchange":if(N6)break;case"keydown":case"keyup":P3(f,t,u)}var R;if(G2)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else td?DD(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(LD&&t.locale!=="ko"&&(td||T!=="onCompositionStart"?T==="onCompositionEnd"&&td&&(R=BD()):(kl=u,k2="value"in kl?kl.value:kl.textContent,td=!0)),C=H1(c,T),0<C.length&&(T=new S3(T,n,null,t,u),f.push({event:T,listeners:C}),R?T.data=R:(R=OD(t),R!==null&&(T.data=R)))),(R=b6?T6(n,t):R6(n,t))&&(c=H1(c,"onBeforeInput"),0<c.length&&(u=new S3("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=R))}XD(f,e)})}function Cm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function H1(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_m(n,t),s!=null&&r.unshift(Cm(n,s,i)),s=_m(n,e),s!=null&&r.push(Cm(n,s,i))),n=n.return}return r}function xf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function L3(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=_m(t,s),l!=null&&o.unshift(Cm(t,l,a))):i||(l=_m(t,s),l!=null&&o.push(Cm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var V6=/\r\n?/g,W6=/\u0000|\uFFFD/g;function D3(n){return(typeof n=="string"?n:""+n).replace(V6,`
`).replace(W6,"")}function Jg(n,e,t){if(e=D3(e),D3(n)!==e&&t)throw Error(Ye(425))}function V1(){}var tA=null,nA=null;function rA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iA=typeof setTimeout=="function"?setTimeout:void 0,$6=typeof clearTimeout=="function"?clearTimeout:void 0,O3=typeof Promise=="function"?Promise:void 0,j6=typeof queueMicrotask=="function"?queueMicrotask:typeof O3<"u"?function(n){return O3.resolve(null).then(n).catch(X6)}:iA;function X6(n){setTimeout(function(){throw n})}function Qx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),wm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);wm(e)}function Kl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function F3(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var hh=Math.random().toString(36).slice(2),Zo="__reactFiber$"+hh,bm="__reactProps$"+hh,Ya="__reactContainer$"+hh,sA="__reactEvents$"+hh,J6="__reactListeners$"+hh,Y6="__reactHandles$"+hh;function fu(n){var e=n[Zo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ya]||t[Zo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=F3(n);n!==null;){if(t=n[Zo])return t;n=F3(n)}return e}n=t,t=n.parentNode}return null}function f0(n){return n=n[Zo]||n[Ya],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function id(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ye(33))}function Jy(n){return n[bm]||null}var oA=[],sd=-1;function wc(n){return{current:n}}function Ln(n){0>sd||(n.current=oA[sd],oA[sd]=null,sd--)}function bn(n,e){sd++,oA[sd]=n.current,n.current=e}var cc={},ci=wc(cc),ji=wc(!1),Du=cc;function kd(n,e){var t=n.type.contextTypes;if(!t)return cc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Xi(n){return n=n.childContextTypes,n!=null}function W1(){Ln(ji),Ln(ci)}function U3(n,e,t){if(ci.current!==cc)throw Error(Ye(168));bn(ci,e),bn(ji,t)}function YD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ye(108,L8(n)||"Unknown",i));return Yn({},t,r)}function $1(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||cc,Du=ci.current,bn(ci,n),bn(ji,ji.current),!0}function k3(n,e,t){var r=n.stateNode;if(!r)throw Error(Ye(169));t?(n=YD(n,e,Du),r.__reactInternalMemoizedMergedChildContext=n,Ln(ji),Ln(ci),bn(ci,n)):Ln(ji),bn(ji,t)}var Oa=null,Yy=!1,qx=!1;function KD(n){Oa===null?Oa=[n]:Oa.push(n)}function K6(n){Yy=!0,KD(n)}function Ac(){if(!qx&&Oa!==null){qx=!0;var n=0,e=gn;try{var t=Oa;for(gn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Oa=null,Yy=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(n+1)),SD(D2,Ac),i}finally{gn=e,qx=!1}}return null}var od=[],ad=0,j1=null,X1=0,js=[],Xs=0,Ou=null,za=1,Ga="";function ru(n,e){od[ad++]=X1,od[ad++]=j1,j1=n,X1=e}function ZD(n,e,t){js[Xs++]=za,js[Xs++]=Ga,js[Xs++]=Ou,Ou=n;var r=za;n=Ga;var i=32-bo(r)-1;r&=~(1<<i),t+=1;var s=32-bo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,za=1<<32-bo(e)+i|t<<i|r,Ga=s+n}else za=1<<s|t<<i|r,Ga=n}function V2(n){n.return!==null&&(ru(n,1),ZD(n,1,0))}function W2(n){for(;n===j1;)j1=od[--ad],od[ad]=null,X1=od[--ad],od[ad]=null;for(;n===Ou;)Ou=js[--Xs],js[Xs]=null,Ga=js[--Xs],js[Xs]=null,za=js[--Xs],js[Xs]=null}var vs=null,ps=null,Fn=!1,Ao=null;function QD(n,e){var t=Zs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function N3(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vs=n,ps=Kl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vs=n,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ou!==null?{id:za,overflow:Ga}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Zs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vs=n,ps=null,!0):!1;default:return!1}}function aA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lA(n){if(Fn){var e=ps;if(e){var t=e;if(!N3(n,e)){if(aA(n))throw Error(Ye(418));e=Kl(t.nextSibling);var r=vs;e&&N3(n,e)?QD(r,t):(n.flags=n.flags&-4097|2,Fn=!1,vs=n)}}else{if(aA(n))throw Error(Ye(418));n.flags=n.flags&-4097|2,Fn=!1,vs=n}}}function z3(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vs=n}function Yg(n){if(n!==vs)return!1;if(!Fn)return z3(n),Fn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!rA(n.type,n.memoizedProps)),e&&(e=ps)){if(aA(n))throw qD(),Error(Ye(418));for(;e;)QD(n,e),e=Kl(e.nextSibling)}if(z3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ye(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ps=Kl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ps=null}}else ps=vs?Kl(n.stateNode.nextSibling):null;return!0}function qD(){for(var n=ps;n;)n=Kl(n.nextSibling)}function Nd(){ps=vs=null,Fn=!1}function $2(n){Ao===null?Ao=[n]:Ao.push(n)}var Z6=al.ReactCurrentBatchConfig;function xo(n,e){if(n&&n.defaultProps){e=Yn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var J1=wc(null),Y1=null,ld=null,j2=null;function X2(){j2=ld=Y1=null}function J2(n){var e=J1.current;Ln(J1),n._currentValue=e}function cA(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ed(n,e){Y1=n,j2=ld=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vi=!0),n.firstContext=null)}function so(n){var e=n._currentValue;if(j2!==n)if(n={context:n,memoizedValue:e,next:null},ld===null){if(Y1===null)throw Error(Ye(308));ld=n,Y1.dependencies={lanes:0,firstContext:n}}else ld=ld.next=n;return e}var du=null;function Y2(n){du===null?du=[n]:du.push(n)}function e4(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Y2(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ka(n,r)}function Ka(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ll=!1;function K2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t4(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Zl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ka(n,t)}return i=r.interleaved,i===null?(e.next=e,Y2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ka(n,t)}function f1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,O2(n,t)}}function G3(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function K1(n,e,t,r){var i=n.updateQueue;Ll=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,m=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,_=a;switch(d=e,m=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(m,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,d=typeof v=="function"?v.call(m,f,d):v,d==null)break e;f=Yn({},f,d);break e;case 2:Ll=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Uu|=o,n.lanes=o,n.memoizedState=f}}function H3(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ye(191,i));i.call(r)}}}var n4=new eD.Component().refs;function uA(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Yn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ky={isMounted:function(n){return(n=n._reactInternals)?Zu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=bi(),i=ql(n),s=Wa(r,i);s.payload=e,t!=null&&(s.callback=t),e=Zl(n,s,i),e!==null&&(To(e,n,i,r),f1(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=bi(),i=ql(n),s=Wa(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Zl(n,s,i),e!==null&&(To(e,n,i,r),f1(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=bi(),r=ql(n),i=Wa(t,r);i.tag=2,e!=null&&(i.callback=e),e=Zl(n,i,r),e!==null&&(To(e,n,r,t),f1(e,n,r))}};function V3(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Em(t,r)||!Em(i,s):!0}function r4(n,e,t){var r=!1,i=cc,s=e.contextType;return typeof s=="object"&&s!==null?s=so(s):(i=Xi(e)?Du:ci.current,r=e.contextTypes,s=(r=r!=null)?kd(n,i):cc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ky,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function W3(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ky.enqueueReplaceState(e,e.state,null)}function fA(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=n4,K2(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=so(s):(s=Xi(e)?Du:ci.current,i.context=kd(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uA(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ky.enqueueReplaceState(i,i.state,null),K1(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function cp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ye(309));var r=t.stateNode}if(!r)throw Error(Ye(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===n4&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ye(284));if(!t._owner)throw Error(Ye(290,n))}return n}function Kg(n,e){throw n=Object.prototype.toString.call(e),Error(Ye(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $3(n){var e=n._init;return e(n._payload)}function i4(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=ec(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,A){return x===null||x.tag!==6?(x=oS(S,g.mode,A),x.return=g,x):(x=i(x,S),x.return=g,x)}function l(g,x,S,A){var M=S.type;return M===ed?u(g,x,S.props.children,A,S.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Bl&&$3(M)===x.type)?(A=i(x,S.props),A.ref=cp(g,x,S),A.return=g,A):(A=v1(S.type,S.key,S.props,null,g.mode,A),A.ref=cp(g,x,S),A.return=g,A)}function c(g,x,S,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=aS(S,g.mode,A),x.return=g,x):(x=i(x,S.children||[]),x.return=g,x)}function u(g,x,S,A,M){return x===null||x.tag!==7?(x=Au(S,g.mode,A,M),x.return=g,x):(x=i(x,S),x.return=g,x)}function f(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=oS(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ng:return S=v1(x.type,x.key,x.props,null,g.mode,S),S.ref=cp(g,null,x),S.return=g,S;case qf:return x=aS(x,g.mode,S),x.return=g,x;case Bl:var A=x._init;return f(g,A(x._payload),S)}if(Fp(x)||ip(x))return x=Au(x,g.mode,S,null),x.return=g,x;Kg(g,x)}return null}function d(g,x,S,A){var M=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:a(g,x,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ng:return S.key===M?l(g,x,S,A):null;case qf:return S.key===M?c(g,x,S,A):null;case Bl:return M=S._init,d(g,x,M(S._payload),A)}if(Fp(S)||ip(S))return M!==null?null:u(g,x,S,A,null);Kg(g,S)}return null}function m(g,x,S,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return g=g.get(S)||null,a(x,g,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ng:return g=g.get(A.key===null?S:A.key)||null,l(x,g,A,M);case qf:return g=g.get(A.key===null?S:A.key)||null,c(x,g,A,M);case Bl:var C=A._init;return m(g,x,S,C(A._payload),M)}if(Fp(A)||ip(A))return g=g.get(S)||null,u(x,g,A,M,null);Kg(x,A)}return null}function v(g,x,S,A){for(var M=null,C=null,R=x,T=x=0,b=null;R!==null&&T<S.length;T++){R.index>T?(b=R,R=null):b=R.sibling;var L=d(g,R,S[T],A);if(L===null){R===null&&(R=b);break}n&&R&&L.alternate===null&&e(g,R),x=s(L,x,T),C===null?M=L:C.sibling=L,C=L,R=b}if(T===S.length)return t(g,R),Fn&&ru(g,T),M;if(R===null){for(;T<S.length;T++)R=f(g,S[T],A),R!==null&&(x=s(R,x,T),C===null?M=R:C.sibling=R,C=R);return Fn&&ru(g,T),M}for(R=r(g,R);T<S.length;T++)b=m(R,g,T,S[T],A),b!==null&&(n&&b.alternate!==null&&R.delete(b.key===null?T:b.key),x=s(b,x,T),C===null?M=b:C.sibling=b,C=b);return n&&R.forEach(function(O){return e(g,O)}),Fn&&ru(g,T),M}function _(g,x,S,A){var M=ip(S);if(typeof M!="function")throw Error(Ye(150));if(S=M.call(S),S==null)throw Error(Ye(151));for(var C=M=null,R=x,T=x=0,b=null,L=S.next();R!==null&&!L.done;T++,L=S.next()){R.index>T?(b=R,R=null):b=R.sibling;var O=d(g,R,L.value,A);if(O===null){R===null&&(R=b);break}n&&R&&O.alternate===null&&e(g,R),x=s(O,x,T),C===null?M=O:C.sibling=O,C=O,R=b}if(L.done)return t(g,R),Fn&&ru(g,T),M;if(R===null){for(;!L.done;T++,L=S.next())L=f(g,L.value,A),L!==null&&(x=s(L,x,T),C===null?M=L:C.sibling=L,C=L);return Fn&&ru(g,T),M}for(R=r(g,R);!L.done;T++,L=S.next())L=m(R,g,T,L.value,A),L!==null&&(n&&L.alternate!==null&&R.delete(L.key===null?T:L.key),x=s(L,x,T),C===null?M=L:C.sibling=L,C=L);return n&&R.forEach(function(k){return e(g,k)}),Fn&&ru(g,T),M}function y(g,x,S,A){if(typeof S=="object"&&S!==null&&S.type===ed&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ng:e:{for(var M=S.key,C=x;C!==null;){if(C.key===M){if(M=S.type,M===ed){if(C.tag===7){t(g,C.sibling),x=i(C,S.props.children),x.return=g,g=x;break e}}else if(C.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Bl&&$3(M)===C.type){t(g,C.sibling),x=i(C,S.props),x.ref=cp(g,C,S),x.return=g,g=x;break e}t(g,C);break}else e(g,C);C=C.sibling}S.type===ed?(x=Au(S.props.children,g.mode,A,S.key),x.return=g,g=x):(A=v1(S.type,S.key,S.props,null,g.mode,A),A.ref=cp(g,x,S),A.return=g,g=A)}return o(g);case qf:e:{for(C=S.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=i(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=aS(S,g.mode,A),x.return=g,g=x}return o(g);case Bl:return C=S._init,y(g,x,C(S._payload),A)}if(Fp(S))return v(g,x,S,A);if(ip(S))return _(g,x,S,A);Kg(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=i(x,S),x.return=g,g=x):(t(g,x),x=oS(S,g.mode,A),x.return=g,g=x),o(g)):t(g,x)}return y}var zd=i4(!0),s4=i4(!1),d0={},na=wc(d0),Tm=wc(d0),Rm=wc(d0);function hu(n){if(n===d0)throw Error(Ye(174));return n}function Z2(n,e){switch(bn(Rm,e),bn(Tm,n),bn(na,d0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Vw(e,n)}Ln(na),bn(na,e)}function Gd(){Ln(na),Ln(Tm),Ln(Rm)}function o4(n){hu(Rm.current);var e=hu(na.current),t=Vw(e,n.type);e!==t&&(bn(Tm,n),bn(na,t))}function Q2(n){Tm.current===n&&(Ln(na),Ln(Tm))}var Vn=wc(0);function Z1(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eS=[];function q2(){for(var n=0;n<eS.length;n++)eS[n]._workInProgressVersionPrimary=null;eS.length=0}var d1=al.ReactCurrentDispatcher,tS=al.ReactCurrentBatchConfig,Fu=0,Jn=null,Ar=null,Dr=null,Q1=!1,Kp=!1,Pm=0,Q6=0;function Kr(){throw Error(Ye(321))}function eM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Bo(n[t],e[t]))return!1;return!0}function tM(n,e,t,r,i,s){if(Fu=s,Jn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,d1.current=n===null||n.memoizedState===null?n7:r7,n=t(r,i),Kp){s=0;do{if(Kp=!1,Pm=0,25<=s)throw Error(Ye(301));s+=1,Dr=Ar=null,e.updateQueue=null,d1.current=i7,n=t(r,i)}while(Kp)}if(d1.current=q1,e=Ar!==null&&Ar.next!==null,Fu=0,Dr=Ar=Jn=null,Q1=!1,e)throw Error(Ye(300));return n}function nM(){var n=Pm!==0;return Pm=0,n}function Jo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?Jn.memoizedState=Dr=n:Dr=Dr.next=n,Dr}function oo(){if(Ar===null){var n=Jn.alternate;n=n!==null?n.memoizedState:null}else n=Ar.next;var e=Dr===null?Jn.memoizedState:Dr.next;if(e!==null)Dr=e,Ar=n;else{if(n===null)throw Error(Ye(310));Ar=n,n={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Dr===null?Jn.memoizedState=Dr=n:Dr=Dr.next=n}return Dr}function Im(n,e){return typeof e=="function"?e(n):e}function nS(n){var e=oo(),t=e.queue;if(t===null)throw Error(Ye(311));t.lastRenderedReducer=n;var r=Ar,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Jn.lanes|=u,Uu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Bo(r,e.memoizedState)||(Vi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Jn.lanes|=s,Uu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function rS(n){var e=oo(),t=e.queue;if(t===null)throw Error(Ye(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Bo(s,e.memoizedState)||(Vi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function a4(){}function l4(n,e){var t=Jn,r=oo(),i=e(),s=!Bo(r.memoizedState,i);if(s&&(r.memoizedState=i,Vi=!0),r=r.queue,rM(f4.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Dr!==null&&Dr.memoizedState.tag&1){if(t.flags|=2048,Bm(9,u4.bind(null,t,r,i,e),void 0,null),Ur===null)throw Error(Ye(349));Fu&30||c4(t,e,i)}return i}function c4(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function u4(n,e,t,r){e.value=t,e.getSnapshot=r,d4(e)&&h4(n)}function f4(n,e,t){return t(function(){d4(e)&&h4(n)})}function d4(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Bo(n,t)}catch{return!0}}function h4(n){var e=Ka(n,1);e!==null&&To(e,n,1,-1)}function j3(n){var e=Jo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Im,lastRenderedState:n},e.queue=n,n=n.dispatch=t7.bind(null,Jn,n),[e.memoizedState,n]}function Bm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function p4(){return oo().memoizedState}function h1(n,e,t,r){var i=Jo();Jn.flags|=n,i.memoizedState=Bm(1|e,t,void 0,r===void 0?null:r)}function Zy(n,e,t,r){var i=oo();r=r===void 0?null:r;var s=void 0;if(Ar!==null){var o=Ar.memoizedState;if(s=o.destroy,r!==null&&eM(r,o.deps)){i.memoizedState=Bm(e,t,s,r);return}}Jn.flags|=n,i.memoizedState=Bm(1|e,t,s,r)}function X3(n,e){return h1(8390656,8,n,e)}function rM(n,e){return Zy(2048,8,n,e)}function m4(n,e){return Zy(4,2,n,e)}function g4(n,e){return Zy(4,4,n,e)}function v4(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function y4(n,e,t){return t=t!=null?t.concat([n]):null,Zy(4,4,v4.bind(null,e,n),t)}function iM(){}function _4(n,e){var t=oo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&eM(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function x4(n,e){var t=oo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&eM(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function S4(n,e,t){return Fu&21?(Bo(t,e)||(t=ED(),Jn.lanes|=t,Uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vi=!0),n.memoizedState=t)}function q6(n,e){var t=gn;gn=t!==0&&4>t?t:4,n(!0);var r=tS.transition;tS.transition={};try{n(!1),e()}finally{gn=t,tS.transition=r}}function w4(){return oo().memoizedState}function e7(n,e,t){var r=ql(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},A4(n))E4(e,t);else if(t=e4(n,e,t,r),t!==null){var i=bi();To(t,n,r,i),M4(t,e,r)}}function t7(n,e,t){var r=ql(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(A4(n))E4(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Bo(a,o)){var l=e.interleaved;l===null?(i.next=i,Y2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=e4(n,e,i,r),t!==null&&(i=bi(),To(t,n,r,i),M4(t,e,r))}}function A4(n){var e=n.alternate;return n===Jn||e!==null&&e===Jn}function E4(n,e){Kp=Q1=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function M4(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,O2(n,t)}}var q1={readContext:so,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},n7={readContext:so,useCallback:function(n,e){return Jo().memoizedState=[n,e===void 0?null:e],n},useContext:so,useEffect:X3,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,h1(4194308,4,v4.bind(null,e,n),t)},useLayoutEffect:function(n,e){return h1(4194308,4,n,e)},useInsertionEffect:function(n,e){return h1(4,2,n,e)},useMemo:function(n,e){var t=Jo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Jo();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=e7.bind(null,Jn,n),[r.memoizedState,n]},useRef:function(n){var e=Jo();return n={current:n},e.memoizedState=n},useState:j3,useDebugValue:iM,useDeferredValue:function(n){return Jo().memoizedState=n},useTransition:function(){var n=j3(!1),e=n[0];return n=q6.bind(null,n[1]),Jo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Jn,i=Jo();if(Fn){if(t===void 0)throw Error(Ye(407));t=t()}else{if(t=e(),Ur===null)throw Error(Ye(349));Fu&30||c4(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,X3(f4.bind(null,r,s,n),[n]),r.flags|=2048,Bm(9,u4.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Jo(),e=Ur.identifierPrefix;if(Fn){var t=Ga,r=za;t=(r&~(1<<32-bo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Pm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Q6++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},r7={readContext:so,useCallback:_4,useContext:so,useEffect:rM,useImperativeHandle:y4,useInsertionEffect:m4,useLayoutEffect:g4,useMemo:x4,useReducer:nS,useRef:p4,useState:function(){return nS(Im)},useDebugValue:iM,useDeferredValue:function(n){var e=oo();return S4(e,Ar.memoizedState,n)},useTransition:function(){var n=nS(Im)[0],e=oo().memoizedState;return[n,e]},useMutableSource:a4,useSyncExternalStore:l4,useId:w4,unstable_isNewReconciler:!1},i7={readContext:so,useCallback:_4,useContext:so,useEffect:rM,useImperativeHandle:y4,useInsertionEffect:m4,useLayoutEffect:g4,useMemo:x4,useReducer:rS,useRef:p4,useState:function(){return rS(Im)},useDebugValue:iM,useDeferredValue:function(n){var e=oo();return Ar===null?e.memoizedState=n:S4(e,Ar.memoizedState,n)},useTransition:function(){var n=rS(Im)[0],e=oo().memoizedState;return[n,e]},useMutableSource:a4,useSyncExternalStore:l4,useId:w4,unstable_isNewReconciler:!1};function Hd(n,e){try{var t="",r=e;do t+=B8(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function iS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function dA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var s7=typeof WeakMap=="function"?WeakMap:Map;function C4(n,e,t){t=Wa(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ty||(ty=!0,wA=r),dA(n,e)},t}function b4(n,e,t){t=Wa(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){dA(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){dA(n,e),typeof r!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function J3(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new s7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=_7.bind(null,n,e,t),e.then(n,n))}function Y3(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function K3(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wa(-1,1),e.tag=2,Zl(t,e,1))),t.lanes|=1),n)}var o7=al.ReactCurrentOwner,Vi=!1;function Si(n,e,t,r){e.child=n===null?s4(e,null,t,r):zd(e,n.child,t,r)}function Z3(n,e,t,r,i){t=t.render;var s=e.ref;return Ed(e,i),r=tM(n,e,t,r,s,i),t=nM(),n!==null&&!Vi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Za(n,e,i)):(Fn&&t&&V2(e),e.flags|=1,Si(n,e,r,i),e.child)}function Q3(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!dM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,T4(n,e,s,r,i)):(n=v1(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Em,t(o,r)&&n.ref===e.ref)return Za(n,e,i)}return e.flags|=1,n=ec(s,r),n.ref=e.ref,n.return=e,e.child=n}function T4(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Em(s,r)&&n.ref===e.ref)if(Vi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Vi=!0);else return e.lanes=n.lanes,Za(n,e,i)}return hA(n,e,t,r,i)}function R4(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(ud,us),us|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,bn(ud,us),us|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,bn(ud,us),us|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,bn(ud,us),us|=r;return Si(n,e,i,t),e.child}function P4(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function hA(n,e,t,r,i){var s=Xi(t)?Du:ci.current;return s=kd(e,s),Ed(e,i),t=tM(n,e,t,r,s,i),r=nM(),n!==null&&!Vi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Za(n,e,i)):(Fn&&r&&V2(e),e.flags|=1,Si(n,e,t,i),e.child)}function q3(n,e,t,r,i){if(Xi(t)){var s=!0;$1(e)}else s=!1;if(Ed(e,i),e.stateNode===null)p1(n,e),r4(e,t,r),fA(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=so(c):(c=Xi(t)?Du:ci.current,c=kd(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&W3(e,o,r,c),Ll=!1;var d=e.memoizedState;o.state=d,K1(e,r,o,i),l=e.memoizedState,a!==r||d!==l||ji.current||Ll?(typeof u=="function"&&(uA(e,t,u,r),l=e.memoizedState),(a=Ll||V3(e,t,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t4(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:xo(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=so(l):(l=Xi(t)?Du:ci.current,l=kd(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&W3(e,o,r,l),Ll=!1,d=e.memoizedState,o.state=d,K1(e,r,o,i);var v=e.memoizedState;a!==f||d!==v||ji.current||Ll?(typeof m=="function"&&(uA(e,t,m,r),v=e.memoizedState),(c=Ll||V3(e,t,c,r,d,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return pA(n,e,t,r,s,i)}function pA(n,e,t,r,i,s){P4(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&k3(e,t,!1),Za(n,e,s);r=e.stateNode,o7.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=zd(e,n.child,null,s),e.child=zd(e,null,a,s)):Si(n,e,a,s),e.memoizedState=r.state,i&&k3(e,t,!0),e.child}function I4(n){var e=n.stateNode;e.pendingContext?U3(n,e.pendingContext,e.pendingContext!==e.context):e.context&&U3(n,e.context,!1),Z2(n,e.containerInfo)}function eR(n,e,t,r,i){return Nd(),$2(i),e.flags|=256,Si(n,e,t,r),e.child}var mA={dehydrated:null,treeContext:null,retryLane:0};function gA(n){return{baseLanes:n,cachePool:null,transitions:null}}function B4(n,e,t){var r=e.pendingProps,i=Vn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),bn(Vn,i&1),n===null)return lA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=e_(o,r,0,null),n=Au(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=gA(t),e.memoizedState=mA,n):sM(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return a7(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ec(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ec(a,s):(s=Au(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?gA(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=mA,r}return s=n.child,n=s.sibling,r=ec(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function sM(n,e){return e=e_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Zg(n,e,t,r){return r!==null&&$2(r),zd(e,n.child,null,t),n=sM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function a7(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=iS(Error(Ye(422))),Zg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=e_({mode:"visible",children:r.children},i,0,null),s=Au(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zd(e,n.child,null,o),e.child.memoizedState=gA(o),e.memoizedState=mA,s);if(!(e.mode&1))return Zg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ye(419)),r=iS(s,r,void 0),Zg(n,e,o,r)}if(a=(o&n.childLanes)!==0,Vi||a){if(r=Ur,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ka(n,i),To(r,n,i,-1))}return fM(),r=iS(Error(Ye(421))),Zg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=x7.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ps=Kl(i.nextSibling),vs=e,Fn=!0,Ao=null,n!==null&&(js[Xs++]=za,js[Xs++]=Ga,js[Xs++]=Ou,za=n.id,Ga=n.overflow,Ou=e),e=sM(e,r.children),e.flags|=4096,e)}function tR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),cA(n.return,e,t)}function sS(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function L4(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Si(n,e,r.children,t),r=Vn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tR(n,t,e);else if(n.tag===19)tR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(bn(Vn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Z1(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),sS(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Z1(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}sS(e,!0,t,null,s);break;case"together":sS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function p1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Za(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ye(153));if(e.child!==null){for(n=e.child,t=ec(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ec(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function l7(n,e,t){switch(e.tag){case 3:I4(e),Nd();break;case 5:o4(e);break;case 1:Xi(e.type)&&$1(e);break;case 4:Z2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;bn(J1,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(bn(Vn,Vn.current&1),e.flags|=128,null):t&e.child.childLanes?B4(n,e,t):(bn(Vn,Vn.current&1),n=Za(n,e,t),n!==null?n.sibling:null);bn(Vn,Vn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return L4(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(Vn,Vn.current),r)break;return null;case 22:case 23:return e.lanes=0,R4(n,e,t)}return Za(n,e,t)}var D4,vA,O4,F4;D4=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};vA=function(){};O4=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,hu(na.current);var s=null;switch(t){case"input":i=Nw(n,i),r=Nw(n,r),s=[];break;case"select":i=Yn({},i,{value:void 0}),r=Yn({},r,{value:void 0}),s=[];break;case"textarea":i=Hw(n,i),r=Hw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=V1)}Ww(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};F4=function(n,e,t,r){t!==r&&(e.flags|=4)};function up(n,e){if(!Fn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Zr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function c7(n,e,t){var r=e.pendingProps;switch(W2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(e),null;case 1:return Xi(e.type)&&W1(),Zr(e),null;case 3:return r=e.stateNode,Gd(),Ln(ji),Ln(ci),q2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Yg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ao!==null&&(MA(Ao),Ao=null))),vA(n,e),Zr(e),null;case 5:Q2(e);var i=hu(Rm.current);if(t=e.type,n!==null&&e.stateNode!=null)O4(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ye(166));return Zr(e),null}if(n=hu(na.current),Yg(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Zo]=e,r[bm]=s,n=(e.mode&1)!==0,t){case"dialog":Pn("cancel",r),Pn("close",r);break;case"iframe":case"object":case"embed":Pn("load",r);break;case"video":case"audio":for(i=0;i<kp.length;i++)Pn(kp[i],r);break;case"source":Pn("error",r);break;case"img":case"image":case"link":Pn("error",r),Pn("load",r);break;case"details":Pn("toggle",r);break;case"input":u3(r,s),Pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pn("invalid",r);break;case"textarea":d3(r,s),Pn("invalid",r)}Ww(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Jg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Jg(r.textContent,a,n),i=["children",""+a]):vm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pn("scroll",r)}switch(t){case"input":zg(r),f3(r,s,!0);break;case"textarea":zg(r),h3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=V1)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=cD(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Zo]=e,n[bm]=r,D4(n,e,!1,!1),e.stateNode=n;e:{switch(o=$w(t,r),t){case"dialog":Pn("cancel",n),Pn("close",n),i=r;break;case"iframe":case"object":case"embed":Pn("load",n),i=r;break;case"video":case"audio":for(i=0;i<kp.length;i++)Pn(kp[i],n);i=r;break;case"source":Pn("error",n),i=r;break;case"img":case"image":case"link":Pn("error",n),Pn("load",n),i=r;break;case"details":Pn("toggle",n),i=r;break;case"input":u3(n,r),i=Nw(n,r),Pn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Yn({},r,{value:void 0}),Pn("invalid",n);break;case"textarea":d3(n,r),i=Hw(n,r),Pn("invalid",n);break;default:i=r}Ww(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dD(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uD(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ym(n,l):typeof l=="number"&&ym(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pn("scroll",n):l!=null&&R2(n,s,l,o))}switch(t){case"input":zg(n),f3(n,r,!1);break;case"textarea":zg(n),h3(n);break;case"option":r.value!=null&&n.setAttribute("value",""+lc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?xd(n,!!r.multiple,s,!1):r.defaultValue!=null&&xd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=V1)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zr(e),null;case 6:if(n&&e.stateNode!=null)F4(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ye(166));if(t=hu(Rm.current),hu(na.current),Yg(e)){if(r=e.stateNode,t=e.memoizedProps,r[Zo]=e,(s=r.nodeValue!==t)&&(n=vs,n!==null))switch(n.tag){case 3:Jg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Jg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Zo]=e,e.stateNode=r}return Zr(e),null;case 13:if(Ln(Vn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fn&&ps!==null&&e.mode&1&&!(e.flags&128))qD(),Nd(),e.flags|=98560,s=!1;else if(s=Yg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ye(317));s[Zo]=e}else Nd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zr(e),s=!1}else Ao!==null&&(MA(Ao),Ao=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Vn.current&1?Er===0&&(Er=3):fM())),e.updateQueue!==null&&(e.flags|=4),Zr(e),null);case 4:return Gd(),vA(n,e),n===null&&Mm(e.stateNode.containerInfo),Zr(e),null;case 10:return J2(e.type._context),Zr(e),null;case 17:return Xi(e.type)&&W1(),Zr(e),null;case 19:if(Ln(Vn),s=e.memoizedState,s===null)return Zr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)up(s,!1);else{if(Er!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Z1(n),o!==null){for(e.flags|=128,up(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return bn(Vn,Vn.current&1|2),e.child}n=n.sibling}s.tail!==null&&fr()>Vd&&(e.flags|=128,r=!0,up(s,!1),e.lanes=4194304)}else{if(!r)if(n=Z1(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),up(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fn)return Zr(e),null}else 2*fr()-s.renderingStartTime>Vd&&t!==1073741824&&(e.flags|=128,r=!0,up(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fr(),e.sibling=null,t=Vn.current,bn(Vn,r?t&1|2:t&1),e):(Zr(e),null);case 22:case 23:return uM(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?us&1073741824&&(Zr(e),e.subtreeFlags&6&&(e.flags|=8192)):Zr(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function u7(n,e){switch(W2(e),e.tag){case 1:return Xi(e.type)&&W1(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Gd(),Ln(ji),Ln(ci),q2(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Q2(e),null;case 13:if(Ln(Vn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));Nd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ln(Vn),null;case 4:return Gd(),null;case 10:return J2(e.type._context),null;case 22:case 23:return uM(),null;case 24:return null;default:return null}}var Qg=!1,ei=!1,f7=typeof WeakSet=="function"?WeakSet:Set,dt=null;function cd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){qn(n,e,r)}else t.current=null}function yA(n,e,t){try{t()}catch(r){qn(n,e,r)}}var nR=!1;function d7(n,e){if(tA=z1,n=zD(),H2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,d=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(nA={focusedElem:n,selectionRange:t},z1=!1,dt=e;dt!==null;)if(e=dt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,dt=n;else for(;dt!==null;){e=dt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,y=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:xo(e.type,_),y);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(A){qn(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,dt=n;break}dt=e.return}return v=nR,nR=!1,v}function Zp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&yA(e,t,s)}i=i.next}while(i!==r)}}function Qy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function _A(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function U4(n){var e=n.alternate;e!==null&&(n.alternate=null,U4(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Zo],delete e[bm],delete e[sA],delete e[J6],delete e[Y6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function k4(n){return n.tag===5||n.tag===3||n.tag===4}function rR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||k4(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=V1));else if(r!==4&&(n=n.child,n!==null))for(xA(n,e,t),n=n.sibling;n!==null;)xA(n,e,t),n=n.sibling}function SA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(SA(n,e,t),n=n.sibling;n!==null;)SA(n,e,t),n=n.sibling}var Gr=null,wo=!1;function wl(n,e,t){for(t=t.child;t!==null;)N4(n,e,t),t=t.sibling}function N4(n,e,t){if(ta&&typeof ta.onCommitFiberUnmount=="function")try{ta.onCommitFiberUnmount(Wy,t)}catch{}switch(t.tag){case 5:ei||cd(t,e);case 6:var r=Gr,i=wo;Gr=null,wl(n,e,t),Gr=r,wo=i,Gr!==null&&(wo?(n=Gr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Gr.removeChild(t.stateNode));break;case 18:Gr!==null&&(wo?(n=Gr,t=t.stateNode,n.nodeType===8?Qx(n.parentNode,t):n.nodeType===1&&Qx(n,t),wm(n)):Qx(Gr,t.stateNode));break;case 4:r=Gr,i=wo,Gr=t.stateNode.containerInfo,wo=!0,wl(n,e,t),Gr=r,wo=i;break;case 0:case 11:case 14:case 15:if(!ei&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yA(t,e,o),i=i.next}while(i!==r)}wl(n,e,t);break;case 1:if(!ei&&(cd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){qn(t,e,a)}wl(n,e,t);break;case 21:wl(n,e,t);break;case 22:t.mode&1?(ei=(r=ei)||t.memoizedState!==null,wl(n,e,t),ei=r):wl(n,e,t);break;default:wl(n,e,t)}}function iR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new f7),e.forEach(function(r){var i=S7.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function mo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gr=a.stateNode,wo=!1;break e;case 3:Gr=a.stateNode.containerInfo,wo=!0;break e;case 4:Gr=a.stateNode.containerInfo,wo=!0;break e}a=a.return}if(Gr===null)throw Error(Ye(160));N4(s,o,i),Gr=null,wo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){qn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z4(e,n),e=e.sibling}function z4(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mo(e,n),jo(n),r&4){try{Zp(3,n,n.return),Qy(3,n)}catch(_){qn(n,n.return,_)}try{Zp(5,n,n.return)}catch(_){qn(n,n.return,_)}}break;case 1:mo(e,n),jo(n),r&512&&t!==null&&cd(t,t.return);break;case 5:if(mo(e,n),jo(n),r&512&&t!==null&&cd(t,t.return),n.flags&32){var i=n.stateNode;try{ym(i,"")}catch(_){qn(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aD(i,s),$w(a,o);var c=$w(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?dD(i,f):u==="dangerouslySetInnerHTML"?uD(i,f):u==="children"?ym(i,f):R2(i,u,f,c)}switch(a){case"input":zw(i,s);break;case"textarea":lD(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?xd(i,!!s.multiple,m,!1):d!==!!s.multiple&&(s.defaultValue!=null?xd(i,!!s.multiple,s.defaultValue,!0):xd(i,!!s.multiple,s.multiple?[]:"",!1))}i[bm]=s}catch(_){qn(n,n.return,_)}}break;case 6:if(mo(e,n),jo(n),r&4){if(n.stateNode===null)throw Error(Ye(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){qn(n,n.return,_)}}break;case 3:if(mo(e,n),jo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{wm(e.containerInfo)}catch(_){qn(n,n.return,_)}break;case 4:mo(e,n),jo(n);break;case 13:mo(e,n),jo(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lM=fr())),r&4&&iR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(ei=(c=ei)||u,mo(e,n),ei=c):mo(e,n),jo(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(dt=n,u=n.child;u!==null;){for(f=dt=u;dt!==null;){switch(d=dt,m=d.child,d.tag){case 0:case 11:case 14:case 15:Zp(4,d,d.return);break;case 1:cd(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){qn(r,t,_)}}break;case 5:cd(d,d.return);break;case 22:if(d.memoizedState!==null){oR(f);continue}}m!==null?(m.return=d,dt=m):oR(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fD("display",o))}catch(_){qn(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){qn(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mo(e,n),jo(n),r&4&&iR(n);break;case 21:break;default:mo(e,n),jo(n)}}function jo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(k4(t)){var r=t;break e}t=t.return}throw Error(Ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ym(i,""),r.flags&=-33);var s=rR(n);SA(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rR(n);xA(n,a,o);break;default:throw Error(Ye(161))}}catch(l){qn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function h7(n,e,t){dt=n,G4(n)}function G4(n,e,t){for(var r=(n.mode&1)!==0;dt!==null;){var i=dt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ei;a=Qg;var c=ei;if(Qg=o,(ei=l)&&!c)for(dt=i;dt!==null;)o=dt,l=o.child,o.tag===22&&o.memoizedState!==null?aR(i):l!==null?(l.return=o,dt=l):aR(i);for(;s!==null;)dt=s,G4(s),s=s.sibling;dt=i,Qg=a,ei=c}sR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,dt=s):sR(n)}}function sR(n){for(;dt!==null;){var e=dt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||Qy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:xo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&H3(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}H3(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&wm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}ei||e.flags&512&&_A(e)}catch(d){qn(e,e.return,d)}}if(e===n){dt=null;break}if(t=e.sibling,t!==null){t.return=e.return,dt=t;break}dt=e.return}}function oR(n){for(;dt!==null;){var e=dt;if(e===n){dt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,dt=t;break}dt=e.return}}function aR(n){for(;dt!==null;){var e=dt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Qy(4,e)}catch(l){qn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qn(e,i,l)}}var s=e.return;try{_A(e)}catch(l){qn(e,s,l)}break;case 5:var o=e.return;try{_A(e)}catch(l){qn(e,o,l)}}}catch(l){qn(e,e.return,l)}if(e===n){dt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,dt=a;break}dt=e.return}}var p7=Math.ceil,ey=al.ReactCurrentDispatcher,oM=al.ReactCurrentOwner,io=al.ReactCurrentBatchConfig,ln=0,Ur=null,xr=null,Wr=0,us=0,ud=wc(0),Er=0,Lm=null,Uu=0,qy=0,aM=0,Qp=null,Ni=null,lM=0,Vd=1/0,Ba=null,ty=!1,wA=null,Ql=null,qg=!1,Nl=null,ny=0,qp=0,AA=null,m1=-1,g1=0;function bi(){return ln&6?fr():m1!==-1?m1:m1=fr()}function ql(n){return n.mode&1?ln&2&&Wr!==0?Wr&-Wr:Z6.transition!==null?(g1===0&&(g1=ED()),g1):(n=gn,n!==0||(n=window.event,n=n===void 0?16:ID(n.type)),n):1}function To(n,e,t,r){if(50<qp)throw qp=0,AA=null,Error(Ye(185));c0(n,t,r),(!(ln&2)||n!==Ur)&&(n===Ur&&(!(ln&2)&&(qy|=t),Er===4&&Ul(n,Wr)),Ji(n,r),t===1&&ln===0&&!(e.mode&1)&&(Vd=fr()+500,Yy&&Ac()))}function Ji(n,e){var t=n.callbackNode;Z8(n,e);var r=N1(n,n===Ur?Wr:0);if(r===0)t!==null&&g3(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&g3(t),e===1)n.tag===0?K6(lR.bind(null,n)):KD(lR.bind(null,n)),j6(function(){!(ln&6)&&Ac()}),t=null;else{switch(MD(r)){case 1:t=D2;break;case 4:t=wD;break;case 16:t=k1;break;case 536870912:t=AD;break;default:t=k1}t=Y4(t,H4.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function H4(n,e){if(m1=-1,g1=0,ln&6)throw Error(Ye(327));var t=n.callbackNode;if(Md()&&n.callbackNode!==t)return null;var r=N1(n,n===Ur?Wr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=ry(n,r);else{e=r;var i=ln;ln|=2;var s=W4();(Ur!==n||Wr!==e)&&(Ba=null,Vd=fr()+500,wu(n,e));do try{v7();break}catch(a){V4(n,a)}while(1);X2(),ey.current=s,ln=i,xr!==null?e=0:(Ur=null,Wr=0,e=Er)}if(e!==0){if(e===2&&(i=Kw(n),i!==0&&(r=i,e=EA(n,i))),e===1)throw t=Lm,wu(n,0),Ul(n,r),Ji(n,fr()),t;if(e===6)Ul(n,r);else{if(i=n.current.alternate,!(r&30)&&!m7(i)&&(e=ry(n,r),e===2&&(s=Kw(n),s!==0&&(r=s,e=EA(n,s))),e===1))throw t=Lm,wu(n,0),Ul(n,r),Ji(n,fr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ye(345));case 2:iu(n,Ni,Ba);break;case 3:if(Ul(n,r),(r&130023424)===r&&(e=lM+500-fr(),10<e)){if(N1(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){bi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=iA(iu.bind(null,n,Ni,Ba),e);break}iu(n,Ni,Ba);break;case 4:if(Ul(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-bo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=fr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*p7(r/1960))-r,10<r){n.timeoutHandle=iA(iu.bind(null,n,Ni,Ba),r);break}iu(n,Ni,Ba);break;case 5:iu(n,Ni,Ba);break;default:throw Error(Ye(329))}}}return Ji(n,fr()),n.callbackNode===t?H4.bind(null,n):null}function EA(n,e){var t=Qp;return n.current.memoizedState.isDehydrated&&(wu(n,e).flags|=256),n=ry(n,e),n!==2&&(e=Ni,Ni=t,e!==null&&MA(e)),n}function MA(n){Ni===null?Ni=n:Ni.push.apply(Ni,n)}function m7(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Bo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ul(n,e){for(e&=~aM,e&=~qy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bo(e),r=1<<t;n[t]=-1,e&=~r}}function lR(n){if(ln&6)throw Error(Ye(327));Md();var e=N1(n,0);if(!(e&1))return Ji(n,fr()),null;var t=ry(n,e);if(n.tag!==0&&t===2){var r=Kw(n);r!==0&&(e=r,t=EA(n,r))}if(t===1)throw t=Lm,wu(n,0),Ul(n,e),Ji(n,fr()),t;if(t===6)throw Error(Ye(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,iu(n,Ni,Ba),Ji(n,fr()),null}function cM(n,e){var t=ln;ln|=1;try{return n(e)}finally{ln=t,ln===0&&(Vd=fr()+500,Yy&&Ac())}}function ku(n){Nl!==null&&Nl.tag===0&&!(ln&6)&&Md();var e=ln;ln|=1;var t=io.transition,r=gn;try{if(io.transition=null,gn=1,n)return n()}finally{gn=r,io.transition=t,ln=e,!(ln&6)&&Ac()}}function uM(){us=ud.current,Ln(ud)}function wu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,$6(t)),xr!==null)for(t=xr.return;t!==null;){var r=t;switch(W2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&W1();break;case 3:Gd(),Ln(ji),Ln(ci),q2();break;case 5:Q2(r);break;case 4:Gd();break;case 13:Ln(Vn);break;case 19:Ln(Vn);break;case 10:J2(r.type._context);break;case 22:case 23:uM()}t=t.return}if(Ur=n,xr=n=ec(n.current,null),Wr=us=e,Er=0,Lm=null,aM=qy=Uu=0,Ni=Qp=null,du!==null){for(e=0;e<du.length;e++)if(t=du[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}du=null}return n}function V4(n,e){do{var t=xr;try{if(X2(),d1.current=q1,Q1){for(var r=Jn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Q1=!1}if(Fu=0,Dr=Ar=Jn=null,Kp=!1,Pm=0,oM.current=null,t===null||t.return===null){Er=1,Lm=e,xr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Wr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Y3(o);if(m!==null){m.flags&=-257,K3(m,o,a,s,e),m.mode&1&&J3(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){J3(s,c,e),fM();break e}l=Error(Ye(426))}}else if(Fn&&a.mode&1){var y=Y3(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),K3(y,o,a,s,e),$2(Hd(l,a));break e}}s=l=Hd(l,a),Er!==4&&(Er=2),Qp===null?Qp=[s]:Qp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=C4(s,l,e);G3(s,g);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ql===null||!Ql.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=b4(s,a,e);G3(s,A);break e}}s=s.return}while(s!==null)}j4(t)}catch(M){e=M,xr===t&&t!==null&&(xr=t=t.return);continue}break}while(1)}function W4(){var n=ey.current;return ey.current=q1,n===null?q1:n}function fM(){(Er===0||Er===3||Er===2)&&(Er=4),Ur===null||!(Uu&268435455)&&!(qy&268435455)||Ul(Ur,Wr)}function ry(n,e){var t=ln;ln|=2;var r=W4();(Ur!==n||Wr!==e)&&(Ba=null,wu(n,e));do try{g7();break}catch(i){V4(n,i)}while(1);if(X2(),ln=t,ey.current=r,xr!==null)throw Error(Ye(261));return Ur=null,Wr=0,Er}function g7(){for(;xr!==null;)$4(xr)}function v7(){for(;xr!==null&&!H8();)$4(xr)}function $4(n){var e=J4(n.alternate,n,us);n.memoizedProps=n.pendingProps,e===null?j4(n):xr=e,oM.current=null}function j4(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=u7(t,e),t!==null){t.flags&=32767,xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Er=6,xr=null;return}}else if(t=c7(t,e,us),t!==null){xr=t;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=n}while(e!==null);Er===0&&(Er=5)}function iu(n,e,t){var r=gn,i=io.transition;try{io.transition=null,gn=1,y7(n,e,t,r)}finally{io.transition=i,gn=r}return null}function y7(n,e,t,r){do Md();while(Nl!==null);if(ln&6)throw Error(Ye(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ye(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Q8(n,s),n===Ur&&(xr=Ur=null,Wr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||qg||(qg=!0,Y4(k1,function(){return Md(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=io.transition,io.transition=null;var o=gn;gn=1;var a=ln;ln|=4,oM.current=null,d7(n,t),z4(t,n),k6(nA),z1=!!tA,nA=tA=null,n.current=t,h7(t),V8(),ln=a,gn=o,io.transition=s}else n.current=t;if(qg&&(qg=!1,Nl=n,ny=i),s=n.pendingLanes,s===0&&(Ql=null),j8(t.stateNode),Ji(n,fr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ty)throw ty=!1,n=wA,wA=null,n;return ny&1&&n.tag!==0&&Md(),s=n.pendingLanes,s&1?n===AA?qp++:(qp=0,AA=n):qp=0,Ac(),null}function Md(){if(Nl!==null){var n=MD(ny),e=io.transition,t=gn;try{if(io.transition=null,gn=16>n?16:n,Nl===null)var r=!1;else{if(n=Nl,Nl=null,ny=0,ln&6)throw Error(Ye(331));var i=ln;for(ln|=4,dt=n.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(dt=c;dt!==null;){var u=dt;switch(u.tag){case 0:case 11:case 15:Zp(8,u,s)}var f=u.child;if(f!==null)f.return=u,dt=f;else for(;dt!==null;){u=dt;var d=u.sibling,m=u.return;if(U4(u),u===c){dt=null;break}if(d!==null){d.return=m,dt=d;break}dt=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var y=_.sibling;_.sibling=null,_=y}while(_!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zp(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,dt=g;break e}dt=s.return}}var x=n.current;for(dt=x;dt!==null;){o=dt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,dt=S;else e:for(o=x;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qy(9,a)}}catch(M){qn(a,a.return,M)}if(a===o){dt=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,dt=A;break e}dt=a.return}}if(ln=i,Ac(),ta&&typeof ta.onPostCommitFiberRoot=="function")try{ta.onPostCommitFiberRoot(Wy,n)}catch{}r=!0}return r}finally{gn=t,io.transition=e}}return!1}function cR(n,e,t){e=Hd(t,e),e=C4(n,e,1),n=Zl(n,e,1),e=bi(),n!==null&&(c0(n,1,e),Ji(n,e))}function qn(n,e,t){if(n.tag===3)cR(n,n,t);else for(;e!==null;){if(e.tag===3){cR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ql===null||!Ql.has(r))){n=Hd(t,n),n=b4(e,n,1),e=Zl(e,n,1),n=bi(),e!==null&&(c0(e,1,n),Ji(e,n));break}}e=e.return}}function _7(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=bi(),n.pingedLanes|=n.suspendedLanes&t,Ur===n&&(Wr&t)===t&&(Er===4||Er===3&&(Wr&130023424)===Wr&&500>fr()-lM?wu(n,0):aM|=t),Ji(n,e)}function X4(n,e){e===0&&(n.mode&1?(e=Vg,Vg<<=1,!(Vg&130023424)&&(Vg=4194304)):e=1);var t=bi();n=Ka(n,e),n!==null&&(c0(n,e,t),Ji(n,t))}function x7(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),X4(n,t)}function S7(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ye(314))}r!==null&&r.delete(e),X4(n,t)}var J4;J4=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ji.current)Vi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vi=!1,l7(n,e,t);Vi=!!(n.flags&131072)}else Vi=!1,Fn&&e.flags&1048576&&ZD(e,X1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;p1(n,e),n=e.pendingProps;var i=kd(e,ci.current);Ed(e,t),i=tM(null,e,r,n,i,t);var s=nM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(r)?(s=!0,$1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,K2(e),i.updater=Ky,e.stateNode=i,i._reactInternals=e,fA(e,r,n,t),e=pA(null,e,r,!0,s,t)):(e.tag=0,Fn&&s&&V2(e),Si(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(p1(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=A7(r),n=xo(r,n),i){case 0:e=hA(null,e,r,n,t);break e;case 1:e=q3(null,e,r,n,t);break e;case 11:e=Z3(null,e,r,n,t);break e;case 14:e=Q3(null,e,r,xo(r.type,n),t);break e}throw Error(Ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xo(r,i),hA(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xo(r,i),q3(n,e,r,i,t);case 3:e:{if(I4(e),n===null)throw Error(Ye(387));r=e.pendingProps,s=e.memoizedState,i=s.element,t4(n,e),K1(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hd(Error(Ye(423)),e),e=eR(n,e,r,t,i);break e}else if(r!==i){i=Hd(Error(Ye(424)),e),e=eR(n,e,r,t,i);break e}else for(ps=Kl(e.stateNode.containerInfo.firstChild),vs=e,Fn=!0,Ao=null,t=s4(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Nd(),r===i){e=Za(n,e,t);break e}Si(n,e,r,t)}e=e.child}return e;case 5:return o4(e),n===null&&lA(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,rA(r,i)?o=null:s!==null&&rA(r,s)&&(e.flags|=32),P4(n,e),Si(n,e,o,t),e.child;case 6:return n===null&&lA(e),null;case 13:return B4(n,e,t);case 4:return Z2(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=zd(e,null,r,t):Si(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xo(r,i),Z3(n,e,r,i,t);case 7:return Si(n,e,e.pendingProps,t),e.child;case 8:return Si(n,e,e.pendingProps.children,t),e.child;case 12:return Si(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,bn(J1,r._currentValue),r._currentValue=o,s!==null)if(Bo(s.value,o)){if(s.children===i.children&&!ji.current){e=Za(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wa(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),cA(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ye(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),cA(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ed(e,t),i=so(i),r=r(i),e.flags|=1,Si(n,e,r,t),e.child;case 14:return r=e.type,i=xo(r,e.pendingProps),i=xo(r.type,i),Q3(n,e,r,i,t);case 15:return T4(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xo(r,i),p1(n,e),e.tag=1,Xi(r)?(n=!0,$1(e)):n=!1,Ed(e,t),r4(e,r,i),fA(e,r,i,t),pA(null,e,r,!0,n,t);case 19:return L4(n,e,t);case 22:return R4(n,e,t)}throw Error(Ye(156,e.tag))};function Y4(n,e){return SD(n,e)}function w7(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(n,e,t,r){return new w7(n,e,t,r)}function dM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function A7(n){if(typeof n=="function")return dM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===I2)return 11;if(n===B2)return 14}return 2}function ec(n,e){var t=n.alternate;return t===null?(t=Zs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function v1(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")dM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ed:return Au(t.children,i,s,e);case P2:o=8,i|=8;break;case Ow:return n=Zs(12,t,e,i|2),n.elementType=Ow,n.lanes=s,n;case Fw:return n=Zs(13,t,e,i),n.elementType=Fw,n.lanes=s,n;case Uw:return n=Zs(19,t,e,i),n.elementType=Uw,n.lanes=s,n;case iD:return e_(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nD:o=10;break e;case rD:o=9;break e;case I2:o=11;break e;case B2:o=14;break e;case Bl:o=16,r=null;break e}throw Error(Ye(130,n==null?n:typeof n,""))}return e=Zs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Au(n,e,t,r){return n=Zs(7,n,r,e),n.lanes=t,n}function e_(n,e,t,r){return n=Zs(22,n,r,e),n.elementType=iD,n.lanes=t,n.stateNode={isHidden:!1},n}function oS(n,e,t){return n=Zs(6,n,null,e),n.lanes=t,n}function aS(n,e,t){return e=Zs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function E7(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gx(0),this.expirationTimes=Gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hM(n,e,t,r,i,s,o,a,l){return n=new E7(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Zs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},K2(s),n}function M7(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qf,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function K4(n){if(!n)return cc;n=n._reactInternals;e:{if(Zu(n)!==n||n.tag!==1)throw Error(Ye(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(n.tag===1){var t=n.type;if(Xi(t))return YD(n,t,e)}return e}function Z4(n,e,t,r,i,s,o,a,l){return n=hM(t,r,!0,n,i,s,o,a,l),n.context=K4(null),t=n.current,r=bi(),i=ql(t),s=Wa(r,i),s.callback=e??null,Zl(t,s,i),n.current.lanes=i,c0(n,i,r),Ji(n,r),n}function t_(n,e,t,r){var i=e.current,s=bi(),o=ql(i);return t=K4(t),e.context===null?e.context=t:e.pendingContext=t,e=Wa(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Zl(i,e,o),n!==null&&(To(n,i,o,s),f1(n,i,o)),o}function iy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function uR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function pM(n,e){uR(n,e),(n=n.alternate)&&uR(n,e)}function C7(){return null}var Q4=typeof reportError=="function"?reportError:function(n){console.error(n)};function mM(n){this._internalRoot=n}n_.prototype.render=mM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ye(409));t_(n,e,null,null)};n_.prototype.unmount=mM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ku(function(){t_(null,n,null,null)}),e[Ya]=null}};function n_(n){this._internalRoot=n}n_.prototype.unstable_scheduleHydration=function(n){if(n){var e=TD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Fl.length&&e!==0&&e<Fl[t].priority;t++);Fl.splice(t,0,n),t===0&&PD(n)}};function gM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fR(){}function b7(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=iy(o);s.call(c)}}var o=Z4(e,r,n,0,null,!1,!1,"",fR);return n._reactRootContainer=o,n[Ya]=o.current,Mm(n.nodeType===8?n.parentNode:n),ku(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=iy(l);a.call(c)}}var l=hM(n,0,!1,null,null,!1,!1,"",fR);return n._reactRootContainer=l,n[Ya]=l.current,Mm(n.nodeType===8?n.parentNode:n),ku(function(){t_(e,l,t,r)}),l}function i_(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=iy(o);a.call(l)}}t_(e,o,n,i)}else o=b7(t,e,n,i,r);return iy(o)}CD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Up(e.pendingLanes);t!==0&&(O2(e,t|1),Ji(e,fr()),!(ln&6)&&(Vd=fr()+500,Ac()))}break;case 13:ku(function(){var r=Ka(n,1);if(r!==null){var i=bi();To(r,n,1,i)}}),pM(n,1)}};F2=function(n){if(n.tag===13){var e=Ka(n,134217728);if(e!==null){var t=bi();To(e,n,134217728,t)}pM(n,134217728)}};bD=function(n){if(n.tag===13){var e=ql(n),t=Ka(n,e);if(t!==null){var r=bi();To(t,n,e,r)}pM(n,e)}};TD=function(){return gn};RD=function(n,e){var t=gn;try{return gn=n,e()}finally{gn=t}};Xw=function(n,e,t){switch(e){case"input":if(zw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Jy(r);if(!i)throw Error(Ye(90));oD(r),zw(r,i)}}}break;case"textarea":lD(n,t);break;case"select":e=t.value,e!=null&&xd(n,!!t.multiple,e,!1)}};mD=cM;gD=ku;var T7={usingClientEntryPoint:!1,Events:[f0,id,Jy,hD,pD,cM]},fp={findFiberByHostInstance:fu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R7={bundleType:fp.bundleType,version:fp.version,rendererPackageName:fp.rendererPackageName,rendererConfig:fp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_D(n),n===null?null:n.stateNode},findFiberByHostInstance:fp.findFiberByHostInstance||C7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ev.isDisabled&&ev.supportsFiber)try{Wy=ev.inject(R7),ta=ev}catch{}}Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T7;Cs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gM(e))throw Error(Ye(200));return M7(n,e,null,t)};Cs.createRoot=function(n,e){if(!gM(n))throw Error(Ye(299));var t=!1,r="",i=Q4;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hM(n,1,!1,null,null,t,!1,r,i),n[Ya]=e.current,Mm(n.nodeType===8?n.parentNode:n),new mM(e)};Cs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ye(188)):(n=Object.keys(n).join(","),Error(Ye(268,n)));return n=_D(e),n=n===null?null:n.stateNode,n};Cs.flushSync=function(n){return ku(n)};Cs.hydrate=function(n,e,t){if(!r_(e))throw Error(Ye(200));return i_(null,n,e,!0,t)};Cs.hydrateRoot=function(n,e,t){if(!gM(n))throw Error(Ye(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Q4;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Z4(e,null,n,1,t??null,i,!1,s,o),n[Ya]=e.current,Mm(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new n_(e)};Cs.render=function(n,e,t){if(!r_(e))throw Error(Ye(200));return i_(null,n,e,!1,t)};Cs.unmountComponentAtNode=function(n){if(!r_(n))throw Error(Ye(40));return n._reactRootContainer?(ku(function(){i_(null,null,n,!1,function(){n._reactRootContainer=null,n[Ya]=null})}),!0):!1};Cs.unstable_batchedUpdates=cM;Cs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!r_(t))throw Error(Ye(200));if(n==null||n._reactInternals===void 0)throw Error(Ye(38));return i_(n,e,t,!1,r)};Cs.version="18.2.0-next-9e3b772b8-20220608";function q4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q4)}catch(n){console.error(n)}}q4(),ZL.exports=Cs;var h0=ZL.exports;const eO=xc(h0);var vM,dR=h0;vM=Lw.createRoot=dR.createRoot,Lw.hydrateRoot=dR.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ph="153",P7={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},I7={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tO=0,CA=1,nO=2,B7=3,rO=0,s_=1,em=2,So=3,Lo=0,si=1,Ai=2,L7=2,$a=0,ja=1,bA=2,TA=3,RA=4,iO=5,lu=100,sO=101,oO=102,PA=103,IA=104,aO=200,lO=201,cO=202,uO=203,yM=204,_M=205,fO=206,dO=207,hO=208,pO=209,mO=210,gO=0,vO=1,yO=2,sy=3,_O=4,xO=5,SO=6,wO=7,p0=0,AO=1,EO=2,Ro=0,MO=1,CO=2,bO=3,xM=4,TO=5,o_=300,Qa=301,uc=302,Wd=303,Dm=304,mh=306,fc=1e3,Vr=1001,$d=1002,er=1003,Om=1004,D7=1004,Cd=1005,O7=1005,mn=1006,a_=1007,F7=1007,aa=1008,U7=1008,ra=1009,RO=1010,PO=1011,l_=1012,SM=1013,Ha=1014,ii=1015,Mi=1016,wM=1017,AM=1018,tc=1020,IO=1021,Ei=1023,BO=1024,LO=1025,nc=1026,Nu=1027,EM=1028,MM=1029,DO=1030,CM=1031,bM=1033,y1=33776,_1=33777,x1=33778,S1=33779,BA=35840,LA=35841,DA=35842,OA=35843,OO=36196,FA=37492,UA=37496,kA=37808,NA=37809,zA=37810,GA=37811,HA=37812,VA=37813,WA=37814,$A=37815,jA=37816,XA=37817,JA=37818,YA=37819,KA=37820,ZA=37821,w1=36492,FO=36283,QA=36284,qA=36285,eE=36286,UO=2200,kO=2201,NO=2202,jd=2300,zu=2301,A1=2302,pu=2400,mu=2401,Fm=2402,c_=2500,TM=2501,zO=0,RM=1,oy=2,PM=3e3,rc=3001,GO=3200,IM=3201,Ec=0,HO=1,ic="",kt="srgb",Do="srgb-linear",BM="display-p3",k7=0,E1=7680,N7=7681,z7=7682,G7=7683,H7=34055,V7=34056,W7=5386,$7=512,j7=513,X7=514,J7=515,Y7=516,K7=517,Z7=518,VO=519,WO=512,$O=513,jO=514,XO=515,JO=516,YO=517,KO=518,ZO=519,Um=35044,M1=35048,Q7=35040,q7=35045,ez=35049,tz=35041,nz=35046,rz=35050,iz=35042,sz="100",tE="300 es",ay=1035,qo=2e3,km=2001;class ll{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Qr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hR=1234567;const Eu=Math.PI/180,Xd=180/Math.PI;function ys(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Qr[n&255]+Qr[n>>8&255]+Qr[n>>16&255]+Qr[n>>24&255]+"-"+Qr[e&255]+Qr[e>>8&255]+"-"+Qr[e>>16&15|64]+Qr[e>>24&255]+"-"+Qr[t&63|128]+Qr[t>>8&255]+"-"+Qr[t>>16&255]+Qr[t>>24&255]+Qr[r&255]+Qr[r>>8&255]+Qr[r>>16&255]+Qr[r>>24&255]).toLowerCase()}function tr(n,e,t){return Math.max(e,Math.min(t,n))}function LM(n,e){return(n%e+e)%e}function oz(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function az(n,e,t){return n!==e?(t-n)/(e-n):0}function tm(n,e,t){return(1-t)*n+t*e}function lz(n,e,t,r){return tm(n,e,1-Math.exp(-t*r))}function cz(n,e=1){return e-Math.abs(LM(n,e*2)-e)}function uz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function fz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function dz(n,e){return n+Math.floor(Math.random()*(e-n+1))}function hz(n,e){return n+Math.random()*(e-n)}function pz(n){return n*(.5-Math.random())}function mz(n){n!==void 0&&(hR=n);let e=hR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function gz(n){return n*Eu}function vz(n){return n*Xd}function nE(n){return(n&n-1)===0&&n!==0}function QO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ly(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function yz(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),d=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*f,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ms(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Wt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zl={DEG2RAD:Eu,RAD2DEG:Xd,generateUUID:ys,clamp:tr,euclideanModulo:LM,mapLinear:oz,inverseLerp:az,lerp:tm,damp:lz,pingpong:cz,smoothstep:uz,smootherstep:fz,randInt:dz,randFloat:hz,randFloatSpread:pz,seededRandom:mz,degToRad:gz,radToDeg:vz,isPowerOfTwo:nE,ceilPowerOfTwo:QO,floorPowerOfTwo:ly,setQuaternionFromProperEuler:yz,normalize:Wt,denormalize:ms};class Ve{constructor(e=0,t=0){Ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zt{constructor(e,t,r,i,s,o,a,l,c){zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],d=r[2],m=r[5],v=r[8],_=i[0],y=i[3],g=i[6],x=i[1],S=i[4],A=i[7],M=i[2],C=i[5],R=i[8];return s[0]=o*_+a*x+l*M,s[3]=o*y+a*S+l*C,s[6]=o*g+a*A+l*R,s[1]=c*_+u*x+f*M,s[4]=c*y+u*S+f*C,s[7]=c*g+u*A+f*R,s[2]=d*_+m*x+v*M,s[5]=d*y+m*S+v*C,s[8]=d*g+m*A+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,d=a*l-u*s,m=c*s-o*l,v=t*f+r*d+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=f*_,e[1]=(i*c-u*r)*_,e[2]=(a*r-i*o)*_,e[3]=d*_,e[4]=(u*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=m*_,e[7]=(r*l-c*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(lS.makeScale(e,t)),this}rotate(e){return this.premultiply(lS.makeRotation(-e)),this}translate(e,t){return this.premultiply(lS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lS=new zt;function qO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const _z={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fd(n,e){return new _z[n](e)}function Nm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const pR={};function nm(n){n in pR||(pR[n]=!0,console.warn(n))}function bd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function cS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const xz=new zt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Sz=new zt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function wz(n){return n.convertSRGBToLinear().applyMatrix3(Sz)}function Az(n){return n.applyMatrix3(xz).convertLinearToSRGB()}const Ez={[Do]:n=>n,[kt]:n=>n.convertSRGBToLinear(),[BM]:wz},Mz={[Do]:n=>n,[kt]:n=>n.convertLinearToSRGB(),[BM]:Az},Ns={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Do},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Ez[e],i=Mz[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Sf;class DM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Sf===void 0&&(Sf=Nm("canvas")),Sf.width=e.width,Sf.height=e.height;const r=Sf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Sf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Nm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=bd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(bd(t[r]/255)*255):t[r]=bd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Cz=0;class gu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Cz++}),this.uuid=ys(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(uS(i[o].image)):s.push(uS(i[o]))}else s=uS(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function uS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?DM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bz=0;class Tn extends ll{constructor(e=Tn.DEFAULT_IMAGE,t=Tn.DEFAULT_MAPPING,r=Vr,i=Vr,s=mn,o=aa,a=Ei,l=ra,c=Tn.DEFAULT_ANISOTROPY,u=ic){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bz++}),this.uuid=ys(),this.name="",this.source=new gu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(nm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===rc?kt:ic),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==o_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fc:e.x=e.x-Math.floor(e.x);break;case Vr:e.x=e.x<0?0:1;break;case $d:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case fc:e.y=e.y-Math.floor(e.y);break;case Vr:e.y=e.y<0?0:1;break;case $d:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kt?rc:PM}set encoding(e){nm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===rc?kt:ic}}Tn.DEFAULT_IMAGE=null;Tn.DEFAULT_MAPPING=o_;Tn.DEFAULT_ANISOTROPY=1;class hn{constructor(e=0,t=0,r=0,i=1){hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],d=l[1],m=l[5],v=l[9],_=l[2],y=l[6],g=l[10];if(Math.abs(u-d)<.01&&Math.abs(f-_)<.01&&Math.abs(v-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+_)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,A=(m+1)/2,M=(g+1)/2,C=(u+d)/4,R=(f+_)/4,T=(v+y)/4;return S>A&&S>M?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=C/r,s=R/r):A>M?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=C/i,s=T/i):M<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),r=R/s,i=T/s),this.set(r,i,s,t),this}let x=Math.sqrt((y-v)*(y-v)+(f-_)*(f-_)+(d-u)*(d-u));return Math.abs(x)<.001&&(x=1),this.x=(y-v)/x,this.y=(f-_)/x,this.z=(d-u)/x,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ws extends ll{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hn(0,0,e,t),this.scissorTest=!1,this.viewport=new hn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(nm("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===rc?kt:ic),this.texture=new Tn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:mn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new gu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class u_ extends Tn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=er,this.minFilter=er,this.wrapR=Vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tz extends ws{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new u_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class OM extends Tn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=er,this.minFilter=er,this.wrapR=Vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rz extends ws{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new OM(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Pz extends ws{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class oi{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const d=s[o+0],m=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(f!==_||l!==d||c!==m||u!==v){let y=1-a;const g=l*d+c*m+u*v+f*_,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const M=Math.sqrt(S),C=Math.atan2(M,g*x);y=Math.sin(y*C)/M,a=Math.sin(a*C)/M}const A=a*x;if(l=l*y+d*A,c=c*y+m*A,u=u*y+v*A,f=f*y+_*A,y===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=M,c*=M,u*=M,f*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],d=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*f+l*m-c*d,e[t+1]=l*v+u*d+c*f-a*m,e[t+2]=c*v+u*m+a*d-l*f,e[t+3]=u*v-a*f-l*d-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),d=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=d*u*f+c*m*v,this._y=c*m*f-d*u*v,this._z=c*u*v+d*m*f,this._w=c*u*f-d*m*v;break;case"YXZ":this._x=d*u*f+c*m*v,this._y=c*m*f-d*u*v,this._z=c*u*v-d*m*f,this._w=c*u*f+d*m*v;break;case"ZXY":this._x=d*u*f-c*m*v,this._y=c*m*f+d*u*v,this._z=c*u*v+d*m*f,this._w=c*u*f-d*m*v;break;case"ZYX":this._x=d*u*f-c*m*v,this._y=c*m*f+d*u*v,this._z=c*u*v-d*m*f,this._w=c*u*f+d*m*v;break;case"YZX":this._x=d*u*f+c*m*v,this._y=c*m*f+d*u*v,this._z=c*u*v-d*m*f,this._w=c*u*f-d*m*v;break;case"XZY":this._x=d*u*f-c*m*v,this._y=c*m*f-d*u*v,this._z=c*u*v+d*m*f,this._w=c*u*f+d*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],d=r+a+f;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,r=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,u=l*r+a*t-s*i,f=l*i+s*r-o*t,d=-s*t-o*r-a*i;return this.x=c*l+d*-s+u*-a-f*-o,this.y=u*l+d*-o+f*-s-c*-a,this.z=f*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return fS.copy(this).projectOnVector(e),this.sub(fS)}reflect(e){return this.sub(fS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fS=new Z,mR=new oi;class uo{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ma.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ma.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ma.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),wf.copy(e.boundingBox),wf.applyMatrix4(e.matrixWorld),this.union(wf);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Ma.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ma)}else i.boundingBox===null&&i.computeBoundingBox(),wf.copy(i.boundingBox),wf.applyMatrix4(e.matrixWorld),this.union(wf)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ma),Ma.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dp),tv.subVectors(this.max,dp),Af.subVectors(e.a,dp),Ef.subVectors(e.b,dp),Mf.subVectors(e.c,dp),Al.subVectors(Ef,Af),El.subVectors(Mf,Ef),Wc.subVectors(Af,Mf);let t=[0,-Al.z,Al.y,0,-El.z,El.y,0,-Wc.z,Wc.y,Al.z,0,-Al.x,El.z,0,-El.x,Wc.z,0,-Wc.x,-Al.y,Al.x,0,-El.y,El.x,0,-Wc.y,Wc.x,0];return!dS(t,Af,Ef,Mf,tv)||(t=[1,0,0,0,1,0,0,0,1],!dS(t,Af,Ef,Mf,tv))?!1:(nv.crossVectors(Al,El),t=[nv.x,nv.y,nv.z],dS(t,Af,Ef,Mf,tv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ma).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ma).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ea[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ea[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ea[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ea[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ea[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ea[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ea[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ea[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ea),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ea=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],Ma=new Z,wf=new uo,Af=new Z,Ef=new Z,Mf=new Z,Al=new Z,El=new Z,Wc=new Z,dp=new Z,tv=new Z,nv=new Z,$c=new Z;function dS(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){$c.fromArray(n,s);const a=i.x*Math.abs($c.x)+i.y*Math.abs($c.y)+i.z*Math.abs($c.z),l=e.dot($c),c=t.dot($c),u=r.dot($c);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Iz=new uo,hp=new Z,hS=new Z;class Ts{constructor(e=new Z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Iz.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hp.subVectors(e,this.center);const t=hp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(hp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hp.copy(e.center).add(hS)),this.expandByPoint(hp.copy(e.center).sub(hS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ca=new Z,pS=new Z,rv=new Z,Ml=new Z,mS=new Z,iv=new Z,gS=new Z;class gh{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ca)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ca.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ca.copy(this.origin).addScaledVector(this.direction,t),Ca.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){pS.copy(e).add(t).multiplyScalar(.5),rv.copy(t).sub(e).normalize(),Ml.copy(this.origin).sub(pS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(rv),a=Ml.dot(this.direction),l=-Ml.dot(rv),c=Ml.lengthSq(),u=Math.abs(1-o*o);let f,d,m,v;if(u>0)if(f=o*l-a,d=o*a-l,v=s*u,f>=0)if(d>=-v)if(d<=v){const _=1/u;f*=_,d*=_,m=f*(f+o*d+2*a)+d*(o*f+d+2*l)+c}else d=s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;else d=-s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;else d<=-v?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+c):d<=v?(f=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+c):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+c);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(pS).addScaledVector(rv,d),m}intersectSphere(e,t){Ca.subVectors(e.center,this.origin);const r=Ca.dot(this.direction),i=Ca.dot(Ca)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ca)!==null}intersectTriangle(e,t,r,i,s){mS.subVectors(t,e),iv.subVectors(r,e),gS.crossVectors(mS,iv);let o=this.direction.dot(gS),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ml.subVectors(this.origin,e);const l=a*this.direction.dot(iv.crossVectors(Ml,iv));if(l<0)return null;const c=a*this.direction.dot(mS.cross(Ml));if(c<0||l+c>o)return null;const u=-a*Ml.dot(gS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Pt{constructor(e,t,r,i,s,o,a,l,c,u,f,d,m,v,_,y){Pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,f,d,m,v,_,y)}set(e,t,r,i,s,o,a,l,c,u,f,d,m,v,_,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=d,g[3]=m,g[7]=v,g[11]=_,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Pt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Cf.setFromMatrixColumn(e,0).length(),s=1/Cf.setFromMatrixColumn(e,1).length(),o=1/Cf.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=d-_*c,t[9]=-a*l,t[2]=_-d*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,m=l*f,v=c*u,_=c*f;t[0]=d+_*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=_+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,m=l*f,v=c*u,_=c*f;t[0]=d-_*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=_-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=v*c-m,t[8]=d*c+_,t[1]=l*f,t[5]=_*c+d,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=_-d*f,t[8]=v*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+v,t[10]=d-_*f}else if(e.order==="XZY"){const d=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=d*f+_,t[5]=o*u,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*u,t[10]=_*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Bz,e,Lz)}lookAt(e,t,r){const i=this.elements;return as.subVectors(e,t),as.lengthSq()===0&&(as.z=1),as.normalize(),Cl.crossVectors(r,as),Cl.lengthSq()===0&&(Math.abs(r.z)===1?as.x+=1e-4:as.z+=1e-4,as.normalize(),Cl.crossVectors(r,as)),Cl.normalize(),sv.crossVectors(as,Cl),i[0]=Cl.x,i[4]=sv.x,i[8]=as.x,i[1]=Cl.y,i[5]=sv.y,i[9]=as.y,i[2]=Cl.z,i[6]=sv.z,i[10]=as.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],d=r[9],m=r[13],v=r[2],_=r[6],y=r[10],g=r[14],x=r[3],S=r[7],A=r[11],M=r[15],C=i[0],R=i[4],T=i[8],b=i[12],L=i[1],O=i[5],k=i[9],z=i[13],V=i[2],j=i[6],Q=i[10],ne=i[14],G=i[3],J=i[7],Y=i[11],X=i[15];return s[0]=o*C+a*L+l*V+c*G,s[4]=o*R+a*O+l*j+c*J,s[8]=o*T+a*k+l*Q+c*Y,s[12]=o*b+a*z+l*ne+c*X,s[1]=u*C+f*L+d*V+m*G,s[5]=u*R+f*O+d*j+m*J,s[9]=u*T+f*k+d*Q+m*Y,s[13]=u*b+f*z+d*ne+m*X,s[2]=v*C+_*L+y*V+g*G,s[6]=v*R+_*O+y*j+g*J,s[10]=v*T+_*k+y*Q+g*Y,s[14]=v*b+_*z+y*ne+g*X,s[3]=x*C+S*L+A*V+M*G,s[7]=x*R+S*O+A*j+M*J,s[11]=x*T+S*k+A*Q+M*Y,s[15]=x*b+S*z+A*ne+M*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],d=e[10],m=e[14],v=e[3],_=e[7],y=e[11],g=e[15];return v*(+s*l*f-i*c*f-s*a*d+r*c*d+i*a*m-r*l*m)+_*(+t*l*m-t*c*d+s*o*d-i*o*m+i*c*u-s*l*u)+y*(+t*c*f-t*a*m-s*o*f+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-t*l*f+t*a*d+i*o*f-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],m=e[11],v=e[12],_=e[13],y=e[14],g=e[15],x=f*y*c-_*d*c+_*l*m-a*y*m-f*l*g+a*d*g,S=v*d*c-u*y*c-v*l*m+o*y*m+u*l*g-o*d*g,A=u*_*c-v*f*c+v*a*m-o*_*m-u*a*g+o*f*g,M=v*f*l-u*_*l-v*a*d+o*_*d+u*a*y-o*f*y,C=t*x+r*S+i*A+s*M;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/C;return e[0]=x*R,e[1]=(_*d*s-f*y*s-_*i*m+r*y*m+f*i*g-r*d*g)*R,e[2]=(a*y*s-_*l*s+_*i*c-r*y*c-a*i*g+r*l*g)*R,e[3]=(f*l*s-a*d*s-f*i*c+r*d*c+a*i*m-r*l*m)*R,e[4]=S*R,e[5]=(u*y*s-v*d*s+v*i*m-t*y*m-u*i*g+t*d*g)*R,e[6]=(v*l*s-o*y*s-v*i*c+t*y*c+o*i*g-t*l*g)*R,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*m+t*l*m)*R,e[8]=A*R,e[9]=(v*f*s-u*_*s-v*r*m+t*_*m+u*r*g-t*f*g)*R,e[10]=(o*_*s-v*a*s+v*r*c-t*_*c-o*r*g+t*a*g)*R,e[11]=(u*a*s-o*f*s-u*r*c+t*f*c+o*r*m-t*a*m)*R,e[12]=M*R,e[13]=(u*_*i-v*f*i+v*r*d-t*_*d-u*r*y+t*f*y)*R,e[14]=(v*a*i-o*_*i-v*r*l+t*_*l+o*r*y-t*a*y)*R,e[15]=(o*f*i-u*a*i+u*r*l-t*f*l-o*r*d+t*a*d)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,d=s*c,m=s*u,v=s*f,_=o*u,y=o*f,g=a*f,x=l*c,S=l*u,A=l*f,M=r.x,C=r.y,R=r.z;return i[0]=(1-(_+g))*M,i[1]=(m+A)*M,i[2]=(v-S)*M,i[3]=0,i[4]=(m-A)*C,i[5]=(1-(d+g))*C,i[6]=(y+x)*C,i[7]=0,i[8]=(v+S)*R,i[9]=(y-x)*R,i[10]=(1-(d+_))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Cf.set(i[0],i[1],i[2]).length();const o=Cf.set(i[4],i[5],i[6]).length(),a=Cf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],go.copy(this);const c=1/s,u=1/o,f=1/a;return go.elements[0]*=c,go.elements[1]*=c,go.elements[2]*=c,go.elements[4]*=u,go.elements[5]*=u,go.elements[6]*=u,go.elements[8]*=f,go.elements[9]*=f,go.elements[10]*=f,t.setFromRotationMatrix(go),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=qo){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),f=(t+e)/(t-e),d=(r+i)/(r-i);let m,v;if(a===qo)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===km)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=qo){const l=this.elements,c=1/(t-e),u=1/(r-i),f=1/(o-s),d=(t+e)*c,m=(r+i)*u;let v,_;if(a===qo)v=(o+s)*f,_=-2*f;else if(a===km)v=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Cf=new Z,go=new Pt,Bz=new Z(0,0,0),Lz=new Z(1,1,1),Cl=new Z,sv=new Z,as=new Z,gR=new Pt,vR=new oi;class m0{constructor(e=0,t=0,r=0,i=m0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],d=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(tr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-tr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(tr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-tr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(tr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-tr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return gR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gR,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vR.setFromEuler(this),this.setFromQuaternion(vR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}m0.DEFAULT_ORDER="XYZ";class Mu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Dz=0;const yR=new Z,bf=new oi,ba=new Pt,ov=new Z,pp=new Z,Oz=new Z,Fz=new oi,_R=new Z(1,0,0),xR=new Z(0,1,0),SR=new Z(0,0,1),Uz={type:"added"},wR={type:"removed"};class Gt extends ll{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dz++}),this.uuid=ys(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DEFAULT_UP.clone();const e=new Z,t=new m0,r=new oi,i=new Z(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Pt},normalMatrix:{value:new zt}}),this.matrix=new Pt,this.matrixWorld=new Pt,this.matrixAutoUpdate=Gt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Mu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.multiply(bf),this}rotateOnWorldAxis(e,t){return bf.setFromAxisAngle(e,t),this.quaternion.premultiply(bf),this}rotateX(e){return this.rotateOnAxis(_R,e)}rotateY(e){return this.rotateOnAxis(xR,e)}rotateZ(e){return this.rotateOnAxis(SR,e)}translateOnAxis(e,t){return yR.copy(e).applyQuaternion(this.quaternion),this.position.add(yR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_R,e)}translateY(e){return this.translateOnAxis(xR,e)}translateZ(e){return this.translateOnAxis(SR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ba.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ov.copy(e):ov.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),pp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ba.lookAt(pp,ov,this.up):ba.lookAt(ov,pp,this.up),this.quaternion.setFromRotationMatrix(ba),i&&(ba.extractRotation(i.matrixWorld),bf.setFromRotationMatrix(ba),this.quaternion.premultiply(bf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Uz)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(wR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ba.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ba.multiply(e.parent.matrixWorld)),e.applyMatrix4(ba),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,e,Oz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,Fz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),d=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gt.DEFAULT_UP=new Z(0,1,0);Gt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vo=new Z,Ta=new Z,vS=new Z,Ra=new Z,Tf=new Z,Rf=new Z,AR=new Z,yS=new Z,_S=new Z,xS=new Z;let av=!1;class zi{constructor(e=new Z,t=new Z,r=new Z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),vo.subVectors(e,t),i.cross(vo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){vo.subVectors(i,t),Ta.subVectors(r,t),vS.subVectors(e,t);const o=vo.dot(vo),a=vo.dot(Ta),l=vo.dot(vS),c=Ta.dot(Ta),u=Ta.dot(vS),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const d=1/f,m=(c*l-a*u)*d,v=(o*u-a*l)*d;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ra),Ra.x>=0&&Ra.y>=0&&Ra.x+Ra.y<=1}static getUV(e,t,r,i,s,o,a,l){return av===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),av=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ra),l.setScalar(0),l.addScaledVector(s,Ra.x),l.addScaledVector(o,Ra.y),l.addScaledVector(a,Ra.z),l}static isFrontFacing(e,t,r,i){return vo.subVectors(r,t),Ta.subVectors(e,t),vo.cross(Ta).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vo.subVectors(this.c,this.b),Ta.subVectors(this.a,this.b),vo.cross(Ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return av===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),av=!0),zi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return zi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return zi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Tf.subVectors(i,r),Rf.subVectors(s,r),yS.subVectors(e,r);const l=Tf.dot(yS),c=Rf.dot(yS);if(l<=0&&c<=0)return t.copy(r);_S.subVectors(e,i);const u=Tf.dot(_S),f=Rf.dot(_S);if(u>=0&&f<=u)return t.copy(i);const d=l*f-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Tf,o);xS.subVectors(e,s);const m=Tf.dot(xS),v=Rf.dot(xS);if(v>=0&&m<=v)return t.copy(s);const _=m*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(Rf,a);const y=u*v-m*f;if(y<=0&&f-u>=0&&m-v>=0)return AR.subVectors(s,i),a=(f-u)/(f-u+(m-v)),t.copy(i).addScaledVector(AR,a);const g=1/(y+_+d);return o=_*g,a=d*g,t.copy(r).addScaledVector(Tf,o).addScaledVector(Rf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let kz=0;class Sr extends ll{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kz++}),this.uuid=ys(),this.name="",this.type="Material",this.blending=ja,this.side=Lo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=yM,this.blendDst=_M,this.blendEquation=lu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=sy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=E1,this.stencilZFail=E1,this.stencilZPass=E1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ja&&(r.blending=this.blending),this.side!==Lo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const e5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yo={h:0,s:0,l:0},lv={h:0,s:0,l:0};function SS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let it=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ns.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ns.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ns.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ns.workingColorSpace){if(e=LM(e,1),t=tr(t,0,1),r=tr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=SS(o,s,e+1/3),this.g=SS(o,s,e),this.b=SS(o,s,e-1/3)}return Ns.toWorkingColorSpace(this,i),this}setStyle(e,t=kt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kt){const r=e5[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bd(e.r),this.g=bd(e.g),this.b=bd(e.b),this}copyLinearToSRGB(e){return this.r=cS(e.r),this.g=cS(e.g),this.b=cS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kt){return Ns.fromWorkingColorSpace(qr.copy(this),e),Math.round(tr(qr.r*255,0,255))*65536+Math.round(tr(qr.g*255,0,255))*256+Math.round(tr(qr.b*255,0,255))}getHexString(e=kt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ns.workingColorSpace){Ns.fromWorkingColorSpace(qr.copy(this),t);const r=qr.r,i=qr.g,s=qr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ns.workingColorSpace){return Ns.fromWorkingColorSpace(qr.copy(this),t),e.r=qr.r,e.g=qr.g,e.b=qr.b,e}getStyle(e=kt){Ns.fromWorkingColorSpace(qr.copy(this),e);const t=qr.r,r=qr.g,i=qr.b;return e!==kt?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(yo),yo.h+=e,yo.s+=t,yo.l+=r,this.setHSL(yo.h,yo.s,yo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(yo),e.getHSL(lv);const r=tm(yo.h,lv.h,t),i=tm(yo.s,lv.s,t),s=tm(yo.l,lv.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const qr=new it;it.NAMES=e5;class Wi extends Sr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ka=Nz();function Nz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ki(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=tr(n,-65504,65504),ka.floatView[0]=n;const e=ka.uint32View[0],t=e>>23&511;return ka.baseTable[t]+((e&8388607)>>ka.shiftTable[t])}function Np(n){const e=n>>10;return ka.uint32View[0]=ka.mantissaTable[ka.offsetTable[e]+(n&1023)]+ka.exponentTable[e],ka.floatView[0]}const vu={toHalfFloat:ki,fromHalfFloat:Np},vr=new Z,cv=new Ve;class dn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Um,this.updateRange={offset:0,count:-1},this.gpuType=ii,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)cv.fromBufferAttribute(this,t),cv.applyMatrix3(e),this.setXY(t,cv.x,cv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix3(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix4(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.applyNormalMatrix(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)vr.fromBufferAttribute(this,t),vr.transformDirection(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array),s=Wt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Um&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class zz extends dn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Gz extends dn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Hz extends dn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Vz extends dn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class FM extends dn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Wz extends dn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class UM extends dn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class $z extends dn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Np(this.array[e*this.itemSize]);return this.normalized&&(t=ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize]=ki(t),this}getY(e){let t=Np(this.array[e*this.itemSize+1]);return this.normalized&&(t=ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+1]=ki(t),this}getZ(e){let t=Np(this.array[e*this.itemSize+2]);return this.normalized&&(t=ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+2]=ki(t),this}getW(e){let t=Np(this.array[e*this.itemSize+3]);return this.normalized&&(t=ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wt(t,this.array)),this.array[e*this.itemSize+3]=ki(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(r),this.array[e+2]=ki(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array),s=Wt(s,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(r),this.array[e+2]=ki(i),this.array[e+3]=ki(s),this}}class gt extends dn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class jz extends dn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Xz=0;const Us=new Pt,wS=new Gt,Pf=new Z,ls=new uo,mp=new uo,Lr=new Z;class Ft extends ll{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xz++}),this.uuid=ys(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qO(e)?UM:FM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new zt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Us.makeRotationFromQuaternion(e),this.applyMatrix4(Us),this}rotateX(e){return Us.makeRotationX(e),this.applyMatrix4(Us),this}rotateY(e){return Us.makeRotationY(e),this.applyMatrix4(Us),this}rotateZ(e){return Us.makeRotationZ(e),this.applyMatrix4(Us),this}translate(e,t,r){return Us.makeTranslation(e,t,r),this.applyMatrix4(Us),this}scale(e,t,r){return Us.makeScale(e,t,r),this.applyMatrix4(Us),this}lookAt(e){return wS.lookAt(e),wS.updateMatrix(),this.applyMatrix4(wS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pf).negate(),this.translate(Pf.x,Pf.y,Pf.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new uo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ls.setFromBufferAttribute(s),this.morphTargetsRelative?(Lr.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint(Lr),Lr.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint(Lr)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Z,1/0);return}if(e){const r=this.boundingSphere.center;if(ls.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];mp.setFromBufferAttribute(a),this.morphTargetsRelative?(Lr.addVectors(ls.min,mp.min),ls.expandByPoint(Lr),Lr.addVectors(ls.max,mp.max),ls.expandByPoint(Lr)):(ls.expandByPoint(mp.min),ls.expandByPoint(mp.max))}ls.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Lr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Lr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Lr.fromBufferAttribute(a,c),l&&(Pf.fromBufferAttribute(e,c),Lr.add(Pf)),i=Math.max(i,r.distanceToSquared(Lr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new dn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let L=0;L<a;L++)c[L]=new Z,u[L]=new Z;const f=new Z,d=new Z,m=new Z,v=new Ve,_=new Ve,y=new Ve,g=new Z,x=new Z;function S(L,O,k){f.fromArray(i,L*3),d.fromArray(i,O*3),m.fromArray(i,k*3),v.fromArray(o,L*2),_.fromArray(o,O*2),y.fromArray(o,k*2),d.sub(f),m.sub(f),_.sub(v),y.sub(v);const z=1/(_.x*y.y-y.x*_.y);isFinite(z)&&(g.copy(d).multiplyScalar(y.y).addScaledVector(m,-_.y).multiplyScalar(z),x.copy(m).multiplyScalar(_.x).addScaledVector(d,-y.x).multiplyScalar(z),c[L].add(g),c[O].add(g),c[k].add(g),u[L].add(x),u[O].add(x),u[k].add(x))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let L=0,O=A.length;L<O;++L){const k=A[L],z=k.start,V=k.count;for(let j=z,Q=z+V;j<Q;j+=3)S(r[j+0],r[j+1],r[j+2])}const M=new Z,C=new Z,R=new Z,T=new Z;function b(L){R.fromArray(s,L*3),T.copy(R);const O=c[L];M.copy(O),M.sub(R.multiplyScalar(R.dot(O))).normalize(),C.crossVectors(T,O);const z=C.dot(u[L])<0?-1:1;l[L*4]=M.x,l[L*4+1]=M.y,l[L*4+2]=M.z,l[L*4+3]=z}for(let L=0,O=A.length;L<O;++L){const k=A[L],z=k.start,V=k.count;for(let j=z,Q=z+V;j<Q;j+=3)b(r[j+0]),b(r[j+1]),b(r[j+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new dn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,m=r.count;d<m;d++)r.setXYZ(d,0,0,0);const i=new Z,s=new Z,o=new Z,a=new Z,l=new Z,c=new Z,u=new Z,f=new Z;if(e)for(let d=0,m=e.count;d<m;d+=3){const v=e.getX(d+0),_=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,y),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,m=t.count;d<m;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Lr.fromBufferAttribute(e,t),Lr.normalize(),e.setXYZ(t,Lr.x,Lr.y,Lr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,d=new c.constructor(l.length*u);let m=0,v=0;for(let _=0,y=l.length;_<y;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*u;for(let g=0;g<u;g++)d[v++]=c[m++]}return new dn(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ft,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const d=c[u],m=e(d,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,d=c.length;f<d;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let d=0,m=f.length;d<m;d++)u.push(f[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ER=new Pt,jc=new gh,uv=new Ts,MR=new Z,If=new Z,Bf=new Z,Lf=new Z,AS=new Z,fv=new Z,dv=new Ve,hv=new Ve,pv=new Ve,CR=new Z,bR=new Z,TR=new Z,mv=new Z,gv=new Z;class Un extends Gt{constructor(e=new Ft,t=new Wi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){fv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(AS.fromBufferAttribute(f,e),o?fv.addScaledVector(AS,u):fv.addScaledVector(AS.sub(t),u))}t.add(fv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),uv.copy(r.boundingSphere),uv.applyMatrix4(s),jc.copy(e.ray).recast(e.near),!(uv.containsPoint(jc.origin)===!1&&(jc.intersectSphere(uv,MR)===null||jc.origin.distanceToSquared(MR)>(e.far-e.near)**2))&&(ER.copy(s).invert(),jc.copy(e.ray).applyMatrix4(ER),!(r.boundingBox!==null&&jc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,jc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,d=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=d.length;v<_;v++){const y=d[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),S=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let A=x,M=S;A<M;A+=3){const C=a.getX(A),R=a.getX(A+1),T=a.getX(A+2);i=vv(this,g,e,r,c,u,f,C,R,T),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const x=a.getX(y),S=a.getX(y+1),A=a.getX(y+2);i=vv(this,o,e,r,c,u,f,x,S,A),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=d.length;v<_;v++){const y=d[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),S=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let A=x,M=S;A<M;A+=3){const C=A,R=A+1,T=A+2;i=vv(this,g,e,r,c,u,f,C,R,T),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const x=y,S=y+1,A=y+2;i=vv(this,o,e,r,c,u,f,x,S,A),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function Jz(n,e,t,r,i,s,o,a){let l;if(e.side===si?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Lo,a),l===null)return null;gv.copy(a),gv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(gv);return c<t.near||c>t.far?null:{distance:c,point:gv.clone(),object:n}}function vv(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,If),n.getVertexPosition(l,Bf),n.getVertexPosition(c,Lf);const u=Jz(n,e,t,r,If,Bf,Lf,mv);if(u){i&&(dv.fromBufferAttribute(i,a),hv.fromBufferAttribute(i,l),pv.fromBufferAttribute(i,c),u.uv=zi.getInterpolation(mv,If,Bf,Lf,dv,hv,pv,new Ve)),s&&(dv.fromBufferAttribute(s,a),hv.fromBufferAttribute(s,l),pv.fromBufferAttribute(s,c),u.uv1=zi.getInterpolation(mv,If,Bf,Lf,dv,hv,pv,new Ve),u.uv2=u.uv1),o&&(CR.fromBufferAttribute(o,a),bR.fromBufferAttribute(o,l),TR.fromBufferAttribute(o,c),u.normal=zi.getInterpolation(mv,If,Bf,Lf,CR,bR,TR,new Z),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new Z,materialIndex:0};zi.getNormal(If,Bf,Lf,f.normal),u.face=f}return u}class Mc extends Ft{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let d=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new gt(c,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(f,2));function v(_,y,g,x,S,A,M,C,R,T,b){const L=A/R,O=M/T,k=A/2,z=M/2,V=C/2,j=R+1,Q=T+1;let ne=0,G=0;const J=new Z;for(let Y=0;Y<Q;Y++){const X=Y*O-z;for(let $=0;$<j;$++){const re=$*L-k;J[_]=re*x,J[y]=X*S,J[g]=V,c.push(J.x,J.y,J.z),J[_]=0,J[y]=0,J[g]=C>0?1:-1,u.push(J.x,J.y,J.z),f.push($/R),f.push(1-Y/T),ne+=1}}for(let Y=0;Y<T;Y++)for(let X=0;X<R;X++){const $=d+X+j*Y,re=d+X+j*(Y+1),ie=d+(X+1)+j*(Y+1),ae=d+(X+1)+j*Y;l.push($,re,ae),l.push(re,ie,ae),G+=6}a.addGroup(m,G,b),m+=G,d+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jd(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function xi(n){const e={};for(let t=0;t<n.length;t++){const r=Jd(n[t]);for(const i in r)e[i]=r[i]}return e}function Yz(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function t5(n){return n.getRenderTarget()===null?n.outputColorSpace:Do}const kM={clone:Jd,merge:xi};var Kz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Zz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class As extends Sr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Kz,this.fragmentShader=Zz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jd(e.uniforms),this.uniformsGroups=Yz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class g0 extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pt,this.projectionMatrix=new Pt,this.projectionMatrixInverse=new Pt,this.coordinateSystem=qo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class dr extends g0{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Xd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Eu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xd*2*Math.atan(Math.tan(Eu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Eu*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Df=-90,Of=1;class n5 extends Gt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new dr(Df,Of,e,t);i.layers=this.layers,this.add(i);const s=new dr(Df,Of,e,t);s.layers=this.layers,this.add(s);const o=new dr(Df,Of,e,t);o.layers=this.layers,this.add(o);const a=new dr(Df,Of,e,t);a.layers=this.layers,this.add(a);const l=new dr(Df,Of,e,t);l.layers=this.layers,this.add(l);const c=new dr(Df,Of,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===qo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===km)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=Ro,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class v0 extends Tn{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Qa,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NM extends ws{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(nm("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===rc?kt:ic),this.texture=new v0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Mc(5,5,5),s=new As({name:"CubemapFromEquirect",uniforms:Jd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:si,blending:$a});s.uniforms.tEquirect.value=t;const o=new Un(i,s),a=t.minFilter;return t.minFilter===aa&&(t.minFilter=mn),new n5(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const ES=new Z,Qz=new Z,qz=new zt;class Dl{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=ES.subVectors(r,t).cross(Qz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ES),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||qz.getNormalMatrix(e),i=this.coplanarPoint(ES).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Xc=new Ts,yv=new Z;class f_{constructor(e=new Dl,t=new Dl,r=new Dl,i=new Dl,s=new Dl,o=new Dl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=qo){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],m=i[8],v=i[9],_=i[10],y=i[11],g=i[12],x=i[13],S=i[14],A=i[15];if(r[0].setComponents(l-s,d-c,y-m,A-g).normalize(),r[1].setComponents(l+s,d+c,y+m,A+g).normalize(),r[2].setComponents(l+o,d+u,y+v,A+x).normalize(),r[3].setComponents(l-o,d-u,y-v,A-x).normalize(),r[4].setComponents(l-a,d-f,y-_,A-S).normalize(),t===qo)r[5].setComponents(l+a,d+f,y+_,A+S).normalize();else if(t===km)r[5].setComponents(a,f,_,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Xc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Xc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xc)}intersectsSprite(e){return Xc.center.set(0,0,0),Xc.radius=.7071067811865476,Xc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(yv.x=i.normal.x>0?e.max.x:e.min.x,yv.y=i.normal.y>0?e.max.y:e.min.y,yv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(yv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function r5(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function eG(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,d=c.usage,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,f,d),c.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,f){const d=u.array,m=u.updateRange;n.bindBuffer(f,c),m.count===-1?n.bufferSubData(f,0,d):(t?n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d,m.offset,m.count):n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=r.get(c);(!d||d.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(s(f.buffer,c,u),f.version=c.version)}return{get:o,remove:a,update:l}}class da extends Ft{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,d=t/l,m=[],v=[],_=[],y=[];for(let g=0;g<u;g++){const x=g*d-o;for(let S=0;S<c;S++){const A=S*f-s;v.push(A,-x,0),_.push(0,0,1),y.push(S/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const S=x+c*g,A=x+c*(g+1),M=x+1+c*(g+1),C=x+1+c*g;m.push(S,A,C),m.push(A,M,C)}this.setIndex(m),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(_,3)),this.setAttribute("uv",new gt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new da(e.width,e.height,e.widthSegments,e.heightSegments)}}var tG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,nG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,iG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,sG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,oG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,aG="vec3 transformed = vec3( position );",lG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,fG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,hG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_G=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,xG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,SG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,AG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,EG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,MG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,CG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bG="gl_FragColor = linearToOutputTexel( gl_FragColor );",TG=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,RG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,IG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,BG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,LG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,DG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,OG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,FG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,UG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,NG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,zG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,GG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,HG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,VG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,WG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,$G=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,XG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,JG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,YG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,KG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ZG=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,QG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,eH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,tH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,iH=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,sH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,oH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,fH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,dH=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,hH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,mH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_H=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,SH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,AH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,EH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,MH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,CH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,bH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,TH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,RH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,IH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,LH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,OH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,kH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,NH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,HH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,VH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,WH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,$H=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,XH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JH=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,YH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const KH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ZH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,QH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,iV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,lV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uV=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,SV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,MV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CV=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,TV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Nt={alphamap_fragment:tG,alphamap_pars_fragment:nG,alphatest_fragment:rG,alphatest_pars_fragment:iG,aomap_fragment:sG,aomap_pars_fragment:oG,begin_vertex:aG,beginnormal_vertex:lG,bsdfs:cG,iridescence_fragment:uG,bumpmap_pars_fragment:fG,clipping_planes_fragment:dG,clipping_planes_pars_fragment:hG,clipping_planes_pars_vertex:pG,clipping_planes_vertex:mG,color_fragment:gG,color_pars_fragment:vG,color_pars_vertex:yG,color_vertex:_G,common:xG,cube_uv_reflection_fragment:SG,defaultnormal_vertex:wG,displacementmap_pars_vertex:AG,displacementmap_vertex:EG,emissivemap_fragment:MG,emissivemap_pars_fragment:CG,encodings_fragment:bG,encodings_pars_fragment:TG,envmap_fragment:RG,envmap_common_pars_fragment:PG,envmap_pars_fragment:IG,envmap_pars_vertex:BG,envmap_physical_pars_fragment:WG,envmap_vertex:LG,fog_vertex:DG,fog_pars_vertex:OG,fog_fragment:FG,fog_pars_fragment:UG,gradientmap_pars_fragment:kG,lightmap_fragment:NG,lightmap_pars_fragment:zG,lights_lambert_fragment:GG,lights_lambert_pars_fragment:HG,lights_pars_begin:VG,lights_toon_fragment:$G,lights_toon_pars_fragment:jG,lights_phong_fragment:XG,lights_phong_pars_fragment:JG,lights_physical_fragment:YG,lights_physical_pars_fragment:KG,lights_fragment_begin:ZG,lights_fragment_maps:QG,lights_fragment_end:qG,logdepthbuf_fragment:eH,logdepthbuf_pars_fragment:tH,logdepthbuf_pars_vertex:nH,logdepthbuf_vertex:rH,map_fragment:iH,map_pars_fragment:sH,map_particle_fragment:oH,map_particle_pars_fragment:aH,metalnessmap_fragment:lH,metalnessmap_pars_fragment:cH,morphcolor_vertex:uH,morphnormal_vertex:fH,morphtarget_pars_vertex:dH,morphtarget_vertex:hH,normal_fragment_begin:pH,normal_fragment_maps:mH,normal_pars_fragment:gH,normal_pars_vertex:vH,normal_vertex:yH,normalmap_pars_fragment:_H,clearcoat_normal_fragment_begin:xH,clearcoat_normal_fragment_maps:SH,clearcoat_pars_fragment:wH,iridescence_pars_fragment:AH,output_fragment:EH,packing:MH,premultiplied_alpha_fragment:CH,project_vertex:bH,dithering_fragment:TH,dithering_pars_fragment:RH,roughnessmap_fragment:PH,roughnessmap_pars_fragment:IH,shadowmap_pars_fragment:BH,shadowmap_pars_vertex:LH,shadowmap_vertex:DH,shadowmask_pars_fragment:OH,skinbase_vertex:FH,skinning_pars_vertex:UH,skinning_vertex:kH,skinnormal_vertex:NH,specularmap_fragment:zH,specularmap_pars_fragment:GH,tonemapping_fragment:HH,tonemapping_pars_fragment:VH,transmission_fragment:WH,transmission_pars_fragment:$H,uv_pars_fragment:jH,uv_pars_vertex:XH,uv_vertex:JH,worldpos_vertex:YH,background_vert:KH,background_frag:ZH,backgroundCube_vert:QH,backgroundCube_frag:qH,cube_vert:eV,cube_frag:tV,depth_vert:nV,depth_frag:rV,distanceRGBA_vert:iV,distanceRGBA_frag:sV,equirect_vert:oV,equirect_frag:aV,linedashed_vert:lV,linedashed_frag:cV,meshbasic_vert:uV,meshbasic_frag:fV,meshlambert_vert:dV,meshlambert_frag:hV,meshmatcap_vert:pV,meshmatcap_frag:mV,meshnormal_vert:gV,meshnormal_frag:vV,meshphong_vert:yV,meshphong_frag:_V,meshphysical_vert:xV,meshphysical_frag:SV,meshtoon_vert:wV,meshtoon_frag:AV,points_vert:EV,points_frag:MV,shadow_vert:CV,shadow_frag:bV,sprite_vert:TV,sprite_frag:RV},ot={common:{diffuse:{value:new it(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new zt},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new zt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new zt},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new it(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0},uvTransform:{value:new zt}},sprite:{diffuse:{value:new it(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new zt},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0}}},Eo={basic:{uniforms:xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new it(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:xi([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:xi([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new it(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:xi([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new it(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:xi([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:xi([ot.points,ot.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:xi([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:xi([ot.common,ot.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:xi([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.meshnormal_vert,fragmentShader:Nt.meshnormal_frag},sprite:{uniforms:xi([ot.sprite,ot.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Nt.backgroundCube_vert,fragmentShader:Nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:xi([ot.common,ot.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:xi([ot.lights,ot.fog,{color:{value:new it(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};Eo.physical={uniforms:xi([Eo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new zt},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new zt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new zt},sheen:{value:0},sheenColor:{value:new it(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new zt},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new zt},attenuationDistance:{value:0},attenuationColor:{value:new it(0)},specularColor:{value:new it(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new zt},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new zt}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};const _v={r:0,b:0,g:0};function PV(n,e,t,r,i,s,o){const a=new it(0);let l=s===!0?0:1,c,u,f=null,d=0,m=null;function v(y,g){let x=!1,S=g.isScene===!0?g.background:null;switch(S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?_(a,l):S&&S.isColor&&(_(S,1),x=!0),n.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),x=!0;break}(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===mh)?(u===void 0&&(u=new Un(new Mc(1,1,1),new As({name:"BackgroundCubeMaterial",uniforms:Jd(Eo.backgroundCube.uniforms),vertexShader:Eo.backgroundCube.vertexShader,fragmentShader:Eo.backgroundCube.fragmentShader,side:si,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,R,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=S.colorSpace!==kt,(f!==S||d!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,d=S.version,m=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Un(new da(2,2),new As({name:"BackgroundMaterial",uniforms:Jd(Eo.background.uniforms),vertexShader:Eo.background.vertexShader,fragmentShader:Eo.background.fragmentShader,side:Lo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=S.colorSpace!==kt,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||d!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,d=S.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function _(y,g){y.getRGB(_v,t5(n)),r.buffers.color.setClear(_v.r,_v.g,_v.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(y,g=1){a.set(y),l=g,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,_(a,l)},render:v}}function IV(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let c=l,u=!1;function f(V,j,Q,ne,G){let J=!1;if(o){const Y=_(ne,Q,j);c!==Y&&(c=Y,m(c.object)),J=g(V,ne,Q,G),J&&x(V,ne,Q,G)}else{const Y=j.wireframe===!0;(c.geometry!==ne.id||c.program!==Q.id||c.wireframe!==Y)&&(c.geometry=ne.id,c.program=Q.id,c.wireframe=Y,J=!0)}G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(J||u)&&(u=!1,T(V,j,Q,ne),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(V){return r.isWebGL2?n.bindVertexArray(V):s.bindVertexArrayOES(V)}function v(V){return r.isWebGL2?n.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function _(V,j,Q){const ne=Q.wireframe===!0;let G=a[V.id];G===void 0&&(G={},a[V.id]=G);let J=G[j.id];J===void 0&&(J={},G[j.id]=J);let Y=J[ne];return Y===void 0&&(Y=y(d()),J[ne]=Y),Y}function y(V){const j=[],Q=[],ne=[];for(let G=0;G<i;G++)j[G]=0,Q[G]=0,ne[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:Q,attributeDivisors:ne,object:V,attributes:{},index:null}}function g(V,j,Q,ne){const G=c.attributes,J=j.attributes;let Y=0;const X=Q.getAttributes();for(const $ in X)if(X[$].location>=0){const ie=G[$];let ae=J[$];if(ae===void 0&&($==="instanceMatrix"&&V.instanceMatrix&&(ae=V.instanceMatrix),$==="instanceColor"&&V.instanceColor&&(ae=V.instanceColor)),ie===void 0||ie.attribute!==ae||ae&&ie.data!==ae.data)return!0;Y++}return c.attributesNum!==Y||c.index!==ne}function x(V,j,Q,ne){const G={},J=j.attributes;let Y=0;const X=Q.getAttributes();for(const $ in X)if(X[$].location>=0){let ie=J[$];ie===void 0&&($==="instanceMatrix"&&V.instanceMatrix&&(ie=V.instanceMatrix),$==="instanceColor"&&V.instanceColor&&(ie=V.instanceColor));const ae={};ae.attribute=ie,ie&&ie.data&&(ae.data=ie.data),G[$]=ae,Y++}c.attributes=G,c.attributesNum=Y,c.index=ne}function S(){const V=c.newAttributes;for(let j=0,Q=V.length;j<Q;j++)V[j]=0}function A(V){M(V,0)}function M(V,j){const Q=c.newAttributes,ne=c.enabledAttributes,G=c.attributeDivisors;Q[V]=1,ne[V]===0&&(n.enableVertexAttribArray(V),ne[V]=1),G[V]!==j&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,j),G[V]=j)}function C(){const V=c.newAttributes,j=c.enabledAttributes;for(let Q=0,ne=j.length;Q<ne;Q++)j[Q]!==V[Q]&&(n.disableVertexAttribArray(Q),j[Q]=0)}function R(V,j,Q,ne,G,J,Y){Y===!0?n.vertexAttribIPointer(V,j,Q,G,J):n.vertexAttribPointer(V,j,Q,ne,G,J)}function T(V,j,Q,ne){if(r.isWebGL2===!1&&(V.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const G=ne.attributes,J=Q.getAttributes(),Y=j.defaultAttributeValues;for(const X in J){const $=J[X];if($.location>=0){let re=G[X];if(re===void 0&&(X==="instanceMatrix"&&V.instanceMatrix&&(re=V.instanceMatrix),X==="instanceColor"&&V.instanceColor&&(re=V.instanceColor)),re!==void 0){const ie=re.normalized,ae=re.itemSize,ue=t.get(re);if(ue===void 0)continue;const fe=ue.buffer,_e=ue.type,Oe=ue.bytesPerElement,We=r.isWebGL2===!0&&(_e===n.INT||_e===n.UNSIGNED_INT||re.gpuType===SM);if(re.isInterleavedBufferAttribute){const xe=re.data,W=xe.stride,Ae=re.offset;if(xe.isInstancedInterleavedBuffer){for(let ge=0;ge<$.locationSize;ge++)M($.location+ge,xe.meshPerAttribute);V.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let ge=0;ge<$.locationSize;ge++)A($.location+ge);n.bindBuffer(n.ARRAY_BUFFER,fe);for(let ge=0;ge<$.locationSize;ge++)R($.location+ge,ae/$.locationSize,_e,ie,W*Oe,(Ae+ae/$.locationSize*ge)*Oe,We)}else{if(re.isInstancedBufferAttribute){for(let xe=0;xe<$.locationSize;xe++)M($.location+xe,re.meshPerAttribute);V.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let xe=0;xe<$.locationSize;xe++)A($.location+xe);n.bindBuffer(n.ARRAY_BUFFER,fe);for(let xe=0;xe<$.locationSize;xe++)R($.location+xe,ae/$.locationSize,_e,ie,ae*Oe,ae/$.locationSize*xe*Oe,We)}}else if(Y!==void 0){const ie=Y[X];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv($.location,ie);break;case 3:n.vertexAttrib3fv($.location,ie);break;case 4:n.vertexAttrib4fv($.location,ie);break;default:n.vertexAttrib1fv($.location,ie)}}}}C()}function b(){k();for(const V in a){const j=a[V];for(const Q in j){const ne=j[Q];for(const G in ne)v(ne[G].object),delete ne[G];delete j[Q]}delete a[V]}}function L(V){if(a[V.id]===void 0)return;const j=a[V.id];for(const Q in j){const ne=j[Q];for(const G in ne)v(ne[G].object),delete ne[G];delete j[Q]}delete a[V.id]}function O(V){for(const j in a){const Q=a[j];if(Q[V.id]===void 0)continue;const ne=Q[V.id];for(const G in ne)v(ne[G].object),delete ne[G];delete Q[V.id]}}function k(){z(),u=!0,c!==l&&(c=l,m(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:k,resetDefaultState:z,dispose:b,releaseStatesOfGeometry:L,releaseStatesOfProgram:O,initAttributes:S,enableAttribute:A,disableUnusedAttributes:C}}function BV(n,e,t,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,f){if(f===0)return;let d,m;if(i)d=n,m="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](s,c,u,f),t.update(u,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function LV(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=d>0,A=o||e.has("OES_texture_float"),M=S&&A,C=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:A,floatVertexTextures:M,maxSamples:C}}function DV(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Dl,a=new zt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const m=f.length!==0||d||r!==0||i;return i=d,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=u(f,d,0)},this.setState=function(f,d,m){const v=f.clippingPlanes,_=f.clipIntersection,y=f.clipShadows,g=n.get(f);if(!i||v===null||v.length===0||s&&!y)s?u(null):c();else{const x=s?0:r,S=x*4;let A=g.clippingState||null;l.value=A,A=u(v,d,S,m);for(let M=0;M!==S;++M)A[M]=t[M];g.clippingState=A,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,d,m,v){const _=f!==null?f.length:0;let y=null;if(_!==0){if(y=l.value,v!==!0||y===null){const g=m+_*4,x=d.matrixWorldInverse;a.getNormalMatrix(x),(y===null||y.length<g)&&(y=new Float32Array(g));for(let S=0,A=m;S!==_;++S,A+=4)o.copy(f[S]).applyMatrix4(x,a),o.normal.toArray(y,A),y[A+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,y}}function OV(n){let e=new WeakMap;function t(o,a){return a===Wd?o.mapping=Qa:a===Dm&&(o.mapping=uc),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Wd||a===Dm)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new NM(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Cc extends g0{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const dd=4,RR=[.125,.215,.35,.446,.526,.582],cu=20,MS=new Cc,PR=new it;let CS=null;const su=(1+Math.sqrt(5))/2,Ff=1/su,IR=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,su,Ff),new Z(0,su,-Ff),new Z(Ff,0,su),new Z(-Ff,0,su),new Z(su,Ff,0),new Z(-su,Ff,0)];class rE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){CS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=DR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=LR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CS),e.scissorTest=!1,xv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Qa||e.mapping===uc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CS=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:mn,minFilter:mn,generateMipmaps:!1,type:Mi,format:Ei,colorSpace:Do,depthBuffer:!1},i=BR(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BR(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=FV(s)),this._blurMaterial=UV(s,e,t)}return i}_compileMaterial(e){const t=new Un(this._lodPlanes[0],e);this._renderer.compile(t,MS)}_sceneToCubeUV(e,t,r,i){const a=new dr(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(PR),u.toneMapping=Ro,u.autoClear=!1;const m=new Wi({name:"PMREM.Background",side:si,depthWrite:!1,depthTest:!1}),v=new Un(new Mc,m);let _=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,_=!0):(m.color.copy(PR),_=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;xv(i,x*S,g>2?S:0,S,S),u.setRenderTarget(i),_&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Qa||e.mapping===uc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=DR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=LR());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Un(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;xv(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,MS)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=IR[(i-1)%IR.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Un(this._lodPlanes[i],c),d=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*cu-1),_=s/v,y=isFinite(s)?1+Math.floor(u*_):cu;y>cu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${cu}`);const g=[];let x=0;for(let R=0;R<cu;++R){const T=R/_,b=Math.exp(-T*T/2);g.push(b),R===0?x+=b:R<y&&(x+=2*b)}for(let R=0;R<g.length;R++)g[R]=g[R]/x;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=g,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:S}=this;d.dTheta.value=v,d.mipInt.value=S-r;const A=this._sizeLods[i],M=3*A*(i>S-dd?i-S+dd:0),C=4*(this._cubeSize-A);xv(t,M,C,3*A,2*A),l.setRenderTarget(t),l.render(f,MS)}}function FV(n){const e=[],t=[],r=[];let i=n;const s=n-dd+1+RR.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-dd?l=RR[o-n+dd-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,d=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,v=6,_=3,y=2,g=1,x=new Float32Array(_*v*m),S=new Float32Array(y*v*m),A=new Float32Array(g*v*m);for(let C=0;C<m;C++){const R=C%3*2/3-1,T=C>2?0:-1,b=[R,T,0,R+2/3,T,0,R+2/3,T+1,0,R,T,0,R+2/3,T+1,0,R,T+1,0];x.set(b,_*v*C),S.set(d,y*v*C);const L=[C,C,C,C,C,C];A.set(L,g*v*C)}const M=new Ft;M.setAttribute("position",new dn(x,_)),M.setAttribute("uv",new dn(S,y)),M.setAttribute("faceIndex",new dn(A,g)),e.push(M),i>dd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function BR(n,e,t){const r=new ws(n,e,t);return r.texture.mapping=mh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function xv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function UV(n,e,t){const r=new Float32Array(cu),i=new Z(0,1,0);return new As({name:"SphericalGaussianBlur",defines:{n:cu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:zM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function LR(){return new As({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function DR(){return new As({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function zM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kV(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Wd||l===Dm,u=l===Qa||l===uc;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new rE(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&i(f)){t===null&&(t=new rE(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function NV(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function zV(n,e,t,r){const i={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);for(const v in d.morphAttributes){const _=d.morphAttributes[v];for(let y=0,g=_.length;y<g;y++)e.remove(_[y])}d.removeEventListener("dispose",o),delete i[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const v in d)e.update(d[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const _=m[v];for(let y=0,g=_.length;y<g;y++)e.update(_[y],n.ARRAY_BUFFER)}}function c(f){const d=[],m=f.index,v=f.attributes.position;let _=0;if(m!==null){const x=m.array;_=m.version;for(let S=0,A=x.length;S<A;S+=3){const M=x[S+0],C=x[S+1],R=x[S+2];d.push(M,C,C,R,R,M)}}else{const x=v.array;_=v.version;for(let S=0,A=x.length/3-1;S<A;S+=3){const M=S+0,C=S+1,R=S+2;d.push(M,C,C,R,R,M)}}const y=new(qO(d)?UM:FM)(d,1);y.version=_;const g=s.get(f);g&&e.remove(g),s.set(f,y)}function u(f){const d=s.get(f);if(d){const m=f.index;m!==null&&d.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function GV(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,m){n.drawElements(s,m,a,d*l),t.update(m,s,1)}function f(d,m,v){if(v===0)return;let _,y;if(i)_=n,y="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[y](s,m,a,d*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function HV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function VV(n,e){return n[0]-e[0]}function WV(n,e){return Math.abs(e[1])-Math.abs(n[1])}function $V(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new hn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=m!==void 0?m.length:0;let _=s.get(u);if(_===void 0||_.count!==v){let V=function(){k.dispose(),s.delete(u),u.removeEventListener("dispose",V)};_!==void 0&&_.texture.dispose();const x=u.morphAttributes.position!==void 0,S=u.morphAttributes.normal!==void 0,A=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let T=0;x===!0&&(T=1),S===!0&&(T=2),A===!0&&(T=3);let b=u.attributes.position.count*T,L=1;b>e.maxTextureSize&&(L=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const O=new Float32Array(b*L*4*v),k=new u_(O,b,L,v);k.type=ii,k.needsUpdate=!0;const z=T*4;for(let j=0;j<v;j++){const Q=M[j],ne=C[j],G=R[j],J=b*L*4*j;for(let Y=0;Y<Q.count;Y++){const X=Y*z;x===!0&&(o.fromBufferAttribute(Q,Y),O[J+X+0]=o.x,O[J+X+1]=o.y,O[J+X+2]=o.z,O[J+X+3]=0),S===!0&&(o.fromBufferAttribute(ne,Y),O[J+X+4]=o.x,O[J+X+5]=o.y,O[J+X+6]=o.z,O[J+X+7]=0),A===!0&&(o.fromBufferAttribute(G,Y),O[J+X+8]=o.x,O[J+X+9]=o.y,O[J+X+10]=o.z,O[J+X+11]=G.itemSize===4?o.w:1)}}_={count:v,texture:k,size:new Ve(b,L)},s.set(u,_),u.addEventListener("dispose",V)}let y=0;for(let x=0;x<d.length;x++)y+=d[x];const g=u.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",g),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const m=d===void 0?0:d.length;let v=r[u.id];if(v===void 0||v.length!==m){v=[];for(let S=0;S<m;S++)v[S]=[S,0];r[u.id]=v}for(let S=0;S<m;S++){const A=v[S];A[0]=S,A[1]=d[S]}v.sort(WV);for(let S=0;S<8;S++)S<m&&v[S][1]?(a[S][0]=v[S][0],a[S][1]=v[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(VV);const _=u.morphAttributes.position,y=u.morphAttributes.normal;let g=0;for(let S=0;S<8;S++){const A=a[S],M=A[0],C=A[1];M!==Number.MAX_SAFE_INTEGER&&C?(_&&u.getAttribute("morphTarget"+S)!==_[M]&&u.setAttribute("morphTarget"+S,_[M]),y&&u.getAttribute("morphNormal"+S)!==y[M]&&u.setAttribute("morphNormal"+S,y[M]),i[S]=C,g+=C):(_&&u.hasAttribute("morphTarget"+S)===!0&&u.deleteAttribute("morphTarget"+S),y&&u.hasAttribute("morphNormal"+S)===!0&&u.deleteAttribute("morphNormal"+S),i[S]=0)}const x=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",x),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function jV(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);return i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER)),f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const i5=new Tn,s5=new u_,o5=new OM,a5=new v0,OR=[],FR=[],UR=new Float32Array(16),kR=new Float32Array(9),NR=new Float32Array(4);function vh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=OR[i];if(s===void 0&&(s=new Float32Array(i),OR[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Mr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Cr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function d_(n,e){let t=FR[e];t===void 0&&(t=new Int32Array(e),FR[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function XV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function JV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mr(t,e))return;n.uniform2fv(this.addr,e),Cr(t,e)}}function YV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mr(t,e))return;n.uniform3fv(this.addr,e),Cr(t,e)}}function KV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mr(t,e))return;n.uniform4fv(this.addr,e),Cr(t,e)}}function ZV(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Cr(t,e)}else{if(Mr(t,r))return;NR.set(r),n.uniformMatrix2fv(this.addr,!1,NR),Cr(t,r)}}function QV(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Cr(t,e)}else{if(Mr(t,r))return;kR.set(r),n.uniformMatrix3fv(this.addr,!1,kR),Cr(t,r)}}function qV(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Cr(t,e)}else{if(Mr(t,r))return;UR.set(r),n.uniformMatrix4fv(this.addr,!1,UR),Cr(t,r)}}function eW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function tW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mr(t,e))return;n.uniform2iv(this.addr,e),Cr(t,e)}}function nW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mr(t,e))return;n.uniform3iv(this.addr,e),Cr(t,e)}}function rW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mr(t,e))return;n.uniform4iv(this.addr,e),Cr(t,e)}}function iW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function sW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mr(t,e))return;n.uniform2uiv(this.addr,e),Cr(t,e)}}function oW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mr(t,e))return;n.uniform3uiv(this.addr,e),Cr(t,e)}}function aW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mr(t,e))return;n.uniform4uiv(this.addr,e),Cr(t,e)}}function lW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||i5,i)}function cW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||o5,i)}function uW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||a5,i)}function fW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||s5,i)}function dW(n){switch(n){case 5126:return XV;case 35664:return JV;case 35665:return YV;case 35666:return KV;case 35674:return ZV;case 35675:return QV;case 35676:return qV;case 5124:case 35670:return eW;case 35667:case 35671:return tW;case 35668:case 35672:return nW;case 35669:case 35673:return rW;case 5125:return iW;case 36294:return sW;case 36295:return oW;case 36296:return aW;case 35678:case 36198:case 36298:case 36306:case 35682:return lW;case 35679:case 36299:case 36307:return cW;case 35680:case 36300:case 36308:case 36293:return uW;case 36289:case 36303:case 36311:case 36292:return fW}}function hW(n,e){n.uniform1fv(this.addr,e)}function pW(n,e){const t=vh(e,this.size,2);n.uniform2fv(this.addr,t)}function mW(n,e){const t=vh(e,this.size,3);n.uniform3fv(this.addr,t)}function gW(n,e){const t=vh(e,this.size,4);n.uniform4fv(this.addr,t)}function vW(n,e){const t=vh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function yW(n,e){const t=vh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function _W(n,e){const t=vh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function xW(n,e){n.uniform1iv(this.addr,e)}function SW(n,e){n.uniform2iv(this.addr,e)}function wW(n,e){n.uniform3iv(this.addr,e)}function AW(n,e){n.uniform4iv(this.addr,e)}function EW(n,e){n.uniform1uiv(this.addr,e)}function MW(n,e){n.uniform2uiv(this.addr,e)}function CW(n,e){n.uniform3uiv(this.addr,e)}function bW(n,e){n.uniform4uiv(this.addr,e)}function TW(n,e,t){const r=this.cache,i=e.length,s=d_(t,i);Mr(r,s)||(n.uniform1iv(this.addr,s),Cr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||i5,s[o])}function RW(n,e,t){const r=this.cache,i=e.length,s=d_(t,i);Mr(r,s)||(n.uniform1iv(this.addr,s),Cr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||o5,s[o])}function PW(n,e,t){const r=this.cache,i=e.length,s=d_(t,i);Mr(r,s)||(n.uniform1iv(this.addr,s),Cr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||a5,s[o])}function IW(n,e,t){const r=this.cache,i=e.length,s=d_(t,i);Mr(r,s)||(n.uniform1iv(this.addr,s),Cr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||s5,s[o])}function BW(n){switch(n){case 5126:return hW;case 35664:return pW;case 35665:return mW;case 35666:return gW;case 35674:return vW;case 35675:return yW;case 35676:return _W;case 5124:case 35670:return xW;case 35667:case 35671:return SW;case 35668:case 35672:return wW;case 35669:case 35673:return AW;case 5125:return EW;case 36294:return MW;case 36295:return CW;case 36296:return bW;case 35678:case 36198:case 36298:case 36306:case 35682:return TW;case 35679:case 36299:case 36307:return RW;case 35680:case 36300:case 36308:case 36293:return PW;case 36289:case 36303:case 36311:case 36292:return IW}}class LW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=dW(t.type)}}class DW{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=BW(t.type)}}class OW{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const bS=/(\w+)(\])?(\[|\.)?/g;function zR(n,e){n.seq.push(e),n.map[e.id]=e}function FW(n,e,t){const r=n.name,i=r.length;for(bS.lastIndex=0;;){const s=bS.exec(r),o=bS.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){zR(t,c===void 0?new LW(a,n,e):new DW(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new OW(a),zR(t,f)),t=f}}}class C1{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);FW(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function GR(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let UW=0;function kW(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function NW(n){switch(n){case Do:return["Linear","( value )"];case kt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function HR(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+kW(n.getShaderSource(e),o)}else return i}function zW(n,e){const t=NW(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function GW(n,e){let t;switch(e){case MO:t="Linear";break;case CO:t="Reinhard";break;case bO:t="OptimizedCineon";break;case xM:t="ACESFilmic";break;case TO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function HW(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zp).join(`
`)}function VW(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function WW(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function zp(n){return n!==""}function VR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function WR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $W=/^[ \t]*#include +<([\w\d./]+)>/gm;function iE(n){return n.replace($W,jW)}function jW(n,e){const t=Nt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return iE(t)}const XW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $R(n){return n.replace(XW,JW)}function JW(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function jR(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function YW(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===s_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===em?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===So&&(e="SHADOWMAP_TYPE_VSM"),e}function KW(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Qa:case uc:e="ENVMAP_TYPE_CUBE";break;case mh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ZW(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case uc:e="ENVMAP_MODE_REFRACTION";break}return e}function QW(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case p0:e="ENVMAP_BLENDING_MULTIPLY";break;case AO:e="ENVMAP_BLENDING_MIX";break;case EO:e="ENVMAP_BLENDING_ADD";break}return e}function qW(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function e$(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=YW(t),c=KW(t),u=ZW(t),f=QW(t),d=qW(t),m=t.isWebGL2?"":HW(t),v=VW(s),_=i.createProgram();let y,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(zp).join(`
`),y.length>0&&(y+=`
`),g=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(zp).join(`
`),g.length>0&&(g+=`
`)):(y=[jR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(zp).join(`
`),g=[m,jR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ro?"#define TONE_MAPPING":"",t.toneMapping!==Ro?Nt.tonemapping_pars_fragment:"",t.toneMapping!==Ro?GW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nt.encodings_pars_fragment,zW("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(zp).join(`
`)),o=iE(o),o=VR(o,t),o=WR(o,t),a=iE(a),a=VR(a,t),a=WR(a,t),o=$R(o),a=$R(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===tE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===tE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=x+y+o,A=x+g+a,M=GR(i,i.VERTEX_SHADER,S),C=GR(i,i.FRAGMENT_SHADER,A);if(i.attachShader(_,M),i.attachShader(_,C),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),n.debug.checkShaderErrors){const b=i.getProgramInfoLog(_).trim(),L=i.getShaderInfoLog(M).trim(),O=i.getShaderInfoLog(C).trim();let k=!0,z=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(k=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,M,C);else{const V=HR(i,M,"vertex"),j=HR(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Program Info Log: `+b+`
`+V+`
`+j)}else b!==""?console.warn("THREE.WebGLProgram: Program Info Log:",b):(L===""||O==="")&&(z=!1);z&&(this.diagnostics={runnable:k,programLog:b,vertexShader:{log:L,prefix:y},fragmentShader:{log:O,prefix:g}})}i.deleteShader(M),i.deleteShader(C);let R;this.getUniforms=function(){return R===void 0&&(R=new C1(i,_)),R};let T;return this.getAttributes=function(){return T===void 0&&(T=WW(i,_)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=UW++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=C,this}let t$=0;class n${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new r$(e),t.set(e,r)),r}}class r${constructor(e){this.id=t$++,this.code=e,this.usedTimes=0}}function i$(n,e,t,r,i,s,o){const a=new Mu,l=new n$,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(b){return b===0?"uv":`uv${b}`}function y(b,L,O,k,z){const V=k.fog,j=z.geometry,Q=b.isMeshStandardMaterial?k.environment:null,ne=(b.isMeshStandardMaterial?t:e).get(b.envMap||Q),G=ne&&ne.mapping===mh?ne.image.height:null,J=v[b.type];b.precision!==null&&(m=i.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const Y=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,X=Y!==void 0?Y.length:0;let $=0;j.morphAttributes.position!==void 0&&($=1),j.morphAttributes.normal!==void 0&&($=2),j.morphAttributes.color!==void 0&&($=3);let re,ie,ae,ue;if(J){const jt=Eo[J];re=jt.vertexShader,ie=jt.fragmentShader}else re=b.vertexShader,ie=b.fragmentShader,l.update(b),ae=l.getVertexShaderID(b),ue=l.getFragmentShaderID(b);const fe=n.getRenderTarget(),_e=z.isInstancedMesh===!0,Oe=!!b.map,We=!!b.matcap,xe=!!ne,W=!!b.aoMap,Ae=!!b.lightMap,ge=!!b.bumpMap,ve=!!b.normalMap,me=!!b.displacementMap,Ge=!!b.emissiveMap,Se=!!b.metalnessMap,Fe=!!b.roughnessMap,Ne=b.anisotropy>0,Ie=b.clearcoat>0,st=b.iridescence>0,N=b.sheen>0,U=b.transmission>0,le=Ne&&!!b.anisotropyMap,Pe=Ie&&!!b.clearcoatMap,Te=Ie&&!!b.clearcoatNormalMap,Re=Ie&&!!b.clearcoatRoughnessMap,$e=st&&!!b.iridescenceMap,He=st&&!!b.iridescenceThicknessMap,be=N&&!!b.sheenColorMap,Je=N&&!!b.sheenRoughnessMap,Ze=!!b.specularMap,je=!!b.specularColorMap,ze=!!b.specularIntensityMap,Xe=U&&!!b.transmissionMap,tt=U&&!!b.thicknessMap,ft=!!b.gradientMap,se=!!b.alphaMap,ye=b.alphaTest>0,we=!!b.extensions,Ke=!!j.attributes.uv1,nt=!!j.attributes.uv2,It=!!j.attributes.uv3;return{isWebGL2:u,shaderID:J,shaderType:b.type,shaderName:b.name,vertexShader:re,fragmentShader:ie,defines:b.defines,customVertexShaderID:ae,customFragmentShaderID:ue,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,instancing:_e,instancingColor:_e&&z.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:fe===null?n.outputColorSpace:fe.isXRRenderTarget===!0?fe.texture.colorSpace:Do,map:Oe,matcap:We,envMap:xe,envMapMode:xe&&ne.mapping,envMapCubeUVHeight:G,aoMap:W,lightMap:Ae,bumpMap:ge,normalMap:ve,displacementMap:d&&me,emissiveMap:Ge,normalMapObjectSpace:ve&&b.normalMapType===HO,normalMapTangentSpace:ve&&b.normalMapType===Ec,metalnessMap:Se,roughnessMap:Fe,anisotropy:Ne,anisotropyMap:le,clearcoat:Ie,clearcoatMap:Pe,clearcoatNormalMap:Te,clearcoatRoughnessMap:Re,iridescence:st,iridescenceMap:$e,iridescenceThicknessMap:He,sheen:N,sheenColorMap:be,sheenRoughnessMap:Je,specularMap:Ze,specularColorMap:je,specularIntensityMap:ze,transmission:U,transmissionMap:Xe,thicknessMap:tt,gradientMap:ft,opaque:b.transparent===!1&&b.blending===ja,alphaMap:se,alphaTest:ye,combine:b.combine,mapUv:Oe&&_(b.map.channel),aoMapUv:W&&_(b.aoMap.channel),lightMapUv:Ae&&_(b.lightMap.channel),bumpMapUv:ge&&_(b.bumpMap.channel),normalMapUv:ve&&_(b.normalMap.channel),displacementMapUv:me&&_(b.displacementMap.channel),emissiveMapUv:Ge&&_(b.emissiveMap.channel),metalnessMapUv:Se&&_(b.metalnessMap.channel),roughnessMapUv:Fe&&_(b.roughnessMap.channel),anisotropyMapUv:le&&_(b.anisotropyMap.channel),clearcoatMapUv:Pe&&_(b.clearcoatMap.channel),clearcoatNormalMapUv:Te&&_(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&_(b.clearcoatRoughnessMap.channel),iridescenceMapUv:$e&&_(b.iridescenceMap.channel),iridescenceThicknessMapUv:He&&_(b.iridescenceThicknessMap.channel),sheenColorMapUv:be&&_(b.sheenColorMap.channel),sheenRoughnessMapUv:Je&&_(b.sheenRoughnessMap.channel),specularMapUv:Ze&&_(b.specularMap.channel),specularColorMapUv:je&&_(b.specularColorMap.channel),specularIntensityMapUv:ze&&_(b.specularIntensityMap.channel),transmissionMapUv:Xe&&_(b.transmissionMap.channel),thicknessMapUv:tt&&_(b.thicknessMap.channel),alphaMapUv:se&&_(b.alphaMap.channel),vertexTangents:!!j.attributes.tangent&&(ve||Ne),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,vertexUv1s:Ke,vertexUv2s:nt,vertexUv3s:It,pointsUvs:z.isPoints===!0&&!!j.attributes.uv&&(Oe||se),fog:!!V,useFog:b.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:z.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:$,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:Ro,useLegacyLights:n.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Ai,flipSided:b.side===si,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:we&&b.extensions.derivatives===!0,extensionFragDepth:we&&b.extensions.fragDepth===!0,extensionDrawBuffers:we&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:we&&b.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function g(b){const L=[];if(b.shaderID?L.push(b.shaderID):(L.push(b.customVertexShaderID),L.push(b.customFragmentShaderID)),b.defines!==void 0)for(const O in b.defines)L.push(O),L.push(b.defines[O]);return b.isRawShaderMaterial===!1&&(x(L,b),S(L,b),L.push(n.outputColorSpace)),L.push(b.customProgramCacheKey),L.join()}function x(b,L){b.push(L.precision),b.push(L.outputColorSpace),b.push(L.envMapMode),b.push(L.envMapCubeUVHeight),b.push(L.mapUv),b.push(L.alphaMapUv),b.push(L.lightMapUv),b.push(L.aoMapUv),b.push(L.bumpMapUv),b.push(L.normalMapUv),b.push(L.displacementMapUv),b.push(L.emissiveMapUv),b.push(L.metalnessMapUv),b.push(L.roughnessMapUv),b.push(L.anisotropyMapUv),b.push(L.clearcoatMapUv),b.push(L.clearcoatNormalMapUv),b.push(L.clearcoatRoughnessMapUv),b.push(L.iridescenceMapUv),b.push(L.iridescenceThicknessMapUv),b.push(L.sheenColorMapUv),b.push(L.sheenRoughnessMapUv),b.push(L.specularMapUv),b.push(L.specularColorMapUv),b.push(L.specularIntensityMapUv),b.push(L.transmissionMapUv),b.push(L.thicknessMapUv),b.push(L.combine),b.push(L.fogExp2),b.push(L.sizeAttenuation),b.push(L.morphTargetsCount),b.push(L.morphAttributeCount),b.push(L.numDirLights),b.push(L.numPointLights),b.push(L.numSpotLights),b.push(L.numSpotLightMaps),b.push(L.numHemiLights),b.push(L.numRectAreaLights),b.push(L.numDirLightShadows),b.push(L.numPointLightShadows),b.push(L.numSpotLightShadows),b.push(L.numSpotLightShadowsWithMaps),b.push(L.shadowMapType),b.push(L.toneMapping),b.push(L.numClippingPlanes),b.push(L.numClipIntersection),b.push(L.depthPacking)}function S(b,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),L.anisotropy&&a.enable(17),b.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),b.push(a.mask)}function A(b){const L=v[b.type];let O;if(L){const k=Eo[L];O=kM.clone(k.uniforms)}else O=b.uniforms;return O}function M(b,L){let O;for(let k=0,z=c.length;k<z;k++){const V=c[k];if(V.cacheKey===L){O=V,++O.usedTimes;break}}return O===void 0&&(O=new e$(n,L,b,s),c.push(O)),O}function C(b){if(--b.usedTimes===0){const L=c.indexOf(b);c[L]=c[c.length-1],c.pop(),b.destroy()}}function R(b){l.remove(b)}function T(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:A,acquireProgram:M,releaseProgram:C,releaseShaderCache:R,programs:c,dispose:T}}function s$(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function o$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function XR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function JR(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,d,m,v,_,y){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:d,material:m,groupOrder:v,renderOrder:f.renderOrder,z:_,group:y},n[e]=g):(g.id=f.id,g.object=f,g.geometry=d,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=_,g.group=y),e++,g}function a(f,d,m,v,_,y){const g=o(f,d,m,v,_,y);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(f,d,m,v,_,y){const g=o(f,d,m,v,_,y);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(f,d){t.length>1&&t.sort(f||o$),r.length>1&&r.sort(d||XR),i.length>1&&i.sort(d||XR)}function u(){for(let f=e,d=n.length;f<d;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function a$(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new JR,n.set(r,[o])):i>=s.length?(o=new JR,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function l$(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new it};break;case"SpotLight":t={position:new Z,direction:new Z,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new it,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new it,groundColor:new it};break;case"RectAreaLight":t={color:new it,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function c$(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let u$=0;function f$(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function d$(n,e){const t=new l$,r=c$(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new Z);const s=new Z,o=new Pt,a=new Pt;function l(u,f){let d=0,m=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let _=0,y=0,g=0,x=0,S=0,A=0,M=0,C=0,R=0,T=0;u.sort(f$);const b=f===!0?Math.PI:1;for(let O=0,k=u.length;O<k;O++){const z=u[O],V=z.color,j=z.intensity,Q=z.distance,ne=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=V.r*j*b,m+=V.g*j*b,v+=V.b*j*b;else if(z.isLightProbe)for(let G=0;G<9;G++)i.probe[G].addScaledVector(z.sh.coefficients[G],j);else if(z.isDirectionalLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity*b),z.castShadow){const J=z.shadow,Y=r.get(z);Y.shadowBias=J.bias,Y.shadowNormalBias=J.normalBias,Y.shadowRadius=J.radius,Y.shadowMapSize=J.mapSize,i.directionalShadow[_]=Y,i.directionalShadowMap[_]=ne,i.directionalShadowMatrix[_]=z.shadow.matrix,A++}i.directional[_]=G,_++}else if(z.isSpotLight){const G=t.get(z);G.position.setFromMatrixPosition(z.matrixWorld),G.color.copy(V).multiplyScalar(j*b),G.distance=Q,G.coneCos=Math.cos(z.angle),G.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),G.decay=z.decay,i.spot[g]=G;const J=z.shadow;if(z.map&&(i.spotLightMap[R]=z.map,R++,J.updateMatrices(z),z.castShadow&&T++),i.spotLightMatrix[g]=J.matrix,z.castShadow){const Y=r.get(z);Y.shadowBias=J.bias,Y.shadowNormalBias=J.normalBias,Y.shadowRadius=J.radius,Y.shadowMapSize=J.mapSize,i.spotShadow[g]=Y,i.spotShadowMap[g]=ne,C++}g++}else if(z.isRectAreaLight){const G=t.get(z);G.color.copy(V).multiplyScalar(j),G.halfWidth.set(z.width*.5,0,0),G.halfHeight.set(0,z.height*.5,0),i.rectArea[x]=G,x++}else if(z.isPointLight){const G=t.get(z);if(G.color.copy(z.color).multiplyScalar(z.intensity*b),G.distance=z.distance,G.decay=z.decay,z.castShadow){const J=z.shadow,Y=r.get(z);Y.shadowBias=J.bias,Y.shadowNormalBias=J.normalBias,Y.shadowRadius=J.radius,Y.shadowMapSize=J.mapSize,Y.shadowCameraNear=J.camera.near,Y.shadowCameraFar=J.camera.far,i.pointShadow[y]=Y,i.pointShadowMap[y]=ne,i.pointShadowMatrix[y]=z.shadow.matrix,M++}i.point[y]=G,y++}else if(z.isHemisphereLight){const G=t.get(z);G.skyColor.copy(z.color).multiplyScalar(j*b),G.groundColor.copy(z.groundColor).multiplyScalar(j*b),i.hemi[S]=G,S++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=m,i.ambient[2]=v;const L=i.hash;(L.directionalLength!==_||L.pointLength!==y||L.spotLength!==g||L.rectAreaLength!==x||L.hemiLength!==S||L.numDirectionalShadows!==A||L.numPointShadows!==M||L.numSpotShadows!==C||L.numSpotMaps!==R)&&(i.directional.length=_,i.spot.length=g,i.rectArea.length=x,i.point.length=y,i.hemi.length=S,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=C+R-T,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=T,L.directionalLength=_,L.pointLength=y,L.spotLength=g,L.rectAreaLength=x,L.hemiLength=S,L.numDirectionalShadows=A,L.numPointShadows=M,L.numSpotShadows=C,L.numSpotMaps=R,i.version=u$++)}function c(u,f){let d=0,m=0,v=0,_=0,y=0;const g=f.matrixWorldInverse;for(let x=0,S=u.length;x<S;x++){const A=u[x];if(A.isDirectionalLight){const M=i.directional[d];M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),d++}else if(A.isSpotLight){const M=i.spot[v];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),M.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(g),v++}else if(A.isRectAreaLight){const M=i.rectArea[_];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),a.identity(),o.copy(A.matrixWorld),o.premultiply(g),a.extractRotation(o),M.halfWidth.set(A.width*.5,0,0),M.halfHeight.set(0,A.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),_++}else if(A.isPointLight){const M=i.point[m];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(g),m++}else if(A.isHemisphereLight){const M=i.hemi[y];M.direction.setFromMatrixPosition(A.matrixWorld),M.direction.transformDirection(g),y++}}}return{setup:l,setupView:c,state:i}}function YR(n,e){const t=new d$(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function c(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function h$(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new YR(n,e),t.set(s,[l])):o>=a.length?(l=new YR(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class y0 extends Sr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class h_ extends Sr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const p$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,m$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function g$(n,e,t){let r=new f_;const i=new Ve,s=new Ve,o=new hn,a=new y0({depthPacking:IM}),l=new h_,c={},u=t.maxTextureSize,f={[Lo]:si,[si]:Lo,[Ai]:Ai},d=new As({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:p$,fragmentShader:m$}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const v=new Ft;v.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Un(v,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s_;let g=this.type;this.render=function(M,C,R){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||M.length===0)return;const T=n.getRenderTarget(),b=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),O=n.state;O.setBlending($a),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const k=g!==So&&this.type===So,z=g===So&&this.type!==So;for(let V=0,j=M.length;V<j;V++){const Q=M[V],ne=Q.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;i.copy(ne.mapSize);const G=ne.getFrameExtents();if(i.multiply(G),s.copy(ne.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/G.x),i.x=s.x*G.x,ne.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/G.y),i.y=s.y*G.y,ne.mapSize.y=s.y)),ne.map===null||k===!0||z===!0){const Y=this.type!==So?{minFilter:er,magFilter:er}:{};ne.map!==null&&ne.map.dispose(),ne.map=new ws(i.x,i.y,Y),ne.map.texture.name=Q.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const J=ne.getViewportCount();for(let Y=0;Y<J;Y++){const X=ne.getViewport(Y);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),O.viewport(o),ne.updateMatrices(Q,Y),r=ne.getFrustum(),A(C,R,ne.camera,Q,this.type)}ne.isPointLightShadow!==!0&&this.type===So&&x(ne,R),ne.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(T,b,L)};function x(M,C){const R=e.update(_);d.defines.VSM_SAMPLES!==M.blurSamples&&(d.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new ws(i.x,i.y)),d.uniforms.shadow_pass.value=M.map.texture,d.uniforms.resolution.value=M.mapSize,d.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(C,null,R,d,_,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(C,null,R,m,_,null)}function S(M,C,R,T){let b=null;const L=R.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(L!==void 0)b=L;else if(b=R.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const O=b.uuid,k=C.uuid;let z=c[O];z===void 0&&(z={},c[O]=z);let V=z[k];V===void 0&&(V=b.clone(),z[k]=V),b=V}if(b.visible=C.visible,b.wireframe=C.wireframe,T===So?b.side=C.shadowSide!==null?C.shadowSide:C.side:b.side=C.shadowSide!==null?C.shadowSide:f[C.side],b.alphaMap=C.alphaMap,b.alphaTest=C.alphaTest,b.map=C.map,b.clipShadows=C.clipShadows,b.clippingPlanes=C.clippingPlanes,b.clipIntersection=C.clipIntersection,b.displacementMap=C.displacementMap,b.displacementScale=C.displacementScale,b.displacementBias=C.displacementBias,b.wireframeLinewidth=C.wireframeLinewidth,b.linewidth=C.linewidth,R.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const O=n.properties.get(b);O.light=R}return b}function A(M,C,R,T,b){if(M.visible===!1)return;if(M.layers.test(C.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&b===So)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,M.matrixWorld);const k=e.update(M),z=M.material;if(Array.isArray(z)){const V=k.groups;for(let j=0,Q=V.length;j<Q;j++){const ne=V[j],G=z[ne.materialIndex];if(G&&G.visible){const J=S(M,G,T,b);n.renderBufferDirect(R,null,k,J,M,ne)}}}else if(z.visible){const V=S(M,z,T,b);n.renderBufferDirect(R,null,k,V,M,null)}}const O=M.children;for(let k=0,z=O.length;k<z;k++)A(O[k],C,R,T,b)}}function v$(n,e,t){const r=t.isWebGL2;function i(){let se=!1;const ye=new hn;let we=null;const Ke=new hn(0,0,0,0);return{setMask:function(nt){we!==nt&&!se&&(n.colorMask(nt,nt,nt,nt),we=nt)},setLocked:function(nt){se=nt},setClear:function(nt,It,Ht,jt,Qt){Qt===!0&&(nt*=jt,It*=jt,Ht*=jt),ye.set(nt,It,Ht,jt),Ke.equals(ye)===!1&&(n.clearColor(nt,It,Ht,jt),Ke.copy(ye))},reset:function(){se=!1,we=null,Ke.set(-1,0,0,0)}}}function s(){let se=!1,ye=null,we=null,Ke=null;return{setTest:function(nt){nt?fe(n.DEPTH_TEST):_e(n.DEPTH_TEST)},setMask:function(nt){ye!==nt&&!se&&(n.depthMask(nt),ye=nt)},setFunc:function(nt){if(we!==nt){switch(nt){case gO:n.depthFunc(n.NEVER);break;case vO:n.depthFunc(n.ALWAYS);break;case yO:n.depthFunc(n.LESS);break;case sy:n.depthFunc(n.LEQUAL);break;case _O:n.depthFunc(n.EQUAL);break;case xO:n.depthFunc(n.GEQUAL);break;case SO:n.depthFunc(n.GREATER);break;case wO:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}we=nt}},setLocked:function(nt){se=nt},setClear:function(nt){Ke!==nt&&(n.clearDepth(nt),Ke=nt)},reset:function(){se=!1,ye=null,we=null,Ke=null}}}function o(){let se=!1,ye=null,we=null,Ke=null,nt=null,It=null,Ht=null,jt=null,Qt=null;return{setTest:function(rn){se||(rn?fe(n.STENCIL_TEST):_e(n.STENCIL_TEST))},setMask:function(rn){ye!==rn&&!se&&(n.stencilMask(rn),ye=rn)},setFunc:function(rn,Yt,Ut){(we!==rn||Ke!==Yt||nt!==Ut)&&(n.stencilFunc(rn,Yt,Ut),we=rn,Ke=Yt,nt=Ut)},setOp:function(rn,Yt,Ut){(It!==rn||Ht!==Yt||jt!==Ut)&&(n.stencilOp(rn,Yt,Ut),It=rn,Ht=Yt,jt=Ut)},setLocked:function(rn){se=rn},setClear:function(rn){Qt!==rn&&(n.clearStencil(rn),Qt=rn)},reset:function(){se=!1,ye=null,we=null,Ke=null,nt=null,It=null,Ht=null,jt=null,Qt=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let d={},m={},v=new WeakMap,_=[],y=null,g=!1,x=null,S=null,A=null,M=null,C=null,R=null,T=null,b=!1,L=null,O=null,k=null,z=null,V=null;const j=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,ne=0;const G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(G)[1]),Q=ne>=1):G.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Q=ne>=2);let J=null,Y={};const X=n.getParameter(n.SCISSOR_BOX),$=n.getParameter(n.VIEWPORT),re=new hn().fromArray(X),ie=new hn().fromArray($);function ae(se,ye,we,Ke){const nt=new Uint8Array(4),It=n.createTexture();n.bindTexture(se,It),n.texParameteri(se,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(se,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ht=0;Ht<we;Ht++)r&&(se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY)?n.texImage3D(ye,0,n.RGBA,1,1,Ke,0,n.RGBA,n.UNSIGNED_BYTE,nt):n.texImage2D(ye+Ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,nt);return It}const ue={};ue[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),ue[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ue[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ue[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),fe(n.DEPTH_TEST),l.setFunc(sy),me(!1),Ge(CA),fe(n.CULL_FACE),ge($a);function fe(se){d[se]!==!0&&(n.enable(se),d[se]=!0)}function _e(se){d[se]!==!1&&(n.disable(se),d[se]=!1)}function Oe(se,ye){return m[se]!==ye?(n.bindFramebuffer(se,ye),m[se]=ye,r&&(se===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=ye),se===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=ye)),!0):!1}function We(se,ye){let we=_,Ke=!1;if(se)if(we=v.get(ye),we===void 0&&(we=[],v.set(ye,we)),se.isWebGLMultipleRenderTargets){const nt=se.texture;if(we.length!==nt.length||we[0]!==n.COLOR_ATTACHMENT0){for(let It=0,Ht=nt.length;It<Ht;It++)we[It]=n.COLOR_ATTACHMENT0+It;we.length=nt.length,Ke=!0}}else we[0]!==n.COLOR_ATTACHMENT0&&(we[0]=n.COLOR_ATTACHMENT0,Ke=!0);else we[0]!==n.BACK&&(we[0]=n.BACK,Ke=!0);Ke&&(t.isWebGL2?n.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function xe(se){return y!==se?(n.useProgram(se),y=se,!0):!1}const W={[lu]:n.FUNC_ADD,[sO]:n.FUNC_SUBTRACT,[oO]:n.FUNC_REVERSE_SUBTRACT};if(r)W[PA]=n.MIN,W[IA]=n.MAX;else{const se=e.get("EXT_blend_minmax");se!==null&&(W[PA]=se.MIN_EXT,W[IA]=se.MAX_EXT)}const Ae={[aO]:n.ZERO,[lO]:n.ONE,[cO]:n.SRC_COLOR,[yM]:n.SRC_ALPHA,[mO]:n.SRC_ALPHA_SATURATE,[hO]:n.DST_COLOR,[fO]:n.DST_ALPHA,[uO]:n.ONE_MINUS_SRC_COLOR,[_M]:n.ONE_MINUS_SRC_ALPHA,[pO]:n.ONE_MINUS_DST_COLOR,[dO]:n.ONE_MINUS_DST_ALPHA};function ge(se,ye,we,Ke,nt,It,Ht,jt){if(se===$a){g===!0&&(_e(n.BLEND),g=!1);return}if(g===!1&&(fe(n.BLEND),g=!0),se!==iO){if(se!==x||jt!==b){if((S!==lu||C!==lu)&&(n.blendEquation(n.FUNC_ADD),S=lu,C=lu),jt)switch(se){case ja:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bA:n.blendFunc(n.ONE,n.ONE);break;case TA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case RA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case ja:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case TA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case RA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}A=null,M=null,R=null,T=null,x=se,b=jt}return}nt=nt||ye,It=It||we,Ht=Ht||Ke,(ye!==S||nt!==C)&&(n.blendEquationSeparate(W[ye],W[nt]),S=ye,C=nt),(we!==A||Ke!==M||It!==R||Ht!==T)&&(n.blendFuncSeparate(Ae[we],Ae[Ke],Ae[It],Ae[Ht]),A=we,M=Ke,R=It,T=Ht),x=se,b=!1}function ve(se,ye){se.side===Ai?_e(n.CULL_FACE):fe(n.CULL_FACE);let we=se.side===si;ye&&(we=!we),me(we),se.blending===ja&&se.transparent===!1?ge($a):ge(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.premultipliedAlpha),l.setFunc(se.depthFunc),l.setTest(se.depthTest),l.setMask(se.depthWrite),a.setMask(se.colorWrite);const Ke=se.stencilWrite;c.setTest(Ke),Ke&&(c.setMask(se.stencilWriteMask),c.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),c.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),Fe(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?fe(n.SAMPLE_ALPHA_TO_COVERAGE):_e(n.SAMPLE_ALPHA_TO_COVERAGE)}function me(se){L!==se&&(se?n.frontFace(n.CW):n.frontFace(n.CCW),L=se)}function Ge(se){se!==tO?(fe(n.CULL_FACE),se!==O&&(se===CA?n.cullFace(n.BACK):se===nO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):_e(n.CULL_FACE),O=se}function Se(se){se!==k&&(Q&&n.lineWidth(se),k=se)}function Fe(se,ye,we){se?(fe(n.POLYGON_OFFSET_FILL),(z!==ye||V!==we)&&(n.polygonOffset(ye,we),z=ye,V=we)):_e(n.POLYGON_OFFSET_FILL)}function Ne(se){se?fe(n.SCISSOR_TEST):_e(n.SCISSOR_TEST)}function Ie(se){se===void 0&&(se=n.TEXTURE0+j-1),J!==se&&(n.activeTexture(se),J=se)}function st(se,ye,we){we===void 0&&(J===null?we=n.TEXTURE0+j-1:we=J);let Ke=Y[we];Ke===void 0&&(Ke={type:void 0,texture:void 0},Y[we]=Ke),(Ke.type!==se||Ke.texture!==ye)&&(J!==we&&(n.activeTexture(we),J=we),n.bindTexture(se,ye||ue[se]),Ke.type=se,Ke.texture=ye)}function N(){const se=Y[J];se!==void 0&&se.type!==void 0&&(n.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function U(){try{n.compressedTexImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Pe(){try{n.texSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Te(){try{n.texSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function $e(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function He(){try{n.texStorage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function be(){try{n.texStorage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Je(){try{n.texImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function je(se){re.equals(se)===!1&&(n.scissor(se.x,se.y,se.z,se.w),re.copy(se))}function ze(se){ie.equals(se)===!1&&(n.viewport(se.x,se.y,se.z,se.w),ie.copy(se))}function Xe(se,ye){let we=f.get(ye);we===void 0&&(we=new WeakMap,f.set(ye,we));let Ke=we.get(se);Ke===void 0&&(Ke=n.getUniformBlockIndex(ye,se.name),we.set(se,Ke))}function tt(se,ye){const Ke=f.get(ye).get(se);u.get(ye)!==Ke&&(n.uniformBlockBinding(ye,Ke,se.__bindingPointIndex),u.set(ye,Ke))}function ft(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},J=null,Y={},m={},v=new WeakMap,_=[],y=null,g=!1,x=null,S=null,A=null,M=null,C=null,R=null,T=null,b=!1,L=null,O=null,k=null,z=null,V=null,re.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:fe,disable:_e,bindFramebuffer:Oe,drawBuffers:We,useProgram:xe,setBlending:ge,setMaterial:ve,setFlipSided:me,setCullFace:Ge,setLineWidth:Se,setPolygonOffset:Fe,setScissorTest:Ne,activeTexture:Ie,bindTexture:st,unbindTexture:N,compressedTexImage2D:U,compressedTexImage3D:le,texImage2D:Je,texImage3D:Ze,updateUBOMapping:Xe,uniformBlockBinding:tt,texStorage2D:He,texStorage3D:be,texSubImage2D:Pe,texSubImage3D:Te,compressedTexSubImage2D:Re,compressedTexSubImage3D:$e,scissor:je,viewport:ze,reset:ft}}function y$(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let _;const y=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(N,U){return g?new OffscreenCanvas(N,U):Nm("canvas")}function S(N,U,le,Pe){let Te=1;if((N.width>Pe||N.height>Pe)&&(Te=Pe/Math.max(N.width,N.height)),Te<1||U===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const Re=U?ly:Math.floor,$e=Re(Te*N.width),He=Re(Te*N.height);_===void 0&&(_=x($e,He));const be=le?x($e,He):_;return be.width=$e,be.height=He,be.getContext("2d").drawImage(N,0,0,$e,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+$e+"x"+He+")."),be}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function A(N){return nE(N.width)&&nE(N.height)}function M(N){return a?!1:N.wrapS!==Vr||N.wrapT!==Vr||N.minFilter!==er&&N.minFilter!==mn}function C(N,U){return N.generateMipmaps&&U&&N.minFilter!==er&&N.minFilter!==mn}function R(N){n.generateMipmap(N)}function T(N,U,le,Pe,Te=!1){if(a===!1)return U;if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Re=U;return U===n.RED&&(le===n.FLOAT&&(Re=n.R32F),le===n.HALF_FLOAT&&(Re=n.R16F),le===n.UNSIGNED_BYTE&&(Re=n.R8)),U===n.RG&&(le===n.FLOAT&&(Re=n.RG32F),le===n.HALF_FLOAT&&(Re=n.RG16F),le===n.UNSIGNED_BYTE&&(Re=n.RG8)),U===n.RGBA&&(le===n.FLOAT&&(Re=n.RGBA32F),le===n.HALF_FLOAT&&(Re=n.RGBA16F),le===n.UNSIGNED_BYTE&&(Re=Pe===kt&&Te===!1?n.SRGB8_ALPHA8:n.RGBA8),le===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),le===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)),(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function b(N,U,le){return C(N,le)===!0||N.isFramebufferTexture&&N.minFilter!==er&&N.minFilter!==mn?Math.log2(Math.max(U.width,U.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?U.mipmaps.length:1}function L(N){return N===er||N===Om||N===Cd?n.NEAREST:n.LINEAR}function O(N){const U=N.target;U.removeEventListener("dispose",O),z(U),U.isVideoTexture&&v.delete(U)}function k(N){const U=N.target;U.removeEventListener("dispose",k),j(U)}function z(N){const U=r.get(N);if(U.__webglInit===void 0)return;const le=N.source,Pe=y.get(le);if(Pe){const Te=Pe[U.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&V(N),Object.keys(Pe).length===0&&y.delete(le)}r.remove(N)}function V(N){const U=r.get(N);n.deleteTexture(U.__webglTexture);const le=N.source,Pe=y.get(le);delete Pe[U.__cacheKey],o.memory.textures--}function j(N){const U=N.texture,le=r.get(N),Pe=r.get(U);if(Pe.__webglTexture!==void 0&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++)n.deleteFramebuffer(le.__webglFramebuffer[Te]),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[Te]);else{if(n.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Te=0;Te<le.__webglColorRenderbuffer.length;Te++)le.__webglColorRenderbuffer[Te]&&n.deleteRenderbuffer(le.__webglColorRenderbuffer[Te]);le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Te=0,Re=U.length;Te<Re;Te++){const $e=r.get(U[Te]);$e.__webglTexture&&(n.deleteTexture($e.__webglTexture),o.memory.textures--),r.remove(U[Te])}r.remove(U),r.remove(N)}let Q=0;function ne(){Q=0}function G(){const N=Q;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),Q+=1,N}function J(N){const U=[];return U.push(N.wrapS),U.push(N.wrapT),U.push(N.wrapR||0),U.push(N.magFilter),U.push(N.minFilter),U.push(N.anisotropy),U.push(N.internalFormat),U.push(N.format),U.push(N.type),U.push(N.generateMipmaps),U.push(N.premultiplyAlpha),U.push(N.flipY),U.push(N.unpackAlignment),U.push(N.colorSpace),U.join()}function Y(N,U){const le=r.get(N);if(N.isVideoTexture&&Ie(N),N.isRenderTargetTexture===!1&&N.version>0&&le.__version!==N.version){const Pe=N.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(le,N,U);return}}t.bindTexture(n.TEXTURE_2D,le.__webglTexture,n.TEXTURE0+U)}function X(N,U){const le=r.get(N);if(N.version>0&&le.__version!==N.version){Oe(le,N,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,le.__webglTexture,n.TEXTURE0+U)}function $(N,U){const le=r.get(N);if(N.version>0&&le.__version!==N.version){Oe(le,N,U);return}t.bindTexture(n.TEXTURE_3D,le.__webglTexture,n.TEXTURE0+U)}function re(N,U){const le=r.get(N);if(N.version>0&&le.__version!==N.version){We(le,N,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+U)}const ie={[fc]:n.REPEAT,[Vr]:n.CLAMP_TO_EDGE,[$d]:n.MIRRORED_REPEAT},ae={[er]:n.NEAREST,[Om]:n.NEAREST_MIPMAP_NEAREST,[Cd]:n.NEAREST_MIPMAP_LINEAR,[mn]:n.LINEAR,[a_]:n.LINEAR_MIPMAP_NEAREST,[aa]:n.LINEAR_MIPMAP_LINEAR},ue={[WO]:n.NEVER,[ZO]:n.ALWAYS,[$O]:n.LESS,[XO]:n.LEQUAL,[jO]:n.EQUAL,[KO]:n.GEQUAL,[JO]:n.GREATER,[YO]:n.NOTEQUAL};function fe(N,U,le){if(le?(n.texParameteri(N,n.TEXTURE_WRAP_S,ie[U.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,ie[U.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,ie[U.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,ae[U.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,ae[U.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(U.wrapS!==Vr||U.wrapT!==Vr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,L(U.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,L(U.minFilter)),U.minFilter!==er&&U.minFilter!==mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),U.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,ue[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Pe=e.get("EXT_texture_filter_anisotropic");if(U.magFilter===er||U.minFilter!==Cd&&U.minFilter!==aa||U.type===ii&&e.has("OES_texture_float_linear")===!1||a===!1&&U.type===Mi&&e.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||r.get(U).__currentAnisotropy)&&(n.texParameterf(N,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,i.getMaxAnisotropy())),r.get(U).__currentAnisotropy=U.anisotropy)}}function _e(N,U){let le=!1;N.__webglInit===void 0&&(N.__webglInit=!0,U.addEventListener("dispose",O));const Pe=U.source;let Te=y.get(Pe);Te===void 0&&(Te={},y.set(Pe,Te));const Re=J(U);if(Re!==N.__cacheKey){Te[Re]===void 0&&(Te[Re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Te[Re].usedTimes++;const $e=Te[N.__cacheKey];$e!==void 0&&(Te[N.__cacheKey].usedTimes--,$e.usedTimes===0&&V(U)),N.__cacheKey=Re,N.__webglTexture=Te[Re].texture}return le}function Oe(N,U,le){let Pe=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Pe=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(Pe=n.TEXTURE_3D);const Te=_e(N,U),Re=U.source;t.bindTexture(Pe,N.__webglTexture,n.TEXTURE0+le);const $e=r.get(Re);if(Re.version!==$e.__version||Te===!0){t.activeTexture(n.TEXTURE0+le),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const He=M(U)&&A(U.image)===!1;let be=S(U.image,He,!1,u);be=st(U,be);const Je=A(be)||a,Ze=s.convert(U.format,U.colorSpace);let je=s.convert(U.type),ze=T(U.internalFormat,Ze,je,U.colorSpace);fe(Pe,U,Je);let Xe;const tt=U.mipmaps,ft=a&&U.isVideoTexture!==!0,se=$e.__version===void 0||Te===!0,ye=b(U,be,Je);if(U.isDepthTexture)ze=n.DEPTH_COMPONENT,a?U.type===ii?ze=n.DEPTH_COMPONENT32F:U.type===Ha?ze=n.DEPTH_COMPONENT24:U.type===tc?ze=n.DEPTH24_STENCIL8:ze=n.DEPTH_COMPONENT16:U.type===ii&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===nc&&ze===n.DEPTH_COMPONENT&&U.type!==l_&&U.type!==Ha&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=Ha,je=s.convert(U.type)),U.format===Nu&&ze===n.DEPTH_COMPONENT&&(ze=n.DEPTH_STENCIL,U.type!==tc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=tc,je=s.convert(U.type))),se&&(ft?t.texStorage2D(n.TEXTURE_2D,1,ze,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,ze,be.width,be.height,0,Ze,je,null));else if(U.isDataTexture)if(tt.length>0&&Je){ft&&se&&t.texStorage2D(n.TEXTURE_2D,ye,ze,tt[0].width,tt[0].height);for(let we=0,Ke=tt.length;we<Ke;we++)Xe=tt[we],ft?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Xe.width,Xe.height,Ze,je,Xe.data):t.texImage2D(n.TEXTURE_2D,we,ze,Xe.width,Xe.height,0,Ze,je,Xe.data);U.generateMipmaps=!1}else ft?(se&&t.texStorage2D(n.TEXTURE_2D,ye,ze,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,be.width,be.height,Ze,je,be.data)):t.texImage2D(n.TEXTURE_2D,0,ze,be.width,be.height,0,Ze,je,be.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){ft&&se&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ye,ze,tt[0].width,tt[0].height,be.depth);for(let we=0,Ke=tt.length;we<Ke;we++)Xe=tt[we],U.format!==Ei?Ze!==null?ft?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,Xe.width,Xe.height,be.depth,Ze,Xe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,we,ze,Xe.width,Xe.height,be.depth,0,Xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?t.texSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,Xe.width,Xe.height,be.depth,Ze,je,Xe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,we,ze,Xe.width,Xe.height,be.depth,0,Ze,je,Xe.data)}else{ft&&se&&t.texStorage2D(n.TEXTURE_2D,ye,ze,tt[0].width,tt[0].height);for(let we=0,Ke=tt.length;we<Ke;we++)Xe=tt[we],U.format!==Ei?Ze!==null?ft?t.compressedTexSubImage2D(n.TEXTURE_2D,we,0,0,Xe.width,Xe.height,Ze,Xe.data):t.compressedTexImage2D(n.TEXTURE_2D,we,ze,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Xe.width,Xe.height,Ze,je,Xe.data):t.texImage2D(n.TEXTURE_2D,we,ze,Xe.width,Xe.height,0,Ze,je,Xe.data)}else if(U.isDataArrayTexture)ft?(se&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ye,ze,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,Ze,je,be.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ze,be.width,be.height,be.depth,0,Ze,je,be.data);else if(U.isData3DTexture)ft?(se&&t.texStorage3D(n.TEXTURE_3D,ye,ze,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,Ze,je,be.data)):t.texImage3D(n.TEXTURE_3D,0,ze,be.width,be.height,be.depth,0,Ze,je,be.data);else if(U.isFramebufferTexture){if(se)if(ft)t.texStorage2D(n.TEXTURE_2D,ye,ze,be.width,be.height);else{let we=be.width,Ke=be.height;for(let nt=0;nt<ye;nt++)t.texImage2D(n.TEXTURE_2D,nt,ze,we,Ke,0,Ze,je,null),we>>=1,Ke>>=1}}else if(tt.length>0&&Je){ft&&se&&t.texStorage2D(n.TEXTURE_2D,ye,ze,tt[0].width,tt[0].height);for(let we=0,Ke=tt.length;we<Ke;we++)Xe=tt[we],ft?t.texSubImage2D(n.TEXTURE_2D,we,0,0,Ze,je,Xe):t.texImage2D(n.TEXTURE_2D,we,ze,Ze,je,Xe);U.generateMipmaps=!1}else ft?(se&&t.texStorage2D(n.TEXTURE_2D,ye,ze,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,je,be)):t.texImage2D(n.TEXTURE_2D,0,ze,Ze,je,be);C(U,Je)&&R(Pe),$e.__version=Re.version,U.onUpdate&&U.onUpdate(U)}N.__version=U.version}function We(N,U,le){if(U.image.length!==6)return;const Pe=_e(N,U),Te=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+le);const Re=r.get(Te);if(Te.version!==Re.__version||Pe===!0){t.activeTexture(n.TEXTURE0+le),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const $e=U.isCompressedTexture||U.image[0].isCompressedTexture,He=U.image[0]&&U.image[0].isDataTexture,be=[];for(let we=0;we<6;we++)!$e&&!He?be[we]=S(U.image[we],!1,!0,c):be[we]=He?U.image[we].image:U.image[we],be[we]=st(U,be[we]);const Je=be[0],Ze=A(Je)||a,je=s.convert(U.format,U.colorSpace),ze=s.convert(U.type),Xe=T(U.internalFormat,je,ze,U.colorSpace),tt=a&&U.isVideoTexture!==!0,ft=Re.__version===void 0||Pe===!0;let se=b(U,Je,Ze);fe(n.TEXTURE_CUBE_MAP,U,Ze);let ye;if($e){tt&&ft&&t.texStorage2D(n.TEXTURE_CUBE_MAP,se,Xe,Je.width,Je.height);for(let we=0;we<6;we++){ye=be[we].mipmaps;for(let Ke=0;Ke<ye.length;Ke++){const nt=ye[Ke];U.format!==Ei?je!==null?tt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke,0,0,nt.width,nt.height,je,nt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke,Xe,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke,0,0,nt.width,nt.height,je,ze,nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke,Xe,nt.width,nt.height,0,je,ze,nt.data)}}}else{ye=U.mipmaps,tt&&ft&&(ye.length>0&&se++,t.texStorage2D(n.TEXTURE_CUBE_MAP,se,Xe,be[0].width,be[0].height));for(let we=0;we<6;we++)if(He){tt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,be[we].width,be[we].height,je,ze,be[we].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Xe,be[we].width,be[we].height,0,je,ze,be[we].data);for(let Ke=0;Ke<ye.length;Ke++){const It=ye[Ke].image[we].image;tt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke+1,0,0,It.width,It.height,je,ze,It.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke+1,Xe,It.width,It.height,0,je,ze,It.data)}}else{tt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,je,ze,be[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Xe,je,ze,be[we]);for(let Ke=0;Ke<ye.length;Ke++){const nt=ye[Ke];tt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke+1,0,0,je,ze,nt.image[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke+1,Xe,je,ze,nt.image[we])}}}C(U,Ze)&&R(n.TEXTURE_CUBE_MAP),Re.__version=Te.version,U.onUpdate&&U.onUpdate(U)}N.__version=U.version}function xe(N,U,le,Pe,Te){const Re=s.convert(le.format,le.colorSpace),$e=s.convert(le.type),He=T(le.internalFormat,Re,$e,le.colorSpace);r.get(U).__hasExternalTextures||(Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,0,He,U.width,U.height,U.depth,0,Re,$e,null):t.texImage2D(Te,0,He,U.width,U.height,0,Re,$e,null)),t.bindFramebuffer(n.FRAMEBUFFER,N),Ne(U)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pe,Te,r.get(le).__webglTexture,0,Fe(U)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Pe,Te,r.get(le).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function W(N,U,le){if(n.bindRenderbuffer(n.RENDERBUFFER,N),U.depthBuffer&&!U.stencilBuffer){let Pe=n.DEPTH_COMPONENT16;if(le||Ne(U)){const Te=U.depthTexture;Te&&Te.isDepthTexture&&(Te.type===ii?Pe=n.DEPTH_COMPONENT32F:Te.type===Ha&&(Pe=n.DEPTH_COMPONENT24));const Re=Fe(U);Ne(U)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,Pe,U.width,U.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,Pe,U.width,U.height)}else n.renderbufferStorage(n.RENDERBUFFER,Pe,U.width,U.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(U.depthBuffer&&U.stencilBuffer){const Pe=Fe(U);le&&Ne(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,U.width,U.height):Ne(U)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const Pe=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let Te=0;Te<Pe.length;Te++){const Re=Pe[Te],$e=s.convert(Re.format,Re.colorSpace),He=s.convert(Re.type),be=T(Re.internalFormat,$e,He,Re.colorSpace),Je=Fe(U);le&&Ne(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,be,U.width,U.height):Ne(U)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,be,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,be,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ae(N,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),Y(U.depthTexture,0);const Pe=r.get(U.depthTexture).__webglTexture,Te=Fe(U);if(U.depthTexture.format===nc)Ne(U)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(U.depthTexture.format===Nu)Ne(U)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function ge(N){const U=r.get(N),le=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!U.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ae(U.__webglFramebuffer,N)}else if(le){U.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[Pe]),U.__webglDepthbuffer[Pe]=n.createRenderbuffer(),W(U.__webglDepthbuffer[Pe],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),W(U.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(N,U,le){const Pe=r.get(N);U!==void 0&&xe(Pe.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),le!==void 0&&ge(N)}function me(N){const U=N.texture,le=r.get(N),Pe=r.get(U);N.addEventListener("dispose",k),N.isWebGLMultipleRenderTargets!==!0&&(Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture()),Pe.__version=U.version,o.memory.textures++);const Te=N.isWebGLCubeRenderTarget===!0,Re=N.isWebGLMultipleRenderTargets===!0,$e=A(N)||a;if(Te){le.__webglFramebuffer=[];for(let He=0;He<6;He++)le.__webglFramebuffer[He]=n.createFramebuffer()}else{if(le.__webglFramebuffer=n.createFramebuffer(),Re)if(i.drawBuffers){const He=N.texture;for(let be=0,Je=He.length;be<Je;be++){const Ze=r.get(He[be]);Ze.__webglTexture===void 0&&(Ze.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&Ne(N)===!1){const He=Re?U:[U];le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let be=0;be<He.length;be++){const Je=He[be];le.__webglColorRenderbuffer[be]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,le.__webglColorRenderbuffer[be]);const Ze=s.convert(Je.format,Je.colorSpace),je=s.convert(Je.type),ze=T(Je.internalFormat,Ze,je,Je.colorSpace,N.isXRRenderTarget===!0),Xe=Fe(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,Xe,ze,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+be,n.RENDERBUFFER,le.__webglColorRenderbuffer[be])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),W(le.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Te){t.bindTexture(n.TEXTURE_CUBE_MAP,Pe.__webglTexture),fe(n.TEXTURE_CUBE_MAP,U,$e);for(let He=0;He<6;He++)xe(le.__webglFramebuffer[He],N,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He);C(U,$e)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Re){const He=N.texture;for(let be=0,Je=He.length;be<Je;be++){const Ze=He[be],je=r.get(Ze);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),fe(n.TEXTURE_2D,Ze,$e),xe(le.__webglFramebuffer,N,Ze,n.COLOR_ATTACHMENT0+be,n.TEXTURE_2D),C(Ze,$e)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?He=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,Pe.__webglTexture),fe(He,U,$e),xe(le.__webglFramebuffer,N,U,n.COLOR_ATTACHMENT0,He),C(U,$e)&&R(He),t.unbindTexture()}N.depthBuffer&&ge(N)}function Ge(N){const U=A(N)||a,le=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Pe=0,Te=le.length;Pe<Te;Pe++){const Re=le[Pe];if(C(Re,U)){const $e=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,He=r.get(Re).__webglTexture;t.bindTexture($e,He),R($e),t.unbindTexture()}}}function Se(N){if(a&&N.samples>0&&Ne(N)===!1){const U=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],le=N.width,Pe=N.height;let Te=n.COLOR_BUFFER_BIT;const Re=[],$e=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=r.get(N),be=N.isWebGLMultipleRenderTargets===!0;if(be)for(let Je=0;Je<U.length;Je++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let Je=0;Je<U.length;Je++){Re.push(n.COLOR_ATTACHMENT0+Je),N.depthBuffer&&Re.push($e);const Ze=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(Ze===!1&&(N.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),be&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[Je]),Ze===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[$e]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$e])),be){const je=r.get(U[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,le,Pe,0,0,le,Pe,Te,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Re)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),be)for(let Je=0;Je<U.length;Je++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,He.__webglColorRenderbuffer[Je]);const Ze=r.get(U[Je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,Ze,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}}function Fe(N){return Math.min(f,N.samples)}function Ne(N){const U=r.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function Ie(N){const U=o.render.frame;v.get(N)!==U&&(v.set(N,U),N.update())}function st(N,U){const le=N.colorSpace,Pe=N.format,Te=N.type;return N.isCompressedTexture===!0||N.format===ay||le!==Do&&le!==ic&&(le===kt?a===!1?e.has("EXT_sRGB")===!0&&Pe===Ei?(N.format=ay,N.minFilter=mn,N.generateMipmaps=!1):U=DM.sRGBToLinear(U):(Pe!==Ei||Te!==ra)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),U}this.allocateTextureUnit=G,this.resetTextureUnits=ne,this.setTexture2D=Y,this.setTexture2DArray=X,this.setTexture3D=$,this.setTextureCube=re,this.rebindTextures=ve,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Ge,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=ge,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Ne}function l5(n,e,t){const r=t.isWebGL2;function i(s,o=ic){let a;if(s===ra)return n.UNSIGNED_BYTE;if(s===wM)return n.UNSIGNED_SHORT_4_4_4_4;if(s===AM)return n.UNSIGNED_SHORT_5_5_5_1;if(s===RO)return n.BYTE;if(s===PO)return n.SHORT;if(s===l_)return n.UNSIGNED_SHORT;if(s===SM)return n.INT;if(s===Ha)return n.UNSIGNED_INT;if(s===ii)return n.FLOAT;if(s===Mi)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===IO)return n.ALPHA;if(s===Ei)return n.RGBA;if(s===BO)return n.LUMINANCE;if(s===LO)return n.LUMINANCE_ALPHA;if(s===nc)return n.DEPTH_COMPONENT;if(s===Nu)return n.DEPTH_STENCIL;if(s===ay)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===EM)return n.RED;if(s===MM)return n.RED_INTEGER;if(s===DO)return n.RG;if(s===CM)return n.RG_INTEGER;if(s===bM)return n.RGBA_INTEGER;if(s===y1||s===_1||s===x1||s===S1)if(o===kt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===y1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===_1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===x1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===S1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===y1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===_1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===x1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===S1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===BA||s===LA||s===DA||s===OA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===BA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===LA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===DA)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===OA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===OO)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===FA||s===UA)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===FA)return o===kt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===UA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===kA||s===NA||s===zA||s===GA||s===HA||s===VA||s===WA||s===$A||s===jA||s===XA||s===JA||s===YA||s===KA||s===ZA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===kA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===NA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===zA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===GA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===HA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===VA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===WA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===$A)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===jA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===XA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===JA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===YA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===KA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===ZA)return o===kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===w1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===w1)return o===kt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===FO||s===QA||s===qA||s===eE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===w1)return a.COMPRESSED_RED_RGTC1_EXT;if(s===QA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===qA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===eE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===tc?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class c5 extends dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Va extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _$={type:"move"};class TS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Va,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Va,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Va,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const y=t.getJointPose(_,r),g=this._getHandJoint(c,_);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],d=u.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&d>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_$)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Va;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class u5 extends Tn{constructor(e,t,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:nc,u!==nc&&u!==Nu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===nc&&(r=Ha),r===void 0&&u===Nu&&(r=tc),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:er,this.minFilter=l!==void 0?l:er,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class x$ extends ll{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,d=null,m=null,v=null;const _=t.getContextAttributes();let y=null,g=null;const x=[],S=[];let A=null;const M=new dr;M.layers.enable(1),M.viewport=new hn;const C=new dr;C.layers.enable(2),C.viewport=new hn;const R=[M,C],T=new c5;T.layers.enable(1),T.layers.enable(2);let b=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function($){A=$},this.getController=function($){let re=x[$];return re===void 0&&(re=new TS,x[$]=re),re.getTargetRaySpace()},this.getControllerGrip=function($){let re=x[$];return re===void 0&&(re=new TS,x[$]=re),re.getGripSpace()},this.getHand=function($){let re=x[$];return re===void 0&&(re=new TS,x[$]=re),re.getHandSpace()};function O($){const re=S.indexOf($.inputSource);if(re===-1)return;const ie=x[re];ie!==void 0&&(ie.update($.inputSource,$.frame,c||o),ie.dispatchEvent({type:$.type,data:$.inputSource}))}function k(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",k),i.removeEventListener("inputsourceschange",z);for(let $=0;$<x.length;$++){const re=S[$];re!==null&&(S[$]=null,x[$].disconnect(re))}b=null,L=null,e.setRenderTarget(y),m=null,d=null,f=null,i=null,g=null,X.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){s=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function($){c=$},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function($){if(i=$,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",k),i.addEventListener("inputsourceschange",z),_.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const re={antialias:i.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,re),i.updateRenderState({baseLayer:m}),g=new ws(m.framebufferWidth,m.framebufferHeight,{format:Ei,type:ra,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let re=null,ie=null,ae=null;_.depth&&(ae=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,re=_.stencil?Nu:nc,ie=_.stencil?tc:Ha);const ue={colorFormat:t.RGBA8,depthFormat:ae,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(ue),i.updateRenderState({layers:[d]}),g=new ws(d.textureWidth,d.textureHeight,{format:Ei,type:ra,depthTexture:new u5(d.textureWidth,d.textureHeight,ie,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const fe=e.properties.get(g);fe.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),X.setContext(i),X.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z($){for(let re=0;re<$.removed.length;re++){const ie=$.removed[re],ae=S.indexOf(ie);ae>=0&&(S[ae]=null,x[ae].disconnect(ie))}for(let re=0;re<$.added.length;re++){const ie=$.added[re];let ae=S.indexOf(ie);if(ae===-1){for(let fe=0;fe<x.length;fe++)if(fe>=S.length){S.push(ie),ae=fe;break}else if(S[fe]===null){S[fe]=ie,ae=fe;break}if(ae===-1)break}const ue=x[ae];ue&&ue.connect(ie)}}const V=new Z,j=new Z;function Q($,re,ie){V.setFromMatrixPosition(re.matrixWorld),j.setFromMatrixPosition(ie.matrixWorld);const ae=V.distanceTo(j),ue=re.projectionMatrix.elements,fe=ie.projectionMatrix.elements,_e=ue[14]/(ue[10]-1),Oe=ue[14]/(ue[10]+1),We=(ue[9]+1)/ue[5],xe=(ue[9]-1)/ue[5],W=(ue[8]-1)/ue[0],Ae=(fe[8]+1)/fe[0],ge=_e*W,ve=_e*Ae,me=ae/(-W+Ae),Ge=me*-W;re.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(Ge),$.translateZ(me),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();const Se=_e+me,Fe=Oe+me,Ne=ge-Ge,Ie=ve+(ae-Ge),st=We*Oe/Fe*Se,N=xe*Oe/Fe*Se;$.projectionMatrix.makePerspective(Ne,Ie,st,N,Se,Fe),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}function ne($,re){re===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(re.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCameraXR=function($){if(i===null)return $;A&&($=A),T.near=C.near=M.near=$.near,T.far=C.far=M.far=$.far,(b!==T.near||L!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),b=T.near,L=T.far);const re=$.parent,ie=T.cameras;ne(T,re);for(let ae=0;ae<ie.length;ae++)ne(ie[ae],re);return ie.length===2?Q(T,M,C):T.projectionMatrix.copy(M.projectionMatrix),A&&G(T,re),T};function G($,re){const ie=A;re===null?ie.matrix.copy($.matrixWorld):(ie.matrix.copy(re.matrixWorld),ie.matrix.invert(),ie.matrix.multiply($.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0);const ae=ie.children;for(let ue=0,fe=ae.length;ue<fe;ue++)ae[ue].updateMatrixWorld(!0);ie.projectionMatrix.copy($.projectionMatrix),ie.projectionMatrixInverse.copy($.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=Xd*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getFoveation=function(){if(!(d===null&&m===null))return l},this.setFoveation=function($){l=$,d!==null&&(d.fixedFoveation=$),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=$)};let J=null;function Y($,re){if(u=re.getViewerPose(c||o),v=re,u!==null){const ie=u.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let ae=!1;ie.length!==T.cameras.length&&(T.cameras.length=0,ae=!0);for(let ue=0;ue<ie.length;ue++){const fe=ie[ue];let _e=null;if(m!==null)_e=m.getViewport(fe);else{const We=f.getViewSubImage(d,fe);_e=We.viewport,ue===0&&(e.setRenderTargetTextures(g,We.colorTexture,d.ignoreDepthValues?void 0:We.depthStencilTexture),e.setRenderTarget(g))}let Oe=R[ue];Oe===void 0&&(Oe=new dr,Oe.layers.enable(ue),Oe.viewport=new hn,R[ue]=Oe),Oe.matrix.fromArray(fe.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(fe.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(_e.x,_e.y,_e.width,_e.height),ue===0&&(T.matrix.copy(Oe.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ae===!0&&T.cameras.push(Oe)}}for(let ie=0;ie<x.length;ie++){const ae=S[ie],ue=x[ie];ae!==null&&ue!==void 0&&ue.update(ae,re,c||o)}J&&J($,re),re.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:re}),v=null}const X=new r5;X.setAnimationLoop(Y),this.setAnimationLoop=function($){J=$},this.dispose=function(){}}}function S$(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,t5(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,x,S,A){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),f(y,g)):g.isMeshPhongMaterial?(s(y,g),u(y,g)):g.isMeshStandardMaterial?(s(y,g),d(y,g),g.isMeshPhysicalMaterial&&m(y,g,A)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),_(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,x,S):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===si&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===si&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,x,S){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*x,y.scale.value=S*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function f(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function d(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,x){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===si&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function _(y,g){const x=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(x.matrixWorld),y.nearDistance.value=x.shadow.camera.near,y.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function w$(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,S){const A=S.program;r.uniformBlockBinding(x,A)}function c(x,S){let A=i[x.id];A===void 0&&(v(x),A=u(x),i[x.id]=A,x.addEventListener("dispose",y));const M=S.program;r.updateUBOMapping(x,M);const C=e.render.frame;s[x.id]!==C&&(d(x),s[x.id]=C)}function u(x){const S=f();x.__bindingPointIndex=S;const A=n.createBuffer(),M=x.__size,C=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,M,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,A),A}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(x){const S=i[x.id],A=x.uniforms,M=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let C=0,R=A.length;C<R;C++){const T=A[C];if(m(T,C,M)===!0){const b=T.__offset,L=Array.isArray(T.value)?T.value:[T.value];let O=0;for(let k=0;k<L.length;k++){const z=L[k],V=_(z);typeof z=="number"?(T.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,b+O,T.__data)):z.isMatrix3?(T.__data[0]=z.elements[0],T.__data[1]=z.elements[1],T.__data[2]=z.elements[2],T.__data[3]=z.elements[0],T.__data[4]=z.elements[3],T.__data[5]=z.elements[4],T.__data[6]=z.elements[5],T.__data[7]=z.elements[0],T.__data[8]=z.elements[6],T.__data[9]=z.elements[7],T.__data[10]=z.elements[8],T.__data[11]=z.elements[0]):(z.toArray(T.__data,O),O+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,b,T.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,S,A){const M=x.value;if(A[S]===void 0){if(typeof M=="number")A[S]=M;else{const C=Array.isArray(M)?M:[M],R=[];for(let T=0;T<C.length;T++)R.push(C[T].clone());A[S]=R}return!0}else if(typeof M=="number"){if(A[S]!==M)return A[S]=M,!0}else{const C=Array.isArray(A[S])?A[S]:[A[S]],R=Array.isArray(M)?M:[M];for(let T=0;T<C.length;T++){const b=C[T];if(b.equals(R[T])===!1)return b.copy(R[T]),!0}}return!1}function v(x){const S=x.uniforms;let A=0;const M=16;let C=0;for(let R=0,T=S.length;R<T;R++){const b=S[R],L={boundary:0,storage:0},O=Array.isArray(b.value)?b.value:[b.value];for(let k=0,z=O.length;k<z;k++){const V=O[k],j=_(V);L.boundary+=j.boundary,L.storage+=j.storage}if(b.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),b.__offset=A,R>0){C=A%M;const k=M-C;C!==0&&k-L.boundary<0&&(A+=M-C,b.__offset=A)}A+=L.storage}return C=A%M,C>0&&(A+=M-C),x.__size=A,x.__cache={},this}function _(x){const S={boundary:0,storage:0};return typeof x=="number"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function y(x){const S=x.target;S.removeEventListener("dispose",y);const A=o.indexOf(S.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const x in i)n.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}function A$(){const n=Nm("canvas");return n.style.display="block",n}class GM{constructor(e={}){const{canvas:t=A$(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=kt,this.useLegacyLights=!0,this.toneMapping=Ro,this.toneMappingExposure=1;const S=this;let A=!1,M=0,C=0,R=null,T=-1,b=null;const L=new hn,O=new hn;let k=null;const z=new it(0);let V=0,j=t.width,Q=t.height,ne=1,G=null,J=null;const Y=new hn(0,0,j,Q),X=new hn(0,0,j,Q);let $=!1;const re=new f_;let ie=!1,ae=!1,ue=null;const fe=new Pt,_e=new Ve,Oe=new Z,We={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xe(){return R===null?ne:1}let W=r;function Ae(I,H){for(let q=0;q<I.length;q++){const K=I[q],te=t.getContext(K,H);if(te!==null)return te}return null}try{const I={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ph}`),t.addEventListener("webglcontextlost",ye,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Ke,!1),W===null){const H=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&H.shift(),W=Ae(H,I),W===null)throw Ae(H)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let ge,ve,me,Ge,Se,Fe,Ne,Ie,st,N,U,le,Pe,Te,Re,$e,He,be,Je,Ze,je,ze,Xe,tt;function ft(){ge=new NV(W),ve=new LV(W,ge,e),ge.init(ve),ze=new l5(W,ge,ve),me=new v$(W,ge,ve),Ge=new HV(W),Se=new s$,Fe=new y$(W,ge,me,Se,ve,ze,Ge),Ne=new OV(S),Ie=new kV(S),st=new eG(W,ve),Xe=new IV(W,ge,st,ve),N=new zV(W,st,Ge,Xe),U=new jV(W,N,st,Ge),Je=new $V(W,ve,Fe),$e=new DV(Se),le=new i$(S,Ne,Ie,ge,ve,Xe,$e),Pe=new S$(S,Se),Te=new a$,Re=new h$(ge,ve),be=new PV(S,Ne,Ie,me,U,d,l),He=new g$(S,U,ve),tt=new w$(W,Ge,ve,me),Ze=new BV(W,ge,Ge,ve),je=new GV(W,ge,Ge,ve),Ge.programs=le.programs,S.capabilities=ve,S.extensions=ge,S.properties=Se,S.renderLists=Te,S.shadowMap=He,S.state=me,S.info=Ge}ft();const se=new x$(S,W);this.xr=se,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const I=ge.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=ge.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(I){I!==void 0&&(ne=I,this.setSize(j,Q,!1))},this.getSize=function(I){return I.set(j,Q)},this.setSize=function(I,H,q=!0){if(se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=I,Q=H,t.width=Math.floor(I*ne),t.height=Math.floor(H*ne),q===!0&&(t.style.width=I+"px",t.style.height=H+"px"),this.setViewport(0,0,I,H)},this.getDrawingBufferSize=function(I){return I.set(j*ne,Q*ne).floor()},this.setDrawingBufferSize=function(I,H,q){j=I,Q=H,ne=q,t.width=Math.floor(I*q),t.height=Math.floor(H*q),this.setViewport(0,0,I,H)},this.getCurrentViewport=function(I){return I.copy(L)},this.getViewport=function(I){return I.copy(Y)},this.setViewport=function(I,H,q,K){I.isVector4?Y.set(I.x,I.y,I.z,I.w):Y.set(I,H,q,K),me.viewport(L.copy(Y).multiplyScalar(ne).floor())},this.getScissor=function(I){return I.copy(X)},this.setScissor=function(I,H,q,K){I.isVector4?X.set(I.x,I.y,I.z,I.w):X.set(I,H,q,K),me.scissor(O.copy(X).multiplyScalar(ne).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(I){me.setScissorTest($=I)},this.setOpaqueSort=function(I){G=I},this.setTransparentSort=function(I){J=I},this.getClearColor=function(I){return I.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(I=!0,H=!0,q=!0){let K=0;if(I){let te=!1;if(R!==null){const Ee=R.texture.format;te=Ee===bM||Ee===CM||Ee===MM}if(te){const Ee=R.texture.type,Me=Ee===ra||Ee===Ha||Ee===l_||Ee===tc||Ee===wM||Ee===AM,Le=be.getClearColor(),De=be.getClearAlpha(),ke=Le.r,he=Le.g,at=Le.b,Qe=Se.get(R).__webglFramebuffer;Me?(m[0]=ke,m[1]=he,m[2]=at,m[3]=De,W.clearBufferuiv(W.COLOR,Qe,m)):(v[0]=ke,v[1]=he,v[2]=at,v[3]=De,W.clearBufferiv(W.COLOR,Qe,v))}else K|=W.COLOR_BUFFER_BIT}H&&(K|=W.DEPTH_BUFFER_BIT),q&&(K|=W.STENCIL_BUFFER_BIT),W.clear(K)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ye,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Ke,!1),Te.dispose(),Re.dispose(),Se.dispose(),Ne.dispose(),Ie.dispose(),U.dispose(),Xe.dispose(),tt.dispose(),le.dispose(),se.dispose(),se.removeEventListener("sessionstart",rn),se.removeEventListener("sessionend",Yt),ue&&(ue.dispose(),ue=null),Ut.stop()};function ye(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const I=Ge.autoReset,H=He.enabled,q=He.autoUpdate,K=He.needsUpdate,te=He.type;ft(),Ge.autoReset=I,He.enabled=H,He.autoUpdate=q,He.needsUpdate=K,He.type=te}function Ke(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function nt(I){const H=I.target;H.removeEventListener("dispose",nt),It(H)}function It(I){Ht(I),Se.remove(I)}function Ht(I){const H=Se.get(I).programs;H!==void 0&&(H.forEach(function(q){le.releaseProgram(q)}),I.isShaderMaterial&&le.releaseShaderCache(I))}this.renderBufferDirect=function(I,H,q,K,te,Ee){H===null&&(H=We);const Me=te.isMesh&&te.matrixWorld.determinant()<0,Le=Kn(I,H,q,K,te);me.setMaterial(K,Me);let De=q.index,ke=1;K.wireframe===!0&&(De=N.getWireframeAttribute(q),ke=2);const he=q.drawRange,at=q.attributes.position;let Qe=he.start*ke,et=(he.start+he.count)*ke;Ee!==null&&(Qe=Math.max(Qe,Ee.start*ke),et=Math.min(et,(Ee.start+Ee.count)*ke)),De!==null?(Qe=Math.max(Qe,0),et=Math.min(et,De.count)):at!=null&&(Qe=Math.max(Qe,0),et=Math.min(et,at.count));const vt=et-Qe;if(vt<0||vt===1/0)return;Xe.setup(te,K,Le,q,De);let wt,_t=Ze;if(De!==null&&(wt=st.get(De),_t=je,_t.setIndex(wt)),te.isMesh)K.wireframe===!0?(me.setLineWidth(K.wireframeLinewidth*xe()),_t.setMode(W.LINES)):_t.setMode(W.TRIANGLES);else if(te.isLine){let lt=K.linewidth;lt===void 0&&(lt=1),me.setLineWidth(lt*xe()),te.isLineSegments?_t.setMode(W.LINES):te.isLineLoop?_t.setMode(W.LINE_LOOP):_t.setMode(W.LINE_STRIP)}else te.isPoints?_t.setMode(W.POINTS):te.isSprite&&_t.setMode(W.TRIANGLES);if(te.isInstancedMesh)_t.renderInstances(Qe,vt,te.count);else if(q.isInstancedBufferGeometry){const lt=q._maxInstanceCount!==void 0?q._maxInstanceCount:1/0,At=Math.min(q.instanceCount,lt);_t.renderInstances(Qe,vt,At)}else _t.render(Qe,vt)},this.compile=function(I,H){function q(K,te,Ee){K.transparent===!0&&K.side===Ai&&K.forceSinglePass===!1?(K.side=si,K.needsUpdate=!0,sn(K,te,Ee),K.side=Lo,K.needsUpdate=!0,sn(K,te,Ee),K.side=Ai):sn(K,te,Ee)}y=Re.get(I),y.init(),x.push(y),I.traverseVisible(function(K){K.isLight&&K.layers.test(H.layers)&&(y.pushLight(K),K.castShadow&&y.pushShadow(K))}),y.setupLights(S.useLegacyLights),I.traverse(function(K){const te=K.material;if(te)if(Array.isArray(te))for(let Ee=0;Ee<te.length;Ee++){const Me=te[Ee];q(Me,I,K)}else q(te,I,K)}),x.pop(),y=null};let jt=null;function Qt(I){jt&&jt(I)}function rn(){Ut.stop()}function Yt(){Ut.start()}const Ut=new r5;Ut.setAnimationLoop(Qt),typeof self<"u"&&Ut.setContext(self),this.setAnimationLoop=function(I){jt=I,se.setAnimationLoop(I),I===null?Ut.stop():Ut.start()},se.addEventListener("sessionstart",rn),se.addEventListener("sessionend",Yt),this.render=function(I,H){if(H!==void 0&&H.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),H.parent===null&&H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),se.enabled===!0&&se.isPresenting===!0&&(H=se.updateCameraXR(H)),I.isScene===!0&&I.onBeforeRender(S,I,H,R),y=Re.get(I,x.length),y.init(),x.push(y),fe.multiplyMatrices(H.projectionMatrix,H.matrixWorldInverse),re.setFromProjectionMatrix(fe),ae=this.localClippingEnabled,ie=$e.init(this.clippingPlanes,ae),_=Te.get(I,g.length),_.init(),g.push(_),Tr(I,H,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(G,J),ie===!0&&$e.beginShadows();const q=y.state.shadowsArray;if(He.render(q,I,H),ie===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,be.render(_,I),y.setupLights(S.useLegacyLights),H.isArrayCamera){const K=H.cameras;for(let te=0,Ee=K.length;te<Ee;te++){const Me=K[te];pr(_,I,Me,Me.viewport)}}else pr(_,I,H);R!==null&&(Fe.updateMultisampleRenderTarget(R),Fe.updateRenderTargetMipmap(R)),I.isScene===!0&&I.onAfterRender(S,I,H),Xe.resetDefaultState(),T=-1,b=null,x.pop(),x.length>0?y=x[x.length-1]:y=null,g.pop(),g.length>0?_=g[g.length-1]:_=null};function Tr(I,H,q,K){if(I.visible===!1)return;if(I.layers.test(H.layers)){if(I.isGroup)q=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(H);else if(I.isLight)y.pushLight(I),I.castShadow&&y.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||re.intersectsSprite(I)){K&&Oe.setFromMatrixPosition(I.matrixWorld).applyMatrix4(fe);const Me=U.update(I),Le=I.material;Le.visible&&_.push(I,Me,Le,q,Oe.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||re.intersectsObject(I))){I.isSkinnedMesh&&I.skeleton.frame!==Ge.render.frame&&(I.skeleton.update(),I.skeleton.frame=Ge.render.frame);const Me=U.update(I),Le=I.material;if(K&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),Oe.copy(I.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),Oe.copy(Me.boundingSphere.center)),Oe.applyMatrix4(I.matrixWorld).applyMatrix4(fe)),Array.isArray(Le)){const De=Me.groups;for(let ke=0,he=De.length;ke<he;ke++){const at=De[ke],Qe=Le[at.materialIndex];Qe&&Qe.visible&&_.push(I,Me,Qe,q,Oe.z,at)}}else Le.visible&&_.push(I,Me,Le,q,Oe.z,null)}}const Ee=I.children;for(let Me=0,Le=Ee.length;Me<Le;Me++)Tr(Ee[Me],H,q,K)}function pr(I,H,q,K){const te=I.opaque,Ee=I.transmissive,Me=I.transparent;y.setupLightsView(q),ie===!0&&$e.setGlobalState(S.clippingPlanes,q),Ee.length>0&&Kt(te,Ee,H,q),K&&me.viewport(L.copy(K)),te.length>0&&vn(te,H,q),Ee.length>0&&vn(Ee,H,q),Me.length>0&&vn(Me,H,q),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function Kt(I,H,q,K){const te=ve.isWebGL2;ue===null&&(ue=new ws(1,1,{generateMipmaps:!0,type:ge.has("EXT_color_buffer_half_float")?Mi:ra,minFilter:aa,samples:te&&a===!0?4:0})),S.getDrawingBufferSize(_e),te?ue.setSize(_e.x,_e.y):ue.setSize(ly(_e.x),ly(_e.y));const Ee=S.getRenderTarget();S.setRenderTarget(ue),S.getClearColor(z),V=S.getClearAlpha(),V<1&&S.setClearColor(16777215,.5),S.clear();const Me=S.toneMapping;S.toneMapping=Ro,vn(I,q,K),Fe.updateMultisampleRenderTarget(ue),Fe.updateRenderTargetMipmap(ue);let Le=!1;for(let De=0,ke=H.length;De<ke;De++){const he=H[De],at=he.object,Qe=he.geometry,et=he.material,vt=he.group;if(et.side===Ai&&at.layers.test(K.layers)){const wt=et.side;et.side=si,et.needsUpdate=!0,kn(at,q,K,Qe,et,vt),et.side=wt,et.needsUpdate=!0,Le=!0}}Le===!0&&(Fe.updateMultisampleRenderTarget(ue),Fe.updateRenderTargetMipmap(ue)),S.setRenderTarget(Ee),S.setClearColor(z,V),S.toneMapping=Me}function vn(I,H,q){const K=H.isScene===!0?H.overrideMaterial:null;for(let te=0,Ee=I.length;te<Ee;te++){const Me=I[te],Le=Me.object,De=Me.geometry,ke=K===null?Me.material:K,he=Me.group;Le.layers.test(q.layers)&&kn(Le,H,q,De,ke,he)}}function kn(I,H,q,K,te,Ee){I.onBeforeRender(S,H,q,K,te,Ee),I.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),te.onBeforeRender(S,H,q,K,I,Ee),te.transparent===!0&&te.side===Ai&&te.forceSinglePass===!1?(te.side=si,te.needsUpdate=!0,S.renderBufferDirect(q,H,K,te,I,Ee),te.side=Lo,te.needsUpdate=!0,S.renderBufferDirect(q,H,K,te,I,Ee),te.side=Ai):S.renderBufferDirect(q,H,K,te,I,Ee),I.onAfterRender(S,H,q,K,te,Ee)}function sn(I,H,q){H.isScene!==!0&&(H=We);const K=Se.get(I),te=y.state.lights,Ee=y.state.shadowsArray,Me=te.state.version,Le=le.getParameters(I,te.state,Ee,H,q),De=le.getProgramCacheKey(Le);let ke=K.programs;K.environment=I.isMeshStandardMaterial?H.environment:null,K.fog=H.fog,K.envMap=(I.isMeshStandardMaterial?Ie:Ne).get(I.envMap||K.environment),ke===void 0&&(I.addEventListener("dispose",nt),ke=new Map,K.programs=ke);let he=ke.get(De);if(he!==void 0){if(K.currentProgram===he&&K.lightsStateVersion===Me)return yt(I,Le),he}else Le.uniforms=le.getUniforms(I),I.onBuild(q,Le,S),I.onBeforeCompile(Le,S),he=le.acquireProgram(Le,De),ke.set(De,he),K.uniforms=Le.uniforms;const at=K.uniforms;(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(at.clippingPlanes=$e.uniform),yt(I,Le),K.needsLights=F(I),K.lightsStateVersion=Me,K.needsLights&&(at.ambientLightColor.value=te.state.ambient,at.lightProbe.value=te.state.probe,at.directionalLights.value=te.state.directional,at.directionalLightShadows.value=te.state.directionalShadow,at.spotLights.value=te.state.spot,at.spotLightShadows.value=te.state.spotShadow,at.rectAreaLights.value=te.state.rectArea,at.ltc_1.value=te.state.rectAreaLTC1,at.ltc_2.value=te.state.rectAreaLTC2,at.pointLights.value=te.state.point,at.pointLightShadows.value=te.state.pointShadow,at.hemisphereLights.value=te.state.hemi,at.directionalShadowMap.value=te.state.directionalShadowMap,at.directionalShadowMatrix.value=te.state.directionalShadowMatrix,at.spotShadowMap.value=te.state.spotShadowMap,at.spotLightMatrix.value=te.state.spotLightMatrix,at.spotLightMap.value=te.state.spotLightMap,at.pointShadowMap.value=te.state.pointShadowMap,at.pointShadowMatrix.value=te.state.pointShadowMatrix);const Qe=he.getUniforms(),et=C1.seqWithValue(Qe.seq,at);return K.currentProgram=he,K.uniformsList=et,he}function yt(I,H){const q=Se.get(I);q.outputColorSpace=H.outputColorSpace,q.instancing=H.instancing,q.skinning=H.skinning,q.morphTargets=H.morphTargets,q.morphNormals=H.morphNormals,q.morphColors=H.morphColors,q.morphTargetsCount=H.morphTargetsCount,q.numClippingPlanes=H.numClippingPlanes,q.numIntersection=H.numClipIntersection,q.vertexAlphas=H.vertexAlphas,q.vertexTangents=H.vertexTangents,q.toneMapping=H.toneMapping}function Kn(I,H,q,K,te){H.isScene!==!0&&(H=We),Fe.resetTextureUnits();const Ee=H.fog,Me=K.isMeshStandardMaterial?H.environment:null,Le=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Do,De=(K.isMeshStandardMaterial?Ie:Ne).get(K.envMap||Me),ke=K.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,he=!!q.attributes.tangent&&(!!K.normalMap||K.anisotropy>0),at=!!q.morphAttributes.position,Qe=!!q.morphAttributes.normal,et=!!q.morphAttributes.color,vt=K.toneMapped?S.toneMapping:Ro,wt=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,_t=wt!==void 0?wt.length:0,lt=Se.get(K),At=y.state.lights;if(ie===!0&&(ae===!0||I!==b)){const Rt=I===b&&K.id===T;$e.setState(K,I,Rt)}let mt=!1;K.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==At.state.version||lt.outputColorSpace!==Le||te.isInstancedMesh&&lt.instancing===!1||!te.isInstancedMesh&&lt.instancing===!0||te.isSkinnedMesh&&lt.skinning===!1||!te.isSkinnedMesh&&lt.skinning===!0||lt.envMap!==De||K.fog===!0&&lt.fog!==Ee||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==$e.numPlanes||lt.numIntersection!==$e.numIntersection)||lt.vertexAlphas!==ke||lt.vertexTangents!==he||lt.morphTargets!==at||lt.morphNormals!==Qe||lt.morphColors!==et||lt.toneMapping!==vt||ve.isWebGL2===!0&&lt.morphTargetsCount!==_t)&&(mt=!0):(mt=!0,lt.__version=K.version);let Tt=lt.currentProgram;mt===!0&&(Tt=sn(K,H,te));let on=!1,Ct=!1,an=!1;const Xt=Tt.getUniforms(),cn=lt.uniforms;if(me.useProgram(Tt.program)&&(on=!0,Ct=!0,an=!0),K.id!==T&&(T=K.id,Ct=!0),on||b!==I){if(Xt.setValue(W,"projectionMatrix",I.projectionMatrix),ve.logarithmicDepthBuffer&&Xt.setValue(W,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),b!==I&&(b=I,Ct=!0,an=!0),K.isShaderMaterial||K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshStandardMaterial||K.envMap){const Rt=Xt.map.cameraPosition;Rt!==void 0&&Rt.setValue(W,Oe.setFromMatrixPosition(I.matrixWorld))}(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial)&&Xt.setValue(W,"isOrthographic",I.isOrthographicCamera===!0),(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial||K.isShadowMaterial||te.isSkinnedMesh)&&Xt.setValue(W,"viewMatrix",I.matrixWorldInverse)}if(te.isSkinnedMesh){Xt.setOptional(W,te,"bindMatrix"),Xt.setOptional(W,te,"bindMatrixInverse");const Rt=te.skeleton;Rt&&(ve.floatVertexTextures?(Rt.boneTexture===null&&Rt.computeBoneTexture(),Xt.setValue(W,"boneTexture",Rt.boneTexture,Fe),Xt.setValue(W,"boneTextureSize",Rt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const yn=q.morphAttributes;if((yn.position!==void 0||yn.normal!==void 0||yn.color!==void 0&&ve.isWebGL2===!0)&&Je.update(te,q,Tt),(Ct||lt.receiveShadow!==te.receiveShadow)&&(lt.receiveShadow=te.receiveShadow,Xt.setValue(W,"receiveShadow",te.receiveShadow)),K.isMeshGouraudMaterial&&K.envMap!==null&&(cn.envMap.value=De,cn.flipEnvMap.value=De.isCubeTexture&&De.isRenderTargetTexture===!1?-1:1),Ct&&(Xt.setValue(W,"toneMappingExposure",S.toneMappingExposure),lt.needsLights&&Bi(cn,an),Ee&&K.fog===!0&&Pe.refreshFogUniforms(cn,Ee),Pe.refreshMaterialUniforms(cn,K,ne,Q,ue),C1.upload(W,lt.uniformsList,cn,Fe)),K.isShaderMaterial&&K.uniformsNeedUpdate===!0&&(C1.upload(W,lt.uniformsList,cn,Fe),K.uniformsNeedUpdate=!1),K.isSpriteMaterial&&Xt.setValue(W,"center",te.center),Xt.setValue(W,"modelViewMatrix",te.modelViewMatrix),Xt.setValue(W,"normalMatrix",te.normalMatrix),Xt.setValue(W,"modelMatrix",te.matrixWorld),K.isShaderMaterial||K.isRawShaderMaterial){const Rt=K.uniformsGroups;for(let Sn=0,qt=Rt.length;Sn<qt;Sn++)if(ve.isWebGL2){const Bt=Rt[Sn];tt.update(Bt,Tt),tt.bind(Bt,Tt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tt}function Bi(I,H){I.ambientLightColor.needsUpdate=H,I.lightProbe.needsUpdate=H,I.directionalLights.needsUpdate=H,I.directionalLightShadows.needsUpdate=H,I.pointLights.needsUpdate=H,I.pointLightShadows.needsUpdate=H,I.spotLights.needsUpdate=H,I.spotLightShadows.needsUpdate=H,I.rectAreaLights.needsUpdate=H,I.hemisphereLights.needsUpdate=H}function F(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(I,H,q){Se.get(I.texture).__webglTexture=H,Se.get(I.depthTexture).__webglTexture=q;const K=Se.get(I);K.__hasExternalTextures=!0,K.__hasExternalTextures&&(K.__autoAllocateDepthBuffer=q===void 0,K.__autoAllocateDepthBuffer||ge.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),K.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,H){const q=Se.get(I);q.__webglFramebuffer=H,q.__useDefaultFramebuffer=H===void 0},this.setRenderTarget=function(I,H=0,q=0){R=I,M=H,C=q;let K=!0,te=null,Ee=!1,Me=!1;if(I){const De=Se.get(I);De.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(W.FRAMEBUFFER,null),K=!1):De.__webglFramebuffer===void 0?Fe.setupRenderTarget(I):De.__hasExternalTextures&&Fe.rebindTextures(I,Se.get(I.texture).__webglTexture,Se.get(I.depthTexture).__webglTexture);const ke=I.texture;(ke.isData3DTexture||ke.isDataArrayTexture||ke.isCompressedArrayTexture)&&(Me=!0);const he=Se.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(te=he[H],Ee=!0):ve.isWebGL2&&I.samples>0&&Fe.useMultisampledRTT(I)===!1?te=Se.get(I).__webglMultisampledFramebuffer:te=he,L.copy(I.viewport),O.copy(I.scissor),k=I.scissorTest}else L.copy(Y).multiplyScalar(ne).floor(),O.copy(X).multiplyScalar(ne).floor(),k=$;if(me.bindFramebuffer(W.FRAMEBUFFER,te)&&ve.drawBuffers&&K&&me.drawBuffers(I,te),me.viewport(L),me.scissor(O),me.setScissorTest(k),Ee){const De=Se.get(I.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+H,De.__webglTexture,q)}else if(Me){const De=Se.get(I.texture),ke=H||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,De.__webglTexture,q||0,ke)}T=-1},this.readRenderTargetPixels=function(I,H,q,K,te,Ee,Me){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Le=Se.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&Me!==void 0&&(Le=Le[Me]),Le){me.bindFramebuffer(W.FRAMEBUFFER,Le);try{const De=I.texture,ke=De.format,he=De.type;if(ke!==Ei&&ze.convert(ke)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const at=he===Mi&&(ge.has("EXT_color_buffer_half_float")||ve.isWebGL2&&ge.has("EXT_color_buffer_float"));if(he!==ra&&ze.convert(he)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(he===ii&&(ve.isWebGL2||ge.has("OES_texture_float")||ge.has("WEBGL_color_buffer_float")))&&!at){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H>=0&&H<=I.width-K&&q>=0&&q<=I.height-te&&W.readPixels(H,q,K,te,ze.convert(ke),ze.convert(he),Ee)}finally{const De=R!==null?Se.get(R).__webglFramebuffer:null;me.bindFramebuffer(W.FRAMEBUFFER,De)}}},this.copyFramebufferToTexture=function(I,H,q=0){const K=Math.pow(2,-q),te=Math.floor(H.image.width*K),Ee=Math.floor(H.image.height*K);Fe.setTexture2D(H,0),W.copyTexSubImage2D(W.TEXTURE_2D,q,0,0,I.x,I.y,te,Ee),me.unbindTexture()},this.copyTextureToTexture=function(I,H,q,K=0){const te=H.image.width,Ee=H.image.height,Me=ze.convert(q.format),Le=ze.convert(q.type);Fe.setTexture2D(q,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,q.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,q.unpackAlignment),H.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,K,I.x,I.y,te,Ee,Me,Le,H.image.data):H.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,K,I.x,I.y,H.mipmaps[0].width,H.mipmaps[0].height,Me,H.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,K,I.x,I.y,Me,Le,H.image),K===0&&q.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(I,H,q,K,te=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ee=I.max.x-I.min.x+1,Me=I.max.y-I.min.y+1,Le=I.max.z-I.min.z+1,De=ze.convert(K.format),ke=ze.convert(K.type);let he;if(K.isData3DTexture)Fe.setTexture3D(K,0),he=W.TEXTURE_3D;else if(K.isDataArrayTexture)Fe.setTexture2DArray(K,0),he=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,K.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,K.unpackAlignment);const at=W.getParameter(W.UNPACK_ROW_LENGTH),Qe=W.getParameter(W.UNPACK_IMAGE_HEIGHT),et=W.getParameter(W.UNPACK_SKIP_PIXELS),vt=W.getParameter(W.UNPACK_SKIP_ROWS),wt=W.getParameter(W.UNPACK_SKIP_IMAGES),_t=q.isCompressedTexture?q.mipmaps[0]:q.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,_t.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,_t.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,I.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,I.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,I.min.z),q.isDataTexture||q.isData3DTexture?W.texSubImage3D(he,te,H.x,H.y,H.z,Ee,Me,Le,De,ke,_t.data):q.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(he,te,H.x,H.y,H.z,Ee,Me,Le,De,_t.data)):W.texSubImage3D(he,te,H.x,H.y,H.z,Ee,Me,Le,De,ke,_t),W.pixelStorei(W.UNPACK_ROW_LENGTH,at),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Qe),W.pixelStorei(W.UNPACK_SKIP_PIXELS,et),W.pixelStorei(W.UNPACK_SKIP_ROWS,vt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,wt),te===0&&K.generateMipmaps&&W.generateMipmap(he),me.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?Fe.setTextureCube(I,0):I.isData3DTexture?Fe.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?Fe.setTexture2DArray(I,0):Fe.setTexture2D(I,0),me.unbindTexture()},this.resetState=function(){M=0,C=0,R=null,me.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qo}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kt?rc:PM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===rc?kt:Do}}class f5 extends GM{}f5.prototype.isWebGL1Renderer=!0;class p_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new it(e),this.density=t}clone(){return new p_(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class m_{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new it(e),this.near=t,this.far=r}clone(){return new m_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Gu extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class _0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Um,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ys()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const yi=new Z;class dc{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}setX(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ms(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ms(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ms(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ms(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Wt(t,this.array),r=Wt(r,this.array),i=Wt(i,this.array),s=Wt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new dn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new dc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class HM extends Sr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uf;const gp=new Z,kf=new Z,Nf=new Z,zf=new Ve,vp=new Ve,d5=new Pt,Sv=new Z,yp=new Z,wv=new Z,KR=new Ve,RS=new Ve,ZR=new Ve;class h5 extends Gt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Uf===void 0){Uf=new Ft;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _0(t,5);Uf.setIndex([0,1,2,0,2,3]),Uf.setAttribute("position",new dc(r,3,0,!1)),Uf.setAttribute("uv",new dc(r,2,3,!1))}this.geometry=Uf,this.material=e!==void 0?e:new HM,this.center=new Ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kf.setFromMatrixScale(this.matrixWorld),d5.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kf.multiplyScalar(-Nf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Av(Sv.set(-.5,-.5,0),Nf,o,kf,i,s),Av(yp.set(.5,-.5,0),Nf,o,kf,i,s),Av(wv.set(.5,.5,0),Nf,o,kf,i,s),KR.set(0,0),RS.set(1,0),ZR.set(1,1);let a=e.ray.intersectTriangle(Sv,yp,wv,!1,gp);if(a===null&&(Av(yp.set(-.5,.5,0),Nf,o,kf,i,s),RS.set(0,1),a=e.ray.intersectTriangle(Sv,wv,yp,!1,gp),a===null))return;const l=e.ray.origin.distanceTo(gp);l<e.near||l>e.far||t.push({distance:l,point:gp.clone(),uv:zi.getInterpolation(gp,Sv,yp,wv,KR,RS,ZR,new Ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Av(n,e,t,r,i,s){zf.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(vp.x=s*zf.x-i*zf.y,vp.y=i*zf.x+s*zf.y):vp.copy(zf),n.copy(e),n.x+=vp.x,n.y+=vp.y,n.applyMatrix4(d5)}const Ev=new Z,QR=new Z;class p5 extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Ev.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Ev);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ev.setFromMatrixPosition(e.matrixWorld),QR.setFromMatrixPosition(this.matrixWorld);const r=Ev.distanceTo(QR)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const qR=new Z,eP=new hn,tP=new hn,E$=new Z,nP=new Pt,Gf=new Z,PS=new Ts,rP=new Pt,IS=new gh;class VM extends Un{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Pt,this.bindMatrixInverse=new Pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new uo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Gf.fromBufferAttribute(t,r),this.applyBoneTransform(r,Gf),this.boundingBox.expandByPoint(Gf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Gf.fromBufferAttribute(t,r),this.applyBoneTransform(r,Gf),this.boundingSphere.expandByPoint(Gf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),PS.copy(this.boundingSphere),PS.applyMatrix4(i),e.ray.intersectsSphere(PS)!==!1&&(rP.copy(i).invert(),IS.copy(e.ray).applyMatrix4(rP),!(this.boundingBox!==null&&IS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,IS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;eP.fromBufferAttribute(i.attributes.skinIndex,e),tP.fromBufferAttribute(i.attributes.skinWeight,e),qR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=tP.getComponent(s);if(o!==0){const a=eP.getComponent(s);nP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(E$.copy(qR).applyMatrix4(nP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class g_ extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Td extends Tn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=er,u=er,f,d){super(null,o,a,l,c,u,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iP=new Pt,M$=new Pt;class x0{constructor(e=[],t=[]){this.uuid=ys(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Pt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:M$;iP.multiplyMatrices(a,t[s]),iP.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new x0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=QO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Td(t,e,e,Ei,ii);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new g_),this.bones.push(o),this.boneInverses.push(new Pt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Hu extends dn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Hf=new Pt,sP=new Pt,Mv=[],oP=new uo,C$=new Pt,_p=new Un,xp=new Ts;class WM extends Un{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Hu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,C$)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new uo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Hf),oP.copy(e.boundingBox).applyMatrix4(Hf),this.boundingBox.union(oP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Hf),xp.copy(e.boundingSphere).applyMatrix4(Hf),this.boundingSphere.union(xp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(_p.geometry=this.geometry,_p.material=this.material,_p.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xp.copy(this.boundingSphere),xp.applyMatrix4(r),e.ray.intersectsSphere(xp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Hf),sP.multiplyMatrices(r,Hf),_p.matrixWorld=sP,_p.raycast(e,Mv);for(let o=0,a=Mv.length;o<a;o++){const l=Mv[o];l.instanceId=s,l.object=this,t.push(l)}Mv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Hu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ui extends Sr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new it(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aP=new Z,lP=new Z,cP=new Pt,BS=new gh,Cv=new Ts;class qa extends Gt{constructor(e=new Ft,t=new ui){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)aP.fromBufferAttribute(t,i-1),lP.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=aP.distanceTo(lP);e.setAttribute("lineDistance",new gt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Cv.copy(r.boundingSphere),Cv.applyMatrix4(i),Cv.radius+=s,e.ray.intersectsSphere(Cv)===!1)return;cP.copy(i).invert(),BS.copy(e.ray).applyMatrix4(cP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new Z,u=new Z,f=new Z,d=new Z,m=this.isLineSegments?2:1,v=r.index,y=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=g,A=x-1;S<A;S+=m){const M=v.getX(S),C=v.getX(S+1);if(c.fromBufferAttribute(y,M),u.fromBufferAttribute(y,C),BS.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(d);T<e.near||T>e.far||t.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let S=g,A=x-1;S<A;S+=m){if(c.fromBufferAttribute(y,S),u.fromBufferAttribute(y,S+1),BS.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const uP=new Z,fP=new Z;class Fo extends qa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)uP.fromBufferAttribute(t,i),fP.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+uP.distanceTo(fP);e.setAttribute("lineDistance",new gt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $M extends qa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class v_ extends Sr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dP=new Pt,sE=new gh,bv=new Ts,Tv=new Z;class y_ extends Gt{constructor(e=new Ft,t=new v_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),bv.copy(r.boundingSphere),bv.applyMatrix4(i),bv.radius+=s,e.ray.intersectsSphere(bv)===!1)return;dP.copy(i).invert(),sE.copy(e.ray).applyMatrix4(dP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const d=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=d,_=m;v<_;v++){const y=c.getX(v);Tv.fromBufferAttribute(f,y),hP(Tv,y,l,i,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=d,_=m;v<_;v++)Tv.fromBufferAttribute(f,v),hP(Tv,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function hP(n,e,t,r,i,s,o){const a=sE.distanceSqToPoint(n);if(a<t){const l=new Z;sE.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class b$ extends Tn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:mn,this.magFilter=s!==void 0?s:mn,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class T$ extends Tn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=er,this.minFilter=er,this.generateMipmaps=!1,this.needsUpdate=!0}}class jM extends Tn{constructor(e,t,r,i,s,o,a,l,c,u,f,d){super(null,o,a,l,c,u,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class R$ extends jM{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Vr}}class P$ extends Tn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Uo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],d=r[i+1]-u,m=(o-u)/d;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ve:new Z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Z,i=[],s=[],o=[],a=new Z,l=new Pt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new Z)}s[0]=new Z,o[0]=new Z;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),d<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(tr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(tr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class __ extends Uo{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Ve,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,m=c-this.aY;l=d*u-m*f+this.aX,c=d*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class m5 extends __{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function XM(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;d*=u,m*=u,i(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Rv=new Z,LS=new XM,DS=new XM,OS=new XM;class g5 extends Uo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Z){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Rv.subVectors(i[0],i[1]).add(i[0]),c=Rv);const f=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Rv.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Rv),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),_=Math.pow(f.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(u),m);_<1e-4&&(_=1),v<1e-4&&(v=_),y<1e-4&&(y=_),LS.initNonuniformCatmullRom(c.x,f.x,d.x,u.x,v,_,y),DS.initNonuniformCatmullRom(c.y,f.y,d.y,u.y,v,_,y),OS.initNonuniformCatmullRom(c.z,f.z,d.z,u.z,v,_,y)}else this.curveType==="catmullrom"&&(LS.initCatmullRom(c.x,f.x,d.x,u.x,this.tension),DS.initCatmullRom(c.y,f.y,d.y,u.y,this.tension),OS.initCatmullRom(c.z,f.z,d.z,u.z,this.tension));return r.set(LS.calc(l),DS.calc(l),OS.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function pP(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function I$(n,e){const t=1-n;return t*t*e}function B$(n,e){return 2*(1-n)*n*e}function L$(n,e){return n*n*e}function rm(n,e,t,r){return I$(n,e)+B$(n,t)+L$(n,r)}function D$(n,e){const t=1-n;return t*t*t*e}function O$(n,e){const t=1-n;return 3*t*t*n*e}function F$(n,e){return 3*(1-n)*n*n*e}function U$(n,e){return n*n*n*e}function im(n,e,t,r,i){return D$(n,e)+O$(n,t)+F$(n,r)+U$(n,i)}class JM extends Uo{constructor(e=new Ve,t=new Ve,r=new Ve,i=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(im(e,i.x,s.x,o.x,a.x),im(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class v5 extends Uo{constructor(e=new Z,t=new Z,r=new Z,i=new Z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Z){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(im(e,i.x,s.x,o.x,a.x),im(e,i.y,s.y,o.y,a.y),im(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class x_ extends Uo{constructor(e=new Ve,t=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y5 extends Uo{constructor(e=new Z,t=new Z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Z){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YM extends Uo{constructor(e=new Ve,t=new Ve,r=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(rm(e,i.x,s.x,o.x),rm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KM extends Uo{constructor(e=new Z,t=new Z,r=new Z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Z){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(rm(e,i.x,s.x,o.x),rm(e,i.y,s.y,o.y),rm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZM extends Uo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(pP(a,l.x,c.x,u.x,f.x),pP(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ve().fromArray(i))}return this}}var QM=Object.freeze({__proto__:null,ArcCurve:m5,CatmullRomCurve3:g5,CubicBezierCurve:JM,CubicBezierCurve3:v5,EllipseCurve:__,LineCurve:x_,LineCurve3:y5,QuadraticBezierCurve:YM,QuadraticBezierCurve3:KM,SplineCurve:ZM});class _5 extends Uo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new x_(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new QM[i.type]().fromJSON(i))}return this}}class zm extends _5{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new x_(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new YM(this.currentPoint.clone(),new Ve(e,t),new Ve(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new JM(this.currentPoint.clone(),new Ve(e,t),new Ve(r,i),new Ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new ZM(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new __(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class yh extends Ft{constructor(e=[new Ve(0,-.5),new Ve(.5,0),new Ve(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=tr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new Z,d=new Ve,m=new Z,v=new Z,_=new Z;let y=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let x=0;x<=t;x++){const S=r+x*u*i,A=Math.sin(S),M=Math.cos(S);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*A,f.y=e[C].y,f.z=e[C].x*M,o.push(f.x,f.y,f.z),d.x=x/t,d.y=C/(e.length-1),a.push(d.x,d.y);const R=l[3*C+0]*A,T=l[3*C+1],b=l[3*C+0]*M;c.push(R,T,b)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const A=S+x*e.length,M=A,C=A+e.length,R=A+e.length+1,T=A+1;s.push(M,C,T),s.push(R,T,C)}this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("uv",new gt(a,2)),this.setAttribute("normal",new gt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yh(e.points,e.segments,e.phiStart,e.phiLength)}}class S0 extends yh{constructor(e=1,t=1,r=4,i=8){const s=new zm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new S0(e.radius,e.length,e.capSegments,e.radialSegments)}}class w0 extends Ft{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new Z,u=new Ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const m=r+f/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qu extends Ft{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],d=[],m=[];let v=0;const _=[],y=r/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(d,3)),this.setAttribute("uv",new gt(m,2));function x(){const A=new Z,M=new Z;let C=0;const R=(t-e)/r;for(let T=0;T<=s;T++){const b=[],L=T/s,O=L*(t-e)+e;for(let k=0;k<=i;k++){const z=k/i,V=z*l+a,j=Math.sin(V),Q=Math.cos(V);M.x=O*j,M.y=-L*r+y,M.z=O*Q,f.push(M.x,M.y,M.z),A.set(j,R,Q).normalize(),d.push(A.x,A.y,A.z),m.push(z,1-L),b.push(v++)}_.push(b)}for(let T=0;T<i;T++)for(let b=0;b<s;b++){const L=_[b][T],O=_[b+1][T],k=_[b+1][T+1],z=_[b][T+1];u.push(L,O,z),u.push(O,k,z),C+=6}c.addGroup(g,C,0),g+=C}function S(A){const M=v,C=new Ve,R=new Z;let T=0;const b=A===!0?e:t,L=A===!0?1:-1;for(let k=1;k<=i;k++)f.push(0,y*L,0),d.push(0,L,0),m.push(.5,.5),v++;const O=v;for(let k=0;k<=i;k++){const V=k/i*l+a,j=Math.cos(V),Q=Math.sin(V);R.x=b*Q,R.y=y*L,R.z=b*j,f.push(R.x,R.y,R.z),d.push(0,L,0),C.x=j*.5+.5,C.y=Q*.5*L+.5,m.push(C.x,C.y),v++}for(let k=0;k<i;k++){const z=M+k,V=O+k;A===!0?u.push(V,V+1,z):u.push(V+1,V,z),T+=3}c.addGroup(g,T,A===!0?1:2),g+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class A0 extends Qu{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new A0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cl extends Ft{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new gt(s,3)),this.setAttribute("normal",new gt(s.slice(),3)),this.setAttribute("uv",new gt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new Z,A=new Z,M=new Z;for(let C=0;C<t.length;C+=3)m(t[C+0],S),m(t[C+1],A),m(t[C+2],M),l(S,A,M,x)}function l(x,S,A,M){const C=M+1,R=[];for(let T=0;T<=C;T++){R[T]=[];const b=x.clone().lerp(A,T/C),L=S.clone().lerp(A,T/C),O=C-T;for(let k=0;k<=O;k++)k===0&&T===C?R[T][k]=b:R[T][k]=b.clone().lerp(L,k/O)}for(let T=0;T<C;T++)for(let b=0;b<2*(C-T)-1;b++){const L=Math.floor(b/2);b%2===0?(d(R[T][L+1]),d(R[T+1][L]),d(R[T][L])):(d(R[T][L+1]),d(R[T+1][L+1]),d(R[T+1][L]))}}function c(x){const S=new Z;for(let A=0;A<s.length;A+=3)S.x=s[A+0],S.y=s[A+1],S.z=s[A+2],S.normalize().multiplyScalar(x),s[A+0]=S.x,s[A+1]=S.y,s[A+2]=S.z}function u(){const x=new Z;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const A=y(x)/2/Math.PI+.5,M=g(x)/Math.PI+.5;o.push(A,1-M)}v(),f()}function f(){for(let x=0;x<o.length;x+=6){const S=o[x+0],A=o[x+2],M=o[x+4],C=Math.max(S,A,M),R=Math.min(S,A,M);C>.9&&R<.1&&(S<.2&&(o[x+0]+=1),A<.2&&(o[x+2]+=1),M<.2&&(o[x+4]+=1))}}function d(x){s.push(x.x,x.y,x.z)}function m(x,S){const A=x*3;S.x=e[A+0],S.y=e[A+1],S.z=e[A+2]}function v(){const x=new Z,S=new Z,A=new Z,M=new Z,C=new Ve,R=new Ve,T=new Ve;for(let b=0,L=0;b<s.length;b+=9,L+=6){x.set(s[b+0],s[b+1],s[b+2]),S.set(s[b+3],s[b+4],s[b+5]),A.set(s[b+6],s[b+7],s[b+8]),C.set(o[L+0],o[L+1]),R.set(o[L+2],o[L+3]),T.set(o[L+4],o[L+5]),M.copy(x).add(S).add(A).divideScalar(3);const O=y(M);_(C,L+0,x,O),_(R,L+2,S,O),_(T,L+4,A,O)}}function _(x,S,A,M){M<0&&x.x===1&&(o[S]=x.x-1),A.x===0&&A.z===0&&(o[S]=M/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.vertices,e.indices,e.radius,e.details)}}class E0 extends cl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E0(e.radius,e.detail)}}const Pv=new Z,Iv=new Z,FS=new Z,Bv=new zi;class x5 extends Ft{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Eu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),d={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:y,c:g}=Bv;if(_.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Bv.getNormal(FS),f[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const S=(x+1)%3,A=f[x],M=f[S],C=Bv[u[x]],R=Bv[u[S]],T=`${A}_${M}`,b=`${M}_${A}`;b in d&&d[b]?(FS.dot(d[b].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(R.x,R.y,R.z)),d[b]=null):T in d||(d[T]={index0:c[x],index1:c[S],normal:FS.clone()})}}for(const v in d)if(d[v]){const{index0:_,index1:y}=d[v];Pv.fromBufferAttribute(a,_),Iv.fromBufferAttribute(a,y),m.push(Pv.x,Pv.y,Pv.z),m.push(Iv.x,Iv.y,Iv.z)}this.setAttribute("position",new gt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cu extends zm{constructor(e){super(e),this.uuid=ys(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new zm().fromJSON(i))}return this}}const k$={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=S5(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,d,m;if(r&&(s=V$(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<i;v+=t)f=n[v],d=n[v+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Gm(s,o,t,a,l,m,0),o}};function S5(n,e,t,r,i){let s,o;if(i===ej(n,e,t,r)>0)for(s=e;s<t;s+=r)o=mP(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=mP(s,n[s],n[s+1],o);return o&&S_(o,o.next)&&(Vm(o),o=o.next),o}function Vu(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(S_(t,t.next)||$n(t.prev,t,t.next)===0)){if(Vm(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Gm(n,e,t,r,i,s,o){if(!n)return;!o&&s&&J$(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?z$(n,r,i,s):N$(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Vm(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=G$(Vu(n),e,t),Gm(n,e,t,r,i,s,2)):o===2&&H$(n,e,t,r,i,s):Gm(Vu(n),e,t,r,i,s,1);break}}}function N$(n){const e=n.prev,t=n,r=n.next;if($n(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=d&&v.y>=f&&v.y<=m&&hd(i,a,s,l,o,c,v.x,v.y)&&$n(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function z$(n,e,t,r){const i=n.prev,s=n,o=n.next;if($n(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,d=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<f?u<d?u:d:f<d?f:d,_=a>l?a>c?a:c:l>c?l:c,y=u>f?u>d?u:d:f>d?f:d,g=oE(m,v,e,t,r),x=oE(_,y,e,t,r);let S=n.prevZ,A=n.nextZ;for(;S&&S.z>=g&&A&&A.z<=x;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&hd(a,u,l,f,c,d,S.x,S.y)&&$n(S.prev,S,S.next)>=0||(S=S.prevZ,A.x>=m&&A.x<=_&&A.y>=v&&A.y<=y&&A!==i&&A!==o&&hd(a,u,l,f,c,d,A.x,A.y)&&$n(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&hd(a,u,l,f,c,d,S.x,S.y)&&$n(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;A&&A.z<=x;){if(A.x>=m&&A.x<=_&&A.y>=v&&A.y<=y&&A!==i&&A!==o&&hd(a,u,l,f,c,d,A.x,A.y)&&$n(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function G$(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!S_(i,s)&&w5(i,r,r.next,s)&&Hm(i,s)&&Hm(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Vm(r),Vm(r.next),r=n=s),r=r.next}while(r!==n);return Vu(r)}function H$(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Z$(o,a)){let l=A5(o,a);o=Vu(o,o.next),l=Vu(l,l.next),Gm(o,e,t,r,i,s,0),Gm(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function V$(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=S5(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(K$(c));for(i.sort(W$),s=0;s<i.length;s++)t=$$(i[s],t);return t}function W$(n,e){return n.x-e.x}function $$(n,e){const t=j$(n,e);if(!t)return e;const r=A5(t,n);return Vu(r,r.next),Vu(t,t.next)}function j$(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&hd(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Hm(t,n)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&X$(i,t)))&&(i=t,u=f)),t=t.next;while(t!==a);return i}function X$(n,e){return $n(n.prev,n,e.prev)<0&&$n(e.next,n,n.next)<0}function J$(n,e,t,r){let i=n;do i.z===0&&(i.z=oE(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Y$(i)}function Y$(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function oE(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function K$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function hd(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Z$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Q$(n,e)&&(Hm(n,e)&&Hm(e,n)&&q$(n,e)&&($n(n.prev,n,e.prev)||$n(n,e.prev,e))||S_(n,e)&&$n(n.prev,n,n.next)>0&&$n(e.prev,e,e.next)>0)}function $n(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function S_(n,e){return n.x===e.x&&n.y===e.y}function w5(n,e,t,r){const i=Dv($n(n,e,t)),s=Dv($n(n,e,r)),o=Dv($n(t,r,n)),a=Dv($n(t,r,e));return!!(i!==s&&o!==a||i===0&&Lv(n,t,e)||s===0&&Lv(n,r,e)||o===0&&Lv(t,n,r)||a===0&&Lv(t,e,r))}function Lv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Dv(n){return n>0?1:n<0?-1:0}function Q$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&w5(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Hm(n,e){return $n(n.prev,n,n.next)<0?$n(n,e,n.next)>=0&&$n(n,n.prev,e)>=0:$n(n,e,n.prev)<0||$n(n,n.next,e)<0}function q$(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function A5(n,e){const t=new aE(n.i,n.x,n.y),r=new aE(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function mP(n,e,t,r){const i=new aE(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ej(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ia{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ia.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];gP(e),vP(r,e);let o=e.length;t.forEach(gP);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,vP(r,t[l]);const a=k$.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function gP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function vP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class M0 extends Ft{constructor(e=new Cu([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new gt(i,3)),this.setAttribute("uv",new gt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:tj;let S,A=!1,M,C,R,T;g&&(S=g.getSpacedPoints(u),A=!0,d=!1,M=g.computeFrenetFrames(u,!1),C=new Z,R=new Z,T=new Z),d||(y=0,m=0,v=0,_=0);const b=a.extractPoints(c);let L=b.shape;const O=b.holes;if(!ia.isClockWise(L)){L=L.reverse();for(let W=0,Ae=O.length;W<Ae;W++){const ge=O[W];ia.isClockWise(ge)&&(O[W]=ge.reverse())}}const z=ia.triangulateShape(L,O),V=L;for(let W=0,Ae=O.length;W<Ae;W++){const ge=O[W];L=L.concat(ge)}function j(W,Ae,ge){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),W.clone().addScaledVector(Ae,ge)}const Q=L.length,ne=z.length;function G(W,Ae,ge){let ve,me,Ge;const Se=W.x-Ae.x,Fe=W.y-Ae.y,Ne=ge.x-W.x,Ie=ge.y-W.y,st=Se*Se+Fe*Fe,N=Se*Ie-Fe*Ne;if(Math.abs(N)>Number.EPSILON){const U=Math.sqrt(st),le=Math.sqrt(Ne*Ne+Ie*Ie),Pe=Ae.x-Fe/U,Te=Ae.y+Se/U,Re=ge.x-Ie/le,$e=ge.y+Ne/le,He=((Re-Pe)*Ie-($e-Te)*Ne)/(Se*Ie-Fe*Ne);ve=Pe+Se*He-W.x,me=Te+Fe*He-W.y;const be=ve*ve+me*me;if(be<=2)return new Ve(ve,me);Ge=Math.sqrt(be/2)}else{let U=!1;Se>Number.EPSILON?Ne>Number.EPSILON&&(U=!0):Se<-Number.EPSILON?Ne<-Number.EPSILON&&(U=!0):Math.sign(Fe)===Math.sign(Ie)&&(U=!0),U?(ve=-Fe,me=Se,Ge=Math.sqrt(st)):(ve=Se,me=Fe,Ge=Math.sqrt(st/2))}return new Ve(ve/Ge,me/Ge)}const J=[];for(let W=0,Ae=V.length,ge=Ae-1,ve=W+1;W<Ae;W++,ge++,ve++)ge===Ae&&(ge=0),ve===Ae&&(ve=0),J[W]=G(V[W],V[ge],V[ve]);const Y=[];let X,$=J.concat();for(let W=0,Ae=O.length;W<Ae;W++){const ge=O[W];X=[];for(let ve=0,me=ge.length,Ge=me-1,Se=ve+1;ve<me;ve++,Ge++,Se++)Ge===me&&(Ge=0),Se===me&&(Se=0),X[ve]=G(ge[ve],ge[Ge],ge[Se]);Y.push(X),$=$.concat(X)}for(let W=0;W<y;W++){const Ae=W/y,ge=m*Math.cos(Ae*Math.PI/2),ve=v*Math.sin(Ae*Math.PI/2)+_;for(let me=0,Ge=V.length;me<Ge;me++){const Se=j(V[me],J[me],ve);fe(Se.x,Se.y,-ge)}for(let me=0,Ge=O.length;me<Ge;me++){const Se=O[me];X=Y[me];for(let Fe=0,Ne=Se.length;Fe<Ne;Fe++){const Ie=j(Se[Fe],X[Fe],ve);fe(Ie.x,Ie.y,-ge)}}}const re=v+_;for(let W=0;W<Q;W++){const Ae=d?j(L[W],$[W],re):L[W];A?(R.copy(M.normals[0]).multiplyScalar(Ae.x),C.copy(M.binormals[0]).multiplyScalar(Ae.y),T.copy(S[0]).add(R).add(C),fe(T.x,T.y,T.z)):fe(Ae.x,Ae.y,0)}for(let W=1;W<=u;W++)for(let Ae=0;Ae<Q;Ae++){const ge=d?j(L[Ae],$[Ae],re):L[Ae];A?(R.copy(M.normals[W]).multiplyScalar(ge.x),C.copy(M.binormals[W]).multiplyScalar(ge.y),T.copy(S[W]).add(R).add(C),fe(T.x,T.y,T.z)):fe(ge.x,ge.y,f/u*W)}for(let W=y-1;W>=0;W--){const Ae=W/y,ge=m*Math.cos(Ae*Math.PI/2),ve=v*Math.sin(Ae*Math.PI/2)+_;for(let me=0,Ge=V.length;me<Ge;me++){const Se=j(V[me],J[me],ve);fe(Se.x,Se.y,f+ge)}for(let me=0,Ge=O.length;me<Ge;me++){const Se=O[me];X=Y[me];for(let Fe=0,Ne=Se.length;Fe<Ne;Fe++){const Ie=j(Se[Fe],X[Fe],ve);A?fe(Ie.x,Ie.y+S[u-1].y,S[u-1].x+ge):fe(Ie.x,Ie.y,f+ge)}}}ie(),ae();function ie(){const W=i.length/3;if(d){let Ae=0,ge=Q*Ae;for(let ve=0;ve<ne;ve++){const me=z[ve];_e(me[2]+ge,me[1]+ge,me[0]+ge)}Ae=u+y*2,ge=Q*Ae;for(let ve=0;ve<ne;ve++){const me=z[ve];_e(me[0]+ge,me[1]+ge,me[2]+ge)}}else{for(let Ae=0;Ae<ne;Ae++){const ge=z[Ae];_e(ge[2],ge[1],ge[0])}for(let Ae=0;Ae<ne;Ae++){const ge=z[Ae];_e(ge[0]+Q*u,ge[1]+Q*u,ge[2]+Q*u)}}r.addGroup(W,i.length/3-W,0)}function ae(){const W=i.length/3;let Ae=0;ue(V,Ae),Ae+=V.length;for(let ge=0,ve=O.length;ge<ve;ge++){const me=O[ge];ue(me,Ae),Ae+=me.length}r.addGroup(W,i.length/3-W,1)}function ue(W,Ae){let ge=W.length;for(;--ge>=0;){const ve=ge;let me=ge-1;me<0&&(me=W.length-1);for(let Ge=0,Se=u+y*2;Ge<Se;Ge++){const Fe=Q*Ge,Ne=Q*(Ge+1),Ie=Ae+ve+Fe,st=Ae+me+Fe,N=Ae+me+Ne,U=Ae+ve+Ne;Oe(Ie,st,N,U)}}}function fe(W,Ae,ge){l.push(W),l.push(Ae),l.push(ge)}function _e(W,Ae,ge){We(W),We(Ae),We(ge);const ve=i.length/3,me=x.generateTopUV(r,i,ve-3,ve-2,ve-1);xe(me[0]),xe(me[1]),xe(me[2])}function Oe(W,Ae,ge,ve){We(W),We(Ae),We(ve),We(Ae),We(ge),We(ve);const me=i.length/3,Ge=x.generateSideWallUV(r,i,me-6,me-3,me-2,me-1);xe(Ge[0]),xe(Ge[1]),xe(Ge[3]),xe(Ge[1]),xe(Ge[2]),xe(Ge[3])}function We(W){i.push(l[W*3+0]),i.push(l[W*3+1]),i.push(l[W*3+2])}function xe(W){s.push(W.x),s.push(W.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return nj(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new QM[i.type]().fromJSON(i)),new M0(r,e.options)}}const tj={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ve(s,o),new Ve(a,l),new Ve(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],d=e[i*3],m=e[i*3+1],v=e[i*3+2],_=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ve(o,1-l),new Ve(c,1-f),new Ve(d,1-v),new Ve(_,1-g)]:[new Ve(a,1-l),new Ve(u,1-f),new Ve(m,1-v),new Ve(y,1-g)]}};function nj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class _h extends cl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _h(e.radius,e.detail)}}class xh extends cl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xh(e.radius,e.detail)}}class C0 extends Ft{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const d=(t-e)/i,m=new Z,v=new Ve;for(let _=0;_<=i;_++){for(let y=0;y<=r;y++){const g=s+y/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}f+=d}for(let _=0;_<i;_++){const y=_*(r+1);for(let g=0;g<r;g++){const x=g+y,S=x,A=x+r+1,M=x+r+2,C=x+1;a.push(S,A,C),a.push(A,M,C)}}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class b0 extends Ft{constructor(e=new Cu([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new gt(i,3)),this.setAttribute("normal",new gt(s,3)),this.setAttribute("uv",new gt(o,2));function c(u){const f=i.length/3,d=u.extractPoints(t);let m=d.shape;const v=d.holes;ia.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const x=v[y];ia.isClockWise(x)===!0&&(v[y]=x.reverse())}const _=ia.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const x=v[y];m=m.concat(x)}for(let y=0,g=m.length;y<g;y++){const x=m[y];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let y=0,g=_.length;y<g;y++){const x=_[y],S=x[0]+f,A=x[1]+f,M=x[2]+f;r.push(S,A,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rj(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new b0(r,e.curveSegments)}}function rj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Sh extends Ft{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new Z,d=new Z,m=[],v=[],_=[],y=[];for(let g=0;g<=r;g++){const x=[],S=g/r;let A=0;g===0&&o===0?A=.5/t:g===r&&l===Math.PI&&(A=-.5/t);for(let M=0;M<=t;M++){const C=M/t;f.x=-e*Math.cos(i+C*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+C*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),d.copy(f).normalize(),_.push(d.x,d.y,d.z),y.push(C+A,1-S),x.push(c++)}u.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){const S=u[g][x+1],A=u[g][x],M=u[g+1][x],C=u[g+1][x+1];(g!==0||o>0)&&m.push(S,A,C),(g!==r-1||l<Math.PI)&&m.push(A,M,C)}this.setIndex(m),this.setAttribute("position",new gt(v,3)),this.setAttribute("normal",new gt(_,3)),this.setAttribute("uv",new gt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class T0 extends cl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new T0(e.radius,e.detail)}}class R0 extends Ft{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new Z,f=new Z,d=new Z;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const _=v/i*s,y=m/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(_),f.y=(e+t*Math.cos(y))*Math.sin(_),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),d.subVectors(f,u).normalize(),l.push(d.x,d.y,d.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const _=(i+1)*m+v-1,y=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,x=(i+1)*m+v;o.push(_,y,x),o.push(y,g,x)}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(l,3)),this.setAttribute("uv",new gt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class P0 extends Ft{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new Z,d=new Z,m=new Z,v=new Z,_=new Z,y=new Z,g=new Z;for(let S=0;S<=r;++S){const A=S/r*s*Math.PI*2;x(A,s,o,e,m),x(A+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),_.crossVectors(y,g),g.crossVectors(_,y),_.normalize(),g.normalize();for(let M=0;M<=i;++M){const C=M/i*Math.PI*2,R=-t*Math.cos(C),T=t*Math.sin(C);f.x=m.x+(R*g.x+T*_.x),f.y=m.y+(R*g.y+T*_.y),f.z=m.z+(R*g.z+T*_.z),l.push(f.x,f.y,f.z),d.subVectors(f,m).normalize(),c.push(d.x,d.y,d.z),u.push(S/r),u.push(M/i)}}for(let S=1;S<=r;S++)for(let A=1;A<=i;A++){const M=(i+1)*(S-1)+(A-1),C=(i+1)*S+(A-1),R=(i+1)*S+A,T=(i+1)*(S-1)+A;a.push(M,C,T),a.push(C,R,T)}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(c,3)),this.setAttribute("uv",new gt(u,2));function x(S,A,M,C,R){const T=Math.cos(S),b=Math.sin(S),L=M/A*S,O=Math.cos(L);R.x=C*(2+O)*.5*T,R.y=C*(2+O)*b*.5,R.z=C*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class I0 extends Ft{constructor(e=new KM(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Z,l=new Z,c=new Ve;let u=new Z;const f=[],d=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(d,3)),this.setAttribute("uv",new gt(m,2));function _(){for(let S=0;S<t;S++)y(S);y(s===!1?t:0),x(),g()}function y(S){u=e.getPointAt(S/t,u);const A=o.normals[S],M=o.binormals[S];for(let C=0;C<=i;C++){const R=C/i*Math.PI*2,T=Math.sin(R),b=-Math.cos(R);l.x=b*A.x+T*M.x,l.y=b*A.y+T*M.y,l.z=b*A.z+T*M.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let A=1;A<=i;A++){const M=(i+1)*(S-1)+(A-1),C=(i+1)*S+(A-1),R=(i+1)*S+A,T=(i+1)*(S-1)+A;v.push(M,C,T),v.push(C,R,T)}}function x(){for(let S=0;S<=t;S++)for(let A=0;A<=i;A++)c.x=S/t,c.y=A/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new I0(new QM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class E5 extends Ft{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new Z,s=new Z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],d=f.start,m=f.count;for(let v=d,_=d+m;v<_;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),x=a.getX(v+(y+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),yP(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),yP(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function yP(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var _P=Object.freeze({__proto__:null,BoxGeometry:Mc,CapsuleGeometry:S0,CircleGeometry:w0,ConeGeometry:A0,CylinderGeometry:Qu,DodecahedronGeometry:E0,EdgesGeometry:x5,ExtrudeGeometry:M0,IcosahedronGeometry:_h,LatheGeometry:yh,OctahedronGeometry:xh,PlaneGeometry:da,PolyhedronGeometry:cl,RingGeometry:C0,ShapeGeometry:b0,SphereGeometry:Sh,TetrahedronGeometry:T0,TorusGeometry:R0,TorusKnotGeometry:P0,TubeGeometry:I0,WireframeGeometry:E5});class M5 extends Sr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new it(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class C5 extends As{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class B0 extends Sr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ha extends B0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new it(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new it(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new it(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class b5 extends Sr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class T5 extends Sr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new it(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class R5 extends Sr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class P5 extends Sr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class I5 extends Sr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new it(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B5 extends ui{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ws(n,e,t){return qM(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function yu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function qM(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function L5(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function lE(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function eC(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function ij(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],d=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){f.push(c.times[m]);for(let _=0;_<u;++_)d.push(c.values[m*u+_])}}f.length!==0&&(c.times=yu(f,c.times.constructor),c.values=yu(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function sj(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let d=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const g=u,x=f-u;_=Ws(a.values,g,x)}else if(s>=a.times[v]){const g=v*f+u,x=g+f-u;_=Ws(a.values,g,x)}else{const g=a.createInterpolant(),x=u,S=f-u;g.evaluate(s),_=Ws(g.resultBuffer,x,S)}l==="quaternion"&&new oi().fromArray(_).normalize().conjugate().toArray(_);const y=c.times.length;for(let g=0;g<y;++g){const x=g*m+d;if(l==="quaternion")oi.multiplyQuaternionsFlat(c.values,x,_,0,c.values,x);else{const S=m-d*2;for(let A=0;A<S;++A)c.values[x+A]-=_[A]}}}return n.blendMode=TM,n}const oj={arraySlice:Ws,convertArray:yu,isTypedArray:qM,getKeyframeOrder:L5,sortedArray:lE,flattenJSON:eC,subclip:ij,makeClipAdditive:sj};class wh{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class D5 extends wh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pu,endingEnd:pu}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case mu:s=e,a=2*t-r;break;case Fm:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case mu:o=e,l=2*r-t;break;case Fm:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),_=v*v,y=_*v,g=-d*y+2*d*_-d*v,x=(1+d)*y+(-1.5-2*d)*_+(-.5+d)*v+1,S=(-1-m)*y+(1.5+m)*_+.5*v,A=m*y-m*_;for(let M=0;M!==a;++M)s[M]=g*o[u+M]+x*o[c+M]+S*o[l+M]+A*o[f+M];return s}}class tC extends wh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),f=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*f+o[l+d]*u;return s}}class O5 extends wh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ko{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=yu(t,this.TimeBufferType),this.values=yu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:yu(e.times,Array),values:yu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new O5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new D5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jd:t=this.InterpolantFactoryMethodDiscrete;break;case zu:t=this.InterpolantFactoryMethodLinear;break;case A1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jd;case this.InterpolantFactoryMethodLinear:return zu;case this.InterpolantFactoryMethodSmooth:return A1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ws(r,s,o),this.values=Ws(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&qM(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Ws(this.times),t=Ws(this.values),r=this.getValueSize(),i=this.getInterpolation()===A1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,d=f-r,m=f+r;for(let v=0;v!==r;++v){const _=t[f+v];if(_!==t[d+v]||_!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,d=o*r;for(let m=0;m!==r;++m)t[d+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Ws(e,0,o),this.values=Ws(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Ws(this.times,0),t=Ws(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ko.prototype.TimeBufferType=Float32Array;ko.prototype.ValueBufferType=Float32Array;ko.prototype.DefaultInterpolation=zu;class qu extends ko{}qu.prototype.ValueTypeName="bool";qu.prototype.ValueBufferType=Array;qu.prototype.DefaultInterpolation=jd;qu.prototype.InterpolantFactoryMethodLinear=void 0;qu.prototype.InterpolantFactoryMethodSmooth=void 0;class nC extends ko{}nC.prototype.ValueTypeName="color";class Yd extends ko{}Yd.prototype.ValueTypeName="number";class F5 extends wh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)oi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class hc extends ko{InterpolantFactoryMethodLinear(e){return new F5(this.times,this.values,this.getValueSize(),e)}}hc.prototype.ValueTypeName="quaternion";hc.prototype.DefaultInterpolation=zu;hc.prototype.InterpolantFactoryMethodSmooth=void 0;class ef extends ko{}ef.prototype.ValueTypeName="string";ef.prototype.ValueBufferType=Array;ef.prototype.DefaultInterpolation=jd;ef.prototype.InterpolantFactoryMethodLinear=void 0;ef.prototype.InterpolantFactoryMethodSmooth=void 0;class Kd extends ko{}Kd.prototype.ValueTypeName="vector";class Zd{constructor(e,t=-1,r,i=c_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ys(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(lj(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ko.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=L5(l);l=lE(l,1,u),c=lE(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Yd(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let d=i[f];d||(i[f]=d=[]),d.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,m,v,_){if(m.length!==0){const y=[],g=[];eC(m,y,g,v),y.length!==0&&_.push(new f(d,y,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let _=0;_<d[v].morphTargets.length;_++)m[d[v].morphTargets[_]]=-1;for(const _ in m){const y=[],g=[];for(let x=0;x!==d[v].morphTargets.length;++x){const S=d[v];y.push(S.time),g.push(S.morphTarget===_?1:0)}i.push(new Yd(".morphTargetInfluence["+_+"]",y,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(Kd,m+".position",d,"pos",i),r(hc,m+".quaternion",d,"rot",i),r(Kd,m+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yd;case"vector":case"vector2":case"vector3":case"vector4":return Kd;case"color":return nC;case"quaternion":return hc;case"bool":case"boolean":return qu;case"string":return ef}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function lj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aj(n.type);if(n.times===void 0){const t=[],r=[];eC(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Wu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class rC{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=c.length;f<d;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const U5=new rC;class Ii{constructor(e){this.manager=e!==void 0?e:U5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Pa={};class cj extends Error{constructor(e,t){super(e),this.response=t}}class Es extends Ii{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Wu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Pa[e]!==void 0){Pa[e].push({onLoad:t,onProgress:r,onError:i});return}Pa[e]=[],Pa[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Pa[e],f=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=d?parseInt(d):0,v=m!==0;let _=0;const y=new ReadableStream({start(g){x();function x(){f.read().then(({done:S,value:A})=>{if(S)g.close();else{_+=A.byteLength;const M=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let C=0,R=u.length;C<R;C++){const T=u[C];T.onProgress&&T.onProgress(M)}g.enqueue(A),x()}})}}});return new Response(y)}else throw new cj(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(d);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Wu.add(e,c);const u=Pa[e];delete Pa[e];for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Pa[e];if(u===void 0)throw this.manager.itemError(e),c;delete Pa[e];for(let f=0,d=u.length;f<d;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uj extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Es(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Zd.parse(e[r]);t.push(i)}return t}}class fj extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new jM,l=new Es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(d){const m=s.parse(d,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=mn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)u(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)o[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+_]),o[v].format=d.format,o[v].width=d.width,o[v].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=mn),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Wm extends Ii{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Wu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Nm("img");function l(){u(),Wu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class k5 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=new v0;s.colorSpace=kt;const o=new Wm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class iC extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Td,a=new Es(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Vr,o.wrapT=c.wrapT!==void 0?c.wrapT:Vr,o.magFilter=c.magFilter!==void 0?c.magFilter:mn,o.minFilter=c.minFilter!==void 0?c.minFilter:mn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=aa),c.mipmapCount===1&&(o.minFilter=mn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,i),o}}class N5 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=new Tn,o=new Wm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class bc extends Gt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new it(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class z5 extends bc{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new it(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const US=new Pt,xP=new Z,SP=new Z;class sC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new f_,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;xP.setFromMatrixPosition(e.matrixWorld),t.position.copy(xP),SP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SP),t.updateMatrixWorld(),US.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(US),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(US)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dj extends sC{constructor(){super(new dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Xd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class oC extends bc{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new dj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const wP=new Pt,Sp=new Z,kS=new Z;class hj extends sC{constructor(){super(new dr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new hn(2,1,1,1),new hn(0,1,1,1),new hn(3,1,1,1),new hn(1,1,1,1),new hn(3,0,1,1),new hn(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Sp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Sp),kS.copy(r.position),kS.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(kS),r.updateMatrixWorld(),i.makeTranslation(-Sp.x,-Sp.y,-Sp.z),wP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wP)}}class aC extends bc{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new hj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class pj extends sC{constructor(){super(new Cc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lC extends bc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.shadow=new pj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class G5 extends bc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class H5 extends bc{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class V5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class w_ extends bc{constructor(e=new V5,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class A_ extends Ii{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Es(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=A_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new it().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new it().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ve().fromArray(o.value);break;case"v3":i.uniforms[s].value=new Z().fromArray(o.value);break;case"v4":i.uniforms[s].value=new hn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new zt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Pt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ve().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:M5,SpriteMaterial:HM,RawShaderMaterial:C5,ShaderMaterial:As,PointsMaterial:v_,MeshPhysicalMaterial:ha,MeshStandardMaterial:B0,MeshPhongMaterial:b5,MeshToonMaterial:T5,MeshNormalMaterial:R5,MeshLambertMaterial:P5,MeshDepthMaterial:y0,MeshDistanceMaterial:h_,MeshBasicMaterial:Wi,MeshMatcapMaterial:I5,LineDashedMaterial:B5,LineBasicMaterial:ui,Material:Sr};return new t[e]}}class sa{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cC extends Ft{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class W5 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Es(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),x=fd(y.type,g),S=new _0(x,y.stride);return S.uuid=y.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new cC:new Ft,a=e.data.index;if(a!==void 0){const m=fd(a.type,a.array);o.setIndex(new dn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);_=new dc(y,v.itemSize,v.offset,v.normalized)}else{const y=fd(v.type,v.array),g=v.isInstancedBufferAttribute?Hu:dn;_=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),v.updateRange!==void 0&&(_.updateRange.offset=v.updateRange.offset,_.updateRange.count=v.updateRange.count),o.setAttribute(m,_)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],_=[];for(let y=0,g=v.length;y<g;y++){const x=v[y];let S;if(x.isInterleavedBufferAttribute){const A=i(e.data,x.data);S=new dc(A,x.itemSize,x.offset,x.normalized)}else{const A=fd(x.type,x.array);S=new dn(A,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),_.push(S)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const _=f[m];o.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new Z;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new Ts(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class mj extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?sa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Es(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?sa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Es(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Cu().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new x0().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new W5;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in _P?a=_P[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new A_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Zd.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:fd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new rC(t);s=new Wm(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],d=f.url;if(Array.isArray(d)){const m=[];for(let v=0,_=d.length;v<_;v++){const y=d[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Td(g.data,g.width,g.height)))}i[f.uuid]=new gu(m)}else{const m=a(f.url);i[f.uuid]=new gu(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:fd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Wm(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,d=c.length;f<d;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Td(v.data,v.width,v.height)))}r[l.uuid]=new gu(u)}else{const u=await s(l.url);r[l.uuid]=new gu(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new v0,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Td:u=new Tn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,gj)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],AP),u.wrapT=r(a.wrap[1],AP)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,EP)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,EP)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let v=0,_=d.length;v<_;v++){const y=d[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function c(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let u,f;switch(e.type){case"Scene":o=new Gu,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new it(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new m_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new p_(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new dr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Cc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new G5(e.color,e.intensity);break;case"DirectionalLight":o=new lC(e.color,e.intensity);break;case"PointLight":o=new aC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new H5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new oC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new z5(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new w_().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new VM(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Un(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const d=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new WM(u,f,d),o.instanceMatrix=new Hu(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Hu(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new p5;break;case"Line":o=new qa(a(e.geometry),l(e.material));break;case"LineLoop":o=new $M(a(e.geometry),l(e.material));break;case"LineSegments":o=new Fo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new y_(a(e.geometry),l(e.material));break;case"Sprite":o=new h5(l(e.material));break;case"Group":o=new Va;break;case"Bone":o=new g_;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const v=d[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const v=d[m],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const gj={UVMapping:o_,CubeReflectionMapping:Qa,CubeRefractionMapping:uc,EquirectangularReflectionMapping:Wd,EquirectangularRefractionMapping:Dm,CubeUVReflectionMapping:mh},AP={RepeatWrapping:fc,ClampToEdgeWrapping:Vr,MirroredRepeatWrapping:$d},EP={NearestFilter:er,NearestMipmapNearestFilter:Om,NearestMipmapLinearFilter:Cd,LinearFilter:mn,LinearMipmapNearestFilter:a_,LinearMipmapLinearFilter:aa};class $5 extends Ii{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Wu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Wu.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Ov;class uC{static getContext(){return Ov===void 0&&(Ov=new(window.AudioContext||window.webkitAudioContext)),Ov}static setContext(e){Ov=e}}class vj extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Es(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);uC.getContext().decodeAudioData(c,function(f){t(f)},a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class yj extends w_{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new it().set(e),s=new it().set(t),o=new Z(i.r,i.g,i.b),a=new Z(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class _j extends w_{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new it().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const MP=new Pt,CP=new Pt,Jc=new Pt;class xj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Jc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Eu*t.fov*.5)/t.zoom;let a,l;CP.elements[12]=-i,MP.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Jc.elements[0]=2*t.near/(l-a),Jc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Jc),a=-o*t.aspect-s,l=o*t.aspect-s,Jc.elements[0]=2*t.near/(l-a),Jc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Jc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(CP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(MP)}}class fC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=bP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=bP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function bP(){return(typeof performance>"u"?Date:performance).now()}const Yc=new Z,TP=new oi,Sj=new Z,Kc=new Z;class wj extends Gt{constructor(){super(),this.type="AudioListener",this.context=uC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yc,TP,Sj),Kc.set(0,0,-1).applyQuaternion(TP),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yc.x,i),t.positionY.linearRampToValueAtTime(Yc.y,i),t.positionZ.linearRampToValueAtTime(Yc.z,i),t.forwardX.linearRampToValueAtTime(Kc.x,i),t.forwardY.linearRampToValueAtTime(Kc.y,i),t.forwardZ.linearRampToValueAtTime(Kc.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Yc.x,Yc.y,Yc.z),t.setOrientation(Kc.x,Kc.y,Kc.z,r.x,r.y,r.z)}}let j5=class extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Zc=new Z,RP=new oi,Aj=new Z,Qc=new Z;class Ej extends j5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zc,RP,Aj),Qc.set(0,0,1).applyQuaternion(RP);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zc.x,r),t.positionY.linearRampToValueAtTime(Zc.y,r),t.positionZ.linearRampToValueAtTime(Zc.z,r),t.orientationX.linearRampToValueAtTime(Qc.x,r),t.orientationY.linearRampToValueAtTime(Qc.y,r),t.orientationZ.linearRampToValueAtTime(Qc.z,r)}else t.setPosition(Zc.x,Zc.y,Zc.z),t.setOrientation(Qc.x,Qc.y,Qc.z)}}class Mj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class X5{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){oi.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;oi.multiplyQuaternionsFlat(e,o,e,t,e,r),oi.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const dC="\\[\\]\\.:\\/",Cj=new RegExp("["+dC+"]","g"),hC="[^"+dC+"]",bj="[^"+dC.replace("\\.","")+"]",Tj=/((?:WC+[\/:])*)/.source.replace("WC",hC),Rj=/(WCOD+)?/.source.replace("WCOD",bj),Pj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hC),Ij=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hC),Bj=new RegExp("^"+Tj+Rj+Pj+Ij+"$"),Lj=["material","materials","bones","map"];class Dj{constructor(e,t,r){const i=r||nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class nn{constructor(e,t,r){this.path=t,this.parsedPath=r||nn.parseTrackName(t),this.node=nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new nn.Composite(e,t,r):new nn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cj,"")}static parseTrackName(e){const t=Bj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Lj.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nn.Composite=Dj;nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nn.prototype.GetterByBindingType=[nn.prototype._getValue_direct,nn.prototype._getValue_array,nn.prototype._getValue_arrayElement,nn.prototype._getValue_toArray];nn.prototype.SetterByBindingTypeAndVersioning=[[nn.prototype._setValue_direct,nn.prototype._setValue_direct_setNeedsUpdate,nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_array,nn.prototype._setValue_array_setNeedsUpdate,nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_arrayElement,nn.prototype._setValue_arrayElement_setNeedsUpdate,nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_fromArray,nn.prototype._setValue_fromArray_setNeedsUpdate,nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Oj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ys(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],m=d.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(d);for(let _=0,y=o;_!==y;++_)s[_].push(new nn(d,r[_],i[_]))}else if(v<c){a=e[v];const _=--c,y=e[_];t[y.uuid]=v,e[v]=y,t[m]=_,e[_]=d;for(let g=0,x=o;g!==x;++g){const S=s[g],A=S[_];let M=S[v];S[v]=A,M===void 0&&(M=new nn(d,r[g],i[g])),S[_]=M}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,d=e[f];t[d.uuid]=u,e[u]=d,t[c]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const _=r[m],y=_[f],g=_[u];_[u]=y,_[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const d=--s,m=e[d],v=--o,_=e[v];t[m.uuid]=f,e[f]=m,t[_.uuid]=d,e[d]=_,e.pop();for(let y=0,g=i;y!==g;++y){const x=r[y],S=x[d],A=x[v];x[f]=S,x[d]=A,x.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,_=i;v!==_;++v){const y=r[v];y[f]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let d=u,m=l.length;d!==m;++d){const v=l[d];f[d]=new nn(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class J5{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:pu,endingEnd:pu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=kO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case TM:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case c_:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===NO;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===UO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=mu,i.endingEnd=mu):(e?i.endingStart=this.zeroSlopeAtStart?mu:pu:i.endingStart=Fm,t?i.endingEnd=this.zeroSlopeAtEnd?mu:pu:i.endingEnd=Fm)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Fj=new Float32Array(1);class Uj extends ll{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const d=i[f],m=d.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;v=new X5(nn.create(r,m,_),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new tC(new Float32Array(2),new Float32Array(2),1,Fj),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Zd.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=c_),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new J5(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Zd.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pC{constructor(e){this.value=e}clone(){return new pC(this.value.clone===void 0?this.value:this.value.clone())}}let kj=0;class Nj extends ll{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kj++}),this.name="",this.usage=Um,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class zj extends _0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gj{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class mC{constructor(e,t,r=0,i=1/0){this.ray=new gh(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Mu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return cE(e,this,r,t),r.sort(PP),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)cE(e[i],this,r,t);return r.sort(PP),r}}function PP(n,e){return n.distance-e.distance}function cE(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)cE(i[s],e,t,!0)}}class Hj{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(tr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vj{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const IP=new Ve;class Wj{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=IP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,IP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const BP=new Z,Fv=new Z;class $j{constructor(e=new Z,t=new Z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){BP.subVectors(e,this.start),Fv.subVectors(this.end,this.start);const r=Fv.dot(Fv);let s=Fv.dot(BP)/r;return t&&(s=tr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const LP=new Z;class jj extends Gt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Ft,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new gt(i,3));const s=new ui({fog:!1,toneMapped:!1});this.cone=new Fo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),LP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(LP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bl=new Z,Uv=new Pt,NS=new Pt;class Xj extends Fo{constructor(e){const t=Y5(e),r=new Ft,i=[],s=[],o=new it(0,0,1),a=new it(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new gt(i,3)),r.setAttribute("color",new gt(s,3));const l=new ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");NS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Uv.multiplyMatrices(NS,a.matrixWorld),bl.setFromMatrixPosition(Uv),i.setXYZ(o,bl.x,bl.y,bl.z),Uv.multiplyMatrices(NS,a.parent.matrixWorld),bl.setFromMatrixPosition(Uv),i.setXYZ(o+1,bl.x,bl.y,bl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Y5(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Y5(n.children[t]));return e}class Jj extends Un{constructor(e,t,r){const i=new Sh(t,4,2),s=new Wi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yj=new Z,DP=new it,OP=new it;class Kj extends Gt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new xh(t);i.rotateY(Math.PI*.5),this.material=new Wi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new dn(o,3)),this.add(new Un(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");DP.copy(this.light.color),OP.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?DP:OP;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Yj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Zj extends Fo{constructor(e=10,t=10,r=4473924,i=8947848){r=new it(r),i=new it(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,m=0,v=-a;d<=t;d++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=d===s?r:i;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const u=new Ft;u.setAttribute("position",new gt(l,3)),u.setAttribute("color",new gt(c,3));const f=new ui({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qj extends Fo{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new it(s),o=new it(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),m=Math.sin(d)*e,v=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,v);const _=f&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<r;f++){const d=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m;a.push(y,0,g),l.push(d.r,d.g,d.b),_=(v+1)/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m,a.push(y,0,g),l.push(d.r,d.g,d.b)}}const c=new Ft;c.setAttribute("position",new gt(a,3)),c.setAttribute("color",new gt(l,3));const u=new ui({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const FP=new Z,kv=new Z,UP=new Z;class qj extends Gt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Ft;i.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ui({fog:!1,toneMapped:!1});this.lightPlane=new qa(i,s),this.add(this.lightPlane),i=new Ft,i.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new qa(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),FP.setFromMatrixPosition(this.light.matrixWorld),kv.setFromMatrixPosition(this.light.target.matrixWorld),UP.subVectors(kv,FP),this.lightPlane.lookAt(kv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kv),this.targetLine.scale.z=UP.length()}}const Nv=new Z,Qn=new g0;class eX extends Fo{constructor(e){const t=new Ft,r=new ui({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new gt(i,3)),t.setAttribute("color",new gt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new it(16755200),u=new it(16711680),f=new it(43775),d=new it(16777215),m=new it(3355443);this.setColors(c,u,f,d,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Qn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cr("c",t,e,Qn,0,0,-1),cr("t",t,e,Qn,0,0,1),cr("n1",t,e,Qn,-r,-i,-1),cr("n2",t,e,Qn,r,-i,-1),cr("n3",t,e,Qn,-r,i,-1),cr("n4",t,e,Qn,r,i,-1),cr("f1",t,e,Qn,-r,-i,1),cr("f2",t,e,Qn,r,-i,1),cr("f3",t,e,Qn,-r,i,1),cr("f4",t,e,Qn,r,i,1),cr("u1",t,e,Qn,r*.7,i*1.1,-1),cr("u2",t,e,Qn,-r*.7,i*1.1,-1),cr("u3",t,e,Qn,0,i*2,-1),cr("cf1",t,e,Qn,-r,0,1),cr("cf2",t,e,Qn,r,0,1),cr("cf3",t,e,Qn,0,-i,1),cr("cf4",t,e,Qn,0,i,1),cr("cn1",t,e,Qn,-r,0,-1),cr("cn2",t,e,Qn,r,0,-1),cr("cn3",t,e,Qn,0,-i,-1),cr("cn4",t,e,Qn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function cr(n,e,t,r,i,s,o){Nv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Nv.x,Nv.y,Nv.z)}}const zv=new uo;class tX extends Fo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ft;s.setIndex(new dn(r,1)),s.setAttribute("position",new dn(i,3)),super(s,new ui({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zv.setFromObject(this.object),zv.isEmpty())return;const t=zv.min,r=zv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nX extends Fo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ft;s.setIndex(new dn(r,1)),s.setAttribute("position",new gt(i,3)),super(s,new ui({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class rX extends qa{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ft;o.setAttribute("position",new gt(s,3)),o.computeBoundingSphere(),super(o,new ui({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ft;l.setAttribute("position",new gt(a,3)),l.computeBoundingSphere(),this.add(new Un(l,new Wi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const kP=new Z;let Gv,zS;class iX extends Gt{constructor(e=new Z(0,0,1),t=new Z(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Gv===void 0&&(Gv=new Ft,Gv.setAttribute("position",new gt([0,0,0,0,1,0],3)),zS=new Qu(0,.5,1,5,1),zS.translate(0,-.5,0)),this.position.copy(t),this.line=new qa(Gv,new ui({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(zS,new Wi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(kP,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sX extends Fo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ft;i.setAttribute("position",new gt(t,3)),i.setAttribute("color",new gt(r,3));const s=new ui({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new it,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oX{constructor(){this.type="ShapePath",this.color=new it,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,A=g.length;S<A;S++){const M=g[S],C=new Cu;C.curves=M.curves,x.push(C)}return x}function r(g,x){const S=x.length;let A=!1;for(let M=S-1,C=0;C<S;M=C++){let R=x[M],T=x[C],b=T.x-R.x,L=T.y-R.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(R=x[C],b=-b,T=x[M],L=-L),g.y<R.y||g.y>T.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const O=L*(g.x-R.x)-b*(g.y-R.y);if(O===0)return!0;if(O<0)continue;A=!A}}else{if(g.y!==R.y)continue;if(T.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=T.x)return!0}}return A}const i=ia.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Cu,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],d=[];let m=[],v=0,_;d[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!u&&d[v]&&v++,d[v]={s:new Cu,p:_},d[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:_[0]});if(!d[0])return t(s);if(d.length>1){let g=!1,x=0;for(let S=0,A=d.length;S<A;S++)f[S]=[];for(let S=0,A=d.length;S<A;S++){const M=m[S];for(let C=0;C<M.length;C++){const R=M[C];let T=!0;for(let b=0;b<d.length;b++)r(R.p,d[b].p)&&(S!==b&&x++,T?(T=!1,f[b].push(R)):g=!0);T&&f[S].push(R)}}x>0&&g===!1&&(m=f)}let y;for(let g=0,x=d.length;g<x;g++){l=d[g].s,c.push(l),y=m[g];for(let S=0,A=y.length;S<A;S++)l.holes.push(y[S].h)}return c}}class aX extends Mc{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class lX extends S0{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class cX extends w0{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class uX extends A0{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class fX extends Qu{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class dX extends E0{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class hX extends M0{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class pX extends _h{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class mX extends yh{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class gX extends xh{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class vX extends da{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class yX extends cl{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class _X extends C0{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class xX extends b0{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class SX extends Sh{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class wX extends T0{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class AX extends R0{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class EX extends P0{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class MX extends I0{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ph}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ph);const K5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xM,AddEquation:lu,AddOperation:EO,AdditiveAnimationBlendMode:TM,AdditiveBlending:bA,AlphaFormat:IO,AlwaysCompare:ZO,AlwaysDepth:vO,AlwaysStencilFunc:VO,AmbientLight:G5,AmbientLightProbe:_j,AnimationAction:J5,AnimationClip:Zd,AnimationLoader:uj,AnimationMixer:Uj,AnimationObjectGroup:Oj,AnimationUtils:oj,ArcCurve:m5,ArrayCamera:c5,ArrowHelper:iX,Audio:j5,AudioAnalyser:Mj,AudioContext:uC,AudioListener:wj,AudioLoader:vj,AxesHelper:sX,BackSide:si,BasicDepthPacking:GO,BasicShadowMap:rO,Bone:g_,BooleanKeyframeTrack:qu,Box2:Wj,Box3:uo,Box3Helper:nX,BoxBufferGeometry:aX,BoxGeometry:Mc,BoxHelper:tX,BufferAttribute:dn,BufferGeometry:Ft,BufferGeometryLoader:W5,ByteType:RO,Cache:Wu,Camera:g0,CameraHelper:eX,CanvasTexture:P$,CapsuleBufferGeometry:lX,CapsuleGeometry:S0,CatmullRomCurve3:g5,CineonToneMapping:bO,CircleBufferGeometry:cX,CircleGeometry:w0,ClampToEdgeWrapping:Vr,Clock:fC,Color:it,ColorKeyframeTrack:nC,ColorManagement:Ns,CompressedArrayTexture:R$,CompressedTexture:jM,CompressedTextureLoader:fj,ConeBufferGeometry:uX,ConeGeometry:A0,CubeCamera:n5,CubeReflectionMapping:Qa,CubeRefractionMapping:uc,CubeTexture:v0,CubeTextureLoader:k5,CubeUVReflectionMapping:mh,CubicBezierCurve:JM,CubicBezierCurve3:v5,CubicInterpolant:D5,CullFaceBack:CA,CullFaceFront:nO,CullFaceFrontBack:B7,CullFaceNone:tO,Curve:Uo,CurvePath:_5,CustomBlending:iO,CustomToneMapping:TO,CylinderBufferGeometry:fX,CylinderGeometry:Qu,Cylindrical:Vj,Data3DTexture:OM,DataArrayTexture:u_,DataTexture:Td,DataTextureLoader:iC,DataUtils:vu,DecrementStencilOp:G7,DecrementWrapStencilOp:V7,DefaultLoadingManager:U5,DepthFormat:nc,DepthStencilFormat:Nu,DepthTexture:u5,DirectionalLight:lC,DirectionalLightHelper:qj,DiscreteInterpolant:O5,DisplayP3ColorSpace:BM,DodecahedronBufferGeometry:dX,DodecahedronGeometry:E0,DoubleSide:Ai,DstAlphaFactor:fO,DstColorFactor:hO,DynamicCopyUsage:rz,DynamicDrawUsage:M1,DynamicReadUsage:ez,EdgesGeometry:x5,EllipseCurve:__,EqualCompare:jO,EqualDepth:_O,EqualStencilFunc:X7,EquirectangularReflectionMapping:Wd,EquirectangularRefractionMapping:Dm,Euler:m0,EventDispatcher:ll,ExtrudeBufferGeometry:hX,ExtrudeGeometry:M0,FileLoader:Es,Float16BufferAttribute:$z,Float32BufferAttribute:gt,Float64BufferAttribute:jz,FloatType:ii,Fog:m_,FogExp2:p_,FramebufferTexture:T$,FrontSide:Lo,Frustum:f_,GLBufferAttribute:Gj,GLSL1:sz,GLSL3:tE,GreaterCompare:JO,GreaterDepth:SO,GreaterEqualCompare:KO,GreaterEqualDepth:xO,GreaterEqualStencilFunc:Z7,GreaterStencilFunc:Y7,GridHelper:Zj,Group:Va,HalfFloatType:Mi,HemisphereLight:z5,HemisphereLightHelper:Kj,HemisphereLightProbe:yj,IcosahedronBufferGeometry:pX,IcosahedronGeometry:_h,ImageBitmapLoader:$5,ImageLoader:Wm,ImageUtils:DM,IncrementStencilOp:z7,IncrementWrapStencilOp:H7,InstancedBufferAttribute:Hu,InstancedBufferGeometry:cC,InstancedInterleavedBuffer:zj,InstancedMesh:WM,Int16BufferAttribute:Vz,Int32BufferAttribute:Wz,Int8BufferAttribute:zz,IntType:SM,InterleavedBuffer:_0,InterleavedBufferAttribute:dc,Interpolant:wh,InterpolateDiscrete:jd,InterpolateLinear:zu,InterpolateSmooth:A1,InvertStencilOp:W7,KeepStencilOp:E1,KeyframeTrack:ko,LOD:p5,LatheBufferGeometry:mX,LatheGeometry:yh,Layers:Mu,LessCompare:$O,LessDepth:yO,LessEqualCompare:XO,LessEqualDepth:sy,LessEqualStencilFunc:J7,LessStencilFunc:j7,Light:bc,LightProbe:w_,Line:qa,Line3:$j,LineBasicMaterial:ui,LineCurve:x_,LineCurve3:y5,LineDashedMaterial:B5,LineLoop:$M,LineSegments:Fo,LinearEncoding:PM,LinearFilter:mn,LinearInterpolant:tC,LinearMipMapLinearFilter:U7,LinearMipMapNearestFilter:F7,LinearMipmapLinearFilter:aa,LinearMipmapNearestFilter:a_,LinearSRGBColorSpace:Do,LinearToneMapping:MO,Loader:Ii,LoaderUtils:sa,LoadingManager:rC,LoopOnce:UO,LoopPingPong:NO,LoopRepeat:kO,LuminanceAlphaFormat:LO,LuminanceFormat:BO,MOUSE:P7,Material:Sr,MaterialLoader:A_,MathUtils:zl,Matrix3:zt,Matrix4:Pt,MaxEquation:IA,Mesh:Un,MeshBasicMaterial:Wi,MeshDepthMaterial:y0,MeshDistanceMaterial:h_,MeshLambertMaterial:P5,MeshMatcapMaterial:I5,MeshNormalMaterial:R5,MeshPhongMaterial:b5,MeshPhysicalMaterial:ha,MeshStandardMaterial:B0,MeshToonMaterial:T5,MinEquation:PA,MirroredRepeatWrapping:$d,MixOperation:AO,MultiplyBlending:RA,MultiplyOperation:p0,NearestFilter:er,NearestMipMapLinearFilter:O7,NearestMipMapNearestFilter:D7,NearestMipmapLinearFilter:Cd,NearestMipmapNearestFilter:Om,NeverCompare:WO,NeverDepth:gO,NeverStencilFunc:$7,NoBlending:$a,NoColorSpace:ic,NoToneMapping:Ro,NormalAnimationBlendMode:c_,NormalBlending:ja,NotEqualCompare:YO,NotEqualDepth:wO,NotEqualStencilFunc:K7,NumberKeyframeTrack:Yd,Object3D:Gt,ObjectLoader:mj,ObjectSpaceNormalMap:HO,OctahedronBufferGeometry:gX,OctahedronGeometry:xh,OneFactor:lO,OneMinusDstAlphaFactor:dO,OneMinusDstColorFactor:pO,OneMinusSrcAlphaFactor:_M,OneMinusSrcColorFactor:uO,OrthographicCamera:Cc,PCFShadowMap:s_,PCFSoftShadowMap:em,PMREMGenerator:rE,Path:zm,PerspectiveCamera:dr,Plane:Dl,PlaneBufferGeometry:vX,PlaneGeometry:da,PlaneHelper:rX,PointLight:aC,PointLightHelper:Jj,Points:y_,PointsMaterial:v_,PolarGridHelper:Qj,PolyhedronBufferGeometry:yX,PolyhedronGeometry:cl,PositionalAudio:Ej,PropertyBinding:nn,PropertyMixer:X5,QuadraticBezierCurve:YM,QuadraticBezierCurve3:KM,Quaternion:oi,QuaternionKeyframeTrack:hc,QuaternionLinearInterpolant:F5,RED_GREEN_RGTC2_Format:qA,RED_RGTC1_Format:FO,REVISION:ph,RGBADepthPacking:IM,RGBAFormat:Ei,RGBAIntegerFormat:bM,RGBA_ASTC_10x10_Format:YA,RGBA_ASTC_10x5_Format:jA,RGBA_ASTC_10x6_Format:XA,RGBA_ASTC_10x8_Format:JA,RGBA_ASTC_12x10_Format:KA,RGBA_ASTC_12x12_Format:ZA,RGBA_ASTC_4x4_Format:kA,RGBA_ASTC_5x4_Format:NA,RGBA_ASTC_5x5_Format:zA,RGBA_ASTC_6x5_Format:GA,RGBA_ASTC_6x6_Format:HA,RGBA_ASTC_8x5_Format:VA,RGBA_ASTC_8x6_Format:WA,RGBA_ASTC_8x8_Format:$A,RGBA_BPTC_Format:w1,RGBA_ETC2_EAC_Format:UA,RGBA_PVRTC_2BPPV1_Format:OA,RGBA_PVRTC_4BPPV1_Format:DA,RGBA_S3TC_DXT1_Format:_1,RGBA_S3TC_DXT3_Format:x1,RGBA_S3TC_DXT5_Format:S1,RGB_ETC1_Format:OO,RGB_ETC2_Format:FA,RGB_PVRTC_2BPPV1_Format:LA,RGB_PVRTC_4BPPV1_Format:BA,RGB_S3TC_DXT1_Format:y1,RGFormat:DO,RGIntegerFormat:CM,RawShaderMaterial:C5,Ray:gh,Raycaster:mC,RectAreaLight:H5,RedFormat:EM,RedIntegerFormat:MM,ReinhardToneMapping:CO,RepeatWrapping:fc,ReplaceStencilOp:N7,ReverseSubtractEquation:oO,RingBufferGeometry:_X,RingGeometry:C0,SIGNED_RED_GREEN_RGTC2_Format:eE,SIGNED_RED_RGTC1_Format:QA,SRGBColorSpace:kt,Scene:Gu,ShaderChunk:Nt,ShaderLib:Eo,ShaderMaterial:As,ShadowMaterial:M5,Shape:Cu,ShapeBufferGeometry:xX,ShapeGeometry:b0,ShapePath:oX,ShapeUtils:ia,ShortType:PO,Skeleton:x0,SkeletonHelper:Xj,SkinnedMesh:VM,Source:gu,Sphere:Ts,SphereBufferGeometry:SX,SphereGeometry:Sh,Spherical:Hj,SphericalHarmonics3:V5,SplineCurve:ZM,SpotLight:oC,SpotLightHelper:jj,Sprite:h5,SpriteMaterial:HM,SrcAlphaFactor:yM,SrcAlphaSaturateFactor:mO,SrcColorFactor:cO,StaticCopyUsage:nz,StaticDrawUsage:Um,StaticReadUsage:q7,StereoCamera:xj,StreamCopyUsage:iz,StreamDrawUsage:Q7,StreamReadUsage:tz,StringKeyframeTrack:ef,SubtractEquation:sO,SubtractiveBlending:TA,TOUCH:I7,TangentSpaceNormalMap:Ec,TetrahedronBufferGeometry:wX,TetrahedronGeometry:T0,Texture:Tn,TextureLoader:N5,TorusBufferGeometry:AX,TorusGeometry:R0,TorusKnotBufferGeometry:EX,TorusKnotGeometry:P0,Triangle:zi,TriangleFanDrawMode:oy,TriangleStripDrawMode:RM,TrianglesDrawMode:zO,TubeBufferGeometry:MX,TubeGeometry:I0,TwoPassDoubleSide:L7,UVMapping:o_,Uint16BufferAttribute:FM,Uint32BufferAttribute:UM,Uint8BufferAttribute:Gz,Uint8ClampedBufferAttribute:Hz,Uniform:pC,UniformsGroup:Nj,UniformsLib:ot,UniformsUtils:kM,UnsignedByteType:ra,UnsignedInt248Type:tc,UnsignedIntType:Ha,UnsignedShort4444Type:wM,UnsignedShort5551Type:AM,UnsignedShortType:l_,VSMShadowMap:So,Vector2:Ve,Vector3:Z,Vector4:hn,VectorKeyframeTrack:Kd,VideoTexture:b$,WebGL1Renderer:f5,WebGL3DRenderTarget:Rz,WebGLArrayRenderTarget:Tz,WebGLCoordinateSystem:qo,WebGLCubeRenderTarget:NM,WebGLMultipleRenderTargets:Pz,WebGLRenderTarget:ws,WebGLRenderer:GM,WebGLUtils:l5,WebGPUCoordinateSystem:km,WireframeGeometry:E5,WrapAroundEnding:Fm,ZeroCurvatureEnding:pu,ZeroFactor:aO,ZeroSlopeEnding:mu,ZeroStencilOp:k7,_SRGBAFormat:ay,sRGBEncoding:rc},Symbol.toStringTag,{value:"Module"}));var Z5={exports:{}},tf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */tf.ConcurrentRoot=1;tf.ContinuousEventPriority=4;tf.DefaultEventPriority=16;tf.DiscreteEventPriority=1;tf.IdleEventPriority=536870912;tf.LegacyRoot=0;Z5.exports=tf;var pd=Z5.exports;function CX(n){let e;const t=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const d=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,d))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function m(){const v=u(e);if(!f(d,v)){const _=d;c(d=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const bX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NP=bX?B.useEffect:B.useLayoutEffect;function gC(n){const e=typeof n=="function"?CX(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=B.useReducer(y=>y+1,0),o=e.getState(),a=B.useRef(o),l=B.useRef(r),c=B.useRef(i),u=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=r(o));let d,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(d=r(o),m=!i(f.current,d)),NP(()=>{m&&(f.current=d),a.current=o,l.current=r,c.current=i,u.current=!1});const v=B.useRef(o);NP(()=>{const y=()=>{try{const x=e.getState(),S=l.current(x);c.current(f.current,S)||(a.current=x,f.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const _=m?d:f.current;return B.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var Q5={exports:{}},q5={exports:{}},eF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,J){var Y=G.length;G.push(J);e:for(;0<Y;){var X=Y-1>>>1,$=G[X];if(0<i($,J))G[X]=J,G[Y]=$,Y=X;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],Y=G.pop();if(Y!==J){G[0]=Y;e:for(var X=0,$=G.length,re=$>>>1;X<re;){var ie=2*(X+1)-1,ae=G[ie],ue=ie+1,fe=G[ue];if(0>i(ae,Y))ue<$&&0>i(fe,ae)?(G[X]=fe,G[ue]=Y,X=ue):(G[X]=ae,G[ie]=Y,X=ie);else if(ue<$&&0>i(fe,Y))G[X]=fe,G[ue]=Y,X=ue;else break e}}return J}function i(G,J){var Y=G.sortIndex-J.sortIndex;return Y!==0?Y:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var J=t(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=G)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function A(G){if(_=!1,S(G),!v)if(t(l)!==null)v=!0,Q(M);else{var J=t(c);J!==null&&ne(A,J.startTime-G)}}function M(G,J){v=!1,_&&(_=!1,g(T),T=-1),m=!0;var Y=d;try{for(S(J),f=t(l);f!==null&&(!(f.expirationTime>J)||G&&!O());){var X=f.callback;if(typeof X=="function"){f.callback=null,d=f.priorityLevel;var $=X(f.expirationTime<=J);J=n.unstable_now(),typeof $=="function"?f.callback=$:f===t(l)&&r(l),S(J)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var ie=t(c);ie!==null&&ne(A,ie.startTime-J),re=!1}return re}finally{f=null,d=Y,m=!1}}var C=!1,R=null,T=-1,b=5,L=-1;function O(){return!(n.unstable_now()-L<b)}function k(){if(R!==null){var G=n.unstable_now();L=G;var J=!0;try{J=R(!0,G)}finally{J?z():(C=!1,R=null)}}else C=!1}var z;if(typeof x=="function")z=function(){x(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,j=V.port2;V.port1.onmessage=k,z=function(){j.postMessage(null)}}else z=function(){y(k,0)};function Q(G){R=G,C||(C=!0,z())}function ne(G,J){T=y(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Q(M))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var Y=d;d=J;try{return G()}finally{d=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=d;d=G;try{return J()}finally{d=Y}},n.unstable_scheduleCallback=function(G,J,Y){var X=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,G={id:u++,callback:J,priorityLevel:G,startTime:Y,expirationTime:$,sortIndex:-1},Y>X?(G.sortIndex=Y,e(c,G),t(l)===null&&G===t(c)&&(_?(g(T),T=-1):_=!0,ne(A,Y-X))):(G.sortIndex=$,e(l,G),v||m||(v=!0,Q(M))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var J=d;return function(){var Y=d;d=J;try{return G.apply(this,arguments)}finally{d=Y}}}})(eF);q5.exports=eF;var uE=q5.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TX=function(e){var t={},r=B,i=uE,s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),M=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=M&&h[M]||h["@@iterator"],typeof h=="function"?h:null)}function R(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case v:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case _:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case x:return p=h.displayName||null,p!==null?p:R(h.type)||"Memo";case S:p=h._payload,h=h._init;try{return R(h(p))}catch{}}return null}function T(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function b(h){var p=h,w=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(w=p.return),h=p.return;while(h)}return p.tag===3?w:null}function L(h){if(b(h)!==h)throw Error(o(188))}function O(h){var p=h.alternate;if(!p){if(p=b(h),p===null)throw Error(o(188));return p!==h?null:h}for(var w=h,E=p;;){var P=w.return;if(P===null)break;var D=P.alternate;if(D===null){if(E=P.return,E!==null){w=E;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===w)return L(P),h;if(D===E)return L(P),p;D=D.sibling}throw Error(o(188))}if(w.return!==E.return)w=P,E=D;else{for(var ee=!1,de=P.child;de;){if(de===w){ee=!0,w=P,E=D;break}if(de===E){ee=!0,E=P,w=D;break}de=de.sibling}if(!ee){for(de=D.child;de;){if(de===w){ee=!0,w=D,E=P;break}if(de===E){ee=!0,E=D,w=P;break}de=de.sibling}if(!ee)throw Error(o(189))}}if(w.alternate!==E)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?h:p}function k(h){return h=O(h),h!==null?z(h):null}function z(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=z(h);if(p!==null)return p;h=h.sibling}return null}function V(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=V(h);if(p!==null)return p}h=h.sibling}return null}var j=Array.isArray,Q=e.getPublicInstance,ne=e.getRootHostContext,G=e.getChildHostContext,J=e.prepareForCommit,Y=e.resetAfterCommit,X=e.createInstance,$=e.appendInitialChild,re=e.finalizeInitialChildren,ie=e.prepareUpdate,ae=e.shouldSetTextContent,ue=e.createTextInstance,fe=e.scheduleTimeout,_e=e.cancelTimeout,Oe=e.noTimeout,We=e.isPrimaryRenderer,xe=e.supportsMutation,W=e.supportsPersistence,Ae=e.supportsHydration,ge=e.getInstanceFromNode,ve=e.preparePortalMount,me=e.getCurrentEventPriority,Ge=e.detachDeletedInstance,Se=e.supportsMicrotasks,Fe=e.scheduleMicrotask,Ne=e.supportsTestSelectors,Ie=e.findFiberRoot,st=e.getBoundingRect,N=e.getTextContent,U=e.isHiddenSubtree,le=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Re=e.appendChild,$e=e.appendChildToContainer,He=e.commitTextUpdate,be=e.commitMount,Je=e.commitUpdate,Ze=e.insertBefore,je=e.insertInContainerBefore,ze=e.removeChild,Xe=e.removeChildFromContainer,tt=e.resetTextContent,ft=e.hideInstance,se=e.hideTextInstance,ye=e.unhideInstance,we=e.unhideTextInstance,Ke=e.clearContainer,nt=e.cloneInstance,It=e.createContainerChildSet,Ht=e.appendChildToContainerChildSet,jt=e.finalizeContainerChildren,Qt=e.replaceContainerChildren,rn=e.cloneHiddenInstance,Yt=e.cloneHiddenTextInstance,Ut=e.canHydrateInstance,Tr=e.canHydrateTextInstance,pr=e.canHydrateSuspenseInstance,Kt=e.isSuspenseInstancePending,vn=e.isSuspenseInstanceFallback,kn=e.registerSuspenseInstanceRetry,sn=e.getNextHydratableSibling,yt=e.getFirstHydratableChild,Kn=e.getFirstHydratableChildWithinContainer,Bi=e.getFirstHydratableChildWithinSuspenseInstance,F=e.hydrateInstance,I=e.hydrateTextInstance,H=e.hydrateSuspenseInstance,q=e.getNextHydratableInstanceAfterSuspenseInstance,K=e.commitHydratedContainer,te=e.commitHydratedSuspenseInstance,Ee=e.clearSuspenseBoundary,Me=e.clearSuspenseBoundaryFromContainer,Le=e.shouldDeleteUnhydratedTailInstances,De=e.didNotMatchHydratedContainerTextInstance,ke=e.didNotMatchHydratedTextInstance,he;function at(h){if(he===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);he=p&&p[1]||""}return`
`+he+h}var Qe=!1;function et(h,p){if(!h||Qe)return"";Qe=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(qe){var E=qe}Reflect.construct(h,[],p)}else{try{p.call()}catch(qe){E=qe}h.call(p.prototype)}else{try{throw Error()}catch(qe){E=qe}h()}}catch(qe){if(qe&&E&&typeof qe.stack=="string"){for(var P=qe.stack.split(`
`),D=E.stack.split(`
`),ee=P.length-1,de=D.length-1;1<=ee&&0<=de&&P[ee]!==D[de];)de--;for(;1<=ee&&0<=de;ee--,de--)if(P[ee]!==D[de]){if(ee!==1||de!==1)do if(ee--,de--,0>de||P[ee]!==D[de]){var Ue=`
`+P[ee].replace(" at new "," at ");return h.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",h.displayName)),Ue}while(1<=ee&&0<=de);break}}}finally{Qe=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?at(h):""}var vt=Object.prototype.hasOwnProperty,wt=[],_t=-1;function lt(h){return{current:h}}function At(h){0>_t||(h.current=wt[_t],wt[_t]=null,_t--)}function mt(h,p){_t++,wt[_t]=h.current,h.current=p}var Tt={},on=lt(Tt),Ct=lt(!1),an=Tt;function Xt(h,p){var w=h.type.contextTypes;if(!w)return Tt;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===p)return E.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in w)P[D]=p[D];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=P),P}function cn(h){return h=h.childContextTypes,h!=null}function yn(){At(Ct),At(on)}function Rt(h,p,w){if(on.current!==Tt)throw Error(o(168));mt(on,p),mt(Ct,w)}function Sn(h,p,w){var E=h.stateNode;if(p=p.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var P in E)if(!(P in p))throw Error(o(108,T(h)||"Unknown",P));return s({},w,E)}function qt(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Tt,an=on.current,mt(on,h),mt(Ct,Ct.current),!0}function Bt(h,p,w){var E=h.stateNode;if(!E)throw Error(o(169));w?(h=Sn(h,p,an),E.__reactInternalMemoizedMergedChildContext=h,At(Ct),At(on),mt(on,h)):At(Ct),mt(Ct,w)}var Mn=Math.clz32?Math.clz32:qi,Li=Math.log,sr=Math.LN2;function qi(h){return h>>>=0,h===0?32:31-(Li(h)/sr|0)|0}var pa=64,ma=4194304;function ga(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Rc(h,p){var w=h.pendingLanes;if(w===0)return 0;var E=0,P=h.suspendedLanes,D=h.pingedLanes,ee=w&268435455;if(ee!==0){var de=ee&~P;de!==0?E=ga(de):(D&=ee,D!==0&&(E=ga(D)))}else ee=w&~P,ee!==0?E=ga(ee):D!==0&&(E=ga(D));if(E===0)return 0;if(p!==0&&p!==E&&!(p&P)&&(P=E&-E,D=p&-p,P>=D||P===16&&(D&4194240)!==0))return p;if(E&4&&(E|=w&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=E;0<p;)w=31-Mn(p),P=1<<w,E|=h[w],p&=~P;return E}function Y0(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dh(h,p){for(var w=h.suspendedLanes,E=h.pingedLanes,P=h.expirationTimes,D=h.pendingLanes;0<D;){var ee=31-Mn(D),de=1<<ee,Ue=P[ee];Ue===-1?(!(de&w)||de&E)&&(P[ee]=Y0(de,p)):Ue<=p&&(h.expiredLanes|=de),D&=~de}}function va(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function of(h){for(var p=[],w=0;31>w;w++)p.push(h);return p}function zo(h,p,w){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Mn(p),h[p]=w}function dl(h,p){var w=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<w;){var P=31-Mn(w),D=1<<P;p[P]=0,E[P]=-1,h[P]=-1,w&=~D}}function Go(h,p){var w=h.entangledLanes|=p;for(h=h.entanglements;w;){var E=31-Mn(w),P=1<<E;P&p|h[E]&p&&(h[E]|=p),w&=~P}}var Jt=0;function Oh(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var ya=i.unstable_scheduleCallback,af=i.unstable_cancelCallback,Fh=i.unstable_shouldYield,K0=i.unstable_requestPaint,Nn=i.unstable_now,Pc=i.unstable_ImmediatePriority,Z0=i.unstable_UserBlockingPriority,di=i.unstable_NormalPriority,Uh=i.unstable_IdlePriority,Ic=null,es=null;function kh(h){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Ic,h,void 0,(h.current.flags&128)===128)}catch{}}function Q0(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var ts=typeof Object.is=="function"?Object.is:Q0,hi=null,Ho=!1,Rs=!1;function Nh(h){hi===null?hi=[h]:hi.push(h)}function zh(h){Ho=!0,Nh(h)}function Di(){if(!Rs&&hi!==null){Rs=!0;var h=0,p=Jt;try{var w=hi;for(Jt=1;h<w.length;h++){var E=w[h];do E=E(!0);while(E!==null)}hi=null,Ho=!1}catch(P){throw hi!==null&&(hi=hi.slice(h+1)),ya(Pc,Di),P}finally{Jt=p,Rs=!1}}return null}var Bc=a.ReactCurrentBatchConfig;function Lc(h,p){if(ts(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var w=Object.keys(h),E=Object.keys(p);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var P=w[E];if(!vt.call(p,P)||!ts(h[P],p[P]))return!1}return!0}function Dc(h){switch(h.tag){case 5:return at(h.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 2:case 15:return h=et(h.type,!1),h;case 11:return h=et(h.type.render,!1),h;case 1:return h=et(h.type,!0),h;default:return""}}function pi(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var w in h)p[w]===void 0&&(p[w]=h[w]);return p}return p}var Rr=lt(null),lf=null,ho=null,hl=null;function cf(){hl=ho=lf=null}function q0(h,p,w){We?(mt(Rr,p._currentValue),p._currentValue=w):(mt(Rr,p._currentValue2),p._currentValue2=w)}function Pr(h){var p=Rr.current;At(Rr),We?h._currentValue=p:h._currentValue2=p}function mi(h,p,w){for(;h!==null;){var E=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),h===w)break;h=h.return}}function or(h,p){lf=h,hl=ho=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(ss=!0),h.firstContext=null)}function ar(h){var p=We?h._currentValue:h._currentValue2;if(hl!==h)if(h={context:h,memoizedValue:p,next:null},ho===null){if(lf===null)throw Error(o(308));ho=h,lf.dependencies={lanes:0,firstContext:h}}else ho=ho.next=h;return p}var ns=null,pl=!1;function V_(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ib(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function _a(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function ml(h,p){var w=h.updateQueue;w!==null&&(w=w.shared,mr!==null&&h.mode&1&&!($t&2)?(h=w.interleaved,h===null?(p.next=p,ns===null?ns=[w]:ns.push(w)):(p.next=h.next,h.next=p),w.interleaved=p):(h=w.pending,h===null?p.next=p:(p.next=h.next,h.next=p),w.pending=p))}function eg(h,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var E=p.lanes;E&=h.pendingLanes,w|=E,p.lanes=w,Go(h,w)}}function Bb(h,p){var w=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var P=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var ee={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?P=D=ee:D=D.next=ee,w=w.next}while(w!==null);D===null?P=D=p:D=D.next=p}else P=D=p;w={baseState:E.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:E.shared,effects:E.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=p:h.next=p,w.lastBaseUpdate=p}function tg(h,p,w,E){var P=h.updateQueue;pl=!1;var D=P.firstBaseUpdate,ee=P.lastBaseUpdate,de=P.shared.pending;if(de!==null){P.shared.pending=null;var Ue=de,qe=Ue.next;Ue.next=null,ee===null?D=qe:ee.next=qe,ee=Ue;var ht=h.alternate;ht!==null&&(ht=ht.updateQueue,de=ht.lastBaseUpdate,de!==ee&&(de===null?ht.firstBaseUpdate=qe:de.next=qe,ht.lastBaseUpdate=Ue))}if(D!==null){var Dt=P.baseState;ee=0,ht=qe=Ue=null,de=D;do{var Et=de.lane,wn=de.eventTime;if((E&Et)===Et){ht!==null&&(ht=ht.next={eventTime:wn,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var St=h,Yr=de;switch(Et=p,wn=w,Yr.tag){case 1:if(St=Yr.payload,typeof St=="function"){Dt=St.call(wn,Dt,Et);break e}Dt=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Yr.payload,Et=typeof St=="function"?St.call(wn,Dt,Et):St,Et==null)break e;Dt=s({},Dt,Et);break e;case 2:pl=!0}}de.callback!==null&&de.lane!==0&&(h.flags|=64,Et=P.effects,Et===null?P.effects=[de]:Et.push(de))}else wn={eventTime:wn,lane:Et,tag:de.tag,payload:de.payload,callback:de.callback,next:null},ht===null?(qe=ht=wn,Ue=Dt):ht=ht.next=wn,ee|=Et;if(de=de.next,de===null){if(de=P.shared.pending,de===null)break;Et=de,de=Et.next,Et.next=null,P.lastBaseUpdate=Et,P.shared.pending=null}}while(1);if(ht===null&&(Ue=Dt),P.baseState=Ue,P.firstBaseUpdate=qe,P.lastBaseUpdate=ht,p=P.shared.interleaved,p!==null){P=p;do ee|=P.lane,P=P.next;while(P!==p)}else D===null&&(P.shared.lanes=0);yf|=ee,h.lanes=ee,h.memoizedState=Dt}}function Lb(h,p,w){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var E=h[p],P=E.callback;if(P!==null){if(E.callback=null,E=w,typeof P!="function")throw Error(o(191,P));P.call(E)}}}var Db=new r.Component().refs;function W_(h,p,w,E){p=h.memoizedState,w=w(E,p),w=w==null?p:s({},p,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var ng={isMounted:function(h){return(h=h._reactInternals)?b(h)===h:!1},enqueueSetState:function(h,p,w){h=h._reactInternals;var E=vi(),P=yl(h),D=_a(E,P);D.payload=p,w!=null&&(D.callback=w),ml(h,D),p=Ds(h,P,E),p!==null&&eg(p,h,P)},enqueueReplaceState:function(h,p,w){h=h._reactInternals;var E=vi(),P=yl(h),D=_a(E,P);D.tag=1,D.payload=p,w!=null&&(D.callback=w),ml(h,D),p=Ds(h,P,E),p!==null&&eg(p,h,P)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var w=vi(),E=yl(h),P=_a(w,E);P.tag=2,p!=null&&(P.callback=p),ml(h,P),p=Ds(h,E,w),p!==null&&eg(p,h,E)}};function Ob(h,p,w,E,P,D,ee){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,D,ee):p.prototype&&p.prototype.isPureReactComponent?!Lc(w,E)||!Lc(P,D):!0}function Fb(h,p,w){var E=!1,P=Tt,D=p.contextType;return typeof D=="object"&&D!==null?D=ar(D):(P=cn(p)?an:on.current,E=p.contextTypes,D=(E=E!=null)?Xt(h,P):Tt),p=new p(w,D),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ng,h.stateNode=p,p._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=P,h.__reactInternalMemoizedMaskedChildContext=D),p}function Ub(h,p,w,E){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,E),p.state!==h&&ng.enqueueReplaceState(p,p.state,null)}function $_(h,p,w,E){var P=h.stateNode;P.props=w,P.state=h.memoizedState,P.refs=Db,V_(h);var D=p.contextType;typeof D=="object"&&D!==null?P.context=ar(D):(D=cn(p)?an:on.current,P.context=Xt(h,D)),P.state=h.memoizedState,D=p.getDerivedStateFromProps,typeof D=="function"&&(W_(h,p,D,w),P.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(p=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),p!==P.state&&ng.enqueueReplaceState(P,P.state,null),tg(h,w,P,E),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308)}var uf=[],ff=0,rg=null,ig=0,Ps=[],Is=0,Oc=null,xa=1,Sa="";function Fc(h,p){uf[ff++]=ig,uf[ff++]=rg,rg=h,ig=p}function kb(h,p,w){Ps[Is++]=xa,Ps[Is++]=Sa,Ps[Is++]=Oc,Oc=h;var E=xa;h=Sa;var P=32-Mn(E)-1;E&=~(1<<P),w+=1;var D=32-Mn(p)+P;if(30<D){var ee=P-P%5;D=(E&(1<<ee)-1).toString(32),E>>=ee,P-=ee,xa=1<<32-Mn(p)+P|w<<P|E,Sa=D+h}else xa=1<<D|w<<P|E,Sa=h}function j_(h){h.return!==null&&(Fc(h,1),kb(h,1,0))}function X_(h){for(;h===rg;)rg=uf[--ff],uf[ff]=null,ig=uf[--ff],uf[ff]=null;for(;h===Oc;)Oc=Ps[--Is],Ps[Is]=null,Sa=Ps[--Is],Ps[Is]=null,xa=Ps[--Is],Ps[Is]=null}var rs=null,is=null,On=!1,Gh=!1,po=null;function Nb(h,p){var w=Os(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=h,p=h.deletions,p===null?(h.deletions=[w],h.flags|=16):p.push(w)}function zb(h,p){switch(h.tag){case 5:return p=Ut(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,rs=h,is=yt(p),!0):!1;case 6:return p=Tr(p,h.pendingProps),p!==null?(h.stateNode=p,rs=h,is=null,!0):!1;case 13:if(p=pr(p),p!==null){var w=Oc!==null?{id:xa,overflow:Sa}:null;return h.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Os(18,null,null,0),w.stateNode=p,w.return=h,h.child=w,rs=h,is=null,!0}return!1;default:return!1}}function J_(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Y_(h){if(On){var p=is;if(p){var w=p;if(!zb(h,p)){if(J_(h))throw Error(o(418));p=sn(w);var E=rs;p&&zb(h,p)?Nb(E,w):(h.flags=h.flags&-4097|2,On=!1,rs=h)}}else{if(J_(h))throw Error(o(418));h.flags=h.flags&-4097|2,On=!1,rs=h}}}function Gb(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;rs=h}function Hh(h){if(!Ae||h!==rs)return!1;if(!On)return Gb(h),On=!0,!1;if(h.tag!==3&&(h.tag!==5||Le(h.type)&&!ae(h.type,h.memoizedProps))){var p=is;if(p){if(J_(h)){for(h=is;h;)h=sn(h);throw Error(o(418))}for(;p;)Nb(h,p),p=sn(p)}}if(Gb(h),h.tag===13){if(!Ae)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));is=q(h)}else is=rs?sn(h.stateNode):null;return!0}function df(){Ae&&(is=rs=null,Gh=On=!1)}function K_(h){po===null?po=[h]:po.push(h)}function Vh(h,p,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var E=w.stateNode}if(!E)throw Error(o(147,h));var P=E,D=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===D?p.ref:(p=function(ee){var de=P.refs;de===Db&&(de=P.refs={}),ee===null?delete de[D]:de[D]=ee},p._stringRef=D,p)}if(typeof h!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,h))}return h}function sg(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function Hb(h){var p=h._init;return p(h._payload)}function Vb(h){function p(Ce,pe){if(h){var Be=Ce.deletions;Be===null?(Ce.deletions=[pe],Ce.flags|=16):Be.push(pe)}}function w(Ce,pe){if(!h)return null;for(;pe!==null;)p(Ce,pe),pe=pe.sibling;return null}function E(Ce,pe){for(Ce=new Map;pe!==null;)pe.key!==null?Ce.set(pe.key,pe):Ce.set(pe.index,pe),pe=pe.sibling;return Ce}function P(Ce,pe){return Ce=xl(Ce,pe),Ce.index=0,Ce.sibling=null,Ce}function D(Ce,pe,Be){return Ce.index=Be,h?(Be=Ce.alternate,Be!==null?(Be=Be.index,Be<pe?(Ce.flags|=2,pe):Be):(Ce.flags|=2,pe)):(Ce.flags|=1048576,pe)}function ee(Ce){return h&&Ce.alternate===null&&(Ce.flags|=2),Ce}function de(Ce,pe,Be,ut){return pe===null||pe.tag!==6?(pe=Lx(Be,Ce.mode,ut),pe.return=Ce,pe):(pe=P(pe,Be),pe.return=Ce,pe)}function Ue(Ce,pe,Be,ut){var xt=Be.type;return xt===u?ht(Ce,pe,Be.props.children,ut,Be.key):pe!==null&&(pe.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===S&&Hb(xt)===pe.type)?(ut=P(pe,Be.props),ut.ref=Vh(Ce,pe,Be),ut.return=Ce,ut):(ut=Fg(Be.type,Be.key,Be.props,null,Ce.mode,ut),ut.ref=Vh(Ce,pe,Be),ut.return=Ce,ut)}function qe(Ce,pe,Be,ut){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Be.containerInfo||pe.stateNode.implementation!==Be.implementation?(pe=Dx(Be,Ce.mode,ut),pe.return=Ce,pe):(pe=P(pe,Be.children||[]),pe.return=Ce,pe)}function ht(Ce,pe,Be,ut,xt){return pe===null||pe.tag!==7?(pe=Vc(Be,Ce.mode,ut,xt),pe.return=Ce,pe):(pe=P(pe,Be),pe.return=Ce,pe)}function Dt(Ce,pe,Be){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=Lx(""+pe,Ce.mode,Be),pe.return=Ce,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case l:return Be=Fg(pe.type,pe.key,pe.props,null,Ce.mode,Be),Be.ref=Vh(Ce,null,pe),Be.return=Ce,Be;case c:return pe=Dx(pe,Ce.mode,Be),pe.return=Ce,pe;case S:var ut=pe._init;return Dt(Ce,ut(pe._payload),Be)}if(j(pe)||C(pe))return pe=Vc(pe,Ce.mode,Be,null),pe.return=Ce,pe;sg(Ce,pe)}return null}function Et(Ce,pe,Be,ut){var xt=pe!==null?pe.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return xt!==null?null:de(Ce,pe,""+Be,ut);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return Be.key===xt?Ue(Ce,pe,Be,ut):null;case c:return Be.key===xt?qe(Ce,pe,Be,ut):null;case S:return xt=Be._init,Et(Ce,pe,xt(Be._payload),ut)}if(j(Be)||C(Be))return xt!==null?null:ht(Ce,pe,Be,ut,null);sg(Ce,Be)}return null}function wn(Ce,pe,Be,ut,xt){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Ce=Ce.get(Be)||null,de(pe,Ce,""+ut,xt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case l:return Ce=Ce.get(ut.key===null?Be:ut.key)||null,Ue(pe,Ce,ut,xt);case c:return Ce=Ce.get(ut.key===null?Be:ut.key)||null,qe(pe,Ce,ut,xt);case S:var Vt=ut._init;return wn(Ce,pe,Be,Vt(ut._payload),xt)}if(j(ut)||C(ut))return Ce=Ce.get(Be)||null,ht(pe,Ce,ut,xt,null);sg(pe,ut)}return null}function St(Ce,pe,Be,ut){for(var xt=null,Vt=null,Ot=pe,un=pe=0,Br=null;Ot!==null&&un<Be.length;un++){Ot.index>un?(Br=Ot,Ot=null):Br=Ot.sibling;var fn=Et(Ce,Ot,Be[un],ut);if(fn===null){Ot===null&&(Ot=Br);break}h&&Ot&&fn.alternate===null&&p(Ce,Ot),pe=D(fn,pe,un),Vt===null?xt=fn:Vt.sibling=fn,Vt=fn,Ot=Br}if(un===Be.length)return w(Ce,Ot),On&&Fc(Ce,un),xt;if(Ot===null){for(;un<Be.length;un++)Ot=Dt(Ce,Be[un],ut),Ot!==null&&(pe=D(Ot,pe,un),Vt===null?xt=Ot:Vt.sibling=Ot,Vt=Ot);return On&&Fc(Ce,un),xt}for(Ot=E(Ce,Ot);un<Be.length;un++)Br=wn(Ot,Ce,un,Be[un],ut),Br!==null&&(h&&Br.alternate!==null&&Ot.delete(Br.key===null?un:Br.key),pe=D(Br,pe,un),Vt===null?xt=Br:Vt.sibling=Br,Vt=Br);return h&&Ot.forEach(function(Sl){return p(Ce,Sl)}),On&&Fc(Ce,un),xt}function Yr(Ce,pe,Be,ut){var xt=C(Be);if(typeof xt!="function")throw Error(o(150));if(Be=xt.call(Be),Be==null)throw Error(o(151));for(var Vt=xt=null,Ot=pe,un=pe=0,Br=null,fn=Be.next();Ot!==null&&!fn.done;un++,fn=Be.next()){Ot.index>un?(Br=Ot,Ot=null):Br=Ot.sibling;var Sl=Et(Ce,Ot,fn.value,ut);if(Sl===null){Ot===null&&(Ot=Br);break}h&&Ot&&Sl.alternate===null&&p(Ce,Ot),pe=D(Sl,pe,un),Vt===null?xt=Sl:Vt.sibling=Sl,Vt=Sl,Ot=Br}if(fn.done)return w(Ce,Ot),On&&Fc(Ce,un),xt;if(Ot===null){for(;!fn.done;un++,fn=Be.next())fn=Dt(Ce,fn.value,ut),fn!==null&&(pe=D(fn,pe,un),Vt===null?xt=fn:Vt.sibling=fn,Vt=fn);return On&&Fc(Ce,un),xt}for(Ot=E(Ce,Ot);!fn.done;un++,fn=Be.next())fn=wn(Ot,Ce,un,fn.value,ut),fn!==null&&(h&&fn.alternate!==null&&Ot.delete(fn.key===null?un:fn.key),pe=D(fn,pe,un),Vt===null?xt=fn:Vt.sibling=fn,Vt=fn);return h&&Ot.forEach(function(r8){return p(Ce,r8)}),On&&Fc(Ce,un),xt}function Fs(Ce,pe,Be,ut){if(typeof Be=="object"&&Be!==null&&Be.type===u&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:e:{for(var xt=Be.key,Vt=pe;Vt!==null;){if(Vt.key===xt){if(xt=Be.type,xt===u){if(Vt.tag===7){w(Ce,Vt.sibling),pe=P(Vt,Be.props.children),pe.return=Ce,Ce=pe;break e}}else if(Vt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===S&&Hb(xt)===Vt.type){w(Ce,Vt.sibling),pe=P(Vt,Be.props),pe.ref=Vh(Ce,Vt,Be),pe.return=Ce,Ce=pe;break e}w(Ce,Vt);break}else p(Ce,Vt);Vt=Vt.sibling}Be.type===u?(pe=Vc(Be.props.children,Ce.mode,ut,Be.key),pe.return=Ce,Ce=pe):(ut=Fg(Be.type,Be.key,Be.props,null,Ce.mode,ut),ut.ref=Vh(Ce,pe,Be),ut.return=Ce,Ce=ut)}return ee(Ce);case c:e:{for(Vt=Be.key;pe!==null;){if(pe.key===Vt)if(pe.tag===4&&pe.stateNode.containerInfo===Be.containerInfo&&pe.stateNode.implementation===Be.implementation){w(Ce,pe.sibling),pe=P(pe,Be.children||[]),pe.return=Ce,Ce=pe;break e}else{w(Ce,pe);break}else p(Ce,pe);pe=pe.sibling}pe=Dx(Be,Ce.mode,ut),pe.return=Ce,Ce=pe}return ee(Ce);case S:return Vt=Be._init,Fs(Ce,pe,Vt(Be._payload),ut)}if(j(Be))return St(Ce,pe,Be,ut);if(C(Be))return Yr(Ce,pe,Be,ut);sg(Ce,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,pe!==null&&pe.tag===6?(w(Ce,pe.sibling),pe=P(pe,Be),pe.return=Ce,Ce=pe):(w(Ce,pe),pe=Lx(Be,Ce.mode,ut),pe.return=Ce,Ce=pe),ee(Ce)):w(Ce,pe)}return Fs}var hf=Vb(!0),Wb=Vb(!1),Wh={},Bs=lt(Wh),$h=lt(Wh),pf=lt(Wh);function Vo(h){if(h===Wh)throw Error(o(174));return h}function Z_(h,p){mt(pf,p),mt($h,h),mt(Bs,Wh),h=ne(p),At(Bs),mt(Bs,h)}function mf(){At(Bs),At($h),At(pf)}function $b(h){var p=Vo(pf.current),w=Vo(Bs.current);p=G(w,h.type,p),w!==p&&(mt($h,h),mt(Bs,p))}function Q_(h){$h.current===h&&(At(Bs),At($h))}var zn=lt(0);function og(h){for(var p=h;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Kt(w)||vn(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var q_=[];function ex(){for(var h=0;h<q_.length;h++){var p=q_[h];We?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}q_.length=0}var ag=a.ReactCurrentDispatcher,Ls=a.ReactCurrentBatchConfig,gf=0,Zn=null,jr=null,Ir=null,lg=!1,jh=!1,Xh=0,TN=0;function Xr(){throw Error(o(321))}function tx(h,p){if(p===null)return!1;for(var w=0;w<p.length&&w<h.length;w++)if(!ts(h[w],p[w]))return!1;return!0}function nx(h,p,w,E,P,D){if(gf=D,Zn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ag.current=h===null||h.memoizedState===null?BN:LN,h=w(E,P),jh){D=0;do{if(jh=!1,Xh=0,25<=D)throw Error(o(301));D+=1,Ir=jr=null,p.updateQueue=null,ag.current=DN,h=w(E,P)}while(jh)}if(ag.current=hg,p=jr!==null&&jr.next!==null,gf=0,Ir=jr=Zn=null,lg=!1,p)throw Error(o(300));return h}function rx(){var h=Xh!==0;return Xh=0,h}function wa(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?Zn.memoizedState=Ir=h:Ir=Ir.next=h,Ir}function Wo(){if(jr===null){var h=Zn.alternate;h=h!==null?h.memoizedState:null}else h=jr.next;var p=Ir===null?Zn.memoizedState:Ir.next;if(p!==null)Ir=p,jr=h;else{if(h===null)throw Error(o(310));jr=h,h={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Ir===null?Zn.memoizedState=Ir=h:Ir=Ir.next=h}return Ir}function Uc(h,p){return typeof p=="function"?p(h):p}function cg(h){var p=Wo(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var E=jr,P=E.baseQueue,D=w.pending;if(D!==null){if(P!==null){var ee=P.next;P.next=D.next,D.next=ee}E.baseQueue=P=D,w.pending=null}if(P!==null){D=P.next,E=E.baseState;var de=ee=null,Ue=null,qe=D;do{var ht=qe.lane;if((gf&ht)===ht)Ue!==null&&(Ue=Ue.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),E=qe.hasEagerState?qe.eagerState:h(E,qe.action);else{var Dt={lane:ht,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Ue===null?(de=Ue=Dt,ee=E):Ue=Ue.next=Dt,Zn.lanes|=ht,yf|=ht}qe=qe.next}while(qe!==null&&qe!==D);Ue===null?ee=E:Ue.next=de,ts(E,p.memoizedState)||(ss=!0),p.memoizedState=E,p.baseState=ee,p.baseQueue=Ue,w.lastRenderedState=E}if(h=w.interleaved,h!==null){P=h;do D=P.lane,Zn.lanes|=D,yf|=D,P=P.next;while(P!==h)}else P===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function ug(h){var p=Wo(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=h;var E=w.dispatch,P=w.pending,D=p.memoizedState;if(P!==null){w.pending=null;var ee=P=P.next;do D=h(D,ee.action),ee=ee.next;while(ee!==P);ts(D,p.memoizedState)||(ss=!0),p.memoizedState=D,p.baseQueue===null&&(p.baseState=D),w.lastRenderedState=D}return[D,E]}function jb(){}function Xb(h,p){var w=Zn,E=Wo(),P=p(),D=!ts(E.memoizedState,P);if(D&&(E.memoizedState=P,ss=!0),E=E.queue,Yh(Kb.bind(null,w,E,h),[h]),E.getSnapshot!==p||D||Ir!==null&&Ir.memoizedState.tag&1){if(w.flags|=2048,Jh(9,Yb.bind(null,w,E,P,p),void 0,null),mr===null)throw Error(o(349));gf&30||Jb(w,p,P)}return P}function Jb(h,p,w){h.flags|=16384,h={getSnapshot:p,value:w},p=Zn.updateQueue,p===null?(p={lastEffect:null,stores:null},Zn.updateQueue=p,p.stores=[h]):(w=p.stores,w===null?p.stores=[h]:w.push(h))}function Yb(h,p,w,E){p.value=w,p.getSnapshot=E,Zb(p)&&Ds(h,1,-1)}function Kb(h,p,w){return w(function(){Zb(p)&&Ds(h,1,-1)})}function Zb(h){var p=h.getSnapshot;h=h.value;try{var w=p();return!ts(h,w)}catch{return!0}}function ix(h){var p=wa();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:h},p.queue=h,h=h.dispatch=IN.bind(null,Zn,h),[p.memoizedState,h]}function Jh(h,p,w,E){return h={tag:h,create:p,destroy:w,deps:E,next:null},p=Zn.updateQueue,p===null?(p={lastEffect:null,stores:null},Zn.updateQueue=p,p.lastEffect=h.next=h):(w=p.lastEffect,w===null?p.lastEffect=h.next=h:(E=w.next,w.next=h,h.next=E,p.lastEffect=h)),h}function Qb(){return Wo().memoizedState}function fg(h,p,w,E){var P=wa();Zn.flags|=h,P.memoizedState=Jh(1|p,w,void 0,E===void 0?null:E)}function dg(h,p,w,E){var P=Wo();E=E===void 0?null:E;var D=void 0;if(jr!==null){var ee=jr.memoizedState;if(D=ee.destroy,E!==null&&tx(E,ee.deps)){P.memoizedState=Jh(p,w,D,E);return}}Zn.flags|=h,P.memoizedState=Jh(1|p,w,D,E)}function sx(h,p){return fg(8390656,8,h,p)}function Yh(h,p){return dg(2048,8,h,p)}function qb(h,p){return dg(4,2,h,p)}function eT(h,p){return dg(4,4,h,p)}function tT(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function nT(h,p,w){return w=w!=null?w.concat([h]):null,dg(4,4,tT.bind(null,p,h),w)}function ox(){}function rT(h,p){var w=Wo();p=p===void 0?null:p;var E=w.memoizedState;return E!==null&&p!==null&&tx(p,E[1])?E[0]:(w.memoizedState=[h,p],h)}function iT(h,p){var w=Wo();p=p===void 0?null:p;var E=w.memoizedState;return E!==null&&p!==null&&tx(p,E[1])?E[0]:(h=h(),w.memoizedState=[h,p],h)}function RN(h,p){var w=Jt;Jt=w!==0&&4>w?w:4,h(!0);var E=Ls.transition;Ls.transition={};try{h(!1),p()}finally{Jt=w,Ls.transition=E}}function sT(){return Wo().memoizedState}function PN(h,p,w){var E=yl(h);w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},oT(h)?aT(p,w):(lT(h,p,w),w=vi(),h=Ds(h,E,w),h!==null&&cT(h,p,E))}function IN(h,p,w){var E=yl(h),P={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(oT(h))aT(p,P);else{lT(h,p,P);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=p.lastRenderedReducer,D!==null))try{var ee=p.lastRenderedState,de=D(ee,w);if(P.hasEagerState=!0,P.eagerState=de,ts(de,ee))return}catch{}finally{}w=vi(),h=Ds(h,E,w),h!==null&&cT(h,p,E)}}function oT(h){var p=h.alternate;return h===Zn||p!==null&&p===Zn}function aT(h,p){jh=lg=!0;var w=h.pending;w===null?p.next=p:(p.next=w.next,w.next=p),h.pending=p}function lT(h,p,w){mr!==null&&h.mode&1&&!($t&2)?(h=p.interleaved,h===null?(w.next=w,ns===null?ns=[p]:ns.push(p)):(w.next=h.next,h.next=w),p.interleaved=w):(h=p.pending,h===null?w.next=w:(w.next=h.next,h.next=w),p.pending=w)}function cT(h,p,w){if(w&4194240){var E=p.lanes;E&=h.pendingLanes,w|=E,p.lanes=w,Go(h,w)}}var hg={readContext:ar,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},BN={readContext:ar,useCallback:function(h,p){return wa().memoizedState=[h,p===void 0?null:p],h},useContext:ar,useEffect:sx,useImperativeHandle:function(h,p,w){return w=w!=null?w.concat([h]):null,fg(4194308,4,tT.bind(null,p,h),w)},useLayoutEffect:function(h,p){return fg(4194308,4,h,p)},useInsertionEffect:function(h,p){return fg(4,2,h,p)},useMemo:function(h,p){var w=wa();return p=p===void 0?null:p,h=h(),w.memoizedState=[h,p],h},useReducer:function(h,p,w){var E=wa();return p=w!==void 0?w(p):p,E.memoizedState=E.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},E.queue=h,h=h.dispatch=PN.bind(null,Zn,h),[E.memoizedState,h]},useRef:function(h){var p=wa();return h={current:h},p.memoizedState=h},useState:ix,useDebugValue:ox,useDeferredValue:function(h){var p=ix(h),w=p[0],E=p[1];return sx(function(){var P=Ls.transition;Ls.transition={};try{E(h)}finally{Ls.transition=P}},[h]),w},useTransition:function(){var h=ix(!1),p=h[0];return h=RN.bind(null,h[1]),wa().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,w){var E=Zn,P=wa();if(On){if(w===void 0)throw Error(o(407));w=w()}else{if(w=p(),mr===null)throw Error(o(349));gf&30||Jb(E,p,w)}P.memoizedState=w;var D={value:w,getSnapshot:p};return P.queue=D,sx(Kb.bind(null,E,D,h),[h]),E.flags|=2048,Jh(9,Yb.bind(null,E,D,w,p),void 0,null),w},useId:function(){var h=wa(),p=mr.identifierPrefix;if(On){var w=Sa,E=xa;w=(E&~(1<<32-Mn(E)-1)).toString(32)+w,p=":"+p+"R"+w,w=Xh++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=TN++,p=":"+p+"r"+w.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},LN={readContext:ar,useCallback:rT,useContext:ar,useEffect:Yh,useImperativeHandle:nT,useInsertionEffect:qb,useLayoutEffect:eT,useMemo:iT,useReducer:cg,useRef:Qb,useState:function(){return cg(Uc)},useDebugValue:ox,useDeferredValue:function(h){var p=cg(Uc),w=p[0],E=p[1];return Yh(function(){var P=Ls.transition;Ls.transition={};try{E(h)}finally{Ls.transition=P}},[h]),w},useTransition:function(){var h=cg(Uc)[0],p=Wo().memoizedState;return[h,p]},useMutableSource:jb,useSyncExternalStore:Xb,useId:sT,unstable_isNewReconciler:!1},DN={readContext:ar,useCallback:rT,useContext:ar,useEffect:Yh,useImperativeHandle:nT,useInsertionEffect:qb,useLayoutEffect:eT,useMemo:iT,useReducer:ug,useRef:Qb,useState:function(){return ug(Uc)},useDebugValue:ox,useDeferredValue:function(h){var p=ug(Uc),w=p[0],E=p[1];return Yh(function(){var P=Ls.transition;Ls.transition={};try{E(h)}finally{Ls.transition=P}},[h]),w},useTransition:function(){var h=ug(Uc)[0],p=Wo().memoizedState;return[h,p]},useMutableSource:jb,useSyncExternalStore:Xb,useId:sT,unstable_isNewReconciler:!1};function ax(h,p){try{var w="",E=p;do w+=Dc(E),E=E.return;while(E);var P=w}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:p,stack:P}}function lx(h,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var ON=typeof WeakMap=="function"?WeakMap:Map;function uT(h,p,w){w=_a(-1,w),w.tag=3,w.payload={element:null};var E=p.value;return w.callback=function(){Rg||(Rg=!0,Cx=E),lx(h,p)},w}function fT(h,p,w){w=_a(-1,w),w.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var P=p.value;w.payload=function(){return E(P)},w.callback=function(){lx(h,p)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){lx(h,p),typeof E!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var ee=p.stack;this.componentDidCatch(p.value,{componentStack:ee!==null?ee:""})}),w}function dT(h,p,w){var E=h.pingCache;if(E===null){E=h.pingCache=new ON;var P=new Set;E.set(p,P)}else P=E.get(p),P===void 0&&(P=new Set,E.set(p,P));P.has(w)||(P.add(w),h=YN.bind(null,h,p,w),p.then(h,h))}function hT(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function pT(h,p,w,E,P){return h.mode&1?(h.flags|=65536,h.lanes=P,h):(h===p?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=_a(-1,1),p.tag=2,ml(w,p))),w.lanes|=1),h)}function $o(h){h.flags|=4}function mT(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Kh,Zh,pg,mg;if(xe)Kh=function(h,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)$(h,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Zh=function(){},pg=function(h,p,w,E,P){if(h=h.memoizedProps,h!==E){var D=p.stateNode,ee=Vo(Bs.current);w=ie(D,w,h,E,P,ee),(p.updateQueue=w)&&$o(p)}},mg=function(h,p,w,E){w!==E&&$o(p)};else if(W){Kh=function(h,p,w,E){for(var P=p.child;P!==null;){if(P.tag===5){var D=P.stateNode;w&&E&&(D=rn(D,P.type,P.memoizedProps,P)),$(h,D)}else if(P.tag===6)D=P.stateNode,w&&E&&(D=Yt(D,P.memoizedProps,P)),$(h,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),Kh(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var gT=function(h,p,w,E){for(var P=p.child;P!==null;){if(P.tag===5){var D=P.stateNode;w&&E&&(D=rn(D,P.type,P.memoizedProps,P)),Ht(h,D)}else if(P.tag===6)D=P.stateNode,w&&E&&(D=Yt(D,P.memoizedProps,P)),Ht(h,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),gT(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Zh=function(h,p){var w=p.stateNode;if(!mT(h,p)){h=w.containerInfo;var E=It(h);gT(E,p,!1,!1),w.pendingChildren=E,$o(p),jt(h,E)}},pg=function(h,p,w,E,P){var D=h.stateNode,ee=h.memoizedProps;if((h=mT(h,p))&&ee===E)p.stateNode=D;else{var de=p.stateNode,Ue=Vo(Bs.current),qe=null;ee!==E&&(qe=ie(de,w,ee,E,P,Ue)),h&&qe===null?p.stateNode=D:(D=nt(D,qe,w,ee,E,p,h,de),re(D,w,E,P,Ue)&&$o(p),p.stateNode=D,h?$o(p):Kh(D,p,!1,!1))}},mg=function(h,p,w,E){w!==E?(h=Vo(pf.current),w=Vo(Bs.current),p.stateNode=ue(E,h,w,p),$o(p)):p.stateNode=h.stateNode}}else Zh=function(){},pg=function(){},mg=function(){};function Qh(h,p){if(!On)switch(h.tailMode){case"hidden":p=h.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function Jr(h){var p=h.alternate!==null&&h.alternate.child===h.child,w=0,E=0;if(p)for(var P=h.child;P!==null;)w|=P.lanes|P.childLanes,E|=P.subtreeFlags&14680064,E|=P.flags&14680064,P.return=h,P=P.sibling;else for(P=h.child;P!==null;)w|=P.lanes|P.childLanes,E|=P.subtreeFlags,E|=P.flags,P.return=h,P=P.sibling;return h.subtreeFlags|=E,h.childLanes=w,p}function FN(h,p,w){var E=p.pendingProps;switch(X_(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(p),null;case 1:return cn(p.type)&&yn(),Jr(p),null;case 3:return E=p.stateNode,mf(),At(Ct),At(on),ex(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(Hh(p)?$o(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,po!==null&&(Rx(po),po=null))),Zh(h,p),Jr(p),null;case 5:Q_(p),w=Vo(pf.current);var P=p.type;if(h!==null&&p.stateNode!=null)pg(h,p,P,E,w),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!E){if(p.stateNode===null)throw Error(o(166));return Jr(p),null}if(h=Vo(Bs.current),Hh(p)){if(!Ae)throw Error(o(175));h=F(p.stateNode,p.type,p.memoizedProps,w,h,p,!Gh),p.updateQueue=h,h!==null&&$o(p)}else{var D=X(P,E,w,h,p);Kh(D,p,!1,!1),p.stateNode=D,re(D,P,E,w,h)&&$o(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Jr(p),null;case 6:if(h&&p.stateNode!=null)mg(h,p,h.memoizedProps,E);else{if(typeof E!="string"&&p.stateNode===null)throw Error(o(166));if(h=Vo(pf.current),w=Vo(Bs.current),Hh(p)){if(!Ae)throw Error(o(176));if(h=p.stateNode,E=p.memoizedProps,(w=I(h,E,p,!Gh))&&(P=rs,P!==null))switch(D=(P.mode&1)!==0,P.tag){case 3:De(P.stateNode.containerInfo,h,E,D);break;case 5:ke(P.type,P.memoizedProps,P.stateNode,h,E,D)}w&&$o(p)}else p.stateNode=ue(E,h,w,p)}return Jr(p),null;case 13:if(At(zn),E=p.memoizedState,On&&is!==null&&p.mode&1&&!(p.flags&128)){for(h=is;h;)h=sn(h);return df(),p.flags|=98560,p}if(E!==null&&E.dehydrated!==null){if(E=Hh(p),h===null){if(!E)throw Error(o(318));if(!Ae)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));H(h,p)}else df(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Jr(p),null}return po!==null&&(Rx(po),po=null),p.flags&128?(p.lanes=w,p):(E=E!==null,w=!1,h===null?Hh(p):w=h.memoizedState!==null,E&&!w&&(p.child.flags|=8192,p.mode&1&&(h===null||zn.current&1?wr===0&&(wr=3):Ix())),p.updateQueue!==null&&(p.flags|=4),Jr(p),null);case 4:return mf(),Zh(h,p),h===null&&ve(p.stateNode.containerInfo),Jr(p),null;case 10:return Pr(p.type._context),Jr(p),null;case 17:return cn(p.type)&&yn(),Jr(p),null;case 19:if(At(zn),P=p.memoizedState,P===null)return Jr(p),null;if(E=(p.flags&128)!==0,D=P.rendering,D===null)if(E)Qh(P,!1);else{if(wr!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(D=og(h),D!==null){for(p.flags|=128,Qh(P,!1),h=D.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=w,E=p.child;E!==null;)w=E,P=h,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=P,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,P=D.dependencies,w.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),E=E.sibling;return mt(zn,zn.current&1|2),p.child}h=h.sibling}P.tail!==null&&Nn()>Mx&&(p.flags|=128,E=!0,Qh(P,!1),p.lanes=4194304)}else{if(!E)if(h=og(D),h!==null){if(p.flags|=128,E=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),Qh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!D.alternate&&!On)return Jr(p),null}else 2*Nn()-P.renderingStartTime>Mx&&w!==1073741824&&(p.flags|=128,E=!0,Qh(P,!1),p.lanes=4194304);P.isBackwards?(D.sibling=p.child,p.child=D):(h=P.last,h!==null?h.sibling=D:p.child=D,P.last=D)}return P.tail!==null?(p=P.tail,P.rendering=p,P.tail=p.sibling,P.renderingStartTime=Nn(),p.sibling=null,h=zn.current,mt(zn,E?h&1|2:h&1),p):(Jr(p),null);case 22:case 23:return Px(),E=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(p.flags|=8192),E&&p.mode&1?os&1073741824&&(Jr(p),xe&&p.subtreeFlags&6&&(p.flags|=8192)):Jr(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var UN=a.ReactCurrentOwner,ss=!1;function gi(h,p,w,E){p.child=h===null?Wb(p,null,w,E):hf(p,h.child,w,E)}function vT(h,p,w,E,P){w=w.render;var D=p.ref;return or(p,P),E=nx(h,p,w,E,D,P),w=rx(),h!==null&&!ss?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~P,Aa(h,p,P)):(On&&w&&j_(p),p.flags|=1,gi(h,p,E,P),p.child)}function yT(h,p,w,E,P){if(h===null){var D=w.type;return typeof D=="function"&&!Bx(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=D,_T(h,p,D,E,P)):(h=Fg(w.type,null,E,p,p.mode,P),h.ref=p.ref,h.return=p,p.child=h)}if(D=h.child,!(h.lanes&P)){var ee=D.memoizedProps;if(w=w.compare,w=w!==null?w:Lc,w(ee,E)&&h.ref===p.ref)return Aa(h,p,P)}return p.flags|=1,h=xl(D,E),h.ref=p.ref,h.return=p,p.child=h}function _T(h,p,w,E,P){if(h!==null&&Lc(h.memoizedProps,E)&&h.ref===p.ref)if(ss=!1,(h.lanes&P)!==0)h.flags&131072&&(ss=!0);else return p.lanes=h.lanes,Aa(h,p,P);return cx(h,p,w,E,P)}function xT(h,p,w){var E=p.pendingProps,P=E.children,D=h!==null?h.memoizedState:null;if(E.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},mt(vf,os),os|=w;else if(w&1073741824)p.memoizedState={baseLanes:0,cachePool:null},E=D!==null?D.baseLanes:w,mt(vf,os),os|=E;else return h=D!==null?D.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,mt(vf,os),os|=h,null;else D!==null?(E=D.baseLanes|w,p.memoizedState=null):E=w,mt(vf,os),os|=E;return gi(h,p,P,w),p.child}function ST(h,p){var w=p.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function cx(h,p,w,E,P){var D=cn(w)?an:on.current;return D=Xt(p,D),or(p,P),w=nx(h,p,w,E,D,P),E=rx(),h!==null&&!ss?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~P,Aa(h,p,P)):(On&&E&&j_(p),p.flags|=1,gi(h,p,w,P),p.child)}function wT(h,p,w,E,P){if(cn(w)){var D=!0;qt(p)}else D=!1;if(or(p,P),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),Fb(p,w,E),$_(p,w,E,P),E=!0;else if(h===null){var ee=p.stateNode,de=p.memoizedProps;ee.props=de;var Ue=ee.context,qe=w.contextType;typeof qe=="object"&&qe!==null?qe=ar(qe):(qe=cn(w)?an:on.current,qe=Xt(p,qe));var ht=w.getDerivedStateFromProps,Dt=typeof ht=="function"||typeof ee.getSnapshotBeforeUpdate=="function";Dt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(de!==E||Ue!==qe)&&Ub(p,ee,E,qe),pl=!1;var Et=p.memoizedState;ee.state=Et,tg(p,E,ee,P),Ue=p.memoizedState,de!==E||Et!==Ue||Ct.current||pl?(typeof ht=="function"&&(W_(p,w,ht,E),Ue=p.memoizedState),(de=pl||Ob(p,w,de,E,Et,Ue,qe))?(Dt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Ue),ee.props=E,ee.state=Ue,ee.context=qe,E=de):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ee=p.stateNode,Ib(h,p),de=p.memoizedProps,qe=p.type===p.elementType?de:pi(p.type,de),ee.props=qe,Dt=p.pendingProps,Et=ee.context,Ue=w.contextType,typeof Ue=="object"&&Ue!==null?Ue=ar(Ue):(Ue=cn(w)?an:on.current,Ue=Xt(p,Ue));var wn=w.getDerivedStateFromProps;(ht=typeof wn=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(de!==Dt||Et!==Ue)&&Ub(p,ee,E,Ue),pl=!1,Et=p.memoizedState,ee.state=Et,tg(p,E,ee,P);var St=p.memoizedState;de!==Dt||Et!==St||Ct.current||pl?(typeof wn=="function"&&(W_(p,w,wn,E),St=p.memoizedState),(qe=pl||Ob(p,w,qe,E,Et,St,Ue)||!1)?(ht||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(E,St,Ue),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(E,St,Ue)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||de===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||de===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=St),ee.props=E,ee.state=St,ee.context=Ue,E=qe):(typeof ee.componentDidUpdate!="function"||de===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||de===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),E=!1)}return ux(h,p,w,E,D,P)}function ux(h,p,w,E,P,D){ST(h,p);var ee=(p.flags&128)!==0;if(!E&&!ee)return P&&Bt(p,w,!1),Aa(h,p,D);E=p.stateNode,UN.current=p;var de=ee&&typeof w.getDerivedStateFromError!="function"?null:E.render();return p.flags|=1,h!==null&&ee?(p.child=hf(p,h.child,null,D),p.child=hf(p,null,de,D)):gi(h,p,de,D),p.memoizedState=E.state,P&&Bt(p,w,!0),p.child}function AT(h){var p=h.stateNode;p.pendingContext?Rt(h,p.pendingContext,p.pendingContext!==p.context):p.context&&Rt(h,p.context,!1),Z_(h,p.containerInfo)}function ET(h,p,w,E,P){return df(),K_(P),p.flags|=256,gi(h,p,w,E),p.child}var gg={dehydrated:null,treeContext:null,retryLane:0};function vg(h){return{baseLanes:h,cachePool:null}}function MT(h,p,w){var E=p.pendingProps,P=zn.current,D=!1,ee=(p.flags&128)!==0,de;if((de=ee)||(de=h!==null&&h.memoizedState===null?!1:(P&2)!==0),de?(D=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(P|=1),mt(zn,P&1),h===null)return Y_(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?vn(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(P=E.children,h=E.fallback,D?(E=p.mode,D=p.child,P={mode:"hidden",children:P},!(E&1)&&D!==null?(D.childLanes=0,D.pendingProps=P):D=Ug(P,E,0,null),h=Vc(h,E,w,null),D.return=p,h.return=p,D.sibling=h,p.child=D,p.child.memoizedState=vg(w),p.memoizedState=gg,h):fx(p,P));if(P=h.memoizedState,P!==null){if(de=P.dehydrated,de!==null){if(ee)return p.flags&256?(p.flags&=-257,yg(h,p,w,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(D=E.fallback,P=p.mode,E=Ug({mode:"visible",children:E.children},P,0,null),D=Vc(D,P,w,null),D.flags|=2,E.return=p,D.return=p,E.sibling=D,p.child=E,p.mode&1&&hf(p,h.child,null,w),p.child.memoizedState=vg(w),p.memoizedState=gg,D);if(!(p.mode&1))p=yg(h,p,w,null);else if(vn(de))p=yg(h,p,w,Error(o(419)));else if(E=(w&h.childLanes)!==0,ss||E){if(E=mr,E!==null){switch(w&-w){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}E=D&(E.suspendedLanes|w)?0:D,E!==0&&E!==P.retryLane&&(P.retryLane=E,Ds(h,E,-1))}Ix(),p=yg(h,p,w,Error(o(421)))}else Kt(de)?(p.flags|=128,p.child=h.child,p=KN.bind(null,h),kn(de,p),p=null):(w=P.treeContext,Ae&&(is=Bi(de),rs=p,On=!0,po=null,Gh=!1,w!==null&&(Ps[Is++]=xa,Ps[Is++]=Sa,Ps[Is++]=Oc,xa=w.id,Sa=w.overflow,Oc=p)),p=fx(p,p.pendingProps.children),p.flags|=4096);return p}return D?(E=bT(h,p,E.children,E.fallback,w),D=p.child,P=h.child.memoizedState,D.memoizedState=P===null?vg(w):{baseLanes:P.baseLanes|w,cachePool:null},D.childLanes=h.childLanes&~w,p.memoizedState=gg,E):(w=CT(h,p,E.children,w),p.memoizedState=null,w)}return D?(E=bT(h,p,E.children,E.fallback,w),D=p.child,P=h.child.memoizedState,D.memoizedState=P===null?vg(w):{baseLanes:P.baseLanes|w,cachePool:null},D.childLanes=h.childLanes&~w,p.memoizedState=gg,E):(w=CT(h,p,E.children,w),p.memoizedState=null,w)}function fx(h,p){return p=Ug({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function CT(h,p,w,E){var P=h.child;return h=P.sibling,w=xl(P,{mode:"visible",children:w}),!(p.mode&1)&&(w.lanes=E),w.return=p,w.sibling=null,h!==null&&(E=p.deletions,E===null?(p.deletions=[h],p.flags|=16):E.push(h)),p.child=w}function bT(h,p,w,E,P){var D=p.mode;h=h.child;var ee=h.sibling,de={mode:"hidden",children:w};return!(D&1)&&p.child!==h?(w=p.child,w.childLanes=0,w.pendingProps=de,p.deletions=null):(w=xl(h,de),w.subtreeFlags=h.subtreeFlags&14680064),ee!==null?E=xl(ee,E):(E=Vc(E,D,P,null),E.flags|=2),E.return=p,w.return=p,w.sibling=E,p.child=w,E}function yg(h,p,w,E){return E!==null&&K_(E),hf(p,h.child,null,w),h=fx(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function TT(h,p,w){h.lanes|=p;var E=h.alternate;E!==null&&(E.lanes|=p),mi(h.return,p,w)}function dx(h,p,w,E,P){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:P}:(D.isBackwards=p,D.rendering=null,D.renderingStartTime=0,D.last=E,D.tail=w,D.tailMode=P)}function RT(h,p,w){var E=p.pendingProps,P=E.revealOrder,D=E.tail;if(gi(h,p,E.children,w),E=zn.current,E&2)E=E&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&TT(h,w,p);else if(h.tag===19)TT(h,w,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(mt(zn,E),!(p.mode&1))p.memoizedState=null;else switch(P){case"forwards":for(w=p.child,P=null;w!==null;)h=w.alternate,h!==null&&og(h)===null&&(P=w),w=w.sibling;w=P,w===null?(P=p.child,p.child=null):(P=w.sibling,w.sibling=null),dx(p,!1,P,w,D);break;case"backwards":for(w=null,P=p.child,p.child=null;P!==null;){if(h=P.alternate,h!==null&&og(h)===null){p.child=P;break}h=P.sibling,P.sibling=w,w=P,P=h}dx(p,!0,w,null,D);break;case"together":dx(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Aa(h,p,w){if(h!==null&&(p.dependencies=h.dependencies),yf|=p.lanes,!(w&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,w=xl(h,h.pendingProps),p.child=w,w.return=p;h.sibling!==null;)h=h.sibling,w=w.sibling=xl(h,h.pendingProps),w.return=p;w.sibling=null}return p.child}function kN(h,p,w){switch(p.tag){case 3:AT(p),df();break;case 5:$b(p);break;case 1:cn(p.type)&&qt(p);break;case 4:Z_(p,p.stateNode.containerInfo);break;case 10:q0(p,p.type._context,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(mt(zn,zn.current&1),p.flags|=128,null):w&p.child.childLanes?MT(h,p,w):(mt(zn,zn.current&1),h=Aa(h,p,w),h!==null?h.sibling:null);mt(zn,zn.current&1);break;case 19:if(E=(w&p.childLanes)!==0,h.flags&128){if(E)return RT(h,p,w);p.flags|=128}var P=p.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),mt(zn,zn.current),E)break;return null;case 22:case 23:return p.lanes=0,xT(h,p,w)}return Aa(h,p,w)}function NN(h,p){switch(X_(p),p.tag){case 1:return cn(p.type)&&yn(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return mf(),At(Ct),At(on),ex(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Q_(p),null;case 13:if(At(zn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));df()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return At(zn),null;case 4:return mf(),null;case 10:return Pr(p.type._context),null;case 22:case 23:return Px(),null;case 24:return null;default:return null}}var _g=!1,kc=!1,zN=typeof WeakSet=="function"?WeakSet:Set,ct=null;function xg(h,p){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Ui(h,p,E)}else w.current=null}function hx(h,p,w){try{w()}catch(E){Ui(h,p,E)}}var PT=!1;function GN(h,p){for(J(h.containerInfo),ct=p;ct!==null;)if(h=ct,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,ct=p;else for(;ct!==null;){h=ct;try{var w=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,P=w.memoizedState,D=h.stateNode,ee=D.getSnapshotBeforeUpdate(h.elementType===h.type?E:pi(h.type,E),P);D.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:xe&&Ke(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(de){Ui(h,h.return,de)}if(p=h.sibling,p!==null){p.return=h.return,ct=p;break}ct=h.return}return w=PT,PT=!1,w}function Nc(h,p,w){var E=p.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&h)===h){var D=P.destroy;P.destroy=void 0,D!==void 0&&hx(p,w,D)}P=P.next}while(P!==E)}}function qh(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&h)===h){var E=w.create;w.destroy=E()}w=w.next}while(w!==p)}}function px(h){var p=h.ref;if(p!==null){var w=h.stateNode;switch(h.tag){case 5:h=Q(w);break;default:h=w}typeof p=="function"?p(h):p.current=h}}function IT(h,p,w){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Ic,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var P=E,D=P.destroy;P=P.tag,D!==void 0&&(P&2||P&4)&&hx(p,w,D),E=E.next}while(E!==h)}break;case 1:if(xg(p,w),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(ee){Ui(p,w,ee)}break;case 5:xg(p,w);break;case 4:xe?UT(h,p,w):W&&W&&(p=p.stateNode.containerInfo,w=It(p),Qt(p,w))}}function BT(h,p,w){for(var E=p;;)if(IT(h,E,w),E.child===null||xe&&E.tag===4){if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function LT(h){var p=h.alternate;p!==null&&(h.alternate=null,LT(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Ge(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function DT(h){return h.tag===5||h.tag===3||h.tag===4}function OT(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||DT(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function FT(h){if(xe){e:{for(var p=h.return;p!==null;){if(DT(p))break e;p=p.return}throw Error(o(160))}var w=p;switch(w.tag){case 5:p=w.stateNode,w.flags&32&&(tt(p),w.flags&=-33),w=OT(h),gx(h,w,p);break;case 3:case 4:p=w.stateNode.containerInfo,w=OT(h),mx(h,w,p);break;default:throw Error(o(161))}}}function mx(h,p,w){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?je(w,h,p):$e(w,h);else if(E!==4&&(h=h.child,h!==null))for(mx(h,p,w),h=h.sibling;h!==null;)mx(h,p,w),h=h.sibling}function gx(h,p,w){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?Ze(w,h,p):Re(w,h);else if(E!==4&&(h=h.child,h!==null))for(gx(h,p,w),h=h.sibling;h!==null;)gx(h,p,w),h=h.sibling}function UT(h,p,w){for(var E=p,P=!1,D,ee;;){if(!P){P=E.return;e:for(;;){if(P===null)throw Error(o(160));switch(D=P.stateNode,P.tag){case 5:ee=!1;break e;case 3:D=D.containerInfo,ee=!0;break e;case 4:D=D.containerInfo,ee=!0;break e}P=P.return}P=!0}if(E.tag===5||E.tag===6)BT(h,E,w),ee?Xe(D,E.stateNode):ze(D,E.stateNode);else if(E.tag===18)ee?Me(D,E.stateNode):Ee(D,E.stateNode);else if(E.tag===4){if(E.child!==null){D=E.stateNode.containerInfo,ee=!0,E.child.return=E,E=E.child;continue}}else if(IT(h,E,w),E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return,E.tag===4&&(P=!1)}E.sibling.return=E.return,E=E.sibling}}function vx(h,p){if(xe){switch(p.tag){case 0:case 11:case 14:case 15:Nc(3,p,p.return),qh(3,p),Nc(5,p,p.return);return;case 1:return;case 5:var w=p.stateNode;if(w!=null){var E=p.memoizedProps;h=h!==null?h.memoizedProps:E;var P=p.type,D=p.updateQueue;p.updateQueue=null,D!==null&&Je(w,D,P,h,E,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));w=p.memoizedProps,He(p.stateNode,h!==null?h.memoizedProps:w,w);return;case 3:Ae&&h!==null&&h.memoizedState.isDehydrated&&K(p.stateNode.containerInfo);return;case 12:return;case 13:Sg(p);return;case 19:Sg(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Nc(3,p,p.return),qh(3,p),Nc(5,p,p.return);return;case 12:return;case 13:Sg(p);return;case 19:Sg(p);return;case 3:Ae&&h!==null&&h.memoizedState.isDehydrated&&K(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(W){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Qt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function Sg(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new zN),p.forEach(function(E){var P=ZN.bind(null,h,E);w.has(E)||(w.add(E),E.then(P,P))})}}function HN(h,p){for(ct=p;ct!==null;){p=ct;var w=p.deletions;if(w!==null)for(var E=0;E<w.length;E++){var P=w[E];try{var D=h;xe?UT(D,P,p):BT(D,P,p);var ee=P.alternate;ee!==null&&(ee.return=null),P.return=null}catch(xt){Ui(P,p,xt)}}if(w=p.child,p.subtreeFlags&12854&&w!==null)w.return=p,ct=w;else for(;ct!==null;){p=ct;try{var de=p.flags;if(de&32&&xe&&tt(p.stateNode),de&512){var Ue=p.alternate;if(Ue!==null){var qe=Ue.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(de&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var ht=p.alternate;(ht===null||ht.memoizedState===null)&&(Ex=Nn())}break;case 22:var Dt=p.memoizedState!==null,Et=p.alternate,wn=Et!==null&&Et.memoizedState!==null;if(w=p,xe){e:if(E=w,P=Dt,D=null,xe)for(var St=E;;){if(St.tag===5){if(D===null){D=St;var Yr=St.stateNode;P?ft(Yr):ye(St.stateNode,St.memoizedProps)}}else if(St.tag===6){if(D===null){var Fs=St.stateNode;P?se(Fs):we(Fs,St.memoizedProps)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===E)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===E)break;for(;St.sibling===null;){if(St.return===null||St.return===E)break e;D===St&&(D=null),St=St.return}D===St&&(D=null),St.sibling.return=St.return,St=St.sibling}}if(Dt&&!wn&&w.mode&1){ct=w;for(var Ce=w.child;Ce!==null;){for(w=ct=Ce;ct!==null;){E=ct;var pe=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Nc(4,E,E.return);break;case 1:xg(E,E.return);var Be=E.stateNode;if(typeof Be.componentWillUnmount=="function"){var ut=E.return;try{Be.props=E.memoizedProps,Be.state=E.memoizedState,Be.componentWillUnmount()}catch(xt){Ui(E,ut,xt)}}break;case 5:xg(E,E.return);break;case 22:if(E.memoizedState!==null){zT(w);continue}}pe!==null?(pe.return=E,ct=pe):zT(w)}Ce=Ce.sibling}}}switch(de&4102){case 2:FT(p),p.flags&=-3;break;case 6:FT(p),p.flags&=-3,vx(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,vx(p.alternate,p);break;case 4:vx(p.alternate,p)}}catch(xt){Ui(p,p.return,xt)}if(w=p.sibling,w!==null){w.return=p.return,ct=w;break}ct=p.return}}}function VN(h,p,w){ct=h,kT(h)}function kT(h,p,w){for(var E=(h.mode&1)!==0;ct!==null;){var P=ct,D=P.child;if(P.tag===22&&E){var ee=P.memoizedState!==null||_g;if(!ee){var de=P.alternate,Ue=de!==null&&de.memoizedState!==null||kc;de=_g;var qe=kc;if(_g=ee,(kc=Ue)&&!qe)for(ct=P;ct!==null;)ee=ct,Ue=ee.child,ee.tag===22&&ee.memoizedState!==null?GT(P):Ue!==null?(Ue.return=ee,ct=Ue):GT(P);for(;D!==null;)ct=D,kT(D),D=D.sibling;ct=P,_g=de,kc=qe}NT(h)}else P.subtreeFlags&8772&&D!==null?(D.return=P,ct=D):NT(h)}}function NT(h){for(;ct!==null;){var p=ct;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:kc||qh(5,p);break;case 1:var E=p.stateNode;if(p.flags&4&&!kc)if(w===null)E.componentDidMount();else{var P=p.elementType===p.type?w.memoizedProps:pi(p.type,w.memoizedProps);E.componentDidUpdate(P,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var D=p.updateQueue;D!==null&&Lb(p,D,E);break;case 3:var ee=p.updateQueue;if(ee!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=Q(p.child.stateNode);break;case 1:w=p.child.stateNode}Lb(p,ee,w)}break;case 5:var de=p.stateNode;w===null&&p.flags&4&&be(de,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Ae&&p.memoizedState===null){var Ue=p.alternate;if(Ue!==null){var qe=Ue.memoizedState;if(qe!==null){var ht=qe.dehydrated;ht!==null&&te(ht)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}kc||p.flags&512&&px(p)}catch(Dt){Ui(p,p.return,Dt)}}if(p===h){ct=null;break}if(w=p.sibling,w!==null){w.return=p.return,ct=w;break}ct=p.return}}function zT(h){for(;ct!==null;){var p=ct;if(p===h){ct=null;break}var w=p.sibling;if(w!==null){w.return=p.return,ct=w;break}ct=p.return}}function GT(h){for(;ct!==null;){var p=ct;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{qh(4,p)}catch(Ue){Ui(p,w,Ue)}break;case 1:var E=p.stateNode;if(typeof E.componentDidMount=="function"){var P=p.return;try{E.componentDidMount()}catch(Ue){Ui(p,P,Ue)}}var D=p.return;try{px(p)}catch(Ue){Ui(p,D,Ue)}break;case 5:var ee=p.return;try{px(p)}catch(Ue){Ui(p,ee,Ue)}}}catch(Ue){Ui(p,p.return,Ue)}if(p===h){ct=null;break}var de=p.sibling;if(de!==null){de.return=p.return,ct=de;break}ct=p.return}}var wg=0,Ag=1,Eg=2,Mg=3,Cg=4;if(typeof Symbol=="function"&&Symbol.for){var ep=Symbol.for;wg=ep("selector.component"),Ag=ep("selector.has_pseudo_class"),Eg=ep("selector.role"),Mg=ep("selector.test_id"),Cg=ep("selector.text")}function yx(h){var p=ge(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=Ie(h),h===null)throw Error(o(362));return h.stateNode.current}function _x(h,p){switch(p.$$typeof){case wg:if(h.type===p.value)return!0;break;case Ag:e:{p=p.value,h=[h,0];for(var w=0;w<h.length;){var E=h[w++],P=h[w++],D=p[P];if(E.tag!==5||!U(E)){for(;D!=null&&_x(E,D);)P++,D=p[P];if(P===p.length){p=!0;break e}else for(E=E.child;E!==null;)h.push(E,P),E=E.sibling}}p=!1}return p;case Eg:if(h.tag===5&&le(h.stateNode,p.value))return!0;break;case Cg:if((h.tag===5||h.tag===6)&&(h=N(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Mg:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function xx(h){switch(h.$$typeof){case wg:return"<"+(R(h.value)||"Unknown")+">";case Ag:return":has("+(xx(h)||"")+")";case Eg:return'[role="'+h.value+'"]';case Cg:return'"'+h.value+'"';case Mg:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function HT(h,p){var w=[];h=[h,0];for(var E=0;E<h.length;){var P=h[E++],D=h[E++],ee=p[D];if(P.tag!==5||!U(P)){for(;ee!=null&&_x(P,ee);)D++,ee=p[D];if(D===p.length)w.push(P);else for(P=P.child;P!==null;)h.push(P,D),P=P.sibling}}return w}function Sx(h,p){if(!Ne)throw Error(o(363));h=yx(h),h=HT(h,p),p=[],h=Array.from(h);for(var w=0;w<h.length;){var E=h[w++];if(E.tag===5)U(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return p}var WN=Math.ceil,bg=a.ReactCurrentDispatcher,wx=a.ReactCurrentOwner,lr=a.ReactCurrentBatchConfig,$t=0,mr=null,gr=null,Nr=0,os=0,vf=lt(0),wr=0,tp=null,yf=0,Tg=0,Ax=0,np=null,Oi=null,Ex=0,Mx=1/0;function _f(){Mx=Nn()+500}var Rg=!1,Cx=null,gl=null,Pg=!1,vl=null,Ig=0,rp=0,bx=null,Bg=-1,Lg=0;function vi(){return $t&6?Nn():Bg!==-1?Bg:Bg=Nn()}function yl(h){return h.mode&1?$t&2&&Nr!==0?Nr&-Nr:Bc.transition!==null?(Lg===0&&(h=pa,pa<<=1,!(pa&4194240)&&(pa=64),Lg=h),Lg):(h=Jt,h!==0?h:me()):1}function Ds(h,p,w){if(50<rp)throw rp=0,bx=null,Error(o(185));var E=Dg(h,p);return E===null?null:(zo(E,p,w),(!($t&2)||E!==mr)&&(E===mr&&(!($t&2)&&(Tg|=p),wr===4&&_l(E,Nr)),Fi(E,w),p===1&&$t===0&&!(h.mode&1)&&(_f(),Ho&&Di())),E)}function Dg(h,p){h.lanes|=p;var w=h.alternate;for(w!==null&&(w.lanes|=p),w=h,h=h.return;h!==null;)h.childLanes|=p,w=h.alternate,w!==null&&(w.childLanes|=p),w=h,h=h.return;return w.tag===3?w.stateNode:null}function Fi(h,p){var w=h.callbackNode;Dh(h,p);var E=Rc(h,h===mr?Nr:0);if(E===0)w!==null&&af(w),h.callbackNode=null,h.callbackPriority=0;else if(p=E&-E,h.callbackPriority!==p){if(w!=null&&af(w),p===1)h.tag===0?zh(WT.bind(null,h)):Nh(WT.bind(null,h)),Se?Fe(function(){$t===0&&Di()}):ya(Pc,Di),w=null;else{switch(Oh(E)){case 1:w=Pc;break;case 4:w=Z0;break;case 16:w=di;break;case 536870912:w=Uh;break;default:w=di}w=qT(w,VT.bind(null,h))}h.callbackPriority=p,h.callbackNode=w}}function VT(h,p){if(Bg=-1,Lg=0,$t&6)throw Error(o(327));var w=h.callbackNode;if(Hc()&&h.callbackNode!==w)return null;var E=Rc(h,h===mr?Nr:0);if(E===0)return null;if(E&30||E&h.expiredLanes||p)p=Og(h,E);else{p=E;var P=$t;$t|=2;var D=XT();(mr!==h||Nr!==p)&&(_f(),zc(h,p));do try{XN();break}catch(de){jT(h,de)}while(1);cf(),bg.current=D,$t=P,gr!==null?p=0:(mr=null,Nr=0,p=wr)}if(p!==0){if(p===2&&(P=va(h),P!==0&&(E=P,p=Tx(h,P))),p===1)throw w=tp,zc(h,0),_l(h,E),Fi(h,Nn()),w;if(p===6)_l(h,E);else{if(P=h.current.alternate,!(E&30)&&!$N(P)&&(p=Og(h,E),p===2&&(D=va(h),D!==0&&(E=D,p=Tx(h,D))),p===1))throw w=tp,zc(h,0),_l(h,E),Fi(h,Nn()),w;switch(h.finishedWork=P,h.finishedLanes=E,p){case 0:case 1:throw Error(o(345));case 2:Gc(h,Oi);break;case 3:if(_l(h,E),(E&130023424)===E&&(p=Ex+500-Nn(),10<p)){if(Rc(h,0)!==0)break;if(P=h.suspendedLanes,(P&E)!==E){vi(),h.pingedLanes|=h.suspendedLanes&P;break}h.timeoutHandle=fe(Gc.bind(null,h,Oi),p);break}Gc(h,Oi);break;case 4:if(_l(h,E),(E&4194240)===E)break;for(p=h.eventTimes,P=-1;0<E;){var ee=31-Mn(E);D=1<<ee,ee=p[ee],ee>P&&(P=ee),E&=~D}if(E=P,E=Nn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*WN(E/1960))-E,10<E){h.timeoutHandle=fe(Gc.bind(null,h,Oi),E);break}Gc(h,Oi);break;case 5:Gc(h,Oi);break;default:throw Error(o(329))}}}return Fi(h,Nn()),h.callbackNode===w?VT.bind(null,h):null}function Tx(h,p){var w=np;return h.current.memoizedState.isDehydrated&&(zc(h,p).flags|=256),h=Og(h,p),h!==2&&(p=Oi,Oi=w,p!==null&&Rx(p)),h}function Rx(h){Oi===null?Oi=h:Oi.push.apply(Oi,h)}function $N(h){for(var p=h;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var P=w[E],D=P.getSnapshot;P=P.value;try{if(!ts(D(),P))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function _l(h,p){for(p&=~Ax,p&=~Tg,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var w=31-Mn(p),E=1<<w;h[w]=-1,p&=~E}}function WT(h){if($t&6)throw Error(o(327));Hc();var p=Rc(h,0);if(!(p&1))return Fi(h,Nn()),null;var w=Og(h,p);if(h.tag!==0&&w===2){var E=va(h);E!==0&&(p=E,w=Tx(h,E))}if(w===1)throw w=tp,zc(h,0),_l(h,p),Fi(h,Nn()),w;if(w===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Gc(h,Oi),Fi(h,Nn()),null}function $T(h){vl!==null&&vl.tag===0&&!($t&6)&&Hc();var p=$t;$t|=1;var w=lr.transition,E=Jt;try{if(lr.transition=null,Jt=1,h)return h()}finally{Jt=E,lr.transition=w,$t=p,!($t&6)&&Di()}}function Px(){os=vf.current,At(vf)}function zc(h,p){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==Oe&&(h.timeoutHandle=Oe,_e(w)),gr!==null)for(w=gr.return;w!==null;){var E=w;switch(X_(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&yn();break;case 3:mf(),At(Ct),At(on),ex();break;case 5:Q_(E);break;case 4:mf();break;case 13:At(zn);break;case 19:At(zn);break;case 10:Pr(E.type._context);break;case 22:case 23:Px()}w=w.return}if(mr=h,gr=h=xl(h.current,null),Nr=os=p,wr=0,tp=null,Ax=Tg=yf=0,Oi=np=null,ns!==null){for(p=0;p<ns.length;p++)if(w=ns[p],E=w.interleaved,E!==null){w.interleaved=null;var P=E.next,D=w.pending;if(D!==null){var ee=D.next;D.next=P,E.next=ee}w.pending=E}ns=null}return h}function jT(h,p){do{var w=gr;try{if(cf(),ag.current=hg,lg){for(var E=Zn.memoizedState;E!==null;){var P=E.queue;P!==null&&(P.pending=null),E=E.next}lg=!1}if(gf=0,Ir=jr=Zn=null,jh=!1,Xh=0,wx.current=null,w===null||w.return===null){wr=1,tp=p,gr=null;break}e:{var D=h,ee=w.return,de=w,Ue=p;if(p=Nr,de.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var qe=Ue,ht=de,Dt=ht.tag;if(!(ht.mode&1)&&(Dt===0||Dt===11||Dt===15)){var Et=ht.alternate;Et?(ht.updateQueue=Et.updateQueue,ht.memoizedState=Et.memoizedState,ht.lanes=Et.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var wn=hT(ee);if(wn!==null){wn.flags&=-257,pT(wn,ee,de,D,p),wn.mode&1&&dT(D,qe,p),p=wn,Ue=qe;var St=p.updateQueue;if(St===null){var Yr=new Set;Yr.add(Ue),p.updateQueue=Yr}else St.add(Ue);break e}else{if(!(p&1)){dT(D,qe,p),Ix();break e}Ue=Error(o(426))}}else if(On&&de.mode&1){var Fs=hT(ee);if(Fs!==null){!(Fs.flags&65536)&&(Fs.flags|=256),pT(Fs,ee,de,D,p),K_(Ue);break e}}D=Ue,wr!==4&&(wr=2),np===null?np=[D]:np.push(D),Ue=ax(Ue,de),de=ee;do{switch(de.tag){case 3:de.flags|=65536,p&=-p,de.lanes|=p;var Ce=uT(de,Ue,p);Bb(de,Ce);break e;case 1:D=Ue;var pe=de.type,Be=de.stateNode;if(!(de.flags&128)&&(typeof pe.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(gl===null||!gl.has(Be)))){de.flags|=65536,p&=-p,de.lanes|=p;var ut=fT(de,D,p);Bb(de,ut);break e}}de=de.return}while(de!==null)}YT(w)}catch(xt){p=xt,gr===w&&w!==null&&(gr=w=w.return);continue}break}while(1)}function XT(){var h=bg.current;return bg.current=hg,h===null?hg:h}function Ix(){(wr===0||wr===3||wr===2)&&(wr=4),mr===null||!(yf&268435455)&&!(Tg&268435455)||_l(mr,Nr)}function Og(h,p){var w=$t;$t|=2;var E=XT();mr===h&&Nr===p||zc(h,p);do try{jN();break}catch(P){jT(h,P)}while(1);if(cf(),$t=w,bg.current=E,gr!==null)throw Error(o(261));return mr=null,Nr=0,wr}function jN(){for(;gr!==null;)JT(gr)}function XN(){for(;gr!==null&&!Fh();)JT(gr)}function JT(h){var p=QT(h.alternate,h,os);h.memoizedProps=h.pendingProps,p===null?YT(h):gr=p,wx.current=null}function YT(h){var p=h;do{var w=p.alternate;if(h=p.return,p.flags&32768){if(w=NN(w,p),w!==null){w.flags&=32767,gr=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{wr=6,gr=null;return}}else if(w=FN(w,p,os),w!==null){gr=w;return}if(p=p.sibling,p!==null){gr=p;return}gr=p=h}while(p!==null);wr===0&&(wr=5)}function Gc(h,p){var w=Jt,E=lr.transition;try{lr.transition=null,Jt=1,JN(h,p,w)}finally{lr.transition=E,Jt=w}return null}function JN(h,p,w){do Hc();while(vl!==null);if($t&6)throw Error(o(327));var E=h.finishedWork,P=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=E.lanes|E.childLanes;if(dl(h,D),h===mr&&(gr=mr=null,Nr=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Pg||(Pg=!0,qT(di,function(){return Hc(),null})),D=(E.flags&15990)!==0,E.subtreeFlags&15990||D){D=lr.transition,lr.transition=null;var ee=Jt;Jt=1;var de=$t;$t|=4,wx.current=null,GN(h,E),HN(h,E),Y(h.containerInfo),h.current=E,VN(E),K0(),$t=de,Jt=ee,lr.transition=D}else h.current=E;if(Pg&&(Pg=!1,vl=h,Ig=P),D=h.pendingLanes,D===0&&(gl=null),kh(E.stateNode),Fi(h,Nn()),p!==null)for(w=h.onRecoverableError,E=0;E<p.length;E++)w(p[E]);if(Rg)throw Rg=!1,h=Cx,Cx=null,h;return Ig&1&&h.tag!==0&&Hc(),D=h.pendingLanes,D&1?h===bx?rp++:(rp=0,bx=h):rp=0,Di(),null}function Hc(){if(vl!==null){var h=Oh(Ig),p=lr.transition,w=Jt;try{if(lr.transition=null,Jt=16>h?16:h,vl===null)var E=!1;else{if(h=vl,vl=null,Ig=0,$t&6)throw Error(o(331));var P=$t;for($t|=4,ct=h.current;ct!==null;){var D=ct,ee=D.child;if(ct.flags&16){var de=D.deletions;if(de!==null){for(var Ue=0;Ue<de.length;Ue++){var qe=de[Ue];for(ct=qe;ct!==null;){var ht=ct;switch(ht.tag){case 0:case 11:case 15:Nc(8,ht,D)}var Dt=ht.child;if(Dt!==null)Dt.return=ht,ct=Dt;else for(;ct!==null;){ht=ct;var Et=ht.sibling,wn=ht.return;if(LT(ht),ht===qe){ct=null;break}if(Et!==null){Et.return=wn,ct=Et;break}ct=wn}}}var St=D.alternate;if(St!==null){var Yr=St.child;if(Yr!==null){St.child=null;do{var Fs=Yr.sibling;Yr.sibling=null,Yr=Fs}while(Yr!==null)}}ct=D}}if(D.subtreeFlags&2064&&ee!==null)ee.return=D,ct=ee;else e:for(;ct!==null;){if(D=ct,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Nc(9,D,D.return)}var Ce=D.sibling;if(Ce!==null){Ce.return=D.return,ct=Ce;break e}ct=D.return}}var pe=h.current;for(ct=pe;ct!==null;){ee=ct;var Be=ee.child;if(ee.subtreeFlags&2064&&Be!==null)Be.return=ee,ct=Be;else e:for(ee=pe;ct!==null;){if(de=ct,de.flags&2048)try{switch(de.tag){case 0:case 11:case 15:qh(9,de)}}catch(xt){Ui(de,de.return,xt)}if(de===ee){ct=null;break e}var ut=de.sibling;if(ut!==null){ut.return=de.return,ct=ut;break e}ct=de.return}}if($t=P,Di(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Ic,h)}catch{}E=!0}return E}finally{Jt=w,lr.transition=p}}return!1}function KT(h,p,w){p=ax(w,p),p=uT(h,p,1),ml(h,p),p=vi(),h=Dg(h,1),h!==null&&(zo(h,1,p),Fi(h,p))}function Ui(h,p,w){if(h.tag===3)KT(h,h,w);else for(;p!==null;){if(p.tag===3){KT(p,h,w);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(gl===null||!gl.has(E))){h=ax(w,h),h=fT(p,h,1),ml(p,h),h=vi(),p=Dg(p,1),p!==null&&(zo(p,1,h),Fi(p,h));break}}p=p.return}}function YN(h,p,w){var E=h.pingCache;E!==null&&E.delete(p),p=vi(),h.pingedLanes|=h.suspendedLanes&w,mr===h&&(Nr&w)===w&&(wr===4||wr===3&&(Nr&130023424)===Nr&&500>Nn()-Ex?zc(h,0):Ax|=w),Fi(h,p)}function ZT(h,p){p===0&&(h.mode&1?(p=ma,ma<<=1,!(ma&130023424)&&(ma=4194304)):p=1);var w=vi();h=Dg(h,p),h!==null&&(zo(h,p,w),Fi(h,w))}function KN(h){var p=h.memoizedState,w=0;p!==null&&(w=p.retryLane),ZT(h,w)}function ZN(h,p){var w=0;switch(h.tag){case 13:var E=h.stateNode,P=h.memoizedState;P!==null&&(w=P.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(p),ZT(h,w)}var QT;QT=function(h,p,w){if(h!==null)if(h.memoizedProps!==p.pendingProps||Ct.current)ss=!0;else{if(!(h.lanes&w)&&!(p.flags&128))return ss=!1,kN(h,p,w);ss=!!(h.flags&131072)}else ss=!1,On&&p.flags&1048576&&kb(p,ig,p.index);switch(p.lanes=0,p.tag){case 2:var E=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var P=Xt(p,on.current);or(p,w),P=nx(null,p,E,h,P,w);var D=rx();return p.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,cn(E)?(D=!0,qt(p)):D=!1,p.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,V_(p),P.updater=ng,p.stateNode=P,P._reactInternals=p,$_(p,E,h,w),p=ux(null,p,E,!0,D,w)):(p.tag=0,On&&D&&j_(p),gi(null,p,P,w),p=p.child),p;case 16:E=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,P=E._init,E=P(E._payload),p.type=E,P=p.tag=qN(E),h=pi(E,h),P){case 0:p=cx(null,p,E,h,w);break e;case 1:p=wT(null,p,E,h,w);break e;case 11:p=vT(null,p,E,h,w);break e;case 14:p=yT(null,p,E,pi(E.type,h),w);break e}throw Error(o(306,E,""))}return p;case 0:return E=p.type,P=p.pendingProps,P=p.elementType===E?P:pi(E,P),cx(h,p,E,P,w);case 1:return E=p.type,P=p.pendingProps,P=p.elementType===E?P:pi(E,P),wT(h,p,E,P,w);case 3:e:{if(AT(p),h===null)throw Error(o(387));E=p.pendingProps,D=p.memoizedState,P=D.element,Ib(h,p),tg(p,E,null,w);var ee=p.memoizedState;if(E=ee.element,Ae&&D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:ee.cache,transitions:ee.transitions},p.updateQueue.baseState=D,p.memoizedState=D,p.flags&256){P=Error(o(423)),p=ET(h,p,E,w,P);break e}else if(E!==P){P=Error(o(424)),p=ET(h,p,E,w,P);break e}else for(Ae&&(is=Kn(p.stateNode.containerInfo),rs=p,On=!0,po=null,Gh=!1),w=Wb(p,null,E,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(df(),E===P){p=Aa(h,p,w);break e}gi(h,p,E,w)}p=p.child}return p;case 5:return $b(p),h===null&&Y_(p),E=p.type,P=p.pendingProps,D=h!==null?h.memoizedProps:null,ee=P.children,ae(E,P)?ee=null:D!==null&&ae(E,D)&&(p.flags|=32),ST(h,p),gi(h,p,ee,w),p.child;case 6:return h===null&&Y_(p),null;case 13:return MT(h,p,w);case 4:return Z_(p,p.stateNode.containerInfo),E=p.pendingProps,h===null?p.child=hf(p,null,E,w):gi(h,p,E,w),p.child;case 11:return E=p.type,P=p.pendingProps,P=p.elementType===E?P:pi(E,P),vT(h,p,E,P,w);case 7:return gi(h,p,p.pendingProps,w),p.child;case 8:return gi(h,p,p.pendingProps.children,w),p.child;case 12:return gi(h,p,p.pendingProps.children,w),p.child;case 10:e:{if(E=p.type._context,P=p.pendingProps,D=p.memoizedProps,ee=P.value,q0(p,E,ee),D!==null)if(ts(D.value,ee)){if(D.children===P.children&&!Ct.current){p=Aa(h,p,w);break e}}else for(D=p.child,D!==null&&(D.return=p);D!==null;){var de=D.dependencies;if(de!==null){ee=D.child;for(var Ue=de.firstContext;Ue!==null;){if(Ue.context===E){if(D.tag===1){Ue=_a(-1,w&-w),Ue.tag=2;var qe=D.updateQueue;if(qe!==null){qe=qe.shared;var ht=qe.pending;ht===null?Ue.next=Ue:(Ue.next=ht.next,ht.next=Ue),qe.pending=Ue}}D.lanes|=w,Ue=D.alternate,Ue!==null&&(Ue.lanes|=w),mi(D.return,w,p),de.lanes|=w;break}Ue=Ue.next}}else if(D.tag===10)ee=D.type===p.type?null:D.child;else if(D.tag===18){if(ee=D.return,ee===null)throw Error(o(341));ee.lanes|=w,de=ee.alternate,de!==null&&(de.lanes|=w),mi(ee,w,p),ee=D.sibling}else ee=D.child;if(ee!==null)ee.return=D;else for(ee=D;ee!==null;){if(ee===p){ee=null;break}if(D=ee.sibling,D!==null){D.return=ee.return,ee=D;break}ee=ee.return}D=ee}gi(h,p,P.children,w),p=p.child}return p;case 9:return P=p.type,E=p.pendingProps.children,or(p,w),P=ar(P),E=E(P),p.flags|=1,gi(h,p,E,w),p.child;case 14:return E=p.type,P=pi(E,p.pendingProps),P=pi(E.type,P),yT(h,p,E,P,w);case 15:return _T(h,p,p.type,p.pendingProps,w);case 17:return E=p.type,P=p.pendingProps,P=p.elementType===E?P:pi(E,P),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,cn(E)?(h=!0,qt(p)):h=!1,or(p,w),Fb(p,E,P),$_(p,E,P,w),ux(null,p,E,!0,h,w);case 19:return RT(h,p,w);case 22:return xT(h,p,w)}throw Error(o(156,p.tag))};function qT(h,p){return ya(h,p)}function QN(h,p,w,E){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(h,p,w,E){return new QN(h,p,w,E)}function Bx(h){return h=h.prototype,!(!h||!h.isReactComponent)}function qN(h){if(typeof h=="function")return Bx(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===x)return 14}return 2}function xl(h,p){var w=h.alternate;return w===null?(w=Os(h.tag,p,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=p,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,p=h.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function Fg(h,p,w,E,P,D){var ee=2;if(E=h,typeof h=="function")Bx(h)&&(ee=1);else if(typeof h=="string")ee=5;else e:switch(h){case u:return Vc(w.children,P,D,p);case f:ee=8,P|=8;break;case d:return h=Os(12,w,p,P|2),h.elementType=d,h.lanes=D,h;case y:return h=Os(13,w,p,P),h.elementType=y,h.lanes=D,h;case g:return h=Os(19,w,p,P),h.elementType=g,h.lanes=D,h;case A:return Ug(w,P,D,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:ee=10;break e;case v:ee=9;break e;case _:ee=11;break e;case x:ee=14;break e;case S:ee=16,E=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=Os(ee,w,p,P),p.elementType=h,p.type=E,p.lanes=D,p}function Vc(h,p,w,E){return h=Os(7,h,E,p),h.lanes=w,h}function Ug(h,p,w,E){return h=Os(22,h,E,p),h.elementType=A,h.lanes=w,h.stateNode={},h}function Lx(h,p,w){return h=Os(6,h,null,p),h.lanes=w,h}function Dx(h,p,w){return p=Os(4,h.children!==null?h.children:[],h.key,p),p.lanes=w,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function e8(h,p,w,E,P){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=of(0),this.expirationTimes=of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=of(0),this.identifierPrefix=E,this.onRecoverableError=P,Ae&&(this.mutableSourceEagerHydrationData=null)}function e3(h,p,w,E,P,D,ee,de,Ue){return h=new e8(h,p,w,de,Ue),p===1?(p=1,D===!0&&(p|=8)):p=0,D=Os(3,null,null,p),h.current=D,D.stateNode=h,D.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null},V_(D),h}function t3(h){if(!h)return Tt;h=h._reactInternals;e:{if(b(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(cn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var w=h.type;if(cn(w))return Sn(h,w,p)}return p}function n3(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=k(p),h===null?null:h.stateNode}function r3(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<p?w:p}}function Ox(h,p){r3(h,p),(h=h.alternate)&&r3(h,p)}function t8(h){return h=k(h),h===null?null:h.stateNode}function n8(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=vi();Ds(h,134217728,p),Ox(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=vi(),w=yl(h);Ds(h,w,p),Ox(h,w)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var w=ga(p.pendingLanes);w!==0&&(Go(p,w|1),Fi(p,Nn()),!($t&6)&&(_f(),Di()))}break;case 13:var E=vi();$T(function(){return Ds(h,1,E)}),Ox(h,1)}},t.batchedUpdates=function(h,p){var w=$t;$t|=1;try{return h(p)}finally{$t=w,$t===0&&(_f(),Ho&&Di())}},t.createComponentSelector=function(h){return{$$typeof:wg,value:h}},t.createContainer=function(h,p,w,E,P,D,ee){return e3(h,p,!1,null,w,E,P,D,ee)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Ag,value:h}},t.createHydrationContainer=function(h,p,w,E,P,D,ee,de,Ue){return h=e3(w,E,!0,h,P,D,ee,de,Ue),h.context=t3(null),w=h.current,E=vi(),P=yl(w),D=_a(E,P),D.callback=p??null,ml(w,D),h.current.lanes=P,zo(h,P,E),Fi(h,E),h},t.createPortal=function(h,p,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:h,containerInfo:p,implementation:w}},t.createRoleSelector=function(h){return{$$typeof:Eg,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Mg,value:h}},t.createTextSelector=function(h){return{$$typeof:Cg,value:h}},t.deferredUpdates=function(h){var p=Jt,w=lr.transition;try{return lr.transition=null,Jt=16,h()}finally{Jt=p,lr.transition=w}},t.discreteUpdates=function(h,p,w,E,P){var D=Jt,ee=lr.transition;try{return lr.transition=null,Jt=1,h(p,w,E,P)}finally{Jt=D,lr.transition=ee,$t===0&&_f()}},t.findAllNodes=Sx,t.findBoundingRects=function(h,p){if(!Ne)throw Error(o(363));p=Sx(h,p),h=[];for(var w=0;w<p.length;w++)h.push(st(p[w]));for(p=h.length-1;0<p;p--){w=h[p];for(var E=w.x,P=E+w.width,D=w.y,ee=D+w.height,de=p-1;0<=de;de--)if(p!==de){var Ue=h[de],qe=Ue.x,ht=qe+Ue.width,Dt=Ue.y,Et=Dt+Ue.height;if(E>=qe&&D>=Dt&&P<=ht&&ee<=Et){h.splice(p,1);break}else if(E!==qe||w.width!==Ue.width||Et<D||Dt>ee){if(!(D!==Dt||w.height!==Ue.height||ht<E||qe>P)){qe>E&&(Ue.width+=qe-E,Ue.x=E),ht<P&&(Ue.width=P-qe),h.splice(p,1);break}}else{Dt>D&&(Ue.height+=Dt-D,Ue.y=D),Et<ee&&(Ue.height=ee-Dt),h.splice(p,1);break}}}return h},t.findHostInstance=n3,t.findHostInstanceWithNoPortals=function(h){return h=O(h),h=h!==null?V(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return n3(h)},t.flushControlled=function(h){var p=$t;$t|=1;var w=lr.transition,E=Jt;try{lr.transition=null,Jt=1,h()}finally{Jt=E,lr.transition=w,$t=p,$t===0&&(_f(),Di())}},t.flushPassiveEffects=Hc,t.flushSync=$T,t.focusWithin=function(h,p){if(!Ne)throw Error(o(363));for(h=yx(h),p=HT(h,p),p=Array.from(p),h=0;h<p.length;){var w=p[h++];if(!U(w)){if(w.tag===5&&Pe(w.stateNode))return!0;for(w=w.child;w!==null;)p.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Jt},t.getFindAllNodesFailureDescription=function(h,p){if(!Ne)throw Error(o(363));var w=0,E=[];h=[yx(h),0];for(var P=0;P<h.length;){var D=h[P++],ee=h[P++],de=p[ee];if((D.tag!==5||!U(D))&&(_x(D,de)&&(E.push(xx(de)),ee++,ee>w&&(w=ee)),ee<p.length))for(D=D.child;D!==null;)h.push(D,ee),D=D.sibling}if(w<p.length){for(h=[];w<p.length;w++)h.push(xx(p[w]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return Q(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:t8,findFiberByHostInstance:h.findFiberByHostInstance||n8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Ic=p.inject(h),es=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,w,E){if(!Ne)throw Error(o(363));h=Sx(h,p);var P=Te(h,w,E).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(h,p){var w=p._getVersion;w=w(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,w]:h.mutableSourceEagerHydrationData.push(p,w)},t.runWithPriority=function(h,p){var w=Jt;try{return Jt=h,p()}finally{Jt=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,w,E){var P=p.current,D=vi(),ee=yl(P);return w=t3(w),p.context===null?p.context=w:p.pendingContext=w,p=_a(D,ee),p.payload={element:h},E=E===void 0?null:E,E!==null&&(p.callback=E),ml(P,p),h=Ds(P,ee,D),h!==null&&eg(h,P,ee),ee},t};Q5.exports=TX;var RX=Q5.exports;const PX=xc(RX),IX=n=>typeof n=="object"&&typeof n.then=="function",_u=[];function tF(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function nF(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of _u)if(tF(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=_u.indexOf(i);s!==-1&&_u.splice(s,1)},promise:(IX(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(_u.push(i),!t)throw i.promise}const rF=(n,e,t)=>nF(n,e,!1,t),BX=(n,e,t)=>void nF(n,e,!0,t),LX=n=>{if(n===void 0||n.length===0)_u.splice(0,_u.length);else{const e=_u.find(t=>tF(n,t.keys,t.equal));e&&e.remove()}},vC={},iF=n=>void Object.assign(vC,n);function DX(n,e){function t(u,{args:f=[],attach:d,...m},v){let _=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=Zf(g,{type:u,root:v,attach:d,primitive:!0})}else{const g=vC[_];if(!g)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Zf(new g(...f),{type:u,root:v,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof Ft?y.__r3f.attach="geometry":y instanceof Sr&&(y.__r3f.attach="material")),_!=="inject"&&VS(y,m),y}function r(u,f){let d=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?HS(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),d=!0),d||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||Zf(f,{}),f.__r3f.parent=u,dE(f),Qf(f)}}function i(u,f,d){let m=!1;if(f){var v,_;if((v=f.__r3f)!=null&&v.attach)HS(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const y=u.children.filter(x=>x!==f),g=y.indexOf(d);u.children=[...y.slice(0,g),f,...y.slice(g)],m=!0}m||(_=u.__r3f)==null||_.objects.push(f),f.__r3f||Zf(f,{}),f.__r3f.parent=u,dE(f),Qf(f)}}function s(u,f,d=!1){u&&[...u].forEach(m=>o(f,m,d))}function o(u,f,d){if(f){var m,v,_;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==f)),(v=f.__r3f)!=null&&v.attach)WP(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var y;u.remove(f),(y=f.__r3f)!=null&&y.root&&GX(f.__r3f.root,f)}const x=(_=f.__r3f)==null?void 0:_.primitive,S=d===void 0?f.dispose!==null&&!x:d;if(!x){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}delete f.__r3f,S&&f.dispose&&f.type!=="Scene"&&uE.unstable_scheduleCallback(uE.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Qf(u)}}function a(u,f,d,m){var v;const _=(v=u.__r3f)==null?void 0:v.parent;if(!_)return;const y=t(f,d,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(y,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(y,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(_,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:PX({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,r(d,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,d)=>{if(!f||!d)return;const m=u.getState().scene;m.__r3f&&i(m,f,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,d,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:g,...x}=m,{args:S=[],children:A,...M}=d;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,T)=>R!==S[T]))return[!0];const C=fF(u,x,M,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[f,d],m,v,_,y){f?a(u,m,_,y):VS(u,d)},commitMount(u,f,d,m){var v;const _=(v=u.__r3f)!=null?v:{};u.raycast&&_.handlers&&_.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Zf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:d,parent:m}=(f=u.__r3f)!=null?f:{};d&&m&&WP(m,u,d),u.isObject3D&&(u.visible=!1),Qf(u)},unhideInstance(u,f){var d;const{attach:m,parent:v}=(d=u.__r3f)!=null?d:{};m&&v&&HS(v,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Qf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():pd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&In.fun(performance.now)?performance.now:In.fun(Date.now)?Date.now:()=>0,scheduleTimeout:In.fun(setTimeout)?setTimeout:void 0,cancelTimeout:In.fun(clearTimeout)?clearTimeout:void 0}),applyProps:VS}}var zP,GP;const GS=n=>"colorSpace"in n||"outputColorSpace"in n,sF=()=>{var n;return(n=vC.ColorManagement)!=null?n:null},oF=n=>n&&n.isOrthographicCamera,OX=n=>n&&n.hasOwnProperty("current"),L0=typeof window<"u"&&((zP=window.document)!=null&&zP.createElement||((GP=window.navigator)==null?void 0:GP.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function aF(n){const e=B.useRef(n);return L0(()=>void(e.current=n),[n]),e}function FX({set:n}){return L0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class lF extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}lF.getDerivedStateFromError=()=>({error:!0});const cF="__default",HP=new Map,UX=n=>n&&!!n.memoized&&!!n.changes;function uF(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const wp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},In={obj:n=>n===Object(n)&&!In.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(In.str(n)||In.num(n))return n===e;const s=In.obj(n);if(s&&r==="reference")return n===e;const o=In.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!In.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(In.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function kX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function NX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Zf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function fE(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const VP=/-\d+$/;function HS(n,e,t){if(In.str(t)){if(VP.test(t)){const s=t.replace(VP,""),{target:o,key:a}=fE(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=fE(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function WP(n,e,t){var r,i;if(In.str(t)){const{target:s,key:o}=fE(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function fF(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=n==null?void 0:n.__r3f)!=null?u:{},d=Object.entries(i),m=[];if(c){const _=Object.keys(l);for(let y=0;y<_.length;y++)i.hasOwnProperty(_[y])||d.unshift([_[y],cF+"remove"])}d.forEach(([_,y])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&_==="object"||In.equ(y,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return m.push([_,y,!0,[]]);let x=[];_.includes("-")&&(x=_.split("-")),m.push([_,y,!1,x]);for(const S in i){const A=i[S];S.startsWith(`${_}-`)&&m.push([S,A,!1,S.split("-")])}});const v={...i};return f.memoizedProps&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:m}}function VS(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=UX(e)?e:fF(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[m,v,_,y]=c[d];if(GS(n)){const A="srgb",M="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?A:M):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?A:M)}let g=n,x=g[m];if(y.length&&(x=y.reduce((S,A)=>S[A],n),!(x&&x.set))){const[S,...A]=y.reverse();g=A.reverse().reduce((M,C)=>M[C],n),m=S}if(v===cF+"remove")if(g.constructor){let S=HP.get(g.constructor);S||(S=new g.constructor,HP.set(g.constructor,S)),v=S[m]}else v=0;if(_)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Mu)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&x.constructor===v.constructor)x.copy(v);else if(v!==void 0){const S=x instanceof it;!S&&x.setScalar?x.setScalar(v):x instanceof Mu&&v instanceof Mu?x.mask=v.mask:x.set(v),!sF()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof Tn&&g[m].format===Ei&&g[m].type===ra){const S=g[m];GS(S)&&GS(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}Qf(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const d=a.internal.interaction.indexOf(n);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&dE(n),n}function Qf(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function dE(n){n.onUpdate==null||n.onUpdate(n)}function dF(n,e){n.manual||(oF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Hv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function zX(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return pd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pd.ContinuousEventPriority;default:return pd.DefaultEventPriority}}function hF(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function GX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{hF(t.capturedMap,e,r,i)})}function HX(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),f=new Set,d=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const x=wp(m[g]);x&&(x.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const x=wp(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(l,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let _=m.flatMap(v).sort((g,x)=>{const S=wp(g.object),A=wp(x.object);return!S||!A?g.distance-x.distance:A.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=Hv(g);return f.has(x)?!1:(f.add(x),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const g of _){let x=g.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&d.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(Hv(g.intersection))||d.push(g.intersection);return d}function i(l,c,u,f){const d=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=wp(v.object)||d,{raycaster:y,pointer:g,camera:x,internal:S}=_,A=new Z(g.x,g.y,0).unproject(x),M=L=>{var O,k;return(O=(k=S.capturedMap.get(L))==null?void 0:k.has(v.eventObject))!=null?O:!1},C=L=>{const O={intersection:v,target:c.target};S.capturedMap.has(L)?S.capturedMap.get(L).set(v.eventObject,O):S.capturedMap.set(L,new Map([[v.eventObject,O]])),c.target.setPointerCapture(L)},R=L=>{const O=S.capturedMap.get(L);O&&hF(S.capturedMap,v.eventObject,O,L)};let T={};for(let L in c){let O=c[L];typeof O!="function"&&(T[L]=O)}let b={...v,...T,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:A,ray:y.ray,camera:x,stopPropagation(){const L="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!L||L.has(v.eventObject))&&(b.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:M,setPointerCapture:C,releasePointerCapture:R},currentTarget:{hasPointerCapture:M,setPointerCapture:C,releasePointerCapture:R},nativeEvent:c};if(f(b),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const d=u.eventObject.__r3f,m=d==null?void 0:d.handlers;if(c.hovered.delete(Hv(u)),d!=null&&d.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(u,m?t:void 0),g=v?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=y.map(S=>S.eventObject)),v&&!y.length&&g<=2&&(o(u,d.interaction),f&&f(u)),m&&s(y);function x(S){const A=S.eventObject,M=A.__r3f,C=M==null?void 0:M.handlers;if(M!=null&&M.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const R=Hv(S),T=d.hovered.get(R);T?T.stopped&&S.stopPropagation():(d.hovered.set(R,S),C.onPointerOver==null||C.onPointerOver(S),C.onPointerEnter==null||C.onPointerEnter(S))}C.onPointerMove==null||C.onPointerMove(S)}else{const R=C[l];R?(!v||d.initialHits.includes(A))&&(o(u,d.interaction.filter(T=>!d.initialHits.includes(T))),R(S)):v&&d.initialHits.includes(A)&&o(u,d.interaction.filter(T=>!d.initialHits.includes(T)))}}i(y,u,g,x)}}return{handlePointer:a}}const VX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],pF=n=>!!(n!=null&&n.render),yC=B.createContext(null),WX=(n,e)=>{const t=gC((a,l)=>{const c=new Z,u=new Z,f=new Z;function d(g=l().camera,x=u,S=l().size){const{width:A,height:M,top:C,left:R}=S,T=A/M;x instanceof Z?f.copy(x):f.set(...x);const b=g.getWorldPosition(c).distanceTo(f);if(oF(g))return{width:A/g.zoom,height:M/g.zoom,top:C,left:R,factor:1,distance:b,aspect:T};{const L=g.fov*Math.PI/180,O=2*Math.tan(L/2)*b,k=O*(A/M);return{width:k,height:O,top:C,left:R,factor:A/k,distance:b,aspect:T}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),_=new Ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fC,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,A,M)=>{const C=l().camera,R={width:g,height:x,top:A||0,left:M||0,updateStyle:S};a(T=>({size:R,viewport:{...T.viewport,...d(C,u,R)}}))},setDpr:g=>a(x=>{const S=uF(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const A=l().internal;return A.priority=A.priority+(x>0?1:0),A.subscribers.push({ref:g,priority:x,store:S}),A.subscribers=A.subscribers.sort((M,C)=>M.priority-C.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(x>0?1:0),M.subscribers=M.subscribers.filter(C=>C.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l!==i||c.dpr!==s){var d;i=l,s=c.dpr,dF(a,l),u.setPixelRatio(c.dpr);const m=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function _C(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let Vv,mF=new Set,gF=new Set,vF=new Set;const yF=n=>_C(n,mF),$X=n=>_C(n,gF),jX=n=>_C(n,vF);function WS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ap(n,e){switch(n){case"before":return WS(mF,e);case"after":return WS(gF,e);case"tail":return WS(vF,e)}}let $S,jS;function XS(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),$S=e.internal.subscribers,Vv=0;Vv<$S.length;Vv++)jS=$S[Vv],jS.ref.current(jS.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function XX(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Ap("before",l);for(const u of n.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=XS(l,i))}if(Ap("after",l),t===0)return Ap("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return n.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&Ap("before",l),u)XS(l,u,f);else for(const d of n.values())XS(l,d.store.getState());c&&Ap("after",l)}return{loop:s,invalidate:o,advance:a}}function xC(){const n=B.useContext(yC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ti(n=t=>t,e){return xC()(n,e)}function Ah(n,e=0){const t=xC(),r=t.getState().internal.subscribe,i=aF(n);return L0(()=>r(i,e,t),[e,r,t]),null}function _F(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,kX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message}`))))))}}function Eh(n,e,t,r){const i=Array.isArray(e)?e:[e],s=rF(_F(t,r),[n,...i],{equal:In.equ});return Array.isArray(e)?s:s[0]}Eh.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return BX(_F(t),[n,...r])};Eh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return LX([n,...t])};const Qd=new Map,{invalidate:$P,advance:jP}=XX(Qd),{reconciler:$m,applyProps:ou}=DX(Qd,zX),Vf={objects:"shallow",strict:!1},JX=(n,e)=>{const t=typeof n=="function"?n(e):n;return pF(t)?t:new GM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function YX(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function KX(n){const e=Qd.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||WX($P,jP),o=t||$m.createContainer(s,pd.ConcurrentRoot,null,!1,null,"",i,null);e||Qd.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:d,scene:m,events:v,onCreated:_,shadows:y=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:A=!1,frameloop:M="always",dpr:C=[1,2],performance:R,raycaster:T,camera:b,onPointerMissed:L}=u,O=s.getState(),k=O.gl;O.gl||O.set({gl:k=JX(f,n)});let z=O.raycaster;z||O.set({raycaster:z=new mC});const{params:V,...j}=T||{};if(In.equ(j,z,Vf)||ou(z,{...j}),In.equ(V,z.params,Vf)||ou(z,{params:{...z.params,...V}}),!O.camera||O.camera===c&&!In.equ(c,b,Vf)){c=b;const $=b instanceof g0,re=$?b:A?new Cc(0,0,0,0,.1,1e3):new dr(75,0,.1,1e3);$||(re.position.z=5,b&&ou(re,b),!O.camera&&!(b!=null&&b.rotation)&&re.lookAt(0,0,0)),O.set({camera:re})}if(!O.scene){let $;m instanceof Gu?$=m:($=new Gu,m&&ou($,m)),O.set({scene:Zf($)})}if(!O.xr){var Q;const $=(ae,ue)=>{const fe=s.getState();fe.frameloop!=="never"&&jP(ae,!0,fe,ue)},re=()=>{const ae=s.getState();ae.gl.xr.enabled=ae.gl.xr.isPresenting,ae.gl.xr.setAnimationLoop(ae.gl.xr.isPresenting?$:null),ae.gl.xr.isPresenting||$P(ae)},ie={connect(){const ae=s.getState().gl;ae.xr.addEventListener("sessionstart",re),ae.xr.addEventListener("sessionend",re)},disconnect(){const ae=s.getState().gl;ae.xr.removeEventListener("sessionstart",re),ae.xr.removeEventListener("sessionend",re)}};typeof((Q=k.xr)==null?void 0:Q.addEventListener)=="function"&&ie.connect(),O.set({xr:ie})}if(k.shadowMap){const $=k.shadowMap.enabled,re=k.shadowMap.type;if(k.shadowMap.enabled=!!y,In.boo(y))k.shadowMap.type=em;else if(In.str(y)){var ne;const ie={basic:rO,percentage:s_,soft:em,variance:So};k.shadowMap.type=(ne=ie[y])!=null?ne:em}else In.obj(y)&&Object.assign(k.shadowMap,y);($!==k.shadowMap.enabled||re!==k.shadowMap.type)&&(k.shadowMap.needsUpdate=!0)}const G=sF();G&&("enabled"in G?G.enabled=!S:"legacyMode"in G&&(G.legacyMode=S)),ou(k,{outputEncoding:g?3e3:3001,toneMapping:x?Ro:xM}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==x&&O.set(()=>({flat:x})),f&&!In.fun(f)&&!pF(f)&&!In.equ(f,k,Vf)&&ou(k,f),v&&!O.events.handlers&&O.set({events:v(s)});const X=YX(n,d);return In.equ(X,O.size,Vf)||O.setSize(X.width,X.height,X.updateStyle,X.top,X.left),C&&O.viewport.dpr!==uF(C)&&O.setDpr(C),O.frameloop!==M&&O.setFrameloop(M),O.onPointerMissed||O.set({onPointerMissed:L}),R&&!In.equ(R,O.performance,Vf)&&O.set($=>({performance:{...$.performance,...R}})),a=_,l=!0,this},render(u){return l||this.configure(),$m.updateContainer(B.createElement(ZX,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){xF(n)}}}function ZX({store:n,children:e,onCreated:t,rootElement:r}){return L0(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),B.createElement(yC.Provider,{value:n},e)}function xF(n,e){const t=Qd.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),$m.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),NX(i),Qd.delete(n),e&&e(n)}catch{}},500)})}}function QX(n,e,t){return B.createElement(qX,{key:e.uuid,children:n,container:e,state:t})}function qX({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=xC(),[a]=B.useState(()=>new mC),[l]=B.useState(()=>new Ve),c=B.useCallback((f,d)=>{const m={...f};Object.keys(f).forEach(_=>{(VX.includes(_)||f[_]!==d[_]&&d[_])&&delete m[_]});let v;if(d&&i){const _=d.camera;v=f.viewport.getCurrentViewport(_,new Z,i),_!==f.camera&&dF(_,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...v},...s}},[n]),[u]=B.useState(()=>{const f=o.getState();return gC((m,v)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:v,setEvents:_=>m(y=>({...y,events:{...y.events,..._}}))}))});return B.useEffect(()=>{const f=o.subscribe(d=>u.setState(m=>c(d,m)));return()=>{f(),u.destroy()}},[]),B.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),B.createElement(B.Fragment,null,$m.createPortal(B.createElement(yC.Provider,{value:u},e),u,null))}$m.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});function Rn(){return Rn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rn.apply(this,arguments)}function hE(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}hE.debounce=hE;var eJ=hE;const XP=xc(eJ);function tJ(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=B.useRef(!1);B.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,m,v]=B.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:S,top:A,width:M,height:C,bottom:R,right:T,x:b,y:L}=l.current.element.getBoundingClientRect(),O={left:S,top:A,width:M,height:C,bottom:R,right:T,x:b,y:L};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),f.current&&!sJ(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[x,u?XP(x,u):x,c?XP(x,c):x]},[a,i,c,u]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(_(),l.current.element=x,l.current.scrollContainers=SF(x),y())};return rJ(v,!!t),nJ(m),B.useEffect(()=>{_(),y()},[t,v,m]),B.useEffect(()=>_,[]),[g,o,d]}function nJ(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function rJ(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SF(n.parentElement)]}const iJ=["x","y","top","bottom","left","right","width","height"],sJ=(n,e)=>iJ.every(t=>n[t]===e[t]);var oJ=Object.defineProperty,aJ=Object.defineProperties,lJ=Object.getOwnPropertyDescriptors,JP=Object.getOwnPropertySymbols,cJ=Object.prototype.hasOwnProperty,uJ=Object.prototype.propertyIsEnumerable,YP=(n,e,t)=>e in n?oJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KP=(n,e)=>{for(var t in e||(e={}))cJ.call(e,t)&&YP(n,t,e[t]);if(JP)for(var t of JP(e))uJ.call(e,t)&&YP(n,t,e[t]);return n},fJ=(n,e)=>aJ(n,lJ(e));function wF(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=wF(r,e,t);if(i)return i;r=e?null:r.sibling}}function AF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const SC=AF(B.createContext(null));class EF extends B.Component{render(){return B.createElement(SC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:ZP,ReactCurrentDispatcher:QP}=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function dJ(){const n=B.useContext(SC);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const r of[ZP==null?void 0:ZP.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=wF(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function hJ(){var n,e;const t=dJ(),[r]=B.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==SC&&!r.has(s)&&r.set(s,(e=QP==null?void 0:QP.current)==null?void 0:e.readContext(AF(s))),i=i.return}return r}function pJ(){const n=hJ();return B.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>B.createElement(e,null,B.createElement(t.Provider,fJ(KP({},r),{value:n.get(t)}))),e=>B.createElement(EF,KP({},e))),[n])}const JS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mJ(n){const{handlePointer:e}=HX(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(JS).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=JS[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=JS[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const gJ=B.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=mJ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:d,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:x,scene:S,onPointerMissed:A,onCreated:M,...C},R){B.useMemo(()=>iF(K5),[]);const T=pJ(),[b,L]=tJ({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=B.useRef(null),k=B.useRef(null);B.useImperativeHandle(R,()=>O.current);const z=aF(A),[V,j]=B.useState(!1),[Q,ne]=B.useState(!1);if(V)throw V;if(Q)throw Q;const G=B.useRef(null);L0(()=>{const Y=O.current;L.width>0&&L.height>0&&Y&&(G.current||(G.current=KX(Y)),G.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:d,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:x,scene:S,size:L,onPointerMissed:(...X)=>z.current==null?void 0:z.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(a?OX(a)?a.current:a:k.current),l&&X.setEvents({compute:($,re)=>{const ie=$[l+"X"],ae=$[l+"Y"];re.pointer.set(ie/re.size.width*2-1,-(ae/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),M==null||M(X)}}),G.current.render(B.createElement(T,null,B.createElement(lF,{set:ne},B.createElement(B.Suspense,{fallback:B.createElement(FX,{set:j})},e)))))}),B.useEffect(()=>{const Y=O.current;if(Y)return()=>xF(Y)},[]);const J=a?"none":"auto";return B.createElement("div",Rn({ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...i}},C),B.createElement("div",{ref:b,style:{width:"100%",height:"100%"}},B.createElement("canvas",{ref:O,style:{display:"block"}},t)))}),MF=B.forwardRef(function(e,t){return B.createElement(EF,null,B.createElement(gJ,Rn({},e,{ref:t})))});function vJ(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function CF(...n){return e=>n.forEach(t=>vJ(t,e))}function Mh(...n){return B.useCallback(CF(...n),n)}const bF=B.forwardRef((n,e)=>{const{children:t,...r}=n,i=B.Children.toArray(t),s=i.find(yJ);if(s){const o=s.props.children,a=i.map(l=>l===s?B.Children.count(o)>1?B.Children.only(null):B.isValidElement(o)?o.props.children:null:l);return B.createElement(pE,Rn({},r,{ref:e}),B.isValidElement(o)?B.cloneElement(o,void 0,a):null)}return B.createElement(pE,Rn({},r,{ref:e}),t)});bF.displayName="Slot";const pE=B.forwardRef((n,e)=>{const{children:t,...r}=n;return B.isValidElement(t)?B.cloneElement(t,{..._J(r,t.props),ref:e?CF(e,t.ref):t.ref}):B.Children.count(t)>1?B.Children.only(null):null});pE.displayName="SlotClone";const TF=({children:n})=>B.createElement(B.Fragment,null,n);function yJ(n){return B.isValidElement(n)&&n.type===TF}function _J(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const xJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nf=xJ.reduce((n,e)=>{const t=B.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?bF:e;return B.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),B.createElement(a,Rn({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function SJ(n,e){n&&h0.flushSync(()=>n.dispatchEvent(e))}const wJ=B.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?eO.createPortal(B.createElement(nf.div,Rn({},i,{ref:e})),r):null}),AJ=wJ;var qP=Object.prototype.hasOwnProperty;function jm(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&jm(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(qP.call(n,t)&&++r&&!qP.call(e,t)||!(t in e)||!jm(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function D0(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var E_=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};E_.prototype._test=function(e){var t=this.fn;try{Rd(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Rd(this.modifiers.slice(),t,this)(e)}catch{return!1}};E_.prototype._check=function(e){try{Rd(this.modifiers.slice(),this.fn,this)(e)}catch{if(Rd(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Rd(this.modifiers.slice(),this.fn,this)(e))throw null};E_.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){PF(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function RF(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Rd(n,e,t){if(n.length){var r=n.shift(),i=Rd(n,e,t);return r.perform(i,t)}else return RF(e)}function PF(n,e,t){if(n.length){var r=n.shift(),i=PF(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(RF(e,"async")(s))}}var EJ=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},wC=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),la=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};la.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new E_(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};la.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new EJ(t,e.simple,e.async)),this};la.prototype._clone=function(){return new la(this.chain.slice(),this.nextRuleModifiers.slice())};la.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};la.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new wC(r,e,i))}}),t};la.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new wC(t,e,r)}})};la.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){IF(e,t.chain.slice(),r,i)})};function IF(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){IF(n,e,t,r)},function(s){r(new wC(i,n,s))})}else t(n)}var eI=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function MJ(n,e){return e===void 0&&(e=!1),{simple:function(t){return eI(t,e)||n.check(t)===void 0},async:function(t){return eI(t,e)||n.testAsync(t)}}}function $i(){return typeof Proxy<"u"?BF(new la):mE(new la)}var Xm={};$i.extend=function(n){Object.assign(Xm,n)};$i.clearCustomRules=function(){Xm={}};function BF(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=BF(n._clone());if(r in cy)return i._applyModifier(cy[r],r);if(r in Xm)return i._applyRule(Xm[r],r);if(r in gE)return i._applyRule(gE[r],r)}})}function mE(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=mE(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},t=e(gE,n),r=e(Xm,t);return Object.keys(cy).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=mE(r._clone());return s._applyModifier(cy[i],i)}})}),r}var cy={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Wv(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Wv(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Wv(e).every(n)}},async:function(n){return function(e){return Promise.all(Wv(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return tI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return tI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function tI(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Wv(n){return typeof n=="string"?n.split(""):n}var gE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||CJ;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Wf("string")},boolean:function(){return Wf("boolean")},undefined:function(){return Wf("undefined")},null:function(){return Wf("null")},array:function(){return Wf("array")},object:function(){return Wf("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return bJ(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:MJ};function Wf(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function CJ(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function bJ(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var _n="colors",_i="sizes",pt="space",TJ={gap:pt,gridGap:pt,columnGap:pt,gridColumnGap:pt,rowGap:pt,gridRowGap:pt,inset:pt,insetBlock:pt,insetBlockEnd:pt,insetBlockStart:pt,insetInline:pt,insetInlineEnd:pt,insetInlineStart:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockEnd:pt,marginBlockStart:pt,marginInline:pt,marginInlineEnd:pt,marginInlineStart:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockEnd:pt,paddingBlockStart:pt,paddingInline:pt,paddingInlineEnd:pt,paddingInlineStart:pt,top:pt,right:pt,bottom:pt,left:pt,scrollMargin:pt,scrollMarginTop:pt,scrollMarginRight:pt,scrollMarginBottom:pt,scrollMarginLeft:pt,scrollMarginX:pt,scrollMarginY:pt,scrollMarginBlock:pt,scrollMarginBlockEnd:pt,scrollMarginBlockStart:pt,scrollMarginInline:pt,scrollMarginInlineEnd:pt,scrollMarginInlineStart:pt,scrollPadding:pt,scrollPaddingTop:pt,scrollPaddingRight:pt,scrollPaddingBottom:pt,scrollPaddingLeft:pt,scrollPaddingX:pt,scrollPaddingY:pt,scrollPaddingBlock:pt,scrollPaddingBlockEnd:pt,scrollPaddingBlockStart:pt,scrollPaddingInline:pt,scrollPaddingInlineEnd:pt,scrollPaddingInlineStart:pt,fontSize:"fontSizes",background:_n,backgroundColor:_n,backgroundImage:_n,borderImage:_n,border:_n,borderBlock:_n,borderBlockEnd:_n,borderBlockStart:_n,borderBottom:_n,borderBottomColor:_n,borderColor:_n,borderInline:_n,borderInlineEnd:_n,borderInlineStart:_n,borderLeft:_n,borderLeftColor:_n,borderRight:_n,borderRightColor:_n,borderTop:_n,borderTopColor:_n,caretColor:_n,color:_n,columnRuleColor:_n,fill:_n,outline:_n,outlineColor:_n,stroke:_n,textDecorationColor:_n,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:_i,minBlockSize:_i,maxBlockSize:_i,inlineSize:_i,minInlineSize:_i,maxInlineSize:_i,width:_i,minWidth:_i,maxWidth:_i,height:_i,minHeight:_i,maxHeight:_i,flexBasis:_i,gridTemplateColumns:_i,gridTemplateRows:_i,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},RJ=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Ch=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,RJ))(e);return i in n?n[i]:n[i]=t(e,...r)}},bu=Symbol.for("sxs.internal"),AC=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),nI=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:PJ}=Object.prototype,vE=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),IJ=/\s+(?![^()]*\))/,$f=n=>e=>n(...typeof e=="string"?String(e).split(IJ):[e]),rI={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:$f((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:$f((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:$f((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:$f((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:$f((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:$f((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},YS=/([\d.]+)([^]*)/,BJ=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,LJ=(n,e)=>n in DJ&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${vE(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${vE(n)}:${r}fit-content`)+s):String(e),DJ={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},el=n=>n?n+"-":"",LF=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?el(e)+(a.includes("$")?"":el(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),OJ=/\s*,\s*(?![^()]*\))/,FJ=Object.prototype.toString,md=(n,e,t,r,i)=>{let s,o,a;const l=(c,u,f)=>{let d,m;const v=_=>{for(d in _){const x=d.charCodeAt(0)===64,S=x&&Array.isArray(_[d])?_[d]:[_[d]];for(m of S){const A=/[A-Z]/.test(g=d)?g:g.replace(/-[^]/g,C=>C[1].toUpperCase()),M=typeof m=="object"&&m&&m.toString===FJ&&(!r.utils[A]||!u.length);if(A in r.utils&&!M){const C=r.utils[A];if(C!==o){o=C,v(C(m)),o=null;continue}}else if(A in rI){const C=rI[A];if(C!==a){a=C,v(C(m)),a=null;continue}}if(x&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(C,R,T,b,L,O)=>{const k=YS.test(R),z=.0625*(k?-1:1),[V,j]=k?[b,R]:[R,b];return"("+(T[0]==="="?"":T[0]===">"===k?"max-":"min-")+V+":"+(T[0]!=="="&&T.length===1?j.replace(YS,(Q,ne,G)=>Number(ne)+z*(T===">"?1:-1)+G):j)+(L?") and ("+(L[0]===">"?"min-":"max-")+V+":"+(L.length===1?O.replace(YS,(Q,ne,G)=>Number(ne)+z*(L===">"?-1:1)+G):O):"")+")"})),M){const C=x?f.concat(d):[...f],R=x?[...u]:BJ(u,d.split(OJ));s!==void 0&&i(iI(...s)),s=void 0,l(m,R,C)}else s===void 0&&(s=[[],u,f]),d=x||d.charCodeAt(0)!==36?d:`--${el(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,m=M?m:typeof m=="number"?m&&A in UJ?String(m)+"px":String(m):LF(LJ(A,m??""),r.prefix,r.themeMap[A]),s[0].push(`${x?`${d} `:`${vE(d)}:`}${m}`)}}var y,g};v(c),s!==void 0&&i(iI(...s)),s=void 0};l(n,e,t)},iI=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,UJ={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},sI=n=>String.fromCharCode(n+(n>25?39:97)),Tu=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=sI(t%52)+r;return sI(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Gp=["themed","global","styled","onevar","resonevar","allvar","inline"],kJ=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},NJ=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(kJ(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=u;if(!d.startsWith("--sxs"))continue;const m=d.slice(14,-3).trim().split(/\s+/),v=Gp[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Gp.length-1;a>=0;--a){const l=Gp[a];if(!o[l]){const c=Gp[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}zJ(o[l])}};return r(),e},zJ=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Ep=Symbol(),GJ=Ch(),oI=(n,e)=>GJ(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[bu]){r.type==null&&(r.type=i[bu].type);for(const s of i[bu].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(HJ(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),VJ(n,r,e)}),HJ=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${el(i.prefix)}c-${Tu(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){u=l,f=d,PJ.call(u,f)||(l[d]="undefined");const m=n[d];for(const v in m){const _={[d]:String(v)};String(v)==="undefined"&&c.push(d);const y=m[v],g=[_,y,!nI(y)];o.push(g)}}var u,f;if(typeof e=="object"&&e)for(const d of e){let{css:m,...v}=d;m=typeof m=="object"&&m||{};for(const y in v)v[y]=String(v[y]);const _=[v,m,!nI(m)];a.push(_)}return[s,r,o,a,l,c]},VJ=(n,e,t)=>{const[r,i,s,o]=WJ(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let m=0;m<d[Ep].length;m++){const[v,_]=d[Ep][m];f.rules[v].apply(_)}return d[Ep]=[],null}return d[Ep]=[],d.rules={},Gp.forEach(m=>d.rules[m]={apply:v=>d[Ep].push([m,v])}),d})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||$J;const{css:d,...m}=f,v={};for(const g in s)if(delete m[g],g in f){let x=f[g];typeof x=="object"&&x?v[g]={"@initial":s[g],...x}:(x=String(x),v[g]=x!=="undefined"||o.has(g)?x:s[g])}else v[g]=s[g];const _=new Set([...i]);for(const[g,x,S,A]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),md(x,[`.${g}`],[],n,R=>{l.styled.apply(R)}));const M=aI(S,v,n.media),C=aI(A,v,n.media,!0);for(const R of M)if(R!==void 0)for(const[T,b,L]of R){const O=`${g}-${Tu(b)}-${T}`;_.add(O);const k=(L?t.rules.resonevar:t.rules.onevar).cache,z=L?l.resonevar:l.onevar;k.has(O)||(k.add(O),md(b,[`.${O}`],[],n,V=>{z.apply(V)}))}for(const R of C)if(R!==void 0)for(const[T,b]of R){const L=`${g}-${Tu(b)}-${T}`;_.add(L),t.rules.allvar.cache.has(L)||(t.rules.allvar.cache.add(L),md(b,[`.${L}`],[],n,O=>{l.allvar.apply(O)}))}}if(typeof d=="object"&&d){const g=`${r}-i${Tu(d)}-css`;_.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),md(d,[`.${g}`],[],n,x=>{l.inline.apply(x)}))}for(const g of String(f.className||"").trim().split(/\s+/))g&&_.add(g);const y=m.className=[..._].join(" ");return{type:e.type,className:y,selector:c,props:m,toString:()=>y,deferredInjector:a}};return AC(u,{className:r,selector:c,[bu]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},WJ=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},aI=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let m,v,_=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const g=y.slice(1);(v=v||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),u=!0}c+=_,m=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},$J={},jJ=Ch(),XJ=(n,e)=>jJ(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Tu(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}md(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return AC(r,{toString:r})}),JJ=Ch(),YJ=(n,e)=>JJ(n,()=>t=>{const r=`${el(n.prefix)}k-${Tu(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];md(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return AC(i,{get name(){return i()},toString:i})}),KJ=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+el(this.prefix)+el(this.scale)+this.token}toString(){return this.computedValue}},ZJ=Ch(),QJ=(n,e)=>ZJ(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${el(n.prefix)}t-${Tu(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${el(n.prefix)}${l}-${c}`,f=LF(String(r[l][c]),n.prefix,l);s[l][c]=new KJ(c,f,l,n.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),qJ=Ch(),lI,eY=Ch(),DF=n=>{const e=(t=>{let r=!1;const i=qJ(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...TJ},utils:typeof s.utils=="object"&&s.utils||{}},f=NJ(l),d={css:oI(u,f),globalCss:XJ(u,f),keyframes:YJ(u,f),createTheme:QJ(u,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(c)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>eY(t,()=>{const i=oI(t,r);return(...s)=>{const o=i(...s),a=o[bu].type,l=oe.forwardRef((c,u)=>{const f=c&&c.as||a,{props:d,deferredInjector:m}=o(c);return delete d.as,d.ref=u,m?oe.createElement(oe.Fragment,null,oe.createElement(f,d),oe.createElement(m,null)):oe.createElement(f,d)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[bu]=o[bu],l}}))(e),e},tY=()=>lI||(lI=DF()),br=(...n)=>tY().styled(...n);function nY(n,e,t){return Math.max(e,Math.min(n,t))}const Dn={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function cI(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function uI(n,e,t,r=.15){return r===0?nY(n,e,t):n<e?-cI(e-n,t-e,r)+e:n>t?+cI(n-t,t-e,r)+t:n}function rY(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[uI(e,s,o,r),uI(t,a,l,i)]}function iY(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sY(n){var e=iY(n,"string");return typeof e=="symbol"?e:String(e)}function yr(n,e,t){return e=sY(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(t),!0).forEach(function(r){yr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const OF={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function dI(n){return n?n[0].toUpperCase()+n.slice(1):""}const oY=["enter","leave"];function aY(n=!1,e){return n&&!oY.includes(e)}function lY(n,e="",t=!1){const r=OF[n],i=r&&r[e]||e;return"on"+dI(n)+dI(i)+(aY(t,i)?"Capture":"")}const cY=["gotpointercapture","lostpointercapture"];function uY(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=cY.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function fY(n,e=""){const t=OF[n],r=t&&t[e]||e;return n+r}function M_(n){return"touches"in n}function FF(n){return M_(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function dY(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function hY(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function UF(n){return M_(n)?hY(n)[0]:n}function yE(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,i=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:o,origin:[i,s]}}catch{}return null}function pY(n){return dY(n).map(e=>e.identifier)}function hI(n,e){const[t,r]=Array.from(n.touches).filter(i=>e.includes(i.identifier));return yE(t,r)}function KS(n){const e=UF(n);return M_(n)?e.identifier:e.pointerId}function qd(n){const e=UF(n);return[e.clientX,e.clientY]}const pI=40,mI=800;function kF(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=pI,t*=pI):r===2&&(e*=mI,t*=mI),[e,t]}function mY(n){var e,t;const{scrollX:r,scrollY:i,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=r??s)!==null&&e!==void 0?e:0,(t=i??o)!==null&&t!==void 0?t:0]}function gY(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function uy(n,...e){return typeof n=="function"?n(...e):n}function vY(){}function yY(...n){return n.length===0?vY:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function gI(n,e){return Object.assign({},e,n||{})}const _Y=32;class NF{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?uy(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,gY(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const C=t._delta.map(Math.abs);Dn.addTo(t._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:u,values:f}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[C,R]=f;d[0]=u[0]!==!1?C-u[0]:0,d[1]=u[1]!==!1?R-u[1]:0}else d[0]=u[0]!==!1?o-u[0]:0,d[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=uy(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[_,y]=t.offset,[[g,x],[S,A]]=t._bounds;t.overflow=[_<g?-1:_>x?1:0,y<S?-1:y>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const M=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=rY(t._bounds,t.offset,M),t.delta=Dn.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>_Y)){t.delta=Dn.sub(t.offset,m);const C=t.delta.map(Math.abs);Dn.addTo(t.distance,C),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[C[0]/s,C[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Xn(Xn(Xn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function xY([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class O0 extends NF{constructor(...e){super(...e),yr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Dn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Dn.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[FF(e)]:r.axisThreshold;t.axis=xY(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const SY=n=>n,vI=.15,zF={enabled(n=!0){return n},eventOptions(n,e,t){return Xn(Xn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[vI,vI];case!1:return[0,0];default:return Dn.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Dn.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||SY},threshold(n){return Dn.toVector(n,0)}},wY=0,rf=Xn(Xn({},zF),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=wY){return n},bounds(n={}){if(typeof n=="function")return s=>rf.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),yI={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class AY extends O0{constructor(...e){super(...e),yr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=rf.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=KS(e),r._pointerActive=!0,this.computeValues(qd(e)),this.computeInitial(),t.preventScrollAxis&&FF(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=KS(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=qd(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Dn.sub(s,t._values),this.computeValues(s)),Dn.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=KS(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,d]=r.swipe.velocity,[m,v]=r.swipe.distance,_=r.swipe.duration;if(t.elapsedTime<_){const y=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);y>f&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),g>d&&Math.abs(u)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,EY(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=yI[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Dn.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in yI&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function EY(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const F0=typeof window<"u"&&window.document&&window.document.createElement;function MY(){return F0&&"ontouchstart"in window}function _I(){return MY()||F0&&window.navigator.maxTouchPoints>1}function CY(){return F0&&"onpointerdown"in window}function bY(){return F0&&"exitPointerLock"in window.document}function TY(){try{return"constructor"in GestureEvent}catch{return!1}}const Js={isBrowser:F0,gesture:TY(),touch:_I(),touchscreen:_I(),pointer:CY(),pointerLock:bY()},RY=250,PY=180,IY=.5,BY=50,LY=250,DY=10,xI={mouse:0,touch:0,pen:8},OY=Xn(Xn({},rf),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Js.pointerLock,Js.touch&&t?"touch":this.pointerLock?"mouse":Js.pointer&&!i?"pointer":Js.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?RY:void 0,!(!Js.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Dn.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=IY,distance:e=BY,duration:t=LY}={}){return{velocity:this.transform(Dn.toVector(n)),distance:this.transform(Dn.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return PY;case!1:return 0;default:return n}},axisThreshold(n){return n?Xn(Xn({},xI),n):xI},keyboardDisplacement(n=DY){return n}});function GF(n){const[e,t]=n.overflow,[r,i]=n._delta,[s,o]=n._direction;(e<0&&r>0&&s<0||e>0&&r<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&i>0&&o<0||t>0&&i<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const FY=30,UY=100;class kY extends NF{constructor(...e){super(...e),yr(this,"ingKey","pinching"),yr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=Dn.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const i=Math.abs(t)*FY-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const i=hI(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(o=>i.has(o))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=yE(...Array.from(r.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=hI(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=yE(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,i=r._values[1],s=t.angle-i;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),r.origin=t.origin,r.turns=o,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Dn.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-kF(e)[1]/UY*r.offset[0],0],Dn.addTo(r._movement,r._delta),GF(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const NY=Xn(Xn({},zF),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Js.touch&&Js.gesture)return"gesture";if(Js.touch&&r)return"touch";if(Js.touchscreen){if(Js.pointer)return"pointer";if(Js.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=gI(uy(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=gI(uy(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Dn.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class zY extends O0{constructor(...e){super(...e),yr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(qd(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=qd(e),r=this.state;r._delta=Dn.sub(t,r._values),Dn.addTo(r._movement,r._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const GY=Xn(Xn({},rf),{},{mouseOnly:(n=!0)=>n});class HY extends O0{constructor(...e){super(...e),yr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,r=mY(e);t._delta=Dn.sub(r,t._values),Dn.addTo(t._movement,t._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const VY=rf;class WY extends O0{constructor(...e){super(...e),yr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=kF(e),Dn.addTo(t._movement,t._delta),GF(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const $Y=rf;class jY extends O0{constructor(...e){super(...e),yr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(qd(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const r=qd(e);t._movement=t._delta=Dn.sub(r,t._values),this.computeValues(r),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const XY=Xn(Xn({},rf),{},{mouseOnly:(n=!0)=>n}),EC=new Map,_E=new Map;function HF(n){EC.set(n.key,n.engine),_E.set(n.key,n.resolver)}const VF={key:"drag",engine:AY,resolver:OY},JY={key:"hover",engine:jY,resolver:XY},YY={key:"move",engine:zY,resolver:GY},KY={key:"pinch",engine:kY,resolver:NY},ZY={key:"scroll",engine:HY,resolver:VY},QY={key:"wheel",engine:WY,resolver:$Y};function qY(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function eK(n,e){if(n==null)return{};var t=qY(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const tK={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Js.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},nK=["target","eventOptions","window","enabled","transform"];function b1(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=b1(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function rK(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=eK(r,nK);if(t.shared=b1({target:i,eventOptions:s,window:o,enabled:a,transform:l},tK),e){const u=_E.get(e);t[e]=b1(Xn({shared:t.shared},c),u)}else for(const u in c){const f=_E.get(u);f&&(t[u]=b1(Xn({shared:t.shared},c[u]),f))}return t}class WF{constructor(e,t){yr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=fY(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Xn(Xn({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class iK{constructor(){yr(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let sK=class{constructor(e){yr(this,"gestures",new Set),yr(this,"_targetEventStore",new WF(this)),yr(this,"gestureEventStores",{}),yr(this,"gestureTimeoutStores",{}),yr(this,"handlers",{}),yr(this,"config",{}),yr(this,"pointerIds",new Set),yr(this,"touchIds",new Set),yr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),oK(this,e)}setEventIds(e){if(M_(e))return this.touchIds=new Set(pY(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=rK(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=SI(r,a.eventOptions,!!i);if(a.enabled){const c=EC.get(o);new c(this,e,o).bind(l)}}const s=SI(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Xn(Xn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=yY(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=uY(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}};function jf(n,e){n.gestures.add(e),n.gestureEventStores[e]=new WF(n,e),n.gestureTimeoutStores[e]=new iK}function oK(n,e){e.drag&&jf(n,"drag"),e.wheel&&jf(n,"wheel"),e.scroll&&jf(n,"scroll"),e.move&&jf(n,"move"),e.pinch&&jf(n,"pinch"),e.hover&&jf(n,"hover")}const SI=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let d=a?r:lY(r,i,u);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)},aK=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function lK(n){const e={},t={},r=new Set;for(let i in n)aK.test(i)?(r.add(RegExp.lastMatch),t[i]=n[i]):e[i]=n[i];return[t,e,r]}function Xf(n,e,t,r,i,s){if(!n.has(t)||!EC.has(r))return;const o=t+"Start",a=t+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),t in e&&(u=e[t](c)),c.last&&a in e&&e[a](c),u};i[r]=l,s[r]=s[r]||{}}function cK(n,e){const[t,r,i]=lK(n),s={};return Xf(i,t,"onDrag","drag",s,e),Xf(i,t,"onWheel","wheel",s,e),Xf(i,t,"onScroll","scroll",s,e),Xf(i,t,"onPinch","pinch",s,e),Xf(i,t,"onMove","move",s,e),Xf(i,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:r}}function $F(n,e={},t,r){const i=oe.useMemo(()=>new sK(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),oe.useEffect(i.effect.bind(i)),oe.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function uK(n,e){return HF(VF),$F({drag:n},e||{},"drag")}function fK(n){return n.forEach(HF),function(t,r){const{handlers:i,nativeHandlers:s,config:o}=cK(t,r||{});return $F(i,o,void 0,s)}}function dK(n,e){return fK([VF,KY,ZY,QY,YY,JY])(n,e||{})}function Fa(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function jF(n,e=[]){let t=[];function r(s,o){const a=B.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:d,children:m,...v}=f,_=(d==null?void 0:d[n][l])||a,y=B.useMemo(()=>v,Object.values(v));return B.createElement(_.Provider,{value:y},m)}function u(f,d){const m=(d==null?void 0:d[n][l])||a,v=B.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>B.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return B.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,hK(i,...e)]}function hK(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function bh(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function pK(n,e=globalThis==null?void 0:globalThis.document){const t=bh(n);B.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const xE="dismissableLayer.update",mK="dismissableLayer.pointerDownOutside",gK="dismissableLayer.focusOutside";let wI;const vK=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yK=B.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=B.useContext(vK),[f,d]=B.useState(null),m=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=B.useState({}),_=Mh(e,T=>d(T)),y=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(g),S=f?y.indexOf(f):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,M=S>=x,C=_K(T=>{const b=T.target,L=[...u.branches].some(O=>O.contains(b));!M||L||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},m),R=xK(T=>{const b=T.target;[...u.branches].some(O=>O.contains(b))||(o==null||o(T),a==null||a(T),T.defaultPrevented||l==null||l())},m);return pK(T=>{S===u.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),B.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(wI=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),AI(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=wI)}},[f,m,r,u]),B.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),AI())},[f,u]),B.useEffect(()=>{const T=()=>v({});return document.addEventListener(xE,T),()=>document.removeEventListener(xE,T)},[]),B.createElement(nf.div,Rn({},c,{ref:_,style:{pointerEvents:A?M?"auto":"none":void 0,...n.style},onFocusCapture:Fa(n.onFocusCapture,R.onFocusCapture),onBlurCapture:Fa(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Fa(n.onPointerDownCapture,C.onPointerDownCapture)}))});function _K(n,e=globalThis==null?void 0:globalThis.document){const t=bh(n),r=B.useRef(!1),i=B.useRef(()=>{});return B.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){XF(mK,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function xK(n,e=globalThis==null?void 0:globalThis.document){const t=bh(n),r=B.useRef(!1);return B.useEffect(()=>{const i=s=>{s.target&&!r.current&&XF(gK,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AI(){const n=new CustomEvent(xE);document.dispatchEvent(n)}function XF(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?SJ(i,s):i.dispatchEvent(s)}const eh=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},SK=x8["useId".toString()]||(()=>{});let wK=0;function AK(n){const[e,t]=B.useState(SK());return eh(()=>{n||t(r=>r??String(wK++))},[n]),n||(e?`radix-${e}`:"")}const EK=["top","right","bottom","left"],pc=Math.min,ds=Math.max,fy=Math.round,$v=Math.floor,mc=n=>({x:n,y:n}),MK={left:"right",right:"left",bottom:"top",top:"bottom"},CK={start:"end",end:"start"};function SE(n,e,t){return ds(n,pc(e,t))}function tl(n,e){return typeof n=="function"?n(e):n}function nl(n){return n.split("-")[0]}function Th(n){return n.split("-")[1]}function MC(n){return n==="x"?"y":"x"}function CC(n){return n==="y"?"height":"width"}function Rh(n){return["top","bottom"].includes(nl(n))?"y":"x"}function bC(n){return MC(Rh(n))}function bK(n,e,t){t===void 0&&(t=!1);const r=Th(n),i=bC(n),s=CC(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=dy(o)),[o,dy(o)]}function TK(n){const e=dy(n);return[wE(n),e,wE(e)]}function wE(n){return n.replace(/start|end/g,e=>CK[e])}function RK(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function PK(n,e,t,r){const i=Th(n);let s=RK(nl(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(wE)))),s}function dy(n){return n.replace(/left|right|bottom|top/g,e=>MK[e])}function IK(n){return{top:0,right:0,bottom:0,left:0,...n}}function JF(n){return typeof n!="number"?IK(n):{top:n,right:n,bottom:n,left:n}}function hy(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function EI(n,e,t){let{reference:r,floating:i}=n;const s=Rh(e),o=bC(e),a=CC(o),l=nl(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Th(e)){case"start":m[o]-=d*(t&&c?-1:1);break;case"end":m[o]+=d*(t&&c?-1:1);break}return m}const BK=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:f}=EI(c,r,l),d=r,m={},v=0;for(let _=0;_<a.length;_++){const{name:y,fn:g}=a[_],{x,y:S,data:A,reset:M}=await g({x:u,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});if(u=x??u,f=S??f,m={...m,[y]:{...m[y],...A}},M&&v<=50){v++,typeof M=="object"&&(M.placement&&(d=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):M.rects),{x:u,y:f}=EI(c,d,l)),_=-1;continue}}return{x:u,y:f,placement:d,strategy:i,middlewareData:m}};async function Jm(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=tl(e,n),v=JF(m),y=a[d?f==="floating"?"reference":"floating":f],g=hy(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=f==="floating"?{...o.floating,x:r,y:i}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),A=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},M=hy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:S,strategy:l}):x);return{top:(g.top-M.top+v.top)/A.y,bottom:(M.bottom-g.bottom+v.bottom)/A.y,left:(g.left-M.left+v.left)/A.x,right:(M.right-g.right+v.right)/A.x}}const MI=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:c=0}=tl(n,e)||{};if(l==null)return{};const u=JF(c),f={x:t,y:r},d=bC(i),m=CC(d),v=await o.getDimensions(l),_=d==="y",y=_?"top":"left",g=_?"bottom":"right",x=_?"clientHeight":"clientWidth",S=s.reference[m]+s.reference[d]-f[d]-s.floating[m],A=f[d]-s.reference[d],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=M?M[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[x]||s.floating[m]);const R=S/2-A/2,T=C/2-v[m]/2-1,b=pc(u[y],T),L=pc(u[g],T),O=b,k=C-v[m]-L,z=C/2-v[m]/2+R,V=SE(O,z,k),Q=Th(i)!=null&&z!=V&&s.reference[m]/2-(z<O?b:L)-v[m]/2<0?z<O?O-z:k-z:0;return{[d]:f[d]-Q,data:{[d]:V,centerOffset:z-V+Q}}}}),LK=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,..._}=tl(n,e),y=nl(r),g=nl(o)===o,x=await(a.isRTL==null?void 0:a.isRTL(l.floating)),S=f||(g||!v?[dy(o)]:TK(o));!f&&m!=="none"&&S.push(...PK(o,v,m,x));const A=[o,...S],M=await Jm(e,_),C=[];let R=((t=i.flip)==null?void 0:t.overflows)||[];if(c&&C.push(M[y]),u){const O=bK(r,s,x);C.push(M[O[0]],M[O[1]])}if(R=[...R,{placement:r,overflows:C}],!C.every(O=>O<=0)){var T,b;const O=(((T=i.flip)==null?void 0:T.index)||0)+1,k=A[O];if(k)return{data:{index:O,overflows:R},reset:{placement:k}};let z=(b=R.filter(V=>V.overflows[0]<=0).sort((V,j)=>V.overflows[1]-j.overflows[1])[0])==null?void 0:b.placement;if(!z)switch(d){case"bestFit":{var L;const V=(L=R.map(j=>[j.placement,j.overflows.filter(Q=>Q>0).reduce((Q,ne)=>Q+ne,0)]).sort((j,Q)=>j[1]-Q[1])[0])==null?void 0:L[0];V&&(z=V);break}case"initialPlacement":z=o;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function CI(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function bI(n){return EK.some(e=>n[e]>=0)}const DK=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=tl(n,e);switch(r){case"referenceHidden":{const s=await Jm(e,{...i,elementContext:"reference"}),o=CI(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:bI(o)}}}case"escaped":{const s=await Jm(e,{...i,altBoundary:!0}),o=CI(s,t.floating);return{data:{escapedOffsets:o,escaped:bI(o)}}}default:return{}}}}};async function OK(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=nl(t),a=Th(t),l=Rh(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=tl(e,n);let{mainAxis:d,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:d*c}:{x:d*c,y:m*u}}const FK=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await OK(e,n);return{x:t+i.x,y:r+i.y,data:i}}}},UK=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:x}=y;return{x:g,y:x}}},...l}=tl(n,e),c={x:t,y:r},u=await Jm(e,l),f=Rh(nl(i)),d=MC(f);let m=c[d],v=c[f];if(s){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",x=m+u[y],S=m-u[g];m=SE(x,m,S)}if(o){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",x=v+u[y],S=v-u[g];v=SE(x,v,S)}const _=a.fn({...e,[d]:m,[f]:v});return{..._,data:{x:_.x-t,y:_.y-r}}}}},kK=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=tl(n,e),u={x:t,y:r},f=Rh(i),d=MC(f);let m=u[d],v=u[f];const _=tl(a,e),y=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const S=d==="y"?"height":"width",A=s.reference[d]-s.floating[S]+y.mainAxis,M=s.reference[d]+s.reference[S]-y.mainAxis;m<A?m=A:m>M&&(m=M)}if(c){var g,x;const S=d==="y"?"width":"height",A=["top","left"].includes(nl(i)),M=s.reference[f]-s.floating[S]+(A&&((g=o.offset)==null?void 0:g[f])||0)+(A?0:y.crossAxis),C=s.reference[f]+s.reference[S]+(A?0:((x=o.offset)==null?void 0:x[f])||0)-(A?y.crossAxis:0);v<M?v=M:v>C&&(v=C)}return{[d]:m,[f]:v}}}},NK=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=tl(n,e),l=await Jm(e,a),c=nl(t),u=Th(t),f=Rh(t)==="y",{width:d,height:m}=r.floating;let v,_;c==="top"||c==="bottom"?(v=c,_=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,v=u==="end"?"top":"bottom");const y=m-l[v],g=d-l[_],x=!e.middlewareData.shift;let S=y,A=g;if(f){const C=d-l.left-l.right;A=u||x?pc(g,C):C}else{const C=m-l.top-l.bottom;S=u||x?pc(y,C):C}if(x&&!u){const C=ds(l.left,0),R=ds(l.right,0),T=ds(l.top,0),b=ds(l.bottom,0);f?A=d-2*(C!==0||R!==0?C+R:ds(l.left,l.right)):S=m-2*(T!==0||b!==0?T+b:ds(l.top,l.bottom))}await o({...e,availableWidth:A,availableHeight:S});const M=await i.getDimensions(s.floating);return d!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function gc(n){return YF(n)?(n.nodeName||"").toLowerCase():"#document"}function _s(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ul(n){var e;return(e=(YF(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function YF(n){return n instanceof Node||n instanceof _s(n).Node}function rl(n){return n instanceof Element||n instanceof _s(n).Element}function ca(n){return n instanceof HTMLElement||n instanceof _s(n).HTMLElement}function TI(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof _s(n).ShadowRoot}function U0(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ao(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function zK(n){return["table","td","th"].includes(gc(n))}function TC(n){const e=RC(),t=ao(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function GK(n){let e=th(n);for(;ca(e)&&!C_(e);){if(TC(e))return e;e=th(e)}return null}function RC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function C_(n){return["html","body","#document"].includes(gc(n))}function ao(n){return _s(n).getComputedStyle(n)}function b_(n){return rl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function th(n){if(gc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||TI(n)&&n.host||ul(n);return TI(e)?e.host:e}function KF(n){const e=th(n);return C_(e)?n.ownerDocument?n.ownerDocument.body:n.body:ca(e)&&U0(e)?e:KF(e)}function py(n,e){var t;e===void 0&&(e=[]);const r=KF(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=_s(r);return i?e.concat(s,s.visualViewport||[],U0(r)?r:[]):e.concat(r,py(r))}function ZF(n){const e=ao(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ca(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=fy(t)!==s||fy(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function PC(n){return rl(n)?n:n.contextElement}function Pd(n){const e=PC(n);if(!ca(e))return mc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=ZF(e);let o=(s?fy(t.width):t.width)/r,a=(s?fy(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const HK=mc(0);function QF(n){const e=_s(n);return!RC()||!e.visualViewport?HK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function VK(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==_s(n)?!1:e}function $u(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=PC(n);let o=mc(1);e&&(r?rl(r)&&(o=Pd(r)):o=Pd(n));const a=VK(s,t,r)?QF(s):mc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const d=_s(s),m=r&&rl(r)?_s(r):r;let v=d.frameElement;for(;v&&r&&m!==d;){const _=Pd(v),y=v.getBoundingClientRect(),g=ao(v),x=y.left+(v.clientLeft+parseFloat(g.paddingLeft))*_.x,S=y.top+(v.clientTop+parseFloat(g.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,f*=_.y,l+=x,c+=S,v=_s(v).frameElement}}return hy({width:u,height:f,x:l,y:c})}function WK(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=ca(t),s=ul(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=mc(1);const l=mc(0);if((i||!i&&r!=="fixed")&&((gc(t)!=="body"||U0(s))&&(o=b_(t)),ca(t))){const c=$u(t);a=Pd(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function $K(n){return Array.from(n.getClientRects())}function qF(n){return $u(ul(n)).left+b_(n).scrollLeft}function jK(n){const e=ul(n),t=b_(n),r=n.ownerDocument.body,i=ds(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ds(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+qF(n);const a=-t.scrollTop;return ao(r).direction==="rtl"&&(o+=ds(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function XK(n,e){const t=_s(n),r=ul(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=RC();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function JK(n,e){const t=$u(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ca(n)?Pd(n):mc(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function RI(n,e,t){let r;if(e==="viewport")r=XK(n,t);else if(e==="document")r=jK(ul(n));else if(rl(e))r=JK(e,t);else{const i=QF(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return hy(r)}function eU(n,e){const t=th(n);return t===e||!rl(t)||C_(t)?!1:ao(t).position==="fixed"||eU(t,e)}function YK(n,e){const t=e.get(n);if(t)return t;let r=py(n).filter(a=>rl(a)&&gc(a)!=="body"),i=null;const s=ao(n).position==="fixed";let o=s?th(n):n;for(;rl(o)&&!C_(o);){const a=ao(o),l=TC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||U0(o)&&!l&&eU(n,o))?r=r.filter(u=>u!==o):i=a,o=th(o)}return e.set(n,r),r}function KK(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?YK(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const f=RI(e,u,i);return c.top=ds(f.top,c.top),c.right=pc(f.right,c.right),c.bottom=pc(f.bottom,c.bottom),c.left=ds(f.left,c.left),c},RI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ZK(n){return ZF(n)}function QK(n,e,t){const r=ca(e),i=ul(e),s=t==="fixed",o=$u(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=mc(0);if(r||!r&&!s)if((gc(e)!=="body"||U0(i))&&(a=b_(e)),r){const c=$u(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=qF(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function PI(n,e){return!ca(n)||ao(n).position==="fixed"?null:e?e(n):n.offsetParent}function tU(n,e){const t=_s(n);if(!ca(n))return t;let r=PI(n,e);for(;r&&zK(r)&&ao(r).position==="static";)r=PI(r,e);return r&&(gc(r)==="html"||gc(r)==="body"&&ao(r).position==="static"&&!TC(r))?t:r||GK(n)||t}const qK=async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||tU,s=this.getDimensions;return{reference:QK(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}};function eZ(n){return ao(n).direction==="rtl"}const tZ={convertOffsetParentRelativeRectToViewportRelativeRect:WK,getDocumentElement:ul,getClippingRect:KK,getOffsetParent:tU,getElementRects:qK,getClientRects:$K,getDimensions:ZK,getScale:Pd,isElement:rl,isRTL:eZ};function nZ(n,e){let t=null,r;const i=ul(n);function s(){clearTimeout(r),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:d}=n.getBoundingClientRect();if(a||e(),!f||!d)return;const m=$v(u),v=$v(i.clientWidth-(c+f)),_=$v(i.clientHeight-(u+d)),y=$v(c),x={rootMargin:-m+"px "+-v+"px "+-_+"px "+-y+"px",threshold:ds(0,pc(1,l))||1};let S=!0;function A(M){const C=M[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},100)}S=!1}try{t=new IntersectionObserver(A,{...x,root:i.ownerDocument})}catch{t=new IntersectionObserver(A,x)}t.observe(n)}return o(!0),s}function rZ(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=PC(n),u=i||s?[...c?py(c):[],...py(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=c&&a?nZ(c,t):null;let d=-1,m=null;o&&(m=new ResizeObserver(g=>{let[x]=g;x&&x.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{m&&m.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?$u(n):null;l&&y();function y(){const g=$u(n);_&&(g.x!==_.x||g.y!==_.y||g.width!==_.width||g.height!==_.height)&&t(),_=g,v=requestAnimationFrame(y)}return t(),()=>{u.forEach(g=>{i&&g.removeEventListener("scroll",t),s&&g.removeEventListener("resize",t)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const iZ=(n,e,t)=>{const r=new Map,i={platform:tZ,...t},s={...i.platform,_c:r};return BK(n,e,{...i,platform:s})},sZ=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?MI({element:r.current,padding:i}).fn(t):{}:r?MI({element:r,padding:i}).fn(t):{}}}};var T1=typeof document<"u"?B.useLayoutEffect:B.useEffect;function my(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!my(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!my(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function nU(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function II(n,e){const t=nU(n);return Math.round(e*t)/t}function BI(n){const e=B.useRef(n);return T1(()=>{e.current=n}),e}function oZ(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=B.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,m]=B.useState(r);my(d,r)||m(r);const[v,_]=B.useState(null),[y,g]=B.useState(null),x=B.useCallback(Q=>{Q!=C.current&&(C.current=Q,_(Q))},[_]),S=B.useCallback(Q=>{Q!==R.current&&(R.current=Q,g(Q))},[g]),A=s||v,M=o||y,C=B.useRef(null),R=B.useRef(null),T=B.useRef(u),b=BI(l),L=BI(i),O=B.useCallback(()=>{if(!C.current||!R.current)return;const Q={placement:e,strategy:t,middleware:d};L.current&&(Q.platform=L.current),iZ(C.current,R.current,Q).then(ne=>{const G={...ne,isPositioned:!0};k.current&&!my(T.current,G)&&(T.current=G,h0.flushSync(()=>{f(G)}))})},[d,e,t,L]);T1(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(Q=>({...Q,isPositioned:!1})))},[c]);const k=B.useRef(!1);T1(()=>(k.current=!0,()=>{k.current=!1}),[]),T1(()=>{if(A&&(C.current=A),M&&(R.current=M),A&&M){if(b.current)return b.current(A,M,O);O()}},[A,M,O,b]);const z=B.useMemo(()=>({reference:C,floating:R,setReference:x,setFloating:S}),[x,S]),V=B.useMemo(()=>({reference:A,floating:M}),[A,M]),j=B.useMemo(()=>{const Q={position:t,left:0,top:0};if(!V.floating)return Q;const ne=II(V.floating,u.x),G=II(V.floating,u.y);return a?{...Q,transform:"translate("+ne+"px, "+G+"px)",...nU(V.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ne,top:G}},[t,a,V.floating,u.x,u.y]);return B.useMemo(()=>({...u,update:O,refs:z,elements:V,floatingStyles:j}),[u,O,z,V,j])}const aZ=B.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return B.createElement(nf.svg,Rn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:B.createElement("polygon",{points:"0,0 30,0 15,10"}))}),lZ=aZ;function cZ(n){const[e,t]=B.useState(void 0);return eh(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const rU="Popper",[iU,sU]=jF(rU),[uZ,oU]=iU(rU),fZ=n=>{const{__scopePopper:e,children:t}=n,[r,i]=B.useState(null);return B.createElement(uZ,{scope:e,anchor:r,onAnchorChange:i},t)},dZ="PopperAnchor",hZ=B.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=oU(dZ,t),o=B.useRef(null),a=Mh(e,o);return B.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:B.createElement(nf.div,Rn({},i,{ref:a}))}),aU="PopperContent",[pZ,mZ]=iU(aU),gZ=B.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:d=0,align:m="center",alignOffset:v=0,arrowPadding:_=0,collisionBoundary:y=[],collisionPadding:g=0,sticky:x="partial",hideWhenDetached:S=!1,avoidCollisions:A=!0,onPlaced:M,...C}=n,R=oU(aU,u),[T,b]=B.useState(null),L=Mh(e,ge=>b(ge)),[O,k]=B.useState(null),z=cZ(O),V=(t=z==null?void 0:z.width)!==null&&t!==void 0?t:0,j=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,Q=f+(m!=="center"?"-"+m:""),ne=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},G=Array.isArray(y)?y:[y],J=G.length>0,Y={padding:ne,boundary:G.filter(xZ),altBoundary:J},{refs:X,floatingStyles:$,placement:re,isPositioned:ie,middlewareData:ae}=oZ({strategy:"fixed",placement:Q,whileElementsMounted:rZ,elements:{reference:R.anchor},middleware:[FK({mainAxis:d+j,alignmentAxis:v}),A&&UK({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?kK():void 0,...Y}),A&&LK({...Y}),NK({...Y,apply:({elements:ge,rects:ve,availableWidth:me,availableHeight:Ge})=>{const{width:Se,height:Fe}=ve.reference,Ne=ge.floating.style;Ne.setProperty("--radix-popper-available-width",`${me}px`),Ne.setProperty("--radix-popper-available-height",`${Ge}px`),Ne.setProperty("--radix-popper-anchor-width",`${Se}px`),Ne.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),O&&sZ({element:O,padding:_}),SZ({arrowWidth:V,arrowHeight:j}),S&&DK({strategy:"referenceHidden"})]}),[ue,fe]=lU(re),_e=bh(M);eh(()=>{ie&&(_e==null||_e())},[ie,_e]);const Oe=(i=ae.arrow)===null||i===void 0?void 0:i.x,We=(s=ae.arrow)===null||s===void 0?void 0:s.y,xe=((o=ae.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[W,Ae]=B.useState();return eh(()=>{T&&Ae(window.getComputedStyle(T).zIndex)},[T]),B.createElement("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:ie?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(a=ae.transformOrigin)===null||a===void 0?void 0:a.x,(l=ae.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},B.createElement(pZ,{scope:u,placedSide:ue,onArrowChange:k,arrowX:Oe,arrowY:We,shouldHideArrow:xe},B.createElement(nf.div,Rn({"data-side":ue,"data-align":fe},C,{ref:L,style:{...C.style,animation:ie?void 0:"none",opacity:(c=ae.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),vZ="PopperArrow",yZ={top:"bottom",right:"left",bottom:"top",left:"right"},_Z=B.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=mZ(vZ,r),o=yZ[s.placedSide];return B.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},B.createElement(lZ,Rn({},i,{ref:t,style:{...i.style,display:"block"}})))});function xZ(n){return n!==null}const SZ=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,d=f?0:n.arrowWidth,m=f?0:n.arrowHeight,[v,_]=lU(a),y={start:"0%",center:"50%",end:"100%"}[_],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+d/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let S="",A="";return v==="bottom"?(S=f?y:`${g}px`,A=`${-m}px`):v==="top"?(S=f?y:`${g}px`,A=`${l.floating.height+m}px`):v==="right"?(S=`${-m}px`,A=f?y:`${x}px`):v==="left"&&(S=`${l.floating.width+m}px`,A=f?y:`${x}px`),{data:{x:S,y:A}}}});function lU(n){const[e,t="center"]=n.split("-");return[e,t]}const wZ=fZ,AZ=hZ,EZ=gZ,MZ=_Z;function CZ(n,e){return B.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const cU=n=>{const{present:e,children:t}=n,r=bZ(e),i=typeof t=="function"?t({present:r.isPresent}):B.Children.only(t),s=Mh(r.ref,i.ref);return typeof t=="function"||r.isPresent?B.cloneElement(i,{ref:s}):null};cU.displayName="Presence";function bZ(n){const[e,t]=B.useState(),r=B.useRef({}),i=B.useRef(n),s=B.useRef("none"),o=n?"mounted":"unmounted",[a,l]=CZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const c=jv(r.current);s.current=a==="mounted"?c:"none"},[a]),eh(()=>{const c=r.current,u=i.current;if(u!==n){const d=s.current,m=jv(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),eh(()=>{if(e){const c=f=>{const m=jv(r.current).includes(f.animationName);f.target===e&&m&&h0.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=jv(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:B.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function jv(n){return(n==null?void 0:n.animationName)||"none"}function TZ({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=RZ({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=bh(t),l=B.useCallback(c=>{if(s){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else i(c)},[s,n,i,a]);return[o,l]}function RZ({defaultProp:n,onChange:e}){const t=B.useState(n),[r]=t,i=B.useRef(r),s=bh(e);return B.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const PZ=B.forwardRef((n,e)=>B.createElement(nf.span,Rn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),IZ=PZ,[T_,due]=jF("Tooltip",[sU]),R_=sU(),BZ="TooltipProvider",AE="tooltip.open",[hue,IC]=T_(BZ),BC="Tooltip",[LZ,P_]=T_(BC),DZ=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=IC(BC,n.__scopeTooltip),c=R_(e),[u,f]=B.useState(null),d=AK(),m=B.useRef(0),v=o??l.disableHoverableContent,_=a??l.delayDuration,y=B.useRef(!1),[g=!1,x]=TZ({prop:r,defaultProp:i,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(AE))):l.onClose(),s==null||s(R)}}),S=B.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),A=B.useCallback(()=>{window.clearTimeout(m.current),y.current=!1,x(!0)},[x]),M=B.useCallback(()=>{window.clearTimeout(m.current),x(!1)},[x]),C=B.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,x(!0)},_)},[_,x]);return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),B.createElement(wZ,c,B.createElement(LZ,{scope:e,contentId:d,open:g,stateAttribute:S,trigger:u,onTriggerChange:f,onTriggerEnter:B.useCallback(()=>{l.isOpenDelayed?C():A()},[l.isOpenDelayed,C,A]),onTriggerLeave:B.useCallback(()=>{v?M():window.clearTimeout(m.current)},[M,v]),onOpen:A,onClose:M,disableHoverableContent:v},t))},LI="TooltipTrigger",OZ=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=P_(LI,t),s=IC(LI,t),o=R_(t),a=B.useRef(null),l=Mh(e,a,i.onTriggerChange),c=B.useRef(!1),u=B.useRef(!1),f=B.useCallback(()=>c.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),B.createElement(AZ,Rn({asChild:!0},o),B.createElement(nf.button,Rn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Fa(n.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Fa(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Fa(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Fa(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Fa(n.onBlur,i.onClose),onClick:Fa(n.onClick,i.onClose)})))}),FZ="TooltipPortal",[pue,UZ]=T_(FZ,{forceMount:void 0}),Ym="TooltipContent",kZ=B.forwardRef((n,e)=>{const t=UZ(Ym,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=P_(Ym,n.__scopeTooltip);return B.createElement(cU,{present:r||o.open},o.disableHoverableContent?B.createElement(uU,Rn({side:i},s,{ref:e})):B.createElement(NZ,Rn({side:i},s,{ref:e})))}),NZ=B.forwardRef((n,e)=>{const t=P_(Ym,n.__scopeTooltip),r=IC(Ym,n.__scopeTooltip),i=B.useRef(null),s=Mh(e,i),[o,a]=B.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:f}=r,d=B.useCallback(()=>{a(null),f(!1)},[f]),m=B.useCallback((v,_)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},x=WZ(g,y.getBoundingClientRect()),S=$Z(g,x),A=jZ(_.getBoundingClientRect()),M=JZ([...S,...A]);a(M),f(!0)},[f]);return B.useEffect(()=>()=>d(),[d]),B.useEffect(()=>{if(l&&u){const v=y=>m(y,u),_=y=>m(y,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",_)}}},[l,u,m,d]),B.useEffect(()=>{if(o){const v=_=>{const y=_.target,g={x:_.clientX,y:_.clientY},x=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),S=!XZ(g,o);x?d():S&&(d(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,d]),B.createElement(uU,Rn({},n,{ref:s}))}),[zZ,GZ]=T_(BC,{isInside:!1}),uU=B.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=P_(Ym,t),c=R_(t),{onClose:u}=l;return B.useEffect(()=>(document.addEventListener(AE,u),()=>document.removeEventListener(AE,u)),[u]),B.useEffect(()=>{if(l.trigger){const f=d=>{const m=d.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),B.createElement(yK,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},B.createElement(EZ,Rn({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),B.createElement(TF,null,r),B.createElement(zZ,{scope:t,isInside:!0},B.createElement(IZ,{id:l.contentId,role:"tooltip"},i||r))))}),HZ="TooltipArrow",VZ=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=R_(t);return GZ(HZ,t).isInside?null:B.createElement(MZ,Rn({},i,r,{ref:e}))});function WZ(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function $Z(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function jZ(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function XZ(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function JZ(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),YZ(e)}function YZ(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const KZ=DZ,ZZ=OZ,QZ=kZ,qZ=VZ;function eQ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function xn(n,e){if(n==null)return{};var t=eQ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Hn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Hn||(Hn={}));const tQ={[Hn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Hn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Hn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Hn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Hn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Hn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Hn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Hn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Hn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Hn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Hn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function fU(n,e,...t){const[r,...i]=tQ[e](...t);console[n]("LEVA: "+r,...i)}const Na=fU.bind(null,"warn"),nQ=fU.bind(null,"log"),rQ=["value"],iQ=["schema"],sQ=["value"],dU=[],ju={};function DI(n){let{value:e}=n,t=xn(n,rQ);for(let r of dU){const i=r(e,t);if(i)return i}}function fl(n,e){let{schema:t}=e,r=xn(e,iQ);if(n in ju){Na(Hn.ALREADY_REGISTERED_TYPE,n);return}dU.push((i,s)=>t(i,s)&&n),ju[n]=r}function ZS(n,e,t,r){const{normalize:i}=ju[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=xn(e,sQ);return{value:s,settings:o}}function oQ(n,e,t,r,i,s){const{sanitize:o}=ju[n];return o?o(e,t,r,i,s):e}function OI(n,e,t){const{format:r}=ju[n];return r?r(e,t):e}function aQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FI(Object(t),!0).forEach(function(r){aQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const vc=(n,e,t)=>n>t?t:n<e?e:n,lQ=n=>{if(n===""||typeof n=="number")return n;try{const e=Il(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},cQ=Math.log(10);function UI(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/cQ)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const gy=(n,e,t)=>t===e?0:(vc(n,e,t)-e)/(t-e),vy=(n,e,t)=>n*(t-e)+e,uQ=()=>"_"+Math.random().toString(36).substr(2,9),kI=/\(([0-9+\-*/^ .]+)\)/,NI=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,zI=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,GI=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,HI=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,VI=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Il(n){if(isNaN(Number(n)))if(kI.test(n)){const e=n.replace(kI,(t,r)=>String(Il(r)));return Il(e)}else if(NI.test(n)){const e=n.replace(NI,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Il(e)}else if(zI.test(n)){const e=n.replace(zI,(t,r,i)=>String(Number(r)*Number(i)));return Il(e)}else if(GI.test(n)){const e=n.replace(GI,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Il(e)}else if(HI.test(n)){const e=n.replace(HI,(t,r,i)=>String(Number(r)+Number(i)));return Il(e)}else if(VI.test(n)){const e=n.replace(VI,(t,r,i)=>String(Number(r)-Number(i)));return Il(e)}else return Number(n);return Number(n)}function fQ(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function dQ(n,e){const t=bt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function hQ(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function hU(n){return Object.prototype.toString.call(n)==="[object Object]"}const pQ=n=>hU(n)&&Object.keys(n).length===0;let Po;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Po||(Po={}));let Oo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Oo||(Oo={}));const mQ=["type","__customInput"],gQ=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],vQ=["type"];function pU(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:bt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:M,__customInput:C}=n,R=xn(n,mQ);return pU(C,e,R,M)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:d,onEditStart:m,onEditEnd:v,transient:_}=n,y=xn(n,gQ),g=bt({render:o,key:e,label:a??e,hint:f,transient:_??!!d,onEditStart:m,onEditEnd:v,disabled:u,optional:l,order:c},t);let{type:x}=y,S=xn(y,vQ);if(x=r??x,x in Po)return{type:x,input:S,options:g};let A;return r&&hU(S)&&"value"in S?A=S.value:A=pQ(S)?void 0:S,{type:x,input:A,options:bt(bt({},g),{},{onChange:d,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function yQ(n,e,t,r){const i=pU(n,e),{type:s,input:o,options:a}=i;if(s)return s in Po?i:{type:s,input:ZS(s,o,t,r),options:a};let l=DI(o);return l?{type:l,input:ZS(l,o,t,r),options:a}:(l=DI({value:o}),l?{type:l,input:ZS(l,{value:o},t,r),options:a}:!1)}function WI(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=mU({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const _Q=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function mU({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=oQ(n,o,t,e,i,s)}catch(l){throw new _Q(`The value \`${r}\` did not result in a correct value.`,e,l)}return jm(a,e)?e:a}const gU=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},vU=n=>n.shiftKey?5:n.altKey?1/5:1;function xQ(n,e){const t=console.error;console.error=()=>{},eO.render(n,e),console.error=t}const SQ=["value"],wQ=["min","max"],AQ=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},yU=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=vc(i,e,t);return r?s+r:s},EQ=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},_U=n=>{let{value:e}=n,t=xn(n,SQ);const{min:r=-1/0,max:i=1/0}=t,s=xn(t,wQ);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=vc(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?UI(l)*10:UI(o);l=l||c/10;const u=Math.round(vc(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:bt({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},xU=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var SU=Object.freeze({__proto__:null,schema:AQ,sanitize:yU,format:EQ,normalize:_U,sanitizeStep:xU});function ir(){return ir=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ir.apply(this,arguments)}const wU=B.createContext({});function fi(){return B.useContext(wU)}const LC=B.createContext(null),AU=B.createContext(null),EU=B.createContext(null);function k0(){return B.useContext(AU)}function MQ(){return B.useContext(EU)}const MU=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Xv(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Mp={$inputStyle:()=>n=>Xv(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Xv(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Xv(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Xv(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Mt,css:mue,createTheme:CQ,globalCss:bQ,keyframes:gue}=DF({prefix:"leva",theme:MU(),utils:bt(bt({},Mp),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Mp.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Mp.$focusStyle()(n)}),$hover:n=>({"&:hover":Mp.$hoverStyle()(n)}),$active:n=>({"&:active":Mp.$activeStyle()(n)})})}),TQ=bQ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function RQ(n){const e=MU();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=CQ(e);return{theme:e,className:t.className}}function Xa(n,e){const{theme:t}=B.useContext(LC);if(!(n in t)||!(e in t[n]))return Na(Hn.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const CU=Mt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),bU=Mt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${CU}`]:{paddingLeft:0}}),PQ=Mt(bU,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),IQ=Mt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),BQ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],LQ=["onUpdate"];function DC(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=xn(n,BQ);const{id:f,emitOnEditStart:d,emitOnEditEnd:m,disabled:v}=fi(),_=a||f,y=B.useRef(null),g=c>0,x=g?"textarea":"input",S=B.useCallback(C=>R=>{const T=R.currentTarget.value;C(T)},[]);oe.useEffect(()=>{const C=y.current,R=S(T=>{r(T),m()});return C==null||C.addEventListener("blur",R),()=>C==null?void 0:C.removeEventListener("blur",R)},[S,r,m]);const A=B.useCallback(C=>{C.key==="Enter"&&S(r)(C)},[S,r]),M=Object.assign({as:x},g?{rows:c}:{},u);return oe.createElement(IQ,{textArea:g},e&&typeof e=="string"?oe.createElement(bU,null,e):e,oe.createElement(CU,ir({levaType:o,ref:y,id:_,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(i),onFocus:()=>d(),onKeyPress:A,onKeyDown:s,disabled:v},M)))}function DQ(n){let{onUpdate:e}=n,t=xn(n,LQ);const r=B.useCallback(s=>e(lQ(s)),[e]),i=B.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return oe.createElement(DC,ir({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const yy=Mt("div",{}),EE=Mt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),OQ=Mt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${EE}::after`]:{opacity:.6},[`${yy}:hover > & + ${EE}::after`]:{opacity:.6},[`${yy}:hover > & > svg`]:{opacity:1}}),TU=Mt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${yy}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),RU=Mt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${TU} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),PU=Mt(RU,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),FQ=Mt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),UQ=Mt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ME=Mt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),kQ=Mt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ME}`]:{pointerEvents:"auto"}}}}}),IU=Mt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),NQ=Mt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),zQ=Mt(qZ,{fill:"$toolTipBackground"});function OC({children:n}){const{className:e}=B.useContext(LC);return oe.createElement(AJ,{className:e},n)}const GQ=["align"];function HQ(){const{id:n,disable:e,disabled:t}=fi();return oe.createElement(oe.Fragment,null,oe.createElement(UQ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),oe.createElement("label",{htmlFor:n+"__disable"}))}function VQ(n){const{id:e,optional:t,hint:r}=fi(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return oe.createElement(oe.Fragment,null,t&&oe.createElement(HQ,null),r!==void 0?oe.createElement(KZ,null,oe.createElement(ZZ,{asChild:!0},oe.createElement(ME,ir({},i,n))),oe.createElement(QZ,{side:"top",sideOffset:2},oe.createElement(NQ,null,r,oe.createElement(zQ,null)))):oe.createElement(ME,ir({},i,s,n)))}function No(n){let{align:e}=n,t=xn(n,GQ);const{value:r,label:i,key:s,disabled:o}=fi(),{hideCopyButton:a}=MQ(),l=!a&&s!==void 0,[c,u]=B.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{Na(Hn.CLIPBOARD_ERROR,{[s]:r})}};return oe.createElement(FQ,{align:e,onPointerLeave:()=>u(!1)},oe.createElement(VQ,t),l&&!o&&oe.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),oe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):oe.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),oe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const WQ=["toggled"],$Q=Mt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function FC(n){let{toggled:e}=n,t=xn(n,WQ);return oe.createElement($Q,ir({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),oe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const jQ=["input"];function fo(n){let{input:e}=n,t=xn(n,jQ);return e?oe.createElement(PU,t):oe.createElement(RU,t)}function BU({value:n,type:e,settings:t,setValue:r}){const[i,s]=B.useState(OI(e,n,t)),o=B.useRef(n),a=B.useRef(t);a.current=t;const l=B.useCallback(u=>s(OI(e,u,a.current)),[e]),c=B.useCallback(u=>{try{r(u)}catch(f){const{type:d,previousValue:m}=f;if(d!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return B.useEffect(()=>{jm(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function N0(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=fi();return uK(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function XQ(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!1);return B.useEffect(()=>{const i=gU(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),B.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function LU(){const n=B.useRef(null),e=B.useRef({x:0,y:0}),t=B.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const JQ=["__refCount"],QS=(n,e)=>{if(!n[e])return null;const t=n[e];return xn(t,JQ)};function YQ(n){const e=k0(),[t,r]=B.useState(QS(e.getData(),n)),i=B.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=B.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=B.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=B.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=B.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return B.useEffect(()=>{r(QS(e.getData(),n));const c=e.useStore.subscribe(u=>QS(u.data,n),r,{equalityFn:D0});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const KQ=Mt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),DU=Mt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),CE=Mt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),OU=Mt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),FU=Mt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function ZQ({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=B.useRef(null),a=B.useRef(null),l=B.useRef(0),c=Xa("sizes","scrubberWidth"),u=N0(({event:d,first:m,xy:[v],movement:[_],memo:y})=>{if(m){const{width:x,left:S}=o.current.getBoundingClientRect();l.current=x-parseFloat(c),y=(d==null?void 0:d.target)===a.current?n:vy((v-S)/x,e,t)}const g=y+vy(_/l.current,0,t-e);return r(xU(g,{step:i,initialValue:s})),y}),f=gy(n,e,t);return oe.createElement(OU,ir({ref:o},u()),oe.createElement(DU,null,oe.createElement(FU,{style:{left:0,right:`${(1-f)*100}%`}})),oe.createElement(CE,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const QQ=oe.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=B.useState(!1),o=N0(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(f=>parseFloat(f)+Math.floor(u)*t*vU(c)),u=0),u));return oe.createElement(PQ,ir({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function UU({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&oe.createElement(QQ,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return oe.createElement(DQ,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function qQ(){const n=fi(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return oe.createElement(fo,{input:!0},oe.createElement(No,null,e),oe.createElement(KQ,{hasRange:l},l&&oe.createElement(ZQ,ir({value:parseFloat(t),onDrag:r},i)),oe.createElement(UU,ir({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:eq}=SU,tq=xn(SU,["sanitizeStep"]);var nq=bt({component:qQ},tq);const rq=(n,e)=>$i().schema({options:$i().passesAnyOf($i().object(),$i().array())}).test(e),iq=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},sq=(n,{values:e})=>e.indexOf(n),oq=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var aq=Object.freeze({__proto__:null,schema:rq,sanitize:iq,format:sq,normalize:oq});const lq=Mt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),bE=Mt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),cq=Mt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${bE}:focus + &`]:{$focusStyle:""},[`${bE}:hover + &`]:{$hoverStyle:""}});function uq({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=B.useRef();return e===a[n]&&(l.current=o[n]),oe.createElement(lq,null,oe.createElement(bE,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>oe.createElement("option",{key:c,value:u},c))),oe.createElement(cq,null,l.current),oe.createElement(FC,{toggled:!0}))}function fq(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(uq,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var dq=bt({component:fq},aq);const hq=n=>$i().string().test(n),pq=n=>{if(typeof n!="string")throw Error("Invalid string");return n},mq=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var gq=Object.freeze({__proto__:null,schema:hq,sanitize:pq,normalize:mq});const vq=["displayValue","onUpdate","onChange","editable"],yq=Mt("div",{whiteSpace:"pre-wrap"});function _q(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=xn(n,vq);return i?oe.createElement(DC,ir({value:e,onUpdate:t,onChange:r},s)):oe.createElement(yq,null,e)}function xq(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(_q,ir({displayValue:t,onUpdate:r,onChange:i},e)))}var Sq=bt({component:xq},gq);const wq=n=>$i().boolean().test(n),Aq=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Eq=Object.freeze({__proto__:null,schema:wq,sanitize:Aq});const Mq=Mt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Cq({value:n,onUpdate:e,id:t,disabled:r}){return oe.createElement(Mq,null,oe.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),oe.createElement("label",{htmlFor:t},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function bq(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(Cq,{value:e,onUpdate:t,id:i,disabled:r}))}var Tq=bt({component:bq},Eq);const Rq=["locked"];function Pq({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=B.useRef(n[t]);o.current=n[t];const a=B.useCallback(c=>i({[t]:mU({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=BU({type:"NUMBER",value:n[t],settings:r,setValue:a});return oe.createElement(UU,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const Iq=Mt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Bq(n){let{locked:e}=n,t=xn(n,Rq);return oe.createElement("svg",ir({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?oe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):oe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function UC({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=fi(),{lock:o,locked:a}=t;return oe.createElement(Iq,{withLock:o},o&&oe.createElement(Bq,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>oe.createElement(Pq,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const kU=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=_U(bt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Lq=["lock"],Dq=["value"];function Oq(n){const e=$i().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function Fq(n){return Array.isArray(n)?"array":"object"}function sm(n,e,t){return Fq(n)===e?n:e==="array"?Object.values(n):hQ(n,t)}const Uq=(n,e,t)=>{const r=sm(n,"object",e.keys);for(let o in r)r[o]=yU(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=sm(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=bt(bt({},o),r)}return sm(s,e.format,e.keys)},kq=(n,e)=>sm(n,"object",e.keys),Nq=n=>!!n&&("step"in n||"min"in n||"max"in n);function zq(n,e,t=[]){const{lock:r=!1}=e,i=xn(e,Lq),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=sm(n,"object",o),l=Nq(i)?o.reduce((u,f)=>Object.assign(u,{[f]:i}),{}):i,c=kU(a,l);return{value:s==="array"?n:a,settings:bt(bt({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function NU(n){return{schema:Oq(n.length),normalize:e=>{let{value:t}=e,r=xn(e,Dq);return zq(t,r,n)},format:(e,t)=>kq(e,t),sanitize:(e,t,r)=>Uq(e,t,r)}}var Gq={grad:.9,turn:360,rad:360/(2*Math.PI)},Ia=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Or=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Qs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},zU=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},$I=function(n){return{r:Qs(n.r,0,255),g:Qs(n.g,0,255),b:Qs(n.b,0,255),a:Qs(n.a)}},qS=function(n){return{r:Or(n.r),g:Or(n.g),b:Or(n.b),a:Or(n.a,3)}},Hq=/^#([0-9a-f]{3,8})$/i,Jv=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},GU=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},HU=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},jI=function(n){return{h:zU(n.h),s:Qs(n.s,0,100),l:Qs(n.l,0,100),a:Qs(n.a)}},XI=function(n){return{h:Or(n.h),s:Or(n.s),l:Or(n.l),a:Or(n.a,3)}},JI=function(n){return HU((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},om=function(n){return{h:(e=GU(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},Vq=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wq=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$q=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jq=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TE={string:[[function(n){var e=Hq.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Or(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Or(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=$q.exec(n)||jq.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:$I({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Vq.exec(n)||Wq.exec(n);if(!e)return null;var t,r,i=jI({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(Gq[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return JI(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Ia(e)&&Ia(t)&&Ia(r)?$I({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Ia(e)||!Ia(t)||!Ia(r))return null;var o=jI({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return JI(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Ia(e)||!Ia(t)||!Ia(r))return null;var o=function(a){return{h:zU(a.h),s:Qs(a.s,0,100),v:Qs(a.v,0,100),a:Qs(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return HU(o)},"hsv"]]},YI=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},VU=function(n){return typeof n=="string"?YI(n.trim(),TE.string):typeof n=="object"&&n!==null?YI(n,TE.object):[null,void 0]},Xq=function(n){return VU(n)[1]},ew=function(n,e){var t=om(n);return{h:t.h,s:Qs(t.s+100*e,0,100),l:t.l,a:t.a}},tw=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},KI=function(n,e){var t=om(n);return{h:t.h,s:t.s,l:Qs(t.l+100*e,0,100),a:t.a}},RE=function(){function n(e){this.parsed=VU(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Or(tw(this.rgba),2)},n.prototype.isDark=function(){return tw(this.rgba)<.5},n.prototype.isLight=function(){return tw(this.rgba)>=.5},n.prototype.toHex=function(){return e=qS(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Jv(Or(255*s)):"","#"+Jv(t)+Jv(r)+Jv(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return qS(this.rgba)},n.prototype.toRgbString=function(){return e=qS(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return XI(om(this.rgba))},n.prototype.toHslString=function(){return e=XI(om(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=GU(this.rgba),{h:Or(e.h),s:Or(e.s),v:Or(e.v),a:Or(e.a,3)};var e},n.prototype.invert=function(){return wi({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),wi(ew(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),wi(ew(this.rgba,-e))},n.prototype.grayscale=function(){return wi(ew(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),wi(KI(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),wi(KI(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?wi({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Or(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=om(this.rgba);return typeof e=="number"?wi({h:e,s:t.s,l:t.l,a:t.a}):Or(t.h)},n.prototype.isEqual=function(e){return this.toHex()===wi(e).toHex()},n}(),wi=function(n){return n instanceof RE?n:new RE(n)},ZI=[],Jq=function(n){n.forEach(function(e){ZI.indexOf(e)<0&&(e(RE,TE),ZI.push(e))})};function Yq(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,d="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var _=(a=u,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<f&&(f=_,d=v)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Ph(){return(Ph=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function kC(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function PE(n){var e=B.useRef(n),t=B.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var nh=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},am=function(n){return"touches"in n},IE=function(n){return n&&n.ownerDocument.defaultView||self},QI=function(n,e,t){var r=n.getBoundingClientRect(),i=am(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:nh((i.pageX-(r.left+IE(n).pageXOffset))/r.width),top:nh((i.pageY-(r.top+IE(n).pageYOffset))/r.height)}},qI=function(n){!am(n)&&n.preventDefault()},NC=oe.memo(function(n){var e=n.onMove,t=n.onKey,r=kC(n,["onMove","onKey"]),i=B.useRef(null),s=PE(e),o=PE(t),a=B.useRef(null),l=B.useRef(!1),c=B.useMemo(function(){var m=function(y){qI(y),(am(y)?y.touches.length>0:y.buttons>0)&&i.current?s(QI(i.current,y,a.current)):_(!1)},v=function(){return _(!1)};function _(y){var g=l.current,x=IE(i.current),S=y?x.addEventListener:x.removeEventListener;S(g?"touchmove":"mousemove",m),S(g?"touchend":"mouseup",v)}return[function(y){var g=y.nativeEvent,x=i.current;if(x&&(qI(g),!function(A,M){return M&&!am(A)}(g,l.current)&&x)){if(am(g)){l.current=!0;var S=g.changedTouches||[];S.length&&(a.current=S[0].identifier)}x.focus(),s(QI(x,g,a.current)),_(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},_]},[o,s]),u=c[0],f=c[1],d=c[2];return B.useEffect(function(){return d},[d]),oe.createElement("div",Ph({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),z0=function(n){return n.filter(Boolean).join(" ")},zC=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=z0(["react-colorful__pointer",n.className]);return oe.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},oe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ci=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},WU=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Ci(n.h),s:Ci(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Ci(i/2),a:Ci(r,2)}},BE=function(n){var e=WU(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},nw=function(n){var e=WU(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},$U=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:Ci(255*[r,a,o,o,l,r][c]),g:Ci(255*[l,r,r,a,o,o][c]),b:Ci(255*[o,o,l,r,r,a][c]),a:Ci(i,2)}},jU=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Ci(60*(a<0?a+6:a)),s:Ci(s?o/s*100:0),v:Ci(s/255*100),a:i}},XU=oe.memo(function(n){var e=n.hue,t=n.onChange,r=z0(["react-colorful__hue",n.className]);return oe.createElement("div",{className:r},oe.createElement(NC,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:nh(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ci(e),"aria-valuemax":"360","aria-valuemin":"0"},oe.createElement(zC,{className:"react-colorful__hue-pointer",left:e/360,color:BE({h:e,s:100,v:100,a:1})})))}),JU=oe.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:BE({h:e.h,s:100,v:100,a:1})};return oe.createElement("div",{className:"react-colorful__saturation",style:r},oe.createElement(NC,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:nh(e.s+100*i.left,0,100),v:nh(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ci(e.s)+"%, Brightness "+Ci(e.v)+"%"},oe.createElement(zC,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:BE(e)})))}),GC=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function YU(n,e,t){var r=PE(t),i=B.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=B.useRef({color:e,hsva:s});B.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),B.useEffect(function(){var c;GC(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=B.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var Kq=typeof window<"u"?B.useLayoutEffect:B.useEffect,Zq=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},eB=new Map,KU=function(n){Kq(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!eB.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,eB.set(e,t);var r=Zq();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},Qq=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=kC(n,["className","colorModel","color","onChange"]),a=B.useRef(null);KU(a);var l=YU(t,i,s),c=l[0],u=l[1],f=z0(["react-colorful",e]);return oe.createElement("div",Ph({},o,{ref:a,className:f}),oe.createElement(JU,{hsva:c,onChange:u}),oe.createElement(XU,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},qq=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+nw(Object.assign({},t,{a:0}))+", "+nw(Object.assign({},t,{a:1}))+")"},s=z0(["react-colorful__alpha",e]),o=Ci(100*t.a);return oe.createElement("div",{className:s},oe.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),oe.createElement(NC,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:nh(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},oe.createElement(zC,{className:"react-colorful__alpha-pointer",left:t.a,color:nw(t)})))},eee=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=kC(n,["className","colorModel","color","onChange"]),a=B.useRef(null);KU(a);var l=YU(t,i,s),c=l[0],u=l[1],f=z0(["react-colorful",e]);return oe.createElement("div",Ph({},o,{ref:a,className:f}),oe.createElement(JU,{hsva:c,onChange:u}),oe.createElement(XU,{hue:c.h,onChange:u}),oe.createElement(qq,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},tee={defaultColor:{r:0,g:0,b:0,a:1},toHsva:jU,fromHsva:$U,equal:GC},nee=function(n){return oe.createElement(eee,Ph({},n,{colorModel:tee}))},ree={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return jU({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=$U(n)).r,g:e.g,b:e.b};var e},equal:GC},iee=function(n){return oe.createElement(Qq,Ph({},n,{colorModel:ree}))},ZU={exports:{}},see="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oee=see,aee=oee;function QU(){}function qU(){}qU.resetWarningCache=QU;var lee=function(){function n(r,i,s,o,a,l){if(l!==aee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qU,resetWarningCache:QU};return t.PropTypes=t,t};ZU.exports=lee();var cee=ZU.exports;const Cn=xc(cee);function Ih(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Bh(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function uee(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function fee(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(uee(arguments[e]));return n}var dee=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function G0(n,e){var t=hee(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function hee(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=dee.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var pee=[".DS_Store","Thumbs.db"];function mee(n){return Ih(this,void 0,void 0,function(){return Bh(this,function(e){return _y(n)&&gee(n)?[2,xee(n.dataTransfer,n.type)]:vee(n)?[2,yee(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,_ee(n)]:[2,[]]})})}function gee(n){return _y(n.dataTransfer)}function vee(n){return _y(n)&&_y(n.target)}function _y(n){return typeof n=="object"&&n!==null}function yee(n){return LE(n.target.files).map(function(e){return G0(e)})}function _ee(n){return Ih(this,void 0,void 0,function(){var e;return Bh(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return G0(r)})]}})})}function xee(n,e){return Ih(this,void 0,void 0,function(){var t,r;return Bh(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=LE(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(See))]):[3,2];case 1:return r=i.sent(),[2,tB(ek(r))];case 2:return[2,tB(LE(n.files).map(function(s){return G0(s)}))]}})})}function tB(n){return n.filter(function(e){return pee.indexOf(e.name)===-1})}function LE(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function See(n){if(typeof n.webkitGetAsEntry!="function")return nB(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?tk(e):nB(n)}function ek(n){return n.reduce(function(e,t){return fee(e,Array.isArray(t)?ek(t):[t])},[])}function nB(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=G0(e);return Promise.resolve(t)}function wee(n){return Ih(this,void 0,void 0,function(){return Bh(this,function(e){return[2,n.isDirectory?tk(n):Aee(n)]})})}function tk(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Ih(o,void 0,void 0,function(){var l,c,u;return Bh(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return c=f.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(wee)),i.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Aee(n){return Ih(this,void 0,void 0,function(){return Bh(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=G0(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var Eee=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function rB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function iB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(t),!0).forEach(function(r){nk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nk(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sB(n,e){return Tee(n)||bee(n,e)||Cee(n,e)||Mee()}function Mee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cee(n,e){if(n){if(typeof n=="string")return oB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oB(n,e)}}function oB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function bee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Tee(n){if(Array.isArray(n))return n}var Ree="file-invalid-type",Pee="file-too-large",Iee="file-too-small",Bee="too-many-files",Lee=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Ree,message:"File type must be ".concat(t)}},aB=function(e){return{code:Pee,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},lB=function(e){return{code:Iee,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Dee={code:Bee,message:"Too many files"};function rk(n,e){var t=n.type==="application/x-moz-file"||Eee(n,e);return[t,t?null:Lee(e)]}function ik(n,e,t){if(Cp(n.size))if(Cp(e)&&Cp(t)){if(n.size>t)return[!1,aB(t)];if(n.size<e)return[!1,lB(e)]}else{if(Cp(e)&&n.size<e)return[!1,lB(e)];if(Cp(t)&&n.size>t)return[!1,aB(t)]}return[!0,null]}function Cp(n){return n!=null}function Oee(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=rk(a,t),c=sB(l,1),u=c[0],f=ik(a,r,i),d=sB(f,1),m=d[0];return u&&m})}function xy(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Yv(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function cB(n){n.preventDefault()}function Fee(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Uee(n){return n.indexOf("Edge/")!==-1}function kee(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Fee(n)||Uee(n)}function Xo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!xy(r)&&a&&a.apply(void 0,[r].concat(s)),xy(r)})}}function Nee(){return"showOpenFilePicker"in window}function zee(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return iB(iB({},e),{},nk({},t,[]))},{}):{}}]}function Gee(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Hee(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var Vee=["children"],Wee=["open"],$ee=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],jee=["refKey","onChange","onClick"];function Xee(n){return Kee(n)||Yee(n)||sk(n)||Jee()}function Jee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kee(n){if(Array.isArray(n))return DE(n)}function rw(n,e){return qee(n)||Qee(n,e)||sk(n,e)||Zee()}function Zee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sk(n,e){if(n){if(typeof n=="string")return DE(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return DE(n,e)}}function DE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Qee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function qee(n){if(Array.isArray(n))return n}function uB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(t),!0).forEach(function(r){OE(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sy(n,e){if(n==null)return{};var t=ete(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ete(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var HC=B.forwardRef(function(n,e){var t=n.children,r=Sy(n,Vee),i=ak(r),s=i.open,o=Sy(i,Wee);return B.useImperativeHandle(e,function(){return{open:s}},[s]),oe.createElement(B.Fragment,null,t(Gn(Gn({},o),{},{open:s})))});HC.displayName="Dropzone";var ok={disabled:!1,getFilesFromEvent:mee,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};HC.defaultProps=ok;HC.propTypes={children:Cn.func,accept:Cn.oneOfType([Cn.string,Cn.arrayOf(Cn.string)]),multiple:Cn.bool,preventDropOnDocument:Cn.bool,noClick:Cn.bool,noKeyboard:Cn.bool,noDrag:Cn.bool,noDragEventsBubbling:Cn.bool,minSize:Cn.number,maxSize:Cn.number,maxFiles:Cn.number,disabled:Cn.bool,getFilesFromEvent:Cn.func,onFileDialogCancel:Cn.func,onFileDialogOpen:Cn.func,useFsAccessApi:Cn.bool,onDragEnter:Cn.func,onDragLeave:Cn.func,onDragOver:Cn.func,onDrop:Cn.func,onDropAccepted:Cn.func,onDropRejected:Cn.func,validator:Cn.func};var FE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ak(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Gn(Gn({},ok),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,d=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,x=e.preventDropOnDocument,S=e.noClick,A=e.noKeyboard,M=e.noDrag,C=e.noDragEventsBubbling,R=e.validator,T=B.useMemo(function(){return typeof y=="function"?y:fB},[y]),b=B.useMemo(function(){return typeof _=="function"?_:fB},[_]),L=B.useRef(null),O=B.useRef(null),k=B.useReducer(tte,FE),z=rw(k,2),V=z[0],j=z[1],Q=V.isFocused,ne=V.isFileDialogActive,G=V.draggedFiles,J=B.useRef(typeof window<"u"&&window.isSecureContext&&g&&Nee()),Y=function(){!J.current&&ne&&setTimeout(function(){if(O.current){var U=O.current.files;U.length||(j({type:"closeDialog"}),b())}},300)};B.useEffect(function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}},[O,ne,b,J]);var X=B.useRef([]),$=function(U){L.current&&L.current.contains(U.target)||(U.preventDefault(),X.current=[])};B.useEffect(function(){return x&&(document.addEventListener("dragover",cB,!1),document.addEventListener("drop",$,!1)),function(){x&&(document.removeEventListener("dragover",cB),document.removeEventListener("drop",$))}},[L,x]);var re=B.useCallback(function(N){N.preventDefault(),N.persist(),me(N),X.current=[].concat(Xee(X.current),[N.target]),Yv(N)&&Promise.resolve(i(N)).then(function(U){xy(N)&&!C||(j({draggedFiles:U,isDragActive:!0,type:"setDraggedFiles"}),c&&c(N))})},[i,c,C]),ie=B.useCallback(function(N){N.preventDefault(),N.persist(),me(N);var U=Yv(N);if(U&&N.dataTransfer)try{N.dataTransfer.dropEffect="copy"}catch{}return U&&f&&f(N),!1},[f,C]),ae=B.useCallback(function(N){N.preventDefault(),N.persist(),me(N);var U=X.current.filter(function(Pe){return L.current&&L.current.contains(Pe)}),le=U.indexOf(N.target);le!==-1&&U.splice(le,1),X.current=U,!(U.length>0)&&(j({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Yv(N)&&u&&u(N))},[L,u,C]),ue=B.useCallback(function(N,U){var le=[],Pe=[];N.forEach(function(Te){var Re=rk(Te,t),$e=rw(Re,2),He=$e[0],be=$e[1],Je=ik(Te,o,s),Ze=rw(Je,2),je=Ze[0],ze=Ze[1],Xe=R?R(Te):null;if(He&&je&&!Xe)le.push(Te);else{var tt=[be,ze];Xe&&(tt=tt.concat(Xe)),Pe.push({file:Te,errors:tt.filter(function(ft){return ft})})}}),(!a&&le.length>1||a&&l>=1&&le.length>l)&&(le.forEach(function(Te){Pe.push({file:Te,errors:[Dee]})}),le.splice(0)),j({acceptedFiles:le,fileRejections:Pe,type:"setFiles"}),d&&d(le,Pe,U),Pe.length>0&&v&&v(Pe,U),le.length>0&&m&&m(le,U)},[j,a,t,o,s,l,d,m,v,R]),fe=B.useCallback(function(N){N.preventDefault(),N.persist(),me(N),X.current=[],Yv(N)&&Promise.resolve(i(N)).then(function(U){xy(N)&&!C||ue(U,N)}),j({type:"reset"})},[i,ue,C]),_e=B.useCallback(function(){if(J.current){j({type:"openDialog"}),T();var N={multiple:a,types:zee(t)};window.showOpenFilePicker(N).then(function(U){return i(U)}).then(function(U){ue(U,null),j({type:"closeDialog"})}).catch(function(U){Gee(U)?(b(U),j({type:"closeDialog"})):Hee(U)&&(J.current=!1,O.current&&(O.current.value=null,O.current.click()))});return}O.current&&(j({type:"openDialog"}),T(),O.current.value=null,O.current.click())},[j,T,b,g,ue,t,a]),Oe=B.useCallback(function(N){!L.current||!L.current.isEqualNode(N.target)||(N.key===" "||N.key==="Enter"||N.keyCode===32||N.keyCode===13)&&(N.preventDefault(),_e())},[L,_e]),We=B.useCallback(function(){j({type:"focus"})},[]),xe=B.useCallback(function(){j({type:"blur"})},[]),W=B.useCallback(function(){S||(kee()?setTimeout(_e,0):_e())},[S,_e]),Ae=function(U){return r?null:U},ge=function(U){return A?null:Ae(U)},ve=function(U){return M?null:Ae(U)},me=function(U){C&&U.stopPropagation()},Ge=B.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=N.refKey,le=U===void 0?"ref":U,Pe=N.role,Te=N.onKeyDown,Re=N.onFocus,$e=N.onBlur,He=N.onClick,be=N.onDragEnter,Je=N.onDragOver,Ze=N.onDragLeave,je=N.onDrop,ze=Sy(N,$ee);return Gn(Gn(OE({onKeyDown:ge(Xo(Te,Oe)),onFocus:ge(Xo(Re,We)),onBlur:ge(Xo($e,xe)),onClick:Ae(Xo(He,W)),onDragEnter:ve(Xo(be,re)),onDragOver:ve(Xo(Je,ie)),onDragLeave:ve(Xo(Ze,ae)),onDrop:ve(Xo(je,fe)),role:typeof Pe=="string"&&Pe!==""?Pe:"button"},le,L),!r&&!A?{tabIndex:0}:{}),ze)}},[L,Oe,We,xe,W,re,ie,ae,fe,A,M,r]),Se=B.useCallback(function(N){N.stopPropagation()},[]),Fe=B.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=N.refKey,le=U===void 0?"ref":U,Pe=N.onChange,Te=N.onClick,Re=Sy(N,jee),$e=OE({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Ae(Xo(Pe,fe)),onClick:Ae(Xo(Te,Se)),tabIndex:-1},le,O);return Gn(Gn({},$e),Re)}},[O,t,a,fe,r]),Ne=G.length,Ie=Ne>0&&Oee({files:G,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),st=Ne>0&&!Ie;return Gn(Gn({},V),{},{isDragAccept:Ie,isDragReject:st,isFocused:Q&&!r,getRootProps:Ge,getInputProps:Fe,rootRef:L,inputRef:O,open:Ae(_e)})}function tte(n,e){switch(e.type){case"focus":return Gn(Gn({},n),{},{isFocused:!0});case"blur":return Gn(Gn({},n),{},{isFocused:!1});case"openDialog":return Gn(Gn({},FE),{},{isFileDialogActive:!0});case"closeDialog":return Gn(Gn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Gn(Gn({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Gn(Gn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Gn({},FE);default:return n}}function fB(){}const nte=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());c=d=>{const m=o(d);if(!u(f,m)){const v=f;a(f=m,v)}},l!=null&&l.fireImmediately&&a(f,f)}return i(c)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var rte=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ite=rte;function dB(n){return ite(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var lk=function(e){var t,r;return!(dB(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,dB(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ste=lk,VC=function(e){return ste(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ote=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},ate=VC,lte=ote;function ck(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];UE(i)&&lte(i,cte,n)}return n}function cte(n,e){if(ute(e)){var t=this[e];UE(n)&&UE(t)?ck(t,n):this[e]=n}}function UE(n){return ate(n)&&!Array.isArray(n)}function ute(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var fte=ck;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var dte=function(n,e,t,r,i){if(!hte(n)||!e)return n;if(e=Kv(e),t&&(e+="."+Kv(t)),r&&(e+="."+Kv(r)),i&&(e+="."+Kv(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function hte(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Kv(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var pte=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r},mte=VC,gte=pte,vte=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");hB(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];_te(t)&&(t=xte(t)),hB(t)&&(yte(n,t),gte(n,t))}return n};function yte(n,e){for(var t in e)Ste(e,t)&&(n[t]=e[t])}function _te(n){return n&&typeof n=="string"}function xte(n){var e={};for(var t in n)e[t]=n[t];return e}function hB(n){return n&&typeof n=="object"||mte(n)}function Ste(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var wte=vte,Ate=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=wte({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,u=n.length,f=-1,d;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<u;){var v=n[f],_=n[f+1],y={val:v,idx:f,arr:l,str:n};if(o.push(y),v==="\\"){y.val=Mte(r,n,f)===!0?v+_:_,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[v]){a.push(v);var g=m(),x=f+1;if(n.indexOf(g,x+1)!==-1)for(;a.length&&x<u;){var S=n[++x];if(S==="\\"){S++;continue}if(i.indexOf(S)!==-1){x=kE(n,S,x+1);continue}if(g=m(),a.length&&n.indexOf(g,x+1)===-1)break;if(s[S]){a.push(S);continue}g===S&&a.pop()}if(d=x,d===-1){l[l.length-1]+=v;continue}v=n.slice(f,d+1),y.val=v,y.idx=f=d}if(i.indexOf(v)!==-1){if(d=kE(n,v,f+1),d===-1){l[l.length-1]+=v;continue}Ete(v,r)===!0?v=n.slice(f,d+1):v=n.slice(f+1,d),y.val=v,y.idx=f=d}if(typeof t=="function"&&(t(y,o),v=y.val,f=y.idx),y.val===c&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function kE(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?kE(n,e,i+1):i}function Ete(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Mte(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Cte=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},pB=Cte,bte=function(e){pB(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];pB(i)&&Tte(e,i)}return e};function Tte(n,e){for(var t in e)Rte(e,t)&&(n[t]=e[t])}function Rte(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Pte=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ite=Ate,Bte=bte,mB=lk,gB=Pte,Lte=function(n,e,t){if(!gB(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=Ite(e,{sep:".",brackets:!0}).filter(Dte),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){gB(o[a])||(o[a]={}),o=o[a];continue}mB(o[a])&&mB(t)?o[a]=Bte({},o[a],t):o[a]=t}return n};function Dte(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var iw=VC,vB=fte,Ote=dte,yB=Lte,Fte=function(e,t,r){if(!iw(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return vB.apply(null,arguments);if(typeof r=="string")return yB(e,t,r),e;var i=Ote(e,t);return iw(r)&&iw(i)&&(r=vB({},i,r)),yB(e,t,r),e};const Ute=xc(Fte),WC=(...n)=>n.filter(Boolean).join(".");function kte(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Nte(n,e){return Object.entries(fQ(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function zte(n,e){const t=B.useRef();return(e?jm:D0)(n,t.current)||(t.current=n),t.current}function uk(n,e){return B.useMemo(n,zte(e,!0))}function Gte(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!0);return B.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),B.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const Hte=n=>{const[e,t]=B.useState(n.getVisiblePaths());return B.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:D0});return()=>r()},[n]),e};function Vte(n,e,t){return n.useStore(i=>{const s=bt(bt({},t),i.data);return Nte(s,e)},D0)}function fk(n=3){const e=B.useRef(null),t=B.useRef(null),[r,i]=B.useState(!1),s=B.useCallback(()=>i(!0),[]),o=B.useCallback(()=>i(!1),[]);return B.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}Jq([Yq]);const Wte={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};$i.extend({color:()=>n=>wi(n).isValid()});const $te=n=>$i().color().test(n);function dk(n,{format:e,hasAlpha:t,isString:r}){const i=Wte[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?dQ(s,["a"]):s}const hk=(n,e)=>{const t=wi(n);if(!t.isValid())throw Error("Invalid color");return dk(t,e)},jte=(n,e)=>dk(wi(n),bt(bt({},e),{},{isString:!0,format:"hex"})),Xte=({value:n})=>{const e=Xq(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:hk(n,i),settings:i}};var Jte=Object.freeze({__proto__:null,schema:$te,sanitize:hk,format:jte,normalize:Xte});const Yte=Mt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Kte=Mt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Zte=Mt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function _B(n,e){return e!=="rgb"?wi(n).toRgb():n}function Qte({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=fi(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:d}=fk(),m=B.useRef(0),[v,_]=B.useState(()=>_B(n,o)),y=a?nee:iee,g=()=>{_(_B(n,o)),f(),i()},x=()=>{d(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(x,500)};return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),oe.createElement(oe.Fragment,null,oe.createElement(Yte,{ref:l,active:u,onClick:()=>g(),style:{color:e}}),u&&oe.createElement(OC,null,oe.createElement(IU,{onPointerUp:x}),oe.createElement(Zte,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:A=>A.buttons===0&&S()},oe.createElement(y,{color:v,onChange:r}))))}function qte(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,t),oe.createElement(Kte,null,oe.createElement(Qte,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),oe.createElement(DC,{value:e,onChange:r,onUpdate:i})))}var ene=bt({component:qte},Jte);function tne(){const{label:n,displayValue:e,onUpdate:t,settings:r}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(UC,{value:e,settings:r,onUpdate:t}))}var nne=bt({component:tne},NU(["x","y","z"]));const rne=Mt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),ine=Mt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function sne({value:n,settings:e,onUpdate:t}){const r=B.useRef(),i=B.useRef(0),s=B.useRef(0),o=B.useRef(1),[a,l]=B.useState(!1),[c,u]=B.useState(!1),[f,d]=LU(),m=B.useRef(null),v=B.useRef(null);B.useLayoutEffect(()=>{if(a){const{top:k,left:z,width:V,height:j}=m.current.getBoundingClientRect();v.current.style.left=z+V/2+"px",v.current.style.top=k+j/2+"px"}},[a]);const{keys:[_,y],joystick:g}=e,x=g==="invertY"?1:-1,{[_]:{step:S},[y]:{step:A}}=e,M=Xa("sizes","joystickWidth"),C=Xa("sizes","joystickHeight"),R=parseFloat(M)*.8/2,T=parseFloat(C)*.8/2,b=B.useCallback(()=>{r.current||(u(!0),i.current&&d({x:i.current*R}),s.current&&d({y:s.current*-T}),r.current=window.setInterval(()=>{t(k=>{const z=S*i.current*o.current,V=x*A*s.current*o.current;return Array.isArray(k)?{[_]:k[0]+z,[y]:k[1]+V}:{[_]:k[_]+z,[y]:k[y]+V}})},16))},[R,T,t,d,S,A,_,y,x]),L=B.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);B.useEffect(()=>{function k(z){o.current=vU(z)}return window.addEventListener("keydown",k),window.addEventListener("keyup",k),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",k),window.removeEventListener("keyup",k)}},[]);const O=N0(({first:k,active:z,delta:[V,j],movement:[Q,ne]})=>{k&&l(!0);const G=vc(Q,-R,R),J=vc(ne,-T,T);i.current=Math.abs(Q)>Math.abs(G)?Math.sign(Q-G):0,s.current=Math.abs(ne)>Math.abs(J)?Math.sign(J-ne):0;let Y=n[_],X=n[y];z?(i.current||(Y+=V*S*o.current,d({x:G})),s.current||(X-=x*j*A*o.current,d({y:J})),i.current||s.current?b():L(),t({[_]:Y,[y]:X})):(l(!1),i.current=0,s.current=0,d({x:0,y:0}),L())});return oe.createElement(rne,ir({ref:m},O()),a&&oe.createElement(OC,null,oe.createElement(ine,{ref:v,isOutOfBounds:c},oe.createElement("div",null),oe.createElement("span",{ref:f}))))}const one=Mt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ane(){const{label:n,displayValue:e,onUpdate:t,settings:r}=fi();return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(one,{withJoystick:!!r.joystick},r.joystick&&oe.createElement(sne,{value:e,settings:r,onUpdate:t}),oe.createElement(UC,{value:e,settings:r,onUpdate:t})))}const lne=["joystick"],pk=NU(["x","y"]),cne=n=>{let{joystick:e=!0}=n,t=xn(n,lne);const{value:r,settings:i}=pk.normalize(t);return{value:r,settings:bt(bt({},i),{},{joystick:e})}};var une=bt(bt({component:ane},pk),{},{normalize:cne});const fne=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},dne=(n,e)=>typeof e=="object"&&"image"in e,hne=({image:n})=>({value:n});var pne=Object.freeze({__proto__:null,sanitize:fne,schema:dne,normalize:hne});const mne=Mt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),gne=Mt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),vne=Mt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),yne=Mt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),_ne=Mt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),xne=Mt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Sne(){const{label:n,value:e,onUpdate:t,disabled:r}=fi(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=fk(),c=B.useCallback(v=>{v.length&&t(v[0])},[t]),u=B.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:d,isDragAccept:m}=ak({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(mne,null,oe.createElement(vne,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&oe.createElement(OC,null,oe.createElement(IU,{onPointerUp:l,style:{cursor:"pointer"}}),oe.createElement(yne,{ref:s,style:{backgroundImage:`url(${e})`}})),oe.createElement(gne,f({isDragAccept:m}),oe.createElement("input",d()),oe.createElement(_ne,null,m?"drop image":"click or drop")),oe.createElement(xne,{onClick:u,disabled:!e})))}var wne=bt({component:Sne},pne);const xB=$i().number(),Ane=(n,e)=>$i().array().length(2).every.number().test(n)&&$i().schema({min:xB,max:xB}).test(e),wy=n=>({min:n[0],max:n[1]}),mk=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?wy(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=bt(bt({},s),i);return[vc(Number(o),e,Math.max(e,a)),vc(Number(a),Math.min(t,o),t)]},Ene=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=kU(wy(n),{min:r,max:r}),s=[e,t],o=bt(bt({},i),{},{bounds:s});return{value:mk(wy(n),o,n),settings:o}};var Mne=Object.freeze({__proto__:null,schema:Ane,format:wy,sanitize:mk,normalize:Ene});const Cne=["value","bounds","onDrag"],bne=["bounds"],Tne=Mt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Rne(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=xn(n,Cne);const o=B.useRef(null),a=B.useRef(null),l=B.useRef(null),c=B.useRef(0),u=Xa("sizes","scrubberWidth"),f=N0(({event:v,first:_,xy:[y],movement:[g],memo:x={}})=>{if(_){const{width:A,left:M}=o.current.getBoundingClientRect();c.current=A-parseFloat(u);const C=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;x.pos=vy((y-M)/A,t,r);const R=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=R<0||R===0&&x.pos<=e.min?"min":"max",C&&(x.pos=e[x.key])}const S=x.pos+vy(g/c.current,0,r-t);return i({[x.key]:eq(S,s[x.key])}),x}),d=`calc(${gy(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-gy(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return oe.createElement(OU,ir({ref:o},f()),oe.createElement(DU,null,oe.createElement(FU,{style:{left:d,right:m}})),oe.createElement(CE,{position:"left",ref:a,style:{left:d}}),oe.createElement(CE,{position:"right",ref:l,style:{right:m}}))}function Pne(){const{label:n,displayValue:e,onUpdate:t,settings:r}=fi(),i=xn(r,bne);return oe.createElement(oe.Fragment,null,oe.createElement(fo,{input:!0},oe.createElement(No,null,n),oe.createElement(Tne,null,oe.createElement(Rne,ir({value:e},r,{onDrag:t})),oe.createElement(UC,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Ine=bt({component:Pne},Mne);const Bne=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},Lne=["type","value"],Dne=["onChange","transient","onEditStart","onEditEnd"],One=function(){const e=gC(nte(()=>({data:{}}))),t=Bne();this.storeId=uQ(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,f])=>{f.render&&a.some(d=>d.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Po&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let d=c[u];if(d){const{type:m,value:v}=f,_=xn(f,Lne);m!==d.type?Na(Hn.INPUT_TYPE_OVERRIDE,m):((d.__refCount===0||a)&&Object.assign(d,_),d.__refCount++)}else c[u]=bt(bt({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return WI(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=bt(bt({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{WI(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Na(Hn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,bt(bt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,bt(bt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return Na(Hn.EMPTY_KEY);let d=WC(a,u);if(f.type===Po.FOLDER){const m=s(f.schema,d,l);Object.assign(c,m),d in r||(r[d]=f.settings)}else if(u in l)Na(Hn.DUPLICATE_KEYS,u,d,l[u].path);else{const m=yQ(f,u,d,c);if(m){const{type:v,options:_,input:y}=m,{onChange:g,transient:x,onEditStart:S,onEditEnd:A}=_,M=xn(_,Dne);c[d]=bt(bt(bt({type:v},M),y),{},{fromPanel:!0}),l[u]={path:d,onChange:g,transient:x,onEditStart:S,onEditEnd:A}}else Na(Hn.UNKNOWN_INPUT,d,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},gk=new One,Fne={collapsed:!1};function Une(n,e){return{type:Po.FOLDER,schema:n,settings:bt(bt({},Fne),e)}}const SB=n=>"__levaInput"in n,kne=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=kte(i);(!r||s.toLowerCase().indexOf(r)>-1)&&Ute(t,o,{[s]:{__levaInput:!0,path:i}})}),t},Nne=["type","label","path","valueKey","value","settings","setValue","disabled"];function zne(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=xn(n,Nne);const{displayValue:u,onChange:f,onUpdate:d}=BU({type:e,value:s,settings:o,setValue:a}),m=ju[e].component;return m?oe.createElement(wU.Provider,{value:bt({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:f,onUpdate:d,settings:o,setValue:a,disabled:l},c)},oe.createElement(kQ,{disabled:l},oe.createElement(m,null))):(Na(Hn.NO_COMPONENT_FOR_TYPE,e,r),null)}const Gne=Mt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Hne({onClick:n,settings:e,label:t}){const r=k0();return oe.createElement(fo,null,oe.createElement(Gne,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const Vne=Mt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Wne=Mt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),$ne=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function jne(n){const{label:e,opts:t}=$ne(n),r=k0();return oe.createElement(fo,{input:!!e},e&&oe.createElement(No,null,e),oe.createElement(Vne,null,Object.entries(t).map(([i,s])=>oe.createElement(Wne,{key:i,onClick:()=>s(r.get)},i))))}const Xne=Mt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),vk=100;function Jne(n,e){n.push(e),n.length>vk&&n.shift()}const Yne=B.forwardRef(function({initialValue:n},e){const t=Xa("colors","highlight3"),r=Xa("colors","elevation2"),i=Xa("colors","highlight1"),[s,o]=B.useMemo(()=>[wi(i).alpha(.4).toRgbString(),wi(i).alpha(.1).toRgbString()],[i]),a=B.useRef([n]),l=B.useRef(n),c=B.useRef(n),u=B.useRef(),f=B.useCallback((v,_)=>{if(!v)return;const{width:y,height:g}=v,x=new Path2D,S=y/vk,A=g*.05;for(let R=0;R<a.current.length;R++){const T=gy(a.current[R],l.current,c.current),b=S*R,L=g-T*(g-A*2)-A;x.lineTo(b,L)}_.clearRect(0,0,y,g);const M=new Path2D(x);M.lineTo(S*(a.current.length+1),g),M.lineTo(0,g),M.lineTo(0,0);const C=_.createLinearGradient(0,0,0,g);C.addColorStop(0,s),C.addColorStop(1,o),_.fillStyle=C,_.fill(M),_.strokeStyle=r,_.lineJoin="round",_.lineWidth=14,_.stroke(x),_.strokeStyle=t,_.lineWidth=2,_.stroke(x)},[t,r,s,o]),[d,m]=XQ(f);return B.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),Jne(a.current,v),u.current=requestAnimationFrame(()=>f(d.current,m.current))}}),[d,m,f]),B.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),oe.createElement(Xne,{ref:d})}),wB=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Kne=B.forwardRef(function({initialValue:n},e){const[t,r]=B.useState(wB(n));return B.useImperativeHandle(e,()=>({frame:i=>r(wB(i))}),[]),oe.createElement("div",null,t)});function AB(n){return typeof n=="function"?n():n.current}function Zne({label:n,objectOrFn:e,settings:t}){const r=B.useRef(),i=B.useRef(AB(e));return B.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(AB(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),oe.createElement(fo,{input:!0},oe.createElement(No,{align:"top"},n),t.graph?oe.createElement(Yne,{ref:r,initialValue:i.current}):oe.createElement(Kne,{ref:r,initialValue:i.current}))}const Qne=["type","label","key"],qne={[Po.BUTTON]:Hne,[Po.BUTTON_GROUP]:jne,[Po.MONITOR]:Zne},ere=oe.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=YQ(n);if(!e)return null;const{type:l,label:c,key:u}=e,f=xn(e,Qne);if(l in Po){const d=qne[l];return oe.createElement(d,ir({label:c,path:n},f))}return l in ju?oe.createElement(zne,ir({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(nQ(Hn.UNSUPPORTED_INPUT,l,n),null)});function tre({toggle:n,toggled:e,name:t}){return oe.createElement(OQ,{onClick:()=>n()},oe.createElement(FC,{toggled:e}),oe.createElement("div",null,t))}const nre=({name:n,path:e,tree:t})=>{const r=k0(),i=WC(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=B.useState(!s),c=B.useRef(null),u=Xa("colors","folderWidgetColor"),f=Xa("colors","folderTextColor");return B.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),oe.createElement(yy,{ref:c},oe.createElement(tre,{name:n,toggled:a,toggle:()=>l(d=>!d)}),oe.createElement(yk,{parent:i,tree:t,toggled:a}))},yk=oe.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Gte(s),l=k0(),c=([f,d])=>{var m;return(SB(d)?(m=l.getInput(d.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(WC(r,f)).order)||0},u=Object.entries(i).sort((f,d)=>c(f)-c(d));return oe.createElement(EE,{ref:o,isRoot:n,fill:e,flat:t},oe.createElement(TU,{ref:a,isRoot:n,toggled:s},u.map(([f,d])=>SB(d)?oe.createElement(ere,{key:d.path,valueKey:d.valueKey,path:d.path}):oe.createElement(nre,{key:f,name:f,path:r,tree:d}))))}),rre=Mt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${PU}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),_k=40,Ay=Mt("i",{$flexCenter:"",width:_k,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),ire=Mt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),sre=Mt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Ay}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),ore=Mt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),are=Mt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:_k}}}}),lre=oe.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=B.useState(""),s=B.useMemo(()=>gU(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return B.useEffect(()=>{s(r)},[r,s]),oe.createElement(oe.Fragment,null,oe.createElement(ore,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),oe.createElement(Ay,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function cre({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=B.useState(!1),d=B.useRef(null);B.useEffect(()=>{var v,_;u?(v=d.current)===null||v===void 0||v.focus():(_=d.current)===null||_===void 0||_.blur()},[u]);const m=N0(({offset:[v,_],first:y,last:g})=>{e({x:v,y:_}),y&&t({x:v,y:_}),g&&r({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||_]});return B.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&f(y=>!y)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),oe.createElement(oe.Fragment,null,oe.createElement(ire,{mode:a?"drag":void 0},oe.createElement(Ay,{active:!s,onClick:()=>i()},oe.createElement(FC,{toggled:s,width:12,height:8})),oe.createElement(are,ir({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?oe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},oe.createElement("circle",{cx:"2",cy:"2",r:"2"}),oe.createElement("circle",{cx:"14",cy:"2",r:"2"}),oe.createElement("circle",{cx:"26",cy:"2",r:"2"}),oe.createElement("circle",{cx:"2",cy:"12",r:"2"}),oe.createElement("circle",{cx:"14",cy:"12",r:"2"}),oe.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&oe.createElement(Ay,{active:u,onClick:()=>f(v=>!v)},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},oe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),oe.createElement(sre,{toggled:u},oe.createElement(lre,{ref:d,setFilter:n,toggle:i})))}const ure=["store","hidden","theme","collapsed"];function fre(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=xn(n,ure);const o=uk(()=>RQ(r),[r]),[a,l]=B.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=B.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:oe.createElement(LC.Provider,{value:o},oe.createElement(dre,ir({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const dre=oe.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const d=Hte(n),[m,v]=B.useState(""),_=B.useMemo(()=>kne(d,m),[d,m]),[y,g]=LU(),x=i||d.length>0,S=typeof o=="object"&&o.title||void 0,A=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,M=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,C=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,T=typeof o=="object"&&o.onDragStart||void 0,b=typeof o=="object"&&o.onDragEnd||void 0;return oe.useEffect(()=>{g({x:C==null?void 0:C.x,y:C==null?void 0:C.y})},[C,g]),TQ(),oe.createElement(EU.Provider,{value:{hideCopyButton:a}},oe.createElement(rre,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&oe.createElement(cre,{onDrag:L=>{g(L),R==null||R(L)},onDragStart:L=>T==null?void 0:T(L),onDragEnd:L=>b==null?void 0:b(L),setFilter:v,toggle:L=>c(O=>L??!O),toggled:l,title:S,drag:A,filterEnabled:M,from:C}),x&&oe.createElement(AU.Provider,{value:n},oe.createElement(yk,{isRoot:!0,fill:t,flat:r,tree:_,toggled:l}))))}),hre=["isRoot"];let Ey=!1,xu=null;function pre(n){let{isRoot:e=!1}=n,t=xn(n,hre);return B.useEffect(()=>(Ey=!0,!e&&xu&&(xu.remove(),xu=null),()=>{e||(Ey=!1)}),[e]),oe.createElement(fre,ir({store:gk},t))}function mre(n){B.useEffect(()=>{n&&!Ey&&(xu||(xu=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(xu),xQ(oe.createElement(pre,{isRoot:!0}),xu))),Ey=!0)},[n])}function gre(n,e,t,r,i){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=r):(a=t,Array.isArray(r)?c=r:(l=r,c=i)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function EB(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=gre(n,e,t,r,i),u=typeof o=="function",f=B.useRef(!1),d=B.useRef(!0),m=uk(()=>{f.current=!0;const O=typeof o=="function"?o():o;return s?{[s]:Une(O,a)}:O},c),v=!(l!=null&&l.store);mre(v);const[_]=B.useState(()=>(l==null?void 0:l.store)||gk),[y,g]=B.useMemo(()=>_.getDataFromSchema(m),[_,m]),[x,S,A,M,C]=B.useMemo(()=>{const O=[],k=[],z={},V={},j={};return Object.values(g).forEach(({path:Q,onChange:ne,onEditStart:G,onEditEnd:J,transient:Y})=>{O.push(Q),ne?(z[Q]=ne,Y||k.push(Q)):k.push(Q),G&&(V[Q]=G),J&&(j[Q]=J)}),[O,k,z,V,j]},[g]),R=B.useMemo(()=>_.orderPaths(x),[x,_]),T=Vte(_,S,y),b=B.useCallback(O=>{const k=Object.entries(O).reduce((z,[V,j])=>Object.assign(z,{[g[V].path]:j}),{});_.set(k,!1)},[_,g]),L=B.useCallback(O=>_.get(g[O].path),[_,g]);return B.useEffect(()=>{const O=!d.current&&f.current;return _.addData(y,O),d.current=!1,f.current=!1,()=>_.disposePaths(R)},[_,R,y]),B.useEffect(()=>{const O=[];return Object.entries(A).forEach(([k,z])=>{z(_.get(k),k,bt({initial:!0,get:_.get},_.getInput(k)));const V=_.useStore.subscribe(j=>{const Q=j.data[k];return[Q.disabled?void 0:Q.value,Q]},([j,Q])=>z(j,k,bt({initial:!1,get:_.get},Q)),{equalityFn:D0});O.push(V)}),()=>O.forEach(k=>k())},[_,A]),B.useEffect(()=>{const O=[];return Object.entries(M).forEach(([k,z])=>O.push(_.subscribeToEditStart(k,z))),Object.entries(C).forEach(([k,z])=>O.push(_.subscribeToEditEnd(k,z))),()=>O.forEach(k=>k())},[M,C,_]),u?[T,b,L]:T}fl(Oo.SELECT,dq);fl(Oo.IMAGE,wne);fl(Oo.NUMBER,nq);fl(Oo.COLOR,ene);fl(Oo.STRING,Sq);fl(Oo.BOOLEAN,Tq);fl(Oo.INTERVAL,Ine);fl(Oo.VECTOR3D,nne);fl(Oo.VECTOR2D,une);const MB=n=>{let e;const t=new Set,r=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const f=e;e=c??typeof u!="object"?u:Object.assign({},e,u),t.forEach(d=>d(e,f))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>t.clear()};return e=n(r,i,a),a},vre=n=>n?MB(n):MB;var xk={exports:{}},Sk={},wk={exports:{}},Ak={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=B;function yre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _re=typeof Object.is=="function"?Object.is:yre,xre=rh.useState,Sre=rh.useEffect,wre=rh.useLayoutEffect,Are=rh.useDebugValue;function Ere(n,e){var t=e(),r=xre({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return wre(function(){i.value=t,i.getSnapshot=e,sw(i)&&s({inst:i})},[n,t,e]),Sre(function(){return sw(i)&&s({inst:i}),n(function(){sw(i)&&s({inst:i})})},[n]),Are(t),t}function sw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_re(n,t)}catch{return!0}}function Mre(n,e){return e()}var Cre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mre:Ere;Ak.useSyncExternalStore=rh.useSyncExternalStore!==void 0?rh.useSyncExternalStore:Cre;wk.exports=Ak;var bre=wk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=B,Tre=bre;function Rre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Pre=typeof Object.is=="function"?Object.is:Rre,Ire=Tre.useSyncExternalStore,Bre=I_.useRef,Lre=I_.useEffect,Dre=I_.useMemo,Ore=I_.useDebugValue;Sk.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=Bre(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Dre(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var v=o.value;if(i(v,m))return f=v}return f=m}if(v=f,Pre(u,m))return v;var _=r(m);return i!==void 0&&i(v,_)?v:(u=m,f=_)}var c=!1,u,f,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,r,i]);var a=Ire(n,s[0],s[1]);return Lre(function(){o.hasValue=!0,o.value=a},[a]),Ore(a),a};xk.exports=Sk;var Fre=xk.exports;const Ure=xc(Fre),{useSyncExternalStoreWithSelector:kre}=Ure;function Nre(n,e=n.getState,t){const r=kre(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return B.useDebugValue(r),r}const CB=n=>{const e=typeof n=="function"?vre(n):n,t=(r,i)=>Nre(e,r,i);return Object.assign(t,e),t},zre=n=>n?CB(n):CB;function Gre(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,i]of n)if(!Object.is(i,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const $C=zre((n,e)=>{function t(){var r;const{accumulated:i,startTime:s,infos:o}=e(),a=(r=e().log)==null?void 0:r.maxMemory,{totalFrames:l,log:c,gl:u,max:f}=i,d={calls:u.calls/l,triangles:u.triangles/l,points:u.points/l,lines:u.lines/l},m={gpu:c.gpu/l,cpu:c.cpu/l,mem:c.mem/l,fps:c.fps/l};return{sessionTime:(window.performance.now()-s)/1e3,infos:o,log:m,gl:d,max:f,maxMemory:a,totalFrames:l}}return{log:null,paused:!1,triggerProgramsUpdate:0,startTime:0,customData:0,fpsLimit:60,overclockingFps:!1,accumulated:{totalFrames:0,gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0},max:{gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0}}},chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos",getReport:t}}),lo=n=>$C(n,Gre);Object.assign(lo,$C);const{getState:qs,setState:cs}=$C,zs={value:0,fpsLimit:60,isOverLimit:0},bp=n=>(n==null?void 0:n.reduce((e,t)=>e+t,0))/n.length;class Hre{constructor(e={}){this.names=[""],this.finished=[],this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.logsPerSecond=10,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,e),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=zl.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let e=0;const t=r=>{++e<20?this.rafId=window.requestAnimationFrame(t):(this.detected=Math.ceil(1e3*e/(r-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=r)};this.rafId=window.requestAnimationFrame(t)}addUI(e){this.names.indexOf(e)===-1&&(this.names.push(e),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(e){const t=16.666666666666668,r=t-e.timeRemaining(),i=t*zs.fpsLimit/10/r;i<0||(zs.value=i,zs.isOverLimit<25?zs.isOverLimit++:cs({overclockingFps:!0}))}nextFrame(e){this.frameId++;const t=e||this.now();let r=t-this.paramTime,i=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else if(t>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const s=this.frameId-this.paramFrame,o=s*1e3/r,a=qs().overclockingFps?zs.value:o;if(i=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/r,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const l=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=l.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(o),this.logsAccums.fps.push(a),this.logsAccums.gpu.push(i),this.overClock&&typeof window.requestIdleCallback<"u"&&(zs.isOverLimit>0&&a>o?zs.isOverLimit--:qs().overclockingFps&&cs({overclockingFps:!1})),t>=this.paramTime+1e3/this.logsPerSecond&&(this.paramLogger({cpu:bp(this.logsAccums.cpu),gpu:bp(this.logsAccums.gpu),mem:bp(this.logsAccums.mem),fps:bp(this.logsAccums.fps),duration:Math.round(r),maxMemory:this.maxMemory,frameCount:s}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=t),this.overClock&&t-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=e,zs.fpsLimit=Math.round(bp(this.logsAccums.fpsFixed)/10)*100,cs({fpsLimit:zs.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=t)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0;else{const s=t-this.chartTime;let o=this.chartHz*s/1e3;for(;--o>0&&this.detected;){const l=(this.frameId-this.chartFrame)/s*1e3,c=qs().overclockingFps?zs.value:l;this.fpsChart[this.circularId%this.chartLen]=c;const u=1e3/this.currentMem,f=this.currentCpu,d=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/r*100))+4;d>0&&(this.gpuChart[this.circularId%this.chartLen]=d),f>0&&(this.cpuChart[this.circularId%this.chartLen]=f),u>0&&(this.memChart[this.circularId%this.chartLen]=u);for(let m=0;m<this.names.length;m++)this.chartLogger({i:m,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}}startGpu(){const e=this.gl,t=this.extension;if(!(!e||!t)&&this.isWebGL2){let r=!1,i,s;if(this.query){this.queryHasResult=!1;let o=this.query;if(r=e.getQueryParameter(o,e.QUERY_RESULT_AVAILABLE),i=e.getParameter(t.GPU_DISJOINT_EXT),r&&!i){s=e.getQueryParameter(this.query,e.QUERY_RESULT);const a=s*1e-6;(r||i)&&(e.deleteQuery(this.query),o=null),r&&a>0&&(i||this.activeAccums.forEach((l,c)=>{this.gpuAccums[c]=a}))}}(r||!this.query)&&(this.queryCreated=!0,this.query=e.createQuery(),e.beginQuery(t.TIME_ELAPSED_EXT,this.query))}}endGpu(){const e=this.extension,t=this.gl;this.isWebGL2&&this.queryCreated&&t.getQuery(e.TIME_ELAPSED_EXT,t.CURRENT_QUERY)&&t.endQuery(e.TIME_ELAPSED_EXT)}begin(e){this.startGpu(),this.updateAccums(e)}end(e){this.endGpu(),this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);t===-1&&(t=this.names.length,this.addUI(e));const r=this.now();this.activeAccums[t]=!this.activeAccums[t],this.t0=r}}const Vre=n=>{n.forEach((e,t)=>{const{meshes:r}=e;if(!r)return;let i={total:0,type:"Triangle",data:[]};Object.keys(r).forEach(s=>{const o=r[s],{geometry:a,material:l}=o;let c=a.index;const u=a.attributes.position;if(!u)return;let f=1;l.wireframe===!0&&(f=0);const d=c!==null?c.count:u.count,m=a.drawRange.start*f,v=a.drawRange.count*f,_=m,y=Math.min(d,m+v)-1;let g=1;const x=o.count||1;let S="Triangle",A=0;o.isMesh?l.wireframe===!0?(S="Line",g=g/2):(S="Triangle",g=g/3):o.isLine?(S="Line",o.isLineSegments?g=g/2:o.isLineLoop?g=g:g=g-1):o.isPoints?(S="Point",g=g):o.isSprite&&(S="Triangle",g=g/3);const M=Math.round(Math.max(0,y-_+1)*(g*x));M>A&&(A=M,i.type=S),i.total+=M,i.data.push({drawCount:M,type:S}),o.userData.drawCount={type:S,count:M}}),e.drawCounts=i})};var Ek={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||l,d),v=t?t+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],m]:l._events[v].push(m):(l._events[v]=m,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,m=f.length,v=new Array(m);d<m;d++)v[d]=f[d].fn;return v},a.prototype.listenerCount=function(c){var u=t?t+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,d,m,v){var _=t?t+c:c;if(!this._events[_])return!1;var y=this._events[_],g=arguments.length,x,S;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,d),!0;case 5:return y.fn.call(y.context,u,f,d,m),!0;case 6:return y.fn.call(y.context,u,f,d,m,v),!0}for(S=1,x=new Array(g-1);S<g;S++)x[S-1]=arguments[S];y.fn.apply(y.context,x)}else{var A=y.length,M;for(S=0;S<A;S++)switch(y[S].once&&this.removeListener(c,y[S].fn,void 0,!0),g){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,u);break;case 3:y[S].fn.call(y[S].context,u,f);break;case 4:y[S].fn.call(y[S].context,u,f,d);break;default:if(!x)for(M=1,x=new Array(g-1);M<g;M++)x[M-1]=arguments[M];y[S].fn.apply(y[S].context,x)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,d){var m=t?t+c:c;if(!this._events[m])return this;if(!u)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===u&&(!d||v.once)&&(!f||v.context===f)&&o(this,m);else{for(var _=0,y=[],g=v.length;_<g;_++)(v[_].fn!==u||d&&!v[_].once||f&&v[_].context!==f)&&y.push(v[_]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(Ek);var Wre=Ek.exports;const $re=xc(Wre),My=new $re;function jre(n,e,t){return t!=null&&t.once?My.once(n,e):My.on(n,e)}function Xre(n,e,t){var r;My.removeListener(n,e,(r=t==null?void 0:t.context)!=null?r:null,t==null?void 0:t.once)}function Jre(n,e){My.emit(n,e)}function Yre(n,e,t=[],r){const i=B.useRef(e);B.useEffect(()=>void(i.current=e),[e]),B.useEffect(()=>{const s=a=>{var l;return(l=i.current)==null?void 0:l.call(i,a)},o=jre(n,s,r);return()=>Xre(n,s,{...r,context:o})},[n,r==null?void 0:r.once,...t])}const Kre=Gt.prototype.updateMatrixWorld,Zre=Gt.prototype.updateWorldMatrix,bB=Gt.prototype.updateMatrix,TB=["calls","triangles","points","lines"],RB=["gpu","cpu","mem","fps"];let gd={value:0},gs={value:0};const Qre=n=>{let e=""+n;return e=e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),e!==null},PB=(n,e)=>{n.defines||(n.defines={}),n.defines&&!n.defines.muiPerf&&(n.defines=Object.assign(n.defines||{},{muiPerf:n.uuid}));const t=n.uuid;return e[t]||(e[t]={meshes:{},material:n},n.needsUpdate=!0),n.needsUpdate=!1,t},qre=n=>n==="muiPerf",eie=({overClock:n,logsPerSecond:e,chart:t,deepAnalyze:r,matrixUpdate:i})=>{const{gl:s,scene:o}=Ti();cs({gl:s,scene:o});const a=B.useMemo(()=>{const l=new Hre({trackGPU:!0,overClock:n,chartLen:t?t.length:120,chartHz:t?t.hz:60,logsPerSecond:e||10,gl:s.getContext(),chartLogger:y=>{cs({chart:y})},paramLogger:y=>{const g={maxMemory:y.maxMemory,gpu:y.gpu,cpu:y.cpu,mem:y.mem,fps:y.fps,totalTime:y.duration,frameCount:y.frameCount};cs({log:g});const{accumulated:x}=qs(),S=s.info.render;x.totalFrames++,x.gl.calls+=S.calls,x.gl.triangles+=S.triangles,x.gl.points+=S.points,x.gl.lines+=S.lines,x.log.gpu+=y.gpu,x.log.cpu+=y.cpu,x.log.mem+=y.mem,x.log.fps+=y.fps;for(let A=0;A<TB.length;A++){const M=TB[A],C=S[M];C>x.max.gl[M]&&(x.max.gl[M]=C)}for(let A=0;A<RB.length;A++){const M=RB[A],C=y[M];C>x.max.log[M]&&(x.max.log[M]=C)}cs({accumulated:x}),Jre("log",[g,s])}}),c=s.getContext();let u=null,f=null;const d=c.getExtension("WEBGL_debug_renderer_info"),m=c.getParameter(c.VERSION);d!=null&&(u=c.getParameter(d.UNMASKED_RENDERER_WEBGL),f=c.getParameter(d.UNMASKED_VENDOR_WEBGL)),f||(f="Unknown vendor"),u||(u=c.getParameter(c.RENDERER)),cs({startTime:window.performance.now(),infos:{version:m,renderer:u,vendor:f}});const v=new Map,_=new Map;return Object.defineProperty(Gu.prototype,"onBeforeRender",{get(){return(...y)=>{var g;l&&l.begin("profiler"),(g=v.get(this))==null||g(...y)}},set(y){v.set(this,y)},configurable:!0}),Object.defineProperty(Gu.prototype,"onAfterRender",{get(){return(...y)=>{var g;l&&l.end("profiler"),(g=_.get(this))==null||g(...y)}},set(y){_.set(this,y)},configurable:!0}),l},[]);return B.useEffect(()=>{a&&(a.overClock=n||!1,n===!1&&(cs({overclockingFps:!1}),zs.value=0,zs.isOverLimit=0),a.chartHz=(t==null?void 0:t.hz)||60,a.chartLen=(t==null?void 0:t.length)||120)},[n,a,t==null?void 0:t.length,t==null?void 0:t.hz]),B.useEffect(()=>{i&&(Gt.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&gd.value++,Kre.apply(this,arguments)},Gt.prototype.updateWorldMatrix=function(){gd.value++,Zre.apply(this,arguments)},Gt.prototype.updateMatrix=function(){gs.value++,bB.apply(this,arguments)}),s.info.autoReset=!1;let l=null,c=null;if(s.info)return l=yF(function(){qs().paused&&cs({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),a.startCpuProfiling=!0),gs.value-=1,gd.value=0,gs.value=0,s.info&&s.info.reset()}),c=$X(function(){var f,d;if(a&&!a.paused&&(a.nextFrame(window.performance.now()),n&&typeof window.requestIdleCallback<"u"&&(a.idleCbId=requestIdleCallback(a.nextFps))),r){const m={},v=new Map;o.traverse(function(y){if((y instanceof Un||y instanceof y_)&&y.material){let g=y.material.uuid;Array.isArray(y.material)&&y.material.length>1?g=PB(y.material[1],m):g=PB(y.material,m),m[g].meshes[y.uuid]=y}}),(d=(f=s==null?void 0:s.info)==null?void 0:f.programs)==null||d.forEach(_=>{const y=_.cacheKey.split(","),g=y[y.findIndex(qre)+1];if(Qre(g)&&m[g]){const{material:x,meshes:S}=m[g];v.set(g,{program:_,material:x,meshes:S,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),v.size!==qs().programs.size&&(Vre(v),cs({programs:v,triggerProgramsUpdate:qs().triggerProgramsUpdate++}))}}),()=>{a&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(a.idleCbId),window.cancelAnimationFrame(a.rafId),window.cancelAnimationFrame(a.checkQueryId)),i&&(Gt.prototype.updateMatrixWorld=bB),l(),c()}},[a,s,t,i]),B.useEffect(()=>{const l=jX(function(){return a&&(a.paused=!0,gs.value=0,gd.value=0,cs({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{l()}},[]),null},tie=br("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),ow=br("small",{position:"absolute",right:0,fontSize:"10px"}),ti=br("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),Gi=br("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),nie=br("div",{display:"flex"}),rie=br("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),iie=br("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),sie=br("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),jC=br("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),oie=br("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),aie=br("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),lie=br("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),cie=br("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),uie=br("div",{marginTop:"0"}),IB=br("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),Mk=br("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),Ck=br("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),fie=br("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),die=br("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}});function hr(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var hie=["color"],bk=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,hie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),pie=["color"],mie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,pie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gie=["color"],vie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,gie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),yie=["color"],_ie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,yie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xie=["color"],Sie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,xie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wie=["color"],Aie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,wie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Eie=["color"],Mie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Eie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Cie=["color"],bie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Cie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Tie=["color"],NE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Tie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Rie=["color"],Pie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Rie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Iie=["color"],Bie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Iie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lie=["color"],Die=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Lie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Oie=["color"],Fie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Oie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Uie=["color"],kie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Uie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Nie=["color"],zie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Nie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Gie=["color"],Hie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Gie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Vie=["color"],Wie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Vie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$ie=["color"],jie=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,$ie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Xie=["color"],Tk=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Xie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:r}))}),Jie=["color"],Rk=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Jie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:r}))}),Yie=["color"],Pk=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,i=hr(n,Yie);return B.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),B.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const H0=new Z,XC=new Z,Kie=new Z;function Zie(n,e,t){const r=H0.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function Qie(n,e){const t=H0.setFromMatrixPosition(n.matrixWorld),r=XC.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(Kie);return i.angleTo(s)>Math.PI/2}function qie(n,e,t,r){const i=H0.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function ese(n,e){if(e instanceof Cc)return e.zoom;if(e instanceof dr){const t=H0.setFromMatrixPosition(n.matrixWorld),r=XC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function tse(n,e,t){if(e instanceof dr||e instanceof Cc){const r=H0.setFromMatrixPosition(n.matrixWorld),i=XC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const zE=n=>Math.abs(n)<1e-10?0:n;function Ik(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=zE(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const nse=(n=>e=>Ik(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),rse=(n=>(e,t)=>Ik(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function ise(n){return n&&typeof n=="object"&&"current"in n}const sse=B.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:d,castShadow:m,receiveShadow:v,material:_,geometry:y,zIndexRange:g=[16777271,0],calculatePosition:x=Zie,as:S="div",wrapperClass:A,pointerEvents:M="auto",...C},R)=>{const{gl:T,camera:b,scene:L,size:O,raycaster:k,events:z,viewport:V}=Ti(),[j]=B.useState(()=>document.createElement(S)),Q=B.useRef(),ne=B.useRef(null),G=B.useRef(0),J=B.useRef([0,0]),Y=B.useRef(null),X=B.useRef(null),$=(a==null?void 0:a.current)||z.connected||T.domElement.parentNode,re=B.useRef(null),ie=B.useRef(!1),ae=B.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&ise(f[0]),[f]);B.useLayoutEffect(()=>{const We=T.domElement;f&&f==="blending"?(We.style.zIndex=`${Math.floor(g[0]/2)}`,We.style.position="absolute",We.style.pointerEvents="none"):(We.style.zIndex=null,We.style.position=null,We.style.pointerEvents=null)},[f]),B.useLayoutEffect(()=>{if(ne.current){const We=Q.current=vM(j);if(L.updateMatrixWorld(),u)j.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const xe=x(ne.current,b,O);j.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${xe[0]}px,${xe[1]}px,0);transform-origin:0 0;`}return $&&(i?$.prepend(j):$.appendChild(j)),()=>{$&&$.removeChild(j),We.unmount()}}},[$,u]),B.useLayoutEffect(()=>{A&&(j.className=A)},[A]);const ue=B.useMemo(()=>u?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...t},[t,s,o,O,u]),fe=B.useMemo(()=>({position:"absolute",pointerEvents:M}),[M]);B.useLayoutEffect(()=>{if(ie.current=!1,u){var We;(We=Q.current)==null||We.render(B.createElement("div",{ref:Y,style:ue},B.createElement("div",{ref:X,style:fe},B.createElement("div",{ref:R,className:r,style:t,children:n}))))}else{var xe;(xe=Q.current)==null||xe.render(B.createElement("div",{ref:R,style:ue,className:r,children:n}))}});const _e=B.useRef(!0);Ah(We=>{if(ne.current){b.updateMatrixWorld(),ne.current.updateWorldMatrix(!0,!1);const xe=u?J.current:x(ne.current,b,O);if(u||Math.abs(G.current-b.zoom)>e||Math.abs(J.current[0]-xe[0])>e||Math.abs(J.current[1]-xe[1])>e){const W=Qie(ne.current,b);let Ae=!1;ae&&(Array.isArray(f)?Ae=f.map(Ge=>Ge.current):f!=="blending"&&(Ae=[L]));const ge=_e.current;if(Ae){const Ge=qie(ne.current,b,k,Ae);_e.current=Ge&&!W}else _e.current=!W;ge!==_e.current&&(d?d(!_e.current):j.style.display=_e.current?"block":"none");const ve=Math.floor(g[0]/2),me=f?ae?[g[0],ve]:[ve-1,0]:g;if(j.style.zIndex=`${tse(ne.current,b,me)}`,u){const[Ge,Se]=[O.width/2,O.height/2],Fe=b.projectionMatrix.elements[5]*Se,{isOrthographicCamera:Ne,top:Ie,left:st,bottom:N,right:U}=b,le=nse(b.matrixWorldInverse),Pe=Ne?`scale(${Fe})translate(${zE(-(U+st)/2)}px,${zE((Ie+N)/2)}px)`:`translateZ(${Fe}px)`;let Te=ne.current.matrixWorld;c&&(Te=b.matrixWorldInverse.clone().transpose().copyPosition(Te).scale(ne.current.scale),Te.elements[3]=Te.elements[7]=Te.elements[11]=0,Te.elements[15]=1),j.style.width=O.width+"px",j.style.height=O.height+"px",j.style.perspective=Ne?"":`${Fe}px`,Y.current&&X.current&&(Y.current.style.transform=`${Pe}${le}translate(${Ge}px,${Se}px)`,X.current.style.transform=rse(Te,1/((l||10)/400)))}else{const Ge=l===void 0?1:ese(ne.current,b)*l;j.style.transform=`translate3d(${xe[0]}px,${xe[1]}px,0) scale(${Ge})`}J.current=xe,G.current=b.zoom}}if(!ae&&re.current&&!ie.current)if(u){if(Y.current){const xe=Y.current.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const{isOrthographicCamera:W}=b;if(W||y)C.scale&&(Array.isArray(C.scale)?C.scale instanceof Z?re.current.scale.copy(C.scale.clone().divideScalar(1)):re.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):re.current.scale.setScalar(1/C.scale));else{const Ae=(l||10)/400,ge=xe.clientWidth*Ae,ve=xe.clientHeight*Ae;re.current.scale.set(ge,ve,1)}ie.current=!0}}}else{const xe=j.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const W=1/V.factor,Ae=xe.clientWidth*W,ge=xe.clientHeight*W;re.current.scale.set(Ae,ge,1),ie.current=!0}re.current.lookAt(We.camera.position)}});const Oe=B.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return B.createElement("group",Rn({},C,{ref:ne}),f&&!ae&&B.createElement("mesh",{castShadow:m,receiveShadow:v,ref:re},y||B.createElement("planeGeometry",null),_||B.createElement("shaderMaterial",{side:Ai,vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader})))});function ose(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}let JC=W0();const Lt=n=>V0(n,JC);let YC=W0();Lt.write=n=>V0(n,YC);let B_=W0();Lt.onStart=n=>V0(n,B_);let KC=W0();Lt.onFrame=n=>V0(n,KC);let ZC=W0();Lt.onFinish=n=>V0(n,ZC);let Id=[];Lt.setTimeout=(n,e)=>{let t=Lt.now()+e,r=()=>{let s=Id.findIndex(o=>o.cancel==r);~s&&Id.splice(s,1),Hl-=~s?1:0},i={time:t,handler:n,cancel:r};return Id.splice(Bk(t),0,i),Hl+=1,Lk(),i};let Bk=n=>~(~Id.findIndex(e=>e.time>n)||~Id.length);Lt.cancel=n=>{B_.delete(n),KC.delete(n),ZC.delete(n),JC.delete(n),YC.delete(n)};Lt.sync=n=>{GE=!0,Lt.batchedUpdates(n),GE=!1};Lt.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,Lt.onStart(t)}return r.handler=n,r.cancel=()=>{B_.delete(t),e=null},r};let QC=typeof window<"u"?window.requestAnimationFrame:()=>{};Lt.use=n=>QC=n;Lt.now=typeof performance<"u"?()=>performance.now():Date.now;Lt.batchedUpdates=n=>n();Lt.catch=console.error;Lt.frameLoop="always";Lt.advance=()=>{Lt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ok()};let Gl=-1,Hl=0,GE=!1;function V0(n,e){GE?(e.delete(n),n(0)):(e.add(n),Lk())}function Lk(){Gl<0&&(Gl=0,Lt.frameLoop!=="demand"&&QC(Dk))}function ase(){Gl=-1}function Dk(){~Gl&&(QC(Dk),Lt.batchedUpdates(Ok))}function Ok(){let n=Gl;Gl=Lt.now();let e=Bk(Gl);if(e&&(Fk(Id.splice(0,e),t=>t.handler()),Hl-=e),!Hl){ase();return}B_.flush(),JC.flush(n?Math.min(64,Gl-n):16.667),KC.flush(),YC.flush(),ZC.flush()}function W0(){let n=new Set,e=n;return{add(t){Hl+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Hl-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Hl-=e.size,Fk(e,r=>r(t)&&n.add(r)),Hl+=n.size,e=n)}}}function Fk(n,e){n.forEach(t=>{try{e(t)}catch(r){Lt.catch(r)}})}function HE(){}const lse=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),rt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function La(n,e){if(rt.arr(n)){if(!rt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const pn=(n,e)=>n.forEach(e);function il(n,e,t){if(rt.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}const eo=n=>rt.und(n)?[]:rt.arr(n)?n:[n];function lm(n,e){if(n.size){const t=Array.from(n);n.clear(),pn(t,e)}}const Hp=(n,...e)=>lm(n,t=>t(...e)),qC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let eb,Uk,sc=null,kk=!1,tb=HE;const cse=n=>{n.to&&(Uk=n.to),n.now&&(Lt.now=n.now),n.colors!==void 0&&(sc=n.colors),n.skipAnimation!=null&&(kk=n.skipAnimation),n.createStringInterpolator&&(eb=n.createStringInterpolator),n.requestAnimationFrame&&Lt.use(n.requestAnimationFrame),n.batchedUpdates&&(Lt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(tb=n.willAdvance),n.frameLoop&&(Lt.frameLoop=n.frameLoop)};var ua=Object.freeze({__proto__:null,get createStringInterpolator(){return eb},get to(){return Uk},get colors(){return sc},get skipAnimation(){return kk},get willAdvance(){return tb},assign:cse});const cm=new Set;let Ys=[],aw=[],Cy=0;const L_={get idle(){return!cm.size&&!Ys.length},start(n){Cy>n.priority?(cm.add(n),Lt.onStart(use)):(Nk(n),Lt(VE))},advance:VE,sort(n){if(Cy)Lt.onFrame(()=>L_.sort(n));else{const e=Ys.indexOf(n);~e&&(Ys.splice(e,1),zk(n))}},clear(){Ys=[],cm.clear()}};function use(){cm.forEach(Nk),cm.clear(),Lt(VE)}function Nk(n){Ys.includes(n)||zk(n)}function zk(n){Ys.splice(fse(Ys,e=>e.priority>n.priority),0,n)}function VE(n){const e=aw;for(let t=0;t<Ys.length;t++){const r=Ys[t];Cy=r.priority,r.idle||(tb(r),r.advance(n),r.idle||e.push(r))}return Cy=0,aw=Ys,aw.length=0,Ys=e,Ys.length>0}function fse(n,e){const t=n.findIndex(e);return t<0?n.length:t}const dse=(n,e,t)=>Math.min(Math.max(t,n),e),hse={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Co="[-+]?\\d*\\.?\\d+",by=Co+"%";function D_(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const pse=new RegExp("rgb"+D_(Co,Co,Co)),mse=new RegExp("rgba"+D_(Co,Co,Co,Co)),gse=new RegExp("hsl"+D_(Co,by,by)),vse=new RegExp("hsla"+D_(Co,by,by,Co)),yse=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_se=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xse=/^#([0-9a-fA-F]{6})$/,Sse=/^#([0-9a-fA-F]{8})$/;function wse(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=xse.exec(n))?parseInt(e[1]+"ff",16)>>>0:sc&&sc[n]!==void 0?sc[n]:(e=pse.exec(n))?(Jf(e[1])<<24|Jf(e[2])<<16|Jf(e[3])<<8|255)>>>0:(e=mse.exec(n))?(Jf(e[1])<<24|Jf(e[2])<<16|Jf(e[3])<<8|DB(e[4]))>>>0:(e=yse.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Sse.exec(n))?parseInt(e[1],16)>>>0:(e=_se.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=gse.exec(n))?(BB(LB(e[1]),Zv(e[2]),Zv(e[3]))|255)>>>0:(e=vse.exec(n))?(BB(LB(e[1]),Zv(e[2]),Zv(e[3]))|DB(e[4]))>>>0:null}function lw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function BB(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,s=lw(i,r,n+1/3),o=lw(i,r,n),a=lw(i,r,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Jf(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function LB(n){return(parseFloat(n)%360+360)%360/360}function DB(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function Zv(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function OB(n){let e=wse(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${s})`}const Km=(n,e,t)=>{if(rt.fun(n))return n;if(rt.arr(n))return Km({range:n,output:e,extrapolate:t});if(rt.str(n.output[0]))return eb(n);const r=n,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=Ese(c,s);return Ase(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function Ase(n,e,t,r,i,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Ese(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const Mse=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const r=t*n,i=e==="end"?Math.floor(r):Math.ceil(r);return dse(0,1,i/n)},Ty=1.70158,Qv=Ty*1.525,FB=Ty+1,UB=2*Math.PI/3,kB=2*Math.PI/4.5,qv=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,Cse={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>FB*n*n*n-Ty*n*n,easeOutBack:n=>1+FB*Math.pow(n-1,3)+Ty*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((Qv+1)*2*n-Qv)/2:(Math.pow(2*n-2,2)*((Qv+1)*(n*2-2)+Qv)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*UB),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*UB)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*kB))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*kB)/2+1,easeInBounce:n=>1-qv(1-n),easeOutBounce:qv,easeInOutBounce:n=>n<.5?(1-qv(1-2*n))/2:(1+qv(2*n-1))/2,steps:Mse};function WE(){return WE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},WE.apply(this,arguments)}const ih=Symbol.for("FluidValue.get"),Xu=Symbol.for("FluidValue.observers"),Ko=n=>!!(n&&n[ih]),$s=n=>n&&n[ih]?n[ih]():n,NB=n=>n[Xu]||null;function bse(n,e){n.eventObserved?n.eventObserved(e):n(e)}function Ry(n,e){let t=n[Xu];t&&t.forEach(r=>{bse(r,e)})}class Tse{constructor(e){if(this[ih]=void 0,this[Xu]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Rse(this,e)}}const Rse=(n,e)=>Gk(n,ih,e);function $0(n,e){if(n[ih]){let t=n[Xu];t||Gk(n,Xu,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function Py(n,e){let t=n[Xu];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[Xu]=null,n.observerRemoved&&n.observerRemoved(r,e)}}const Gk=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),R1=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Pse=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,zB=new RegExp(`(${R1.source})(%|[a-z]+)`,"i"),Ise=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,O_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Hk=n=>{const[e,t]=Bse(n);if(!e||qC())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&O_.test(t))return Hk(t);if(t)return t}return n},Bse=n=>{const e=O_.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]};let cw;const Lse=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,Vk=n=>{cw||(cw=sc?new RegExp(`(${Object.keys(sc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>$s(s).replace(O_,Hk).replace(Pse,OB).replace(cw,OB)),t=e.map(s=>s.match(R1).map(Number)),i=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Km(WE({},n,{output:s})));return s=>{var o;const a=!zB.test(e[0])&&((o=e.find(c=>zB.test(c)))==null?void 0:o.replace(R1,""));let l=0;return e[0].replace(R1,()=>`${i[l++](s)}${a||""}`).replace(Ise,Lse)}},nb="react-spring: ",Wk=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${nb}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},Dse=Wk(console.warn);function Ose(){Dse(`${nb}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Fse=Wk(console.warn);function Use(){Fse(`${nb}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function F_(n){return rt.str(n)&&(n[0]=="#"||/\d/.test(n)||!qC()&&O_.test(n)||n in(sc||{}))}const rb=qC()?B.useEffect:B.useLayoutEffect,kse=()=>{const n=B.useRef(!1);return rb(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function $k(){const n=B.useState()[1],e=kse();return()=>{e.current&&n(Math.random())}}function Nse(n,e){const[t]=B.useState(()=>({inputs:e,result:n()})),r=B.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&zse(e,s.inputs)||(s={inputs:e,result:n()}):s=t,B.useEffect(()=>{r.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function zse(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const jk=n=>B.useEffect(n,Gse),Gse=[];function GB(n){const e=B.useRef();return B.useEffect(()=>{e.current=n}),e.current}const Zm=Symbol.for("Animated:node"),Hse=n=>!!n&&n[Zm]===n,Yo=n=>n&&n[Zm],ib=(n,e)=>lse(n,Zm,e),U_=n=>n&&n[Zm]&&n[Zm].getPayload();class Xk{constructor(){this.payload=void 0,ib(this,this)}getPayload(){return this.payload||[]}}class Lh extends Xk{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,rt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Lh(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return rt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,rt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class sh extends Lh{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Km({output:[e,e]})}static create(e){return new sh(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(rt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Km({output:[this.getValue(),e]})),this._value=0,super.reset()}}const Iy={dependencies:null};class sb extends Xk{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return il(this.source,(r,i)=>{Hse(r)?t[i]=r.getValue(e):Ko(r)?t[i]=$s(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&pn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return il(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Iy.dependencies&&Ko(e)&&Iy.dependencies.add(e);const t=U_(e);t&&pn(t,r=>this.add(r))}}class ob extends sb{constructor(e){super(e)}static create(e){return new ob(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(Vse)),!0)}}function Vse(n){return(F_(n)?sh:Lh).create(n)}function $E(n){const e=Yo(n);return e?e.constructor:rt.arr(n)?ob:F_(n)?sh:Lh}function By(){return By=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},By.apply(this,arguments)}const HB=(n,e)=>{const t=!rt.fun(n)||n.prototype&&n.prototype.isReactComponent;return B.forwardRef((r,i)=>{const s=B.useRef(null),o=t&&B.useCallback(v=>{s.current=jse(i,v)},[i]),[a,l]=$se(r,e),c=$k(),u=()=>{const v=s.current;if(t&&!v)return;(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&c()},f=new Wse(u,l),d=B.useRef();rb(()=>(d.current=f,pn(l,v=>$0(v,f)),()=>{d.current&&(pn(d.current.deps,v=>Py(v,d.current)),Lt.cancel(d.current.update))})),B.useEffect(u,[]),jk(()=>()=>{const v=d.current;pn(v.deps,_=>Py(_,v))});const m=e.getComponentProps(a.getValue());return B.createElement(n,By({},m,{ref:o}))})};class Wse{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Lt.write(this.update)}}function $se(n,e){const t=new Set;return Iy.dependencies=t,n.style&&(n=By({},n,{style:e.createAnimatedStyle(n.style)})),n=new sb(n),Iy.dependencies=null,[n,t]}function jse(n,e){return n&&(rt.fun(n)?n(e):n.current=e),e}const VB=Symbol.for("AnimatedComponent"),Xse=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new sb(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:r},s=o=>{const a=WB(o)||"Anonymous";return rt.str(o)?o=s[o]||(s[o]=HB(o,i)):o=o[VB]||(o[VB]=HB(o,i)),o.displayName=`Animated(${a})`,o};return il(n,(o,a)=>{rt.arr(n)&&(a=WB(o)),s[a]=s(o)}),{animated:s}},WB=n=>rt.str(n)?n:n&&rt.str(n.displayName)?n.displayName:rt.fun(n)&&n.name||null;function Fr(){return Fr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fr.apply(this,arguments)}function uu(n,...e){return rt.fun(n)?n(...e):n}const um=(n,e)=>n===!0||!!(e&&n&&(rt.fun(n)?n(e):eo(n).includes(e))),Jk=(n,e)=>rt.obj(n)?e&&n[e]:n,Yk=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,Jse=n=>n,ab=(n,e=Jse)=>{let t=Yse;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const r={};for(const i of t){const s=e(n[i],i);rt.und(s)||(r[i]=s)}return r},Yse=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Kse={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Zse(n){const e={};let t=0;if(il(n,(r,i)=>{Kse[i]||(e[i]=r,t++)}),t)return e}function Kk(n){const e=Zse(n);if(e){const t={to:e};return il(n,(r,i)=>i in e||(t[i]=r)),t}return Fr({},n)}function Qm(n){return n=$s(n),rt.arr(n)?n.map(Qm):F_(n)?ua.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function Qse(n){for(const e in n)return!0;return!1}function jE(n){return rt.fun(n)||rt.arr(n)&&rt.obj(n[0])}function qse(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function eoe(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const toe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},XE=Fr({},toe.default,{mass:1,damping:1,easing:Cse.linear,clamp:!1});class noe{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,XE)}}function roe(n,e,t){t&&(t=Fr({},t),$B(t,e),e=Fr({},t,e)),$B(n,e),Object.assign(n,e);for(const o in XE)n[o]==null&&(n[o]=XE[o]);let{mass:r,frequency:i,damping:s}=n;return rt.und(i)||(i<.01&&(i=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/i,2)*r,n.friction=4*Math.PI*s*r/i),n}function $B(n,e){if(!rt.und(e.decay))n.duration=void 0;else{const t=!rt.und(e.tension)||!rt.und(e.friction);(t||!rt.und(e.frequency)||!rt.und(e.damping)||!rt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const jB=[];let ioe=class{constructor(){this.changed=!1,this.values=jB,this.toValues=null,this.fromValues=jB,this.to=void 0,this.from=void 0,this.config=new noe,this.immediate=!1}};function Zk(n,{key:e,props:t,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=um((l=t.cancel)!=null?l:r==null?void 0:r.cancel,e);if(f)v();else{rt.und(t.pause)||(i.paused=um(t.pause,e));let _=r==null?void 0:r.pause;_!==!0&&(_=i.paused||um(_,e)),c=uu(t.delay||0,e),_?(i.resumeQueue.add(m),s.pause()):(s.resume(),m())}function d(){i.resumeQueue.add(m),i.timeouts.delete(u),u.cancel(),c=u.time-Lt.now()}function m(){c>0&&!ua.skipAnimation?(i.delayed=!0,u=Lt.setTimeout(v,c),i.pauseQueue.add(d),i.timeouts.add(u)):v()}function v(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(u),n<=(i.cancelId||0)&&(f=!0);try{s.start(Fr({},t,{callId:n,cancel:f}),o)}catch(_){a(_)}}})}const lb=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Bd(n.get()):e.every(t=>t.noop)?Qk(n.get()):Mo(n.get(),e.every(t=>t.finished)),Qk=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Mo=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Bd=n=>({value:n,cancelled:!0,finished:!1});function qk(n,e,t,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=i,t.asyncTo=n;const c=ab(e,(y,g)=>g==="onRest"?void 0:y);let u,f;const d=new Promise((y,g)=>(u=y,f=g)),m=y=>{const g=i<=(t.cancelId||0)&&Bd(r)||i!==t.asyncId&&Mo(r,!1);if(g)throw y.result=g,f(y),y},v=(y,g)=>{const x=new XB,S=new JB;return(async()=>{if(ua.skipAnimation)throw qm(t),S.result=Mo(r,!1),f(S),S;m(x);const A=rt.obj(y)?Fr({},y):Fr({},g,{to:y});A.parentId=i,il(c,(C,R)=>{rt.und(A[R])&&(A[R]=C)});const M=await r.start(A);return m(x),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),M})()};let _;if(ua.skipAnimation)return qm(t),Mo(r,!1);try{let y;rt.arr(n)?y=(async g=>{for(const x of g)await v(x)})(n):y=Promise.resolve(n(v,r.stop.bind(r))),await Promise.all([y.then(u),d]),_=Mo(r.get(),!0,!1)}catch(y){if(y instanceof XB)_=y.result;else if(y instanceof JB)_=y.result;else throw y}finally{i==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return rt.fun(o)&&Lt.batchedUpdates(()=>{o(_,r,r.item)}),_})()}function qm(n,e){lm(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class XB extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class JB extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const JE=n=>n instanceof cb;let soe=1;class cb extends Tse{constructor(...e){super(...e),this.id=soe++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Yo(this);return e&&e.getValue()}to(...e){return ua.to(this,e)}interpolate(...e){return Ose(),ua.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ry(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||L_.sort(this),Ry(this,{type:"priority",parent:this,priority:e})}}const Ju=Symbol.for("SpringPhase"),e9=1,YE=2,KE=4,uw=n=>(n[Ju]&e9)>0,Tl=n=>(n[Ju]&YE)>0,Tp=n=>(n[Ju]&KE)>0,YB=(n,e)=>e?n[Ju]|=YE|e9:n[Ju]&=~YE,KB=(n,e)=>e?n[Ju]|=KE:n[Ju]&=~KE;class ooe extends cb{constructor(e,t){if(super(),this.key=void 0,this.animation=new ioe,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!rt.und(e)||!rt.und(t)){const r=rt.obj(e)?Fr({},e):Fr({},t,{from:e});rt.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Tl(this)||this._state.asyncTo)||Tp(this)}get goal(){return $s(this.animation.to)}get velocity(){const e=Yo(this);return e instanceof Lh?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return uw(this)}get isAnimating(){return Tl(this)}get isPaused(){return Tp(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const i=this.animation;let{config:s,toValues:o}=i;const a=U_(i.to);!a&&Ko(i.to)&&(o=eo($s(i.to))),i.values.forEach((u,f)=>{if(u.done)return;const d=u.constructor==sh?1:a?a[f].lastPosition:o[f];let m=i.immediate,v=d;if(!m){if(v=u.lastPosition,s.tension<=0){u.done=!0;return}let _=u.elapsedTime+=e;const y=i.fromValues[f],g=u.v0!=null?u.v0:u.v0=rt.arr(s.velocity)?s.velocity[f]:s.velocity;let x;const S=s.precision||(y==d?.005:Math.min(1,Math.abs(d-y)*.001));if(rt.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,M=Math.exp(-(1-A)*_);v=y+g/(1-A)*(1-M),m=Math.abs(u.lastPosition-v)<=S,x=g*M}else{x=u.lastVelocity==null?g:u.lastVelocity;const A=s.restVelocity||S/10,M=s.clamp?0:s.bounce,C=!rt.und(M),R=y==d?u.v0>0:y<d;let T,b=!1;const L=1,O=Math.ceil(e/L);for(let k=0;k<O&&(T=Math.abs(x)>A,!(!T&&(m=Math.abs(d-v)<=S,m)));++k){C&&(b=v==d||v>d==R,b&&(x=-x*M,v=d));const z=-s.tension*1e-6*(v-d),V=-s.friction*.001*x,j=(z+V)/s.mass;x=x+j*L,v=v+x*L}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,_=u.elapsedTime+=e)),A=(s.progress||0)+_/this._memoizedDuration,A=A>1?1:A<0?0:A,u.durationProgress=A),v=y+s.easing(A)*(d-y),x=(v-u.lastPosition)/e,m=A==1}u.lastVelocity=x,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),m=!0)}a&&!a[f].done&&(m=!1),m?u.done=!0:t=!1,u.setValue(v,s.round)&&(r=!0)});const l=Yo(this),c=l.getValue();if(t){const u=$s(i.to);(c!==u||r)&&!s.decay?(l.setValue(u),this._onChange(u)):r&&s.decay&&this._onChange(c),this._stop()}else r&&this._onChange(c)}set(e){return Lt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Tl(this)){const{to:e,config:t}=this.animation;Lt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return rt.und(e)?(r=this.queue||[],this.queue=[]):r=[rt.obj(e)?e:Fr({},t,{to:e})],Promise.all(r.map(i=>this._update(i))).then(i=>lb(this,i))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),qm(this._state,e&&this._lastCallId),Lt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:i}=e;r=rt.obj(r)?r[t]:r,(r==null||jE(r))&&(r=void 0),i=rt.obj(i)?i[t]:i,i==null&&(i=void 0);const s={to:r,from:i};return uw(this)||(e.reverse&&([r,i]=[i,r]),i=$s(i),rt.und(i)?Yo(this)||this._set(r):this._set(i)),s}_update(e,t){let r=Fr({},e);const{key:i,defaultProps:s}=this;r.default&&Object.assign(s,ab(r,(l,c)=>/^on/.test(c)?Jk(l,i):l)),QB(this,r,"onProps"),Pp(this,"onProps",r,this);const o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return Zk(++this._lastCallId,{key:i,props:r,defaultProps:s,state:a,actions:{pause:()=>{Tp(this)||(KB(this,!0),Hp(a.pauseQueue),Pp(this,"onPause",Mo(this,Rp(this,this.animation.to)),this))},resume:()=>{Tp(this)&&(KB(this,!1),Tl(this)&&this._resume(),Hp(a.resumeQueue),Pp(this,"onResume",Mo(this,Rp(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(r.loop&&l.finished&&!(t&&l.noop)){const c=t9(r);if(c)return this._update(c,!0)}return l})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(Bd(this));const i=!rt.und(e.to),s=!rt.und(e.from);if(i||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(Bd(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:d=u}=e;s&&!i&&(!t.default||rt.und(f))&&(f=d),t.reverse&&([f,d]=[d,f]);const m=!La(d,u);m&&(l.from=d),d=$s(d);const v=!La(f,c);v&&this._focus(f);const _=jE(t.to),{config:y}=l,{decay:g,velocity:x}=y;(i||s)&&(y.velocity=0),t.config&&!_&&roe(y,uu(t.config,o),t.config!==a.config?uu(a.config,o):void 0);let S=Yo(this);if(!S||rt.und(f))return r(Mo(this,!0));const A=rt.und(t.reset)?s&&!t.default:!rt.und(d)&&um(t.reset,o),M=A?d:this.get(),C=Qm(f),R=rt.num(C)||rt.arr(C)||F_(C),T=!_&&(!R||um(a.immediate||t.immediate,o));if(v){const k=$E(f);if(k!==S.constructor)if(T)S=this._set(C);else throw Error(`Cannot animate between ${S.constructor.name} and ${k.name}, as the "to" prop suggests`)}const b=S.constructor;let L=Ko(f),O=!1;if(!L){const k=A||!uw(this)&&m;(v||k)&&(O=La(Qm(M),C),L=!O),(!La(l.immediate,T)&&!T||!La(y.decay,g)||!La(y.velocity,x))&&(L=!0)}if(O&&Tl(this)&&(l.changed&&!A?L=!0:L||this._stop(c)),!_&&((L||Ko(c))&&(l.values=S.getPayload(),l.toValues=Ko(f)?null:b==sh?[1]:eo(C)),l.immediate!=T&&(l.immediate=T,!T&&!A&&this._set(c)),L)){const{onRest:k}=l;pn(loe,V=>QB(this,t,V));const z=Mo(this,Rp(this,c));Hp(this._pendingCalls,z),this._pendingCalls.add(r),l.changed&&Lt.batchedUpdates(()=>{l.changed=!A,k==null||k(z,this),A?uu(a.onRest,z):l.onStart==null||l.onStart(z,this)})}A&&this._set(M),_?r(qk(t.to,t,this._state,this)):L?this._start():Tl(this)&&!v?this._pendingCalls.add(r):r(Qk(M))}_focus(e){const t=this.animation;e!==t.to&&(NB(this)&&this._detach(),t.to=e,NB(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ko(t)&&($0(t,this),JE(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ko(e)&&Py(e,this)}_set(e,t=!0){const r=$s(e);if(!rt.und(r)){const i=Yo(this);if(!i||!La(r,i.getValue())){const s=$E(r);!i||i.constructor!=s?ib(this,s.create(r)):i.setValue(r),i&&Lt.batchedUpdates(()=>{this._onChange(r,t)})}}return Yo(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Pp(this,"onStart",Mo(this,Rp(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),uu(this.animation.onChange,e,this)),uu(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Yo(this).reset($s(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Tl(this)||(YB(this,!0),Tp(this)||this._resume())}_resume(){ua.skipAnimation?this.finish():L_.start(this)}_stop(e,t){if(Tl(this)){YB(this,!1);const r=this.animation;pn(r.values,s=>{s.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),Ry(this,{type:"idle",parent:this});const i=t?Bd(this.get()):Mo(this.get(),Rp(this,e??r.to));Hp(this._pendingCalls,i),r.changed&&(r.changed=!1,Pp(this,"onRest",i,this))}}}function Rp(n,e){const t=Qm(e),r=Qm(n.get());return La(r,t)}function t9(n,e=n.loop,t=n.to){let r=uu(e);if(r){const i=r!==!0&&Kk(r),s=(i||n).reverse,o=!i||i.reset;return e0(Fr({},n,{loop:e,default:!1,pause:void 0,to:!s||jE(t)?t:void 0,from:o?n.from:void 0,reset:o},i))}}function e0(n){const{to:e,from:t}=n=Kk(n),r=new Set;return rt.obj(e)&&ZB(e,r),rt.obj(t)&&ZB(t,r),n.keys=r.size?Array.from(r):null,n}function aoe(n){const e=e0(n);return rt.und(e.default)&&(e.default=ab(e)),e}function ZB(n,e){il(n,(t,r)=>t!=null&&e.add(r))}const loe=["onStart","onRest","onChange","onPause","onResume"];function QB(n,e,t){n.animation[t]=e[t]!==Yk(e,t)?Jk(e[t],n.key):void 0}function Pp(n,e,...t){var r,i,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const coe=["onStart","onChange","onRest"];let uoe=1;class foe{constructor(e,t){this.id=uoe++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Fr({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];rt.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(e0(e)),this}start(e){let{queue:t}=this;return e?t=eo(e).map(e0):this.queue=[],this._flush?this._flush(this,t):(o9(this,t),ZE(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;pn(eo(t),i=>r[i].stop(!!e))}else qm(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(rt.und(e))this.start({pause:!0});else{const t=this.springs;pn(eo(e),r=>t[r].pause())}return this}resume(e){if(rt.und(e))this.start({pause:!1});else{const t=this.springs;pn(eo(e),r=>t[r].resume())}return this}each(e){il(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,lm(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!i&&this._started,a=s||o&&r.size?this.get():null;s&&t.size&&lm(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,lm(r,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Lt.onFrame(this._onFrame)}}function ZE(n,e){return Promise.all(e.map(t=>n9(n,t))).then(t=>lb(n,t))}async function n9(n,e,t){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=rt.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=rt.arr(i)||rt.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):pn(coe,_=>{const y=e[_];if(rt.fun(y)){const g=n._events[_];e[_]=({finished:x,cancelled:S})=>{const A=g.get(y);A?(x||(A.finished=!1),S&&(A.cancelled=!0)):g.set(y,{value:null,finished:x||!1,cancelled:S||!1})},c&&(c[_]=e[_])}});const f=n._state;e.pause===!f.paused?(f.paused=e.pause,Hp(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const d=(r||Object.keys(n.springs)).map(_=>n.springs[_].start(e)),m=e.cancel===!0||Yk(e,"cancel")===!0;(u||m&&f.asyncId)&&d.push(Zk(++n._lastAsyncId,{props:e,state:f,actions:{pause:HE,resume:HE,start(_,y){m?(qm(f,n._lastAsyncId),y(Bd(n))):(_.onRest=a,y(qk(u,_,f,n)))}}})),f.paused&&await new Promise(_=>{f.resumeQueue.add(_)});const v=lb(n,await Promise.all(d));if(o&&v.finished&&!(t&&v.noop)){const _=t9(e,o,i);if(_)return o9(n,[_]),n9(n,_,!0)}return l&&Lt.batchedUpdates(()=>l(v,n,n.item)),v}function qB(n,e){const t=Fr({},n.springs);return e&&pn(eo(e),r=>{rt.und(r.keys)&&(r=e0(r)),rt.obj(r.to)||(r=Fr({},r,{to:void 0})),s9(t,r,i=>i9(i))}),r9(n,t),t}function r9(n,e){il(e,(t,r)=>{n.springs[r]||(n.springs[r]=t,$0(t,n))})}function i9(n,e){const t=new ooe;return t.key=n,e&&$0(t,e),t}function s9(n,e,t){e.keys&&pn(e.keys,r=>{(n[r]||(n[r]=t(r)))._prepareNode(e)})}function o9(n,e){pn(e,t=>{s9(n.springs,t,r=>i9(r,n))})}function doe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}const hoe=["children"],k_=n=>{let{children:e}=n,t=doe(n,hoe);const r=B.useContext(Ly),i=t.pause||!!r.pause,s=t.immediate||!!r.immediate;t=Nse(()=>({pause:i,immediate:s}),[i,s]);const{Provider:o}=Ly;return B.createElement(o,{value:t},e)},Ly=poe(k_,{});k_.Provider=Ly.Provider;k_.Consumer=Ly.Consumer;function poe(n,e){return Object.assign(n,B.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const moe=()=>{const n=[],e=function(i){Use();const s=[];return pn(n,(o,a)=>{if(rt.und(i))s.push(o.start());else{const l=t(i,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(r){n.includes(r)||n.push(r)},e.delete=function(r){const i=n.indexOf(r);~i&&n.splice(i,1)},e.pause=function(){return pn(n,r=>r.pause(...arguments)),this},e.resume=function(){return pn(n,r=>r.resume(...arguments)),this},e.set=function(r){pn(n,i=>i.set(r))},e.start=function(r){const i=[];return pn(n,(s,o)=>{if(rt.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return pn(n,r=>r.stop(...arguments)),this},e.update=function(r){return pn(n,(i,s)=>i.update(this._getProps(r,i,s))),this};const t=function(i,s,o){return rt.fun(i)?i(o,s):i};return e._getProps=t,e};function goe(n,e,t){const r=rt.fun(e)&&e;r&&!t&&(t=[]);const i=B.useMemo(()=>r||arguments.length==3?moe():void 0,[]),s=B.useRef(0),o=$k(),a=B.useMemo(()=>({ctrls:[],queue:[],flush(g,x){const S=qB(g,x);return s.current>0&&!a.queue.length&&!Object.keys(S).some(M=>!g.springs[M])?ZE(g,x):new Promise(M=>{r9(g,S),a.queue.push(()=>{M(ZE(g,x))}),o()})}}),[]),l=B.useRef([...a.ctrls]),c=[],u=GB(n)||0;B.useMemo(()=>{pn(l.current.slice(n,u),g=>{qse(g,i),g.stop(!0)}),l.current.length=n,f(u,n)},[n]),B.useMemo(()=>{f(0,Math.min(u,n))},t);function f(g,x){for(let S=g;S<x;S++){const A=l.current[S]||(l.current[S]=new foe(null,a.flush)),M=r?r(S,A):e[S];M&&(c[S]=aoe(M))}}const d=l.current.map((g,x)=>qB(g,c[x])),m=B.useContext(k_),v=GB(m),_=m!==v&&Qse(m);rb(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],pn(g,x=>x())),pn(l.current,(x,S)=>{i==null||i.add(x),_&&x.start({default:m});const A=c[S];A&&(eoe(x,A.ref),x.ref?x.queue.push(A):x.start(A))})}),jk(()=>()=>{pn(a.ctrls,g=>g.stop(!0))});const y=d.map(g=>Fr({},g));return i?[y,i]:y}function voe(n,e){const t=rt.fun(n),[[r],i]=goe(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[r,i]:r}let eL;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(eL||(eL={}));class yoe extends cb{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Km(...t);const r=this._get(),i=$E(r);ib(this,i.create(r))}advance(e){const t=this._get(),r=this.get();La(t,r)||(Yo(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&tL(this._active)&&fw(this)}_get(){const e=rt.arr(this.source)?this.source.map($s):eo($s(this.source));return this.calc(...e)}_start(){this.idle&&!tL(this._active)&&(this.idle=!1,pn(U_(this),e=>{e.done=!1}),ua.skipAnimation?(Lt.batchedUpdates(()=>this.advance()),fw(this)):L_.start(this))}_attach(){let e=1;pn(eo(this.source),t=>{Ko(t)&&$0(t,this),JE(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){pn(eo(this.source),e=>{Ko(e)&&Py(e,this)}),this._active.clear(),fw(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=eo(this.source).reduce((t,r)=>Math.max(t,(JE(r)?r.priority:0)+1),0))}}function _oe(n){return n.idle!==!1}function tL(n){return!n.size||Array.from(n).every(_oe)}function fw(n){n.idle||(n.idle=!0,pn(U_(n),e=>{e.done=!0}),Ry(n,{type:"idle",parent:n}))}ua.assign({createStringInterpolator:Vk,to:(n,e)=>new yoe(n,e)});const xoe=["primitive"].concat(Object.keys(K5).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));ua.assign({createStringInterpolator:Vk,colors:hse,frameLoop:"demand"});yF(()=>{Lt.advance()});const Soe=Xse(xoe,{applyAnimatedValues:ou}),woe=Soe.animated;function Aoe({enabled:n=!0,snap:e,global:t,domElement:r,cursor:i=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const d=Ti(C=>C.events),m=Ti(C=>C.gl),v=r||d.connected||m.domElement,{size:_}=Ti(),y=B.useMemo(()=>[a[0]+c[0],a[0]+c[1]],[a[0],c[0],c[1]]),g=B.useMemo(()=>[a[1]+u[0],a[1]+u[1]],[a[1],u[0],u[1]]),x=B.useMemo(()=>[zl.clamp(a[0],...y),zl.clamp(a[1],...g),a[2]],[a[0],a[1],a[2],y,g]),[S,A]=voe(()=>({scale:1,rotation:x,config:f}));B.useEffect(()=>void A.start({scale:1,rotation:x,config:f}),[x]),B.useEffect(()=>{if(t&&i&&n)return v.style.cursor="grab",m.domElement.style.cursor="",()=>{v.style.cursor="default",m.domElement.style.cursor="default"}},[t,i,v,n]);const M=dK({onHover:({last:C})=>{i&&!t&&n&&(v.style.cursor=C?"auto":"grab")},onDrag:({down:C,delta:[R,T],memo:[b,L]=S.rotation.animation.to||x})=>{if(!n)return[T,R];i&&(v.style.cursor=C?"grabbing":"grab"),R=zl.clamp(L+R/_.width*Math.PI*o,...g),T=zl.clamp(b+T/_.height*Math.PI*o,...y);const O=e&&!C&&typeof e!="boolean"?e:f;return A.start({scale:C&&T>y[1]/2?l:1,rotation:e&&!C?x:[T,R,0],config:k=>k==="scale"?{...O,friction:O.friction*3}:O}),[T,R]}},{target:t?v:void 0});return B.createElement(woe.group,Rn({},M==null?void 0:M(),S),s)}function nL(n,e){if(e===zO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===oy||e===RM){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===oy)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Ks=Uint8Array,Vl=Uint16Array,QE=Uint32Array,a9=new Ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l9=new Ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Eoe=new Ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c9=function(n,e){for(var t=new Vl(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new QE(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},u9=c9(a9,2),f9=u9[0],Moe=u9[1];f9[28]=258,Moe[258]=28;var Coe=c9(l9,0),boe=Coe[0],qE=new Vl(32768);for(var Bn=0;Bn<32768;++Bn){var Rl=(Bn&43690)>>>1|(Bn&21845)<<1;Rl=(Rl&52428)>>>2|(Rl&13107)<<2,Rl=(Rl&61680)>>>4|(Rl&3855)<<4,qE[Bn]=((Rl&65280)>>>8|(Rl&255)<<8)>>>1}var fm=function(n,e,t){for(var r=n.length,i=0,s=new Vl(e);i<r;++i)++s[n[i]-1];var o=new Vl(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Vl(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],f=o[n[i]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)a[qE[f]>>>l]=c}else for(a=new Vl(r),i=0;i<r;++i)n[i]&&(a[i]=qE[o[n[i]-1]++]>>>15-n[i]);return a},j0=new Ks(288);for(var Bn=0;Bn<144;++Bn)j0[Bn]=8;for(var Bn=144;Bn<256;++Bn)j0[Bn]=9;for(var Bn=256;Bn<280;++Bn)j0[Bn]=7;for(var Bn=280;Bn<288;++Bn)j0[Bn]=8;var d9=new Ks(32);for(var Bn=0;Bn<32;++Bn)d9[Bn]=5;var Toe=fm(j0,9,1),Roe=fm(d9,5,1),dw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},_o=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},hw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Poe=function(n){return(n/8|0)+(n&7&&1)},Ioe=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Vl?Vl:n instanceof QE?QE:Ks)(t-e);return r.set(n.subarray(e,t)),r},Boe=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ks(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ks(r*3));var o=function(ue){var fe=e.length;if(ue>fe){var _e=new Ks(Math.max(fe*2,ue));_e.set(e),e=_e}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,d=t.m,m=t.n,v=r*8;do{if(!u){t.f=a=_o(n,l,1);var _=_o(n,l+1,3);if(l+=3,_)if(_==1)u=Toe,f=Roe,d=9,m=5;else if(_==2){var S=_o(n,l,31)+257,A=_o(n,l+10,15)+4,M=S+_o(n,l+5,31)+1;l+=14;for(var C=new Ks(M),R=new Ks(19),T=0;T<A;++T)R[Eoe[T]]=_o(n,l+T*3,7);l+=A*3;for(var b=dw(R),L=(1<<b)-1,O=fm(R,b,1),T=0;T<M;){var k=O[_o(n,l,L)];l+=k&15;var y=k>>>4;if(y<16)C[T++]=y;else{var z=0,V=0;for(y==16?(V=3+_o(n,l,3),l+=2,z=C[T-1]):y==17?(V=3+_o(n,l,7),l+=3):y==18&&(V=11+_o(n,l,127),l+=7);V--;)C[T++]=z}}var j=C.subarray(0,S),Q=C.subarray(S);d=dw(j),m=dw(Q),u=fm(j,d,1),f=fm(Q,m,1)}else throw"invalid block type";else{var y=Poe(l)+4,g=n[y-4]|n[y-3]<<8,x=y+g;if(x>r){if(s)throw"unexpected EOF";break}i&&o(c+g),e.set(n.subarray(y,x),c),t.b=c+=g,t.p=l=x*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var ne=(1<<d)-1,G=(1<<m)-1,J=l;;J=l){var z=u[hw(n,l)&ne],Y=z>>>4;if(l+=z&15,l>v){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(Y<256)e[c++]=Y;else if(Y==256){J=l,u=null;break}else{var X=Y-254;if(Y>264){var T=Y-257,$=a9[T];X=_o(n,l,(1<<$)-1)+f9[T],l+=$}var re=f[hw(n,l)&G],ie=re>>>4;if(!re)throw"invalid distance";l+=re&15;var Q=boe[ie];if(ie>3){var $=l9[ie];Q+=hw(n,l)&(1<<$)-1,l+=$}if(l>v){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var ae=c+X;c<ae;c+=4)e[c]=e[c-Q],e[c+1]=e[c+1-Q],e[c+2]=e[c+2-Q],e[c+3]=e[c+3-Q];c=ae}}t.l=u,t.p=J,t.b=c,u&&(a=1,t.m=d,t.d=f,t.n=m)}while(!a);return c==e.length?e:Ioe(e,0,c)},Loe=new Ks(0),Doe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function e1(n,e){return Boe((Doe(n),n.subarray(2,-4)),e)}var Ooe=typeof TextDecoder<"u"&&new TextDecoder,Foe=0;try{Ooe.decode(Loe,{stream:!0}),Foe=1}catch{}const Uoe=n=>n&&n.isCubeTexture;class koe extends Un{constructor(e,t){var r,i;const s=Uoe(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ph.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,_={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new _h(1,16),g=new As({uniforms:_,fragmentShader:v,vertexShader:m,side:Ai});super(y,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class ub extends Ii{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Voe(t)}),this.register(function(t){return new Zoe(t)}),this.register(function(t){return new Qoe(t)}),this.register(function(t){return new qoe(t)}),this.register(function(t){return new $oe(t)}),this.register(function(t){return new joe(t)}),this.register(function(t){return new Xoe(t)}),this.register(function(t){return new Joe(t)}),this.register(function(t){return new Hoe(t)}),this.register(function(t){return new Yoe(t)}),this.register(function(t){return new Woe(t)}),this.register(function(t){return new Koe(t)}),this.register(function(t){return new zoe(t)}),this.register(function(t){return new eae(t)}),this.register(function(t){return new tae(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=sa.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Es(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(sa.decodeText(new Uint8Array(e.slice(0,4)))===h9){try{o[en.KHR_BINARY_GLTF]=new nae(e)}catch(u){i&&i(u);return}s=JSON.parse(o[en.KHR_BINARY_GLTF].content)}else s=JSON.parse(sa.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new mae(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case en.KHR_MATERIALS_UNLIT:o[u]=new Goe;break;case en.KHR_DRACO_MESH_COMPRESSION:o[u]=new rae(s,this.dracoLoader);break;case en.KHR_TEXTURE_TRANSFORM:o[u]=new iae;break;case en.KHR_MESH_QUANTIZATION:o[u]=new sae;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Noe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const en={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zoe{constructor(e){this.parser=e,this.name=en.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new it(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new lC(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new aC(u),c.distance=f;break;case"spot":c=new oC(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ol(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class Goe{constructor(){this.name=en.KHR_MATERIALS_UNLIT}getMaterialType(){return Wi}extendParams(e,t,r){const i=[];e.color=new it(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class Hoe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Voe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ve(a,a)}return Promise.all(s)}}class Woe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class $oe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new it(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class joe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Xoe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new it(a[0],a[1],a[2]),Promise.all(s)}}class Joe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Yoe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new it(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class Koe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ha}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Zoe{constructor(e){this.parser=e,this.name=en.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Qoe{constructor(e){this.parser=e,this.name=en.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class qoe{constructor(e){this.parser=e,this.name=en.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class eae{constructor(e){this.name=en.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,d,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,d,i.mode,i.filter),m})})}else return null}}class tae{constructor(e){this.name=en.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Hs.TRIANGLES&&c.mode!==Hs.TRIANGLE_STRIP&&c.mode!==Hs.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],d=c[0].count,m=[];for(const v of f){const _=new Pt,y=new Z,g=new oi,x=new Z(1,1,1),S=new WM(v.geometry,v.material,d);for(let A=0;A<d;A++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,A),l.SCALE&&x.fromBufferAttribute(l.SCALE,A),S.setMatrixAt(A,_.compose(y,g,x));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&v.geometry.setAttribute(A,l[A]);Gt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const h9="glTF",Ip=12,rL={JSON:1313821514,BIN:5130562};class nae{constructor(e){this.name=en.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ip);if(this.header={magic:sa.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==h9)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ip,i=new DataView(e,Ip);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===rL.JSON){const l=new Uint8Array(e,Ip+s,o);this.content=sa.decodeText(l)}else if(a===rL.BIN){const l=Ip+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rae{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=en.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=e2[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=e2[u]||u.toLowerCase();if(o[u]!==void 0){const d=r.accessors[e.attributes[u]],m=Ld[d.componentType];c[f]=m.name,l[f]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){i.decodeDracoFile(u,function(d){for(const m in d.attributes){const v=d.attributes[m],_=l[m];_!==void 0&&(v.normalized=_)}f(d)},a,c)})})}}class iae{constructor(){this.name=en.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class sae{constructor(){this.name=en.KHR_MESH_QUANTIZATION}}class p9 extends wh{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,f=(r-t)/u,d=f*f,m=d*f,v=e*c,_=v-c,y=-2*m+3*d,g=m-d,x=1-y,S=g-d+f;for(let A=0;A!==a;A++){const M=o[_+A+a],C=o[_+A+l]*u,R=o[v+A+a],T=o[v+A]*u;s[A]=x*M+S*C+y*R+g*T}return s}}const oae=new oi;class aae extends p9{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return oae.fromArray(s).normalize().toArray(s),s}}const Hs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ld={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},iL={9728:er,9729:mn,9984:Om,9985:a_,9986:Cd,9987:aa},sL={33071:Vr,33648:$d,10497:fc},pw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},e2={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ph.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},lae={CUBICSPLINE:void 0,LINEAR:zu,STEP:jd},mw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cae(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new B0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Lo})),n.DefaultMaterial}function qc(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ol(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function uae(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(d)}if(i){const d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(d)}if(s){const d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],d=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function fae(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dae(n){let e;const t=n.extensions&&n.extensions[en.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+gw(t.attributes):e=n.indices+":"+gw(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+gw(n.targets[r]);return e}function gw(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function t2(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function hae(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const pae=new Pt;class mae{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Noe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new N5(this.options.manager):this.textureLoader=new $5(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Es(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};qc(s,a,i),Ol(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[en.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(sa.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=pw[i.type],a=Ld[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new dn(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=pw[i.type],c=Ld[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,d=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let _,y;if(m&&m!==f){const g=Math.floor(d/m),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let S=t.cache.get(x);S||(_=new c(a,g*m,i.count*m/u),S=new _0(_,m/u),t.cache.add(x,S)),y=new dc(S,l,d%m/u,v)}else a===null?_=new c(i.count*l):_=new c(a,d,i.count*l),y=new dn(_,l,v);if(i.sparse!==void 0){const g=pw.SCALAR,x=Ld[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,M=new x(o[1],S,i.sparse.count*g),C=new c(o[2],A,i.sparse.count*l);a!==null&&(y=new dn(y.array.slice(),y.itemSize,y.normalized));for(let R=0,T=M.length;R<T;R++){const b=M[R];if(y.setX(b,C[R*l]),l>=2&&y.setY(b,C[R*l+1]),l>=3&&y.setZ(b,C[R*l+2]),l>=4&&y.setW(b,C[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return u.magFilter=iL[d.magFilter]||mn,u.minFilter=iL[d.minFilter]||aa,u.wrapS=sL[d.wrapS]||fc,u.wrapT=sL[d.wrapT]||fc,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const d=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(d,m){let v=d;t.isImageBitmapLoader===!0&&(v=function(_){const y=new Tn(_);y.needsUpdate=!0,d(y)}),t.load(sa.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||hae(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[en.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[en.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[en.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new v_,Sr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new ui,Sr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return B0}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[en.KHR_MATERIALS_UNLIT]){const f=i[en.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new it(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ai);const u=s.alphaMode||mw.OPAQUE;if(u===mw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===mw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Wi&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ve(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==Wi&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Wi&&(a.emissive=new it().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Wi&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Ol(f,s),t.associations.set(f,{materials:e}),s.extensions&&qc(i,f,s),f})}createUniqueName(e){const t=nn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[en.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return oL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=dae(c),f=i[u];if(f)o.push(f.promise);else{let d;c.extensions&&c.extensions[en.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=oL(new Ft,c,t),i[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?cae(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,v=u.length;m<v;m++){const _=u[m],y=o[m];let g;const x=c[m];if(y.mode===Hs.TRIANGLES||y.mode===Hs.TRIANGLE_STRIP||y.mode===Hs.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new VM(_,x):new Un(_,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===Hs.TRIANGLE_STRIP?g.geometry=nL(g.geometry,RM):y.mode===Hs.TRIANGLE_FAN&&(g.geometry=nL(g.geometry,oy));else if(y.mode===Hs.LINES)g=new Fo(_,x);else if(y.mode===Hs.LINE_STRIP)g=new qa(_,x);else if(y.mode===Hs.LINE_LOOP)g=new $M(_,x);else if(y.mode===Hs.POINTS)g=new y_(_,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&fae(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Ol(g,s),y.extensions&&qc(i,g,y),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&qc(i,f[0],s),f[0];const d=new Va;s.extensions&&qc(i,d,s),t.associations.set(d,{meshes:e});for(let m=0,v=f.length;m<v;m++)d.add(f[m]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new dr(zl.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Cc(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ol(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const d=new Pt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new x0(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,f=r.channels.length;u<f;u++){const d=r.channels[u],m=r.samplers[d.sampler],v=d.target,_=v.node,y=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",_)),o.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const f=u[0],d=u[1],m=u[2],v=u[3],_=u[4],y=[];for(let g=0,x=f.length;g<x;g++){const S=f[g],A=d[g],M=m[g],C=v[g],R=_[g];if(S===void 0)continue;S.updateMatrix();let T;switch(Pl[R.path]){case Pl.weights:T=Yd;break;case Pl.rotation:T=hc;break;case Pl.position:case Pl.scale:default:T=Kd;break}const b=S.name?S.name:S.uuid,L=C.interpolation!==void 0?lae[C.interpolation]:zu,O=[];Pl[R.path]===Pl.weights?S.traverse(function(z){z.morphTargetInfluences&&O.push(z.name?z.name:z.uuid)}):O.push(b);let k=M.array;if(M.normalized){const z=t2(k.constructor),V=new Float32Array(k.length);for(let j=0,Q=k.length;j<Q;j++)V[j]=k[j]*z;k=V}for(let z=0,V=O.length;z<V;z++){const j=new T(O[z]+"."+Pl[R.path],A.array,k,L);C.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(ne){const G=this instanceof hc?aae:p9;return new G(this.times,this.values,this.getValueSize()/3,ne)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(j)}}return new Zd(i,void 0,y)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],d=c[2];d!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(d,pae)});for(let m=0,v=f.length;m<v;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new g_:c.length>1?u=new Va:c.length===1?u=c[0]:u=new Gt,u!==c[0])for(let f=0,d=c.length;f<d;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Ol(u,s),s.extensions&&qc(r,u,s),s.matrix!==void 0){const f=new Pt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Va;r.name&&(s.name=i.createUniqueName(r.name)),Ol(s,r),r.extensions&&qc(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[d,m]of i.associations)(d instanceof Sr||d instanceof Tn)&&f.set(d,m);return u.traverse(d=>{const m=i.associations.get(d);m!=null&&f.set(d,m)}),f};return i.associations=c(s),s})}}function gae(n,e,t){const r=e.attributes,i=new uo;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new Z(l[0],l[1],l[2]),new Z(c[0],c[1],c[2])),a.normalized){const u=t2(Ld[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new Z,l=new Z;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const d=t.json.accessors[f.POSITION],m=d.min,v=d.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),d.normalized){const _=t2(Ld[d.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Ts;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function oL(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=e2[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Ol(n,e),gae(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?uae(n,e.targets,t):n})}const vae={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},yae={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class _ae extends iC{constructor(e){super(e),this.type=Mi}parse(e){const a=function(S,A){switch(S){case 1:console.error("THREE.RGBELoader Read Error: "+(A||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(A||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(A||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(A||""))}return-1},f=`
`,d=function(S,A,M){A=A||1024;let R=S.pos,T=-1,b=0,L="",O=String.fromCharCode.apply(null,new Uint16Array(S.subarray(R,R+128)));for(;0>(T=O.indexOf(f))&&b<A&&R<S.byteLength;)L+=O,b+=O.length,R+=128,O+=String.fromCharCode.apply(null,new Uint16Array(S.subarray(R,R+128)));return-1<T?(M!==!1&&(S.pos+=b+T+1),L+O.slice(0,T)):!1},m=function(S){const A=/^#\?(\S+)/,M=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,T=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,b={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let L,O;if(S.pos>=S.byteLength||!(L=d(S)))return a(1,"no header found");if(!(O=L.match(A)))return a(3,"bad initial token");for(b.valid|=1,b.programtype=O[1],b.string+=L+`
`;L=d(S),L!==!1;){if(b.string+=L+`
`,L.charAt(0)==="#"){b.comments+=L+`
`;continue}if((O=L.match(M))&&(b.gamma=parseFloat(O[1])),(O=L.match(C))&&(b.exposure=parseFloat(O[1])),(O=L.match(R))&&(b.valid|=2,b.format=O[1]),(O=L.match(T))&&(b.valid|=4,b.height=parseInt(O[1],10),b.width=parseInt(O[2],10)),b.valid&2&&b.valid&4)break}return b.valid&2?b.valid&4?b:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(S,A,M){const C=A;if(C<8||C>32767||S[0]!==2||S[1]!==2||S[2]&128)return new Uint8Array(S);if(C!==(S[2]<<8|S[3]))return a(3,"wrong scanline width");const R=new Uint8Array(4*A*M);if(!R.length)return a(4,"unable to allocate buffer space");let T=0,b=0;const L=4*C,O=new Uint8Array(4),k=new Uint8Array(L);let z=M;for(;z>0&&b<S.byteLength;){if(b+4>S.byteLength)return a(1);if(O[0]=S[b++],O[1]=S[b++],O[2]=S[b++],O[3]=S[b++],O[0]!=2||O[1]!=2||(O[2]<<8|O[3])!=C)return a(3,"bad rgbe scanline format");let V=0,j;for(;V<L&&b<S.byteLength;){j=S[b++];const ne=j>128;if(ne&&(j-=128),j===0||V+j>L)return a(3,"bad scanline data");if(ne){const G=S[b++];for(let J=0;J<j;J++)k[V++]=G}else k.set(S.subarray(b,b+j),V),V+=j,b+=j}const Q=C;for(let ne=0;ne<Q;ne++){let G=0;R[T]=k[ne+G],G+=C,R[T+1]=k[ne+G],G+=C,R[T+2]=k[ne+G],G+=C,R[T+3]=k[ne+G],T+=4}z--}return R},_=function(S,A,M,C){const R=S[A+3],T=Math.pow(2,R-128)/255;M[C+0]=S[A+0]*T,M[C+1]=S[A+1]*T,M[C+2]=S[A+2]*T,M[C+3]=1},y=function(S,A,M,C){const R=S[A+3],T=Math.pow(2,R-128)/255;M[C+0]=vu.toHalfFloat(Math.min(S[A+0]*T,65504)),M[C+1]=vu.toHalfFloat(Math.min(S[A+1]*T,65504)),M[C+2]=vu.toHalfFloat(Math.min(S[A+2]*T,65504)),M[C+3]=vu.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const x=m(g);if(x!==-1){const S=x.width,A=x.height,M=v(g.subarray(g.pos),S,A);if(M!==-1){let C,R,T;switch(this.type){case ii:T=M.length/4;const b=new Float32Array(T*4);for(let O=0;O<T;O++)_(M,O*4,b,O*4);C=b,R=ii;break;case Mi:T=M.length/4;const L=new Uint16Array(T*4);for(let O=0;O<T;O++)y(M,O*4,L,O*4);C=L,R=Mi;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:S,height:A,data:C,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case ii:case Mi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const Bp="colorSpace"in new Tn;class xae extends iC{constructor(e){super(e),this.type=Mi}parse(e){const b=Math.pow(2.7182818,2.2);function L(F,I){for(var H=0,q=0;q<65536;++q)(q==0||F[q>>3]&1<<(q&7))&&(I[H++]=q);for(var K=H-1;H<65536;)I[H++]=0;return K}function O(F){for(var I=0;I<16384;I++)F[I]={},F[I].len=0,F[I].lit=0,F[I].p=null}const k={l:0,c:0,lc:0};function z(F,I,H,q,K){for(;H<F;)I=I<<8|ze(q,K),H+=8;H-=F,k.l=I>>H&(1<<F)-1,k.c=I,k.lc=H}const V=new Array(59);function j(F){for(var I=0;I<=58;++I)V[I]=0;for(var I=0;I<65537;++I)V[F[I]]+=1;for(var H=0,I=58;I>0;--I){var q=H+V[I]>>1;V[I]=H,H=q}for(var I=0;I<65537;++I){var K=F[I];K>0&&(F[I]=K|V[K]++<<6)}}function Q(F,I,H,q,K,te,Ee){for(var Me=H,Le=0,De=0;K<=te;K++){if(Me.value-H.value>q)return!1;z(6,Le,De,F,Me);var ke=k.l;if(Le=k.c,De=k.lc,Ee[K]=ke,ke==63){if(Me.value-H.value>q)throw"Something wrong with hufUnpackEncTable";z(8,Le,De,F,Me);var he=k.l+6;if(Le=k.c,De=k.lc,K+he>te+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)Ee[K++]=0;K--}else if(ke>=59){var he=ke-59+2;if(K+he>te+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)Ee[K++]=0;K--}}j(Ee)}function ne(F){return F&63}function G(F){return F>>6}function J(F,I,H,q){for(;I<=H;I++){var K=G(F[I]),te=ne(F[I]);if(K>>te)throw"Invalid table entry";if(te>14){var Ee=q[K>>te-14];if(Ee.len)throw"Invalid table entry";if(Ee.lit++,Ee.p){var Me=Ee.p;Ee.p=new Array(Ee.lit);for(var Le=0;Le<Ee.lit-1;++Le)Ee.p[Le]=Me[Le]}else Ee.p=new Array(1);Ee.p[Ee.lit-1]=I}else if(te)for(var De=0,Le=1<<14-te;Le>0;Le--){var Ee=q[(K<<14-te)+De];if(Ee.len||Ee.p)throw"Invalid table entry";Ee.len=te,Ee.lit=I,De++}}return!0}const Y={c:0,lc:0};function X(F,I,H,q){F=F<<8|ze(H,q),I+=8,Y.c=F,Y.lc=I}const $={c:0,lc:0};function re(F,I,H,q,K,te,Ee,Me,Le,De){if(F==I){q<8&&(X(H,q,K,Ee),H=Y.c,q=Y.lc),q-=8;var ke=H>>q,ke=new Uint8Array([ke])[0];if(Le.value+ke>De)return!1;for(var he=Me[Le.value-1];ke-- >0;)Me[Le.value++]=he}else if(Le.value<De)Me[Le.value++]=F;else return!1;$.c=H,$.lc=q}function ie(F){return F&65535}function ae(F){var I=ie(F);return I>32767?I-65536:I}const ue={a:0,b:0};function fe(F,I){var H=ae(F),q=ae(I),K=q,te=H+(K&1)+(K>>1),Ee=te,Me=te-K;ue.a=Ee,ue.b=Me}function _e(F,I){var H=ie(F),q=ie(I),K=H-(q>>1)&65535,te=q+K-32768&65535;ue.a=te,ue.b=K}function Oe(F,I,H,q,K,te,Ee){for(var Me=Ee<16384,Le=H>K?K:H,De=1,ke;De<=Le;)De<<=1;for(De>>=1,ke=De,De>>=1;De>=1;){for(var he=0,at=he+te*(K-ke),Qe=te*De,et=te*ke,vt=q*De,wt=q*ke,_t,lt,At,mt;he<=at;he+=et){for(var Tt=he,on=he+q*(H-ke);Tt<=on;Tt+=wt){var Ct=Tt+vt,an=Tt+Qe,Xt=an+vt;Me?(fe(F[Tt+I],F[an+I]),_t=ue.a,At=ue.b,fe(F[Ct+I],F[Xt+I]),lt=ue.a,mt=ue.b,fe(_t,lt),F[Tt+I]=ue.a,F[Ct+I]=ue.b,fe(At,mt),F[an+I]=ue.a,F[Xt+I]=ue.b):(_e(F[Tt+I],F[an+I]),_t=ue.a,At=ue.b,_e(F[Ct+I],F[Xt+I]),lt=ue.a,mt=ue.b,_e(_t,lt),F[Tt+I]=ue.a,F[Ct+I]=ue.b,_e(At,mt),F[an+I]=ue.a,F[Xt+I]=ue.b)}if(H&De){var an=Tt+Qe;Me?fe(F[Tt+I],F[an+I]):_e(F[Tt+I],F[an+I]),_t=ue.a,F[an+I]=ue.b,F[Tt+I]=_t}}if(K&De)for(var Tt=he,on=he+q*(H-ke);Tt<=on;Tt+=wt){var Ct=Tt+vt;Me?fe(F[Tt+I],F[Ct+I]):_e(F[Tt+I],F[Ct+I]),_t=ue.a,F[Ct+I]=ue.b,F[Tt+I]=_t}ke=De,De>>=1}return he}function We(F,I,H,q,K,te,Ee,Me,Le,De){for(var ke=0,he=0,at=Me,Qe=Math.trunc(K.value+(te+7)/8);K.value<Qe;)for(X(ke,he,H,K),ke=Y.c,he=Y.lc;he>=14;){var et=ke>>he-14&16383,vt=I[et];if(vt.len)he-=vt.len,re(vt.lit,Ee,ke,he,H,q,K,Le,De,at),ke=$.c,he=$.lc;else{if(!vt.p)throw"hufDecode issues";var wt;for(wt=0;wt<vt.lit;wt++){for(var _t=ne(F[vt.p[wt]]);he<_t&&K.value<Qe;)X(ke,he,H,K),ke=Y.c,he=Y.lc;if(he>=_t&&G(F[vt.p[wt]])==(ke>>he-_t&(1<<_t)-1)){he-=_t,re(vt.p[wt],Ee,ke,he,H,q,K,Le,De,at),ke=$.c,he=$.lc;break}}if(wt==vt.lit)throw"hufDecode issues"}}var lt=8-te&7;for(ke>>=lt,he-=lt;he>0;){var vt=I[ke<<14-he&16383];if(vt.len)he-=vt.len,re(vt.lit,Ee,ke,he,H,q,K,Le,De,at),ke=$.c,he=$.lc;else throw"hufDecode issues"}return!0}function xe(F,I,H,q,K,te){var Ee={value:0},Me=H.value,Le=je(I,H),De=je(I,H);H.value+=4;var ke=je(I,H);if(H.value+=4,Le<0||Le>=65537||De<0||De>=65537)throw"Something wrong with HUF_ENCSIZE";var he=new Array(65537),at=new Array(16384);O(at);var Qe=q-(H.value-Me);if(Q(F,I,H,Qe,Le,De,he),ke>8*(q-(H.value-Me)))throw"Something wrong with hufUncompress";J(he,Le,De,at),We(he,at,F,I,H,ke,De,te,K,Ee)}function W(F,I,H){for(var q=0;q<H;++q)I[q]=F[I[q]]}function Ae(F){for(var I=1;I<F.length;I++){var H=F[I-1]+F[I]-128;F[I]=H}}function ge(F,I){for(var H=0,q=Math.floor((F.length+1)/2),K=0,te=F.length-1;!(K>te||(I[K++]=F[H++],K>te));)I[K++]=F[q++]}function ve(F){for(var I=F.byteLength,H=new Array,q=0,K=new DataView(F);I>0;){var te=K.getInt8(q++);if(te<0){var Ee=-te;I-=Ee+1;for(var Me=0;Me<Ee;Me++)H.push(K.getUint8(q++))}else{var Ee=te;I-=2;for(var Le=K.getUint8(q++),Me=0;Me<Ee+1;Me++)H.push(Le)}}return H}function me(F,I,H,q,K,te){var Ct=new DataView(te.buffer),Ee=H[F.idx[0]].width,Me=H[F.idx[0]].height,Le=3,De=Math.floor(Ee/8),ke=Math.ceil(Ee/8),he=Math.ceil(Me/8),at=Ee-(ke-1)*8,Qe=Me-(he-1)*8,et={value:0},vt=new Array(Le),wt=new Array(Le),_t=new Array(Le),lt=new Array(Le),At=new Array(Le);for(let Rt=0;Rt<Le;++Rt)At[Rt]=I[F.idx[Rt]],vt[Rt]=Rt<1?0:vt[Rt-1]+ke*he,wt[Rt]=new Float32Array(64),_t[Rt]=new Uint16Array(64),lt[Rt]=new Uint16Array(ke*64);for(let Rt=0;Rt<he;++Rt){var mt=8;Rt==he-1&&(mt=Qe);var Tt=8;for(let qt=0;qt<ke;++qt){qt==ke-1&&(Tt=at);for(let Bt=0;Bt<Le;++Bt)_t[Bt].fill(0),_t[Bt][0]=K[vt[Bt]++],Ge(et,q,_t[Bt]),Se(_t[Bt],wt[Bt]),Fe(wt[Bt]);Ne(wt);for(let Bt=0;Bt<Le;++Bt)Ie(wt[Bt],lt[Bt],qt*64)}let Sn=0;for(let qt=0;qt<Le;++qt){const Bt=H[F.idx[qt]].type;for(let Mn=8*Rt;Mn<8*Rt+mt;++Mn){Sn=At[qt][Mn];for(let Li=0;Li<De;++Li){const sr=Li*64+(Mn&7)*8;Ct.setUint16(Sn+0*2*Bt,lt[qt][sr+0],!0),Ct.setUint16(Sn+1*2*Bt,lt[qt][sr+1],!0),Ct.setUint16(Sn+2*2*Bt,lt[qt][sr+2],!0),Ct.setUint16(Sn+3*2*Bt,lt[qt][sr+3],!0),Ct.setUint16(Sn+4*2*Bt,lt[qt][sr+4],!0),Ct.setUint16(Sn+5*2*Bt,lt[qt][sr+5],!0),Ct.setUint16(Sn+6*2*Bt,lt[qt][sr+6],!0),Ct.setUint16(Sn+7*2*Bt,lt[qt][sr+7],!0),Sn+=8*2*Bt}}if(De!=ke)for(let Mn=8*Rt;Mn<8*Rt+mt;++Mn){const Li=At[qt][Mn]+8*De*2*Bt,sr=De*64+(Mn&7)*8;for(let qi=0;qi<Tt;++qi)Ct.setUint16(Li+qi*2*Bt,lt[qt][sr+qi],!0)}}}for(var on=new Uint16Array(Ee),Ct=new DataView(te.buffer),an=0;an<Le;++an){H[F.idx[an]].decoded=!0;var Xt=H[F.idx[an]].type;if(H[an].type==2)for(var cn=0;cn<Me;++cn){const Rt=At[an][cn];for(var yn=0;yn<Ee;++yn)on[yn]=Ct.getUint16(Rt+yn*2*Xt,!0);for(var yn=0;yn<Ee;++yn)Ct.setFloat32(Rt+yn*2*Xt,ye(on[yn]),!0)}}}function Ge(F,I,H){for(var q,K=1;K<64;)q=I[F.value],q==65280?K=64:q>>8==255?K+=q&255:(H[K]=q,K++),F.value++}function Se(F,I){I[0]=ye(F[0]),I[1]=ye(F[1]),I[2]=ye(F[5]),I[3]=ye(F[6]),I[4]=ye(F[14]),I[5]=ye(F[15]),I[6]=ye(F[27]),I[7]=ye(F[28]),I[8]=ye(F[2]),I[9]=ye(F[4]),I[10]=ye(F[7]),I[11]=ye(F[13]),I[12]=ye(F[16]),I[13]=ye(F[26]),I[14]=ye(F[29]),I[15]=ye(F[42]),I[16]=ye(F[3]),I[17]=ye(F[8]),I[18]=ye(F[12]),I[19]=ye(F[17]),I[20]=ye(F[25]),I[21]=ye(F[30]),I[22]=ye(F[41]),I[23]=ye(F[43]),I[24]=ye(F[9]),I[25]=ye(F[11]),I[26]=ye(F[18]),I[27]=ye(F[24]),I[28]=ye(F[31]),I[29]=ye(F[40]),I[30]=ye(F[44]),I[31]=ye(F[53]),I[32]=ye(F[10]),I[33]=ye(F[19]),I[34]=ye(F[23]),I[35]=ye(F[32]),I[36]=ye(F[39]),I[37]=ye(F[45]),I[38]=ye(F[52]),I[39]=ye(F[54]),I[40]=ye(F[20]),I[41]=ye(F[22]),I[42]=ye(F[33]),I[43]=ye(F[38]),I[44]=ye(F[46]),I[45]=ye(F[51]),I[46]=ye(F[55]),I[47]=ye(F[60]),I[48]=ye(F[21]),I[49]=ye(F[34]),I[50]=ye(F[37]),I[51]=ye(F[47]),I[52]=ye(F[50]),I[53]=ye(F[56]),I[54]=ye(F[59]),I[55]=ye(F[61]),I[56]=ye(F[35]),I[57]=ye(F[36]),I[58]=ye(F[48]),I[59]=ye(F[49]),I[60]=ye(F[57]),I[61]=ye(F[58]),I[62]=ye(F[62]),I[63]=ye(F[63])}function Fe(F){const I=.5*Math.cos(.7853975),H=.5*Math.cos(3.14159/16),q=.5*Math.cos(3.14159/8),K=.5*Math.cos(3*3.14159/16),te=.5*Math.cos(5*3.14159/16),Ee=.5*Math.cos(3*3.14159/8),Me=.5*Math.cos(7*3.14159/16);for(var Le=new Array(4),De=new Array(4),ke=new Array(4),he=new Array(4),at=0;at<8;++at){var Qe=at*8;Le[0]=q*F[Qe+2],Le[1]=Ee*F[Qe+2],Le[2]=q*F[Qe+6],Le[3]=Ee*F[Qe+6],De[0]=H*F[Qe+1]+K*F[Qe+3]+te*F[Qe+5]+Me*F[Qe+7],De[1]=K*F[Qe+1]-Me*F[Qe+3]-H*F[Qe+5]-te*F[Qe+7],De[2]=te*F[Qe+1]-H*F[Qe+3]+Me*F[Qe+5]+K*F[Qe+7],De[3]=Me*F[Qe+1]-te*F[Qe+3]+K*F[Qe+5]-H*F[Qe+7],ke[0]=I*(F[Qe+0]+F[Qe+4]),ke[3]=I*(F[Qe+0]-F[Qe+4]),ke[1]=Le[0]+Le[3],ke[2]=Le[1]-Le[2],he[0]=ke[0]+ke[1],he[1]=ke[3]+ke[2],he[2]=ke[3]-ke[2],he[3]=ke[0]-ke[1],F[Qe+0]=he[0]+De[0],F[Qe+1]=he[1]+De[1],F[Qe+2]=he[2]+De[2],F[Qe+3]=he[3]+De[3],F[Qe+4]=he[3]-De[3],F[Qe+5]=he[2]-De[2],F[Qe+6]=he[1]-De[1],F[Qe+7]=he[0]-De[0]}for(var et=0;et<8;++et)Le[0]=q*F[16+et],Le[1]=Ee*F[16+et],Le[2]=q*F[48+et],Le[3]=Ee*F[48+et],De[0]=H*F[8+et]+K*F[24+et]+te*F[40+et]+Me*F[56+et],De[1]=K*F[8+et]-Me*F[24+et]-H*F[40+et]-te*F[56+et],De[2]=te*F[8+et]-H*F[24+et]+Me*F[40+et]+K*F[56+et],De[3]=Me*F[8+et]-te*F[24+et]+K*F[40+et]-H*F[56+et],ke[0]=I*(F[et]+F[32+et]),ke[3]=I*(F[et]-F[32+et]),ke[1]=Le[0]+Le[3],ke[2]=Le[1]-Le[2],he[0]=ke[0]+ke[1],he[1]=ke[3]+ke[2],he[2]=ke[3]-ke[2],he[3]=ke[0]-ke[1],F[0+et]=he[0]+De[0],F[8+et]=he[1]+De[1],F[16+et]=he[2]+De[2],F[24+et]=he[3]+De[3],F[32+et]=he[3]-De[3],F[40+et]=he[2]-De[2],F[48+et]=he[1]-De[1],F[56+et]=he[0]-De[0]}function Ne(F){for(var I=0;I<64;++I){var H=F[0][I],q=F[1][I],K=F[2][I];F[0][I]=H+1.5747*K,F[1][I]=H-.1873*q-.4682*K,F[2][I]=H+1.8556*q}}function Ie(F,I,H){for(var q=0;q<64;++q)I[H+q]=vu.toHalfFloat(st(F[q]))}function st(F){return F<=1?Math.sign(F)*Math.pow(Math.abs(F),2.2):Math.sign(F)*Math.pow(b,Math.abs(F)-1)}function N(F){return new DataView(F.array.buffer,F.offset.value,F.size)}function U(F){var I=F.viewer.buffer.slice(F.offset.value,F.offset.value+F.size),H=new Uint8Array(ve(I)),q=new Uint8Array(H.length);return Ae(H),ge(H,q),new DataView(q.buffer)}function le(F){var I=F.array.slice(F.offset.value,F.offset.value+F.size),H=e1(I),q=new Uint8Array(H.length);return Ae(H),ge(H,q),new DataView(q.buffer)}function Pe(F){for(var I=F.viewer,H={value:F.offset.value},q=new Uint16Array(F.width*F.scanlineBlockSize*(F.channels*F.type)),K=new Uint8Array(8192),te=0,Ee=new Array(F.channels),Me=0;Me<F.channels;Me++)Ee[Me]={},Ee[Me].start=te,Ee[Me].end=Ee[Me].start,Ee[Me].nx=F.width,Ee[Me].ny=F.lines,Ee[Me].size=F.type,te+=Ee[Me].nx*Ee[Me].ny*Ee[Me].size;var Le=we(I,H),De=we(I,H);if(De>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Le<=De)for(var Me=0;Me<De-Le+1;Me++)K[Me+Le]=Xe(I,H);var ke=new Uint16Array(65536),he=L(K,ke),at=je(I,H);xe(F.array,I,H,at,q,te);for(var Me=0;Me<F.channels;++Me)for(var Qe=Ee[Me],et=0;et<Ee[Me].size;++et)Oe(q,Qe.start+et,Qe.nx,Qe.size,Qe.ny,Qe.nx*Qe.size,he);W(ke,q,te);for(var vt=0,wt=new Uint8Array(q.buffer.byteLength),_t=0;_t<F.lines;_t++)for(var lt=0;lt<F.channels;lt++){var Qe=Ee[lt],At=Qe.nx*Qe.size,mt=new Uint8Array(q.buffer,Qe.end*2,At*2);wt.set(mt,vt),vt+=At*2,Qe.end+=At}return new DataView(wt.buffer)}function Te(F){var I=F.array.slice(F.offset.value,F.offset.value+F.size),H=e1(I);const q=F.lines*F.channels*F.width,K=F.type==1?new Uint16Array(q):new Uint32Array(q);let te=0,Ee=0;const Me=new Array(4);for(let Le=0;Le<F.lines;Le++)for(let De=0;De<F.channels;De++){let ke=0;switch(F.type){case 1:Me[0]=te,Me[1]=Me[0]+F.width,te=Me[1]+F.width;for(let he=0;he<F.width;++he){const at=H[Me[0]++]<<8|H[Me[1]++];ke+=at,K[Ee]=ke,Ee++}break;case 2:Me[0]=te,Me[1]=Me[0]+F.width,Me[2]=Me[1]+F.width,te=Me[2]+F.width;for(let he=0;he<F.width;++he){const at=H[Me[0]++]<<24|H[Me[1]++]<<16|H[Me[2]++]<<8;ke+=at,K[Ee]=ke,Ee++}break}}return new DataView(K.buffer)}function Re(F){var I=F.viewer,H={value:F.offset.value},q=new Uint8Array(F.width*F.lines*(F.channels*F.type*2)),K={version:tt(I,H),unknownUncompressedSize:tt(I,H),unknownCompressedSize:tt(I,H),acCompressedSize:tt(I,H),dcCompressedSize:tt(I,H),rleCompressedSize:tt(I,H),rleUncompressedSize:tt(I,H),rleRawSize:tt(I,H),totalAcUncompressedCount:tt(I,H),totalDcUncompressedCount:tt(I,H),acCompression:tt(I,H)};if(K.version<2)throw"EXRLoader.parse: "+sn.compression+" version "+K.version+" is unsupported";for(var te=new Array,Ee=we(I,H)-2;Ee>0;){var Me=$e(I.buffer,H),Le=Xe(I,H),De=Le>>2&3,ke=(Le>>4)-1,he=new Int8Array([ke])[0],at=Xe(I,H);te.push({name:Me,index:he,type:at,compression:De}),Ee-=Me.length+3}for(var Qe=sn.channels,et=new Array(F.channels),vt=0;vt<F.channels;++vt){var wt=et[vt]={},_t=Qe[vt];wt.name=_t.name,wt.compression=0,wt.decoded=!1,wt.type=_t.pixelType,wt.pLinear=_t.pLinear,wt.width=F.width,wt.height=F.lines}for(var lt={idx:new Array(3)},At=0;At<F.channels;++At)for(var wt=et[At],vt=0;vt<te.length;++vt){var mt=te[vt];wt.name==mt.name&&(wt.compression=mt.compression,mt.index>=0&&(lt.idx[mt.index]=At),wt.offset=At)}if(K.acCompressedSize>0)switch(K.acCompression){case 0:var Ct=new Uint16Array(K.totalAcUncompressedCount);xe(F.array,I,H,K.acCompressedSize,Ct,K.totalAcUncompressedCount);break;case 1:var Tt=F.array.slice(H.value,H.value+K.totalAcUncompressedCount),on=e1(Tt),Ct=new Uint16Array(on.buffer);H.value+=K.totalAcUncompressedCount;break}if(K.dcCompressedSize>0){var an={array:F.array,offset:H,size:K.dcCompressedSize},Xt=new Uint16Array(le(an).buffer);H.value+=K.dcCompressedSize}if(K.rleRawSize>0){var Tt=F.array.slice(H.value,H.value+K.rleCompressedSize),on=e1(Tt),cn=ve(on.buffer);H.value+=K.rleCompressedSize}for(var yn=0,Rt=new Array(et.length),vt=0;vt<Rt.length;++vt)Rt[vt]=new Array;for(var Sn=0;Sn<F.lines;++Sn)for(var qt=0;qt<et.length;++qt)Rt[qt].push(yn),yn+=et[qt].width*F.type*2;me(lt,Rt,et,Ct,Xt,q);for(var vt=0;vt<et.length;++vt){var wt=et[vt];if(!wt.decoded)switch(wt.compression){case 2:for(var Bt=0,Mn=0,Sn=0;Sn<F.lines;++Sn){for(var Li=Rt[vt][Bt],sr=0;sr<wt.width;++sr){for(var qi=0;qi<2*wt.type;++qi)q[Li++]=cn[Mn+qi*wt.width*wt.height];Mn++}Bt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(q.buffer)}function $e(F,I){for(var H=new Uint8Array(F),q=0;H[I.value+q]!=0;)q+=1;var K=new TextDecoder().decode(H.slice(I.value,I.value+q));return I.value=I.value+q+1,K}function He(F,I,H){var q=new TextDecoder().decode(new Uint8Array(F).slice(I.value,I.value+H));return I.value=I.value+H,q}function be(F,I){var H=Ze(F,I),q=je(F,I);return[H,q]}function Je(F,I){var H=je(F,I),q=je(F,I);return[H,q]}function Ze(F,I){var H=F.getInt32(I.value,!0);return I.value=I.value+4,H}function je(F,I){var H=F.getUint32(I.value,!0);return I.value=I.value+4,H}function ze(F,I){var H=F[I.value];return I.value=I.value+1,H}function Xe(F,I){var H=F.getUint8(I.value);return I.value=I.value+1,H}const tt=function(F,I){let H;return"getBigInt64"in DataView.prototype?H=Number(F.getBigInt64(I.value,!0)):H=F.getUint32(I.value+4,!0)+Number(F.getUint32(I.value,!0)<<32),I.value+=8,H};function ft(F,I){var H=F.getFloat32(I.value,!0);return I.value+=4,H}function se(F,I){return vu.toHalfFloat(ft(F,I))}function ye(F){var I=(F&31744)>>10,H=F&1023;return(F>>15?-1:1)*(I?I===31?H?NaN:1/0:Math.pow(2,I-15)*(1+H/1024):6103515625e-14*(H/1024))}function we(F,I){var H=F.getUint16(I.value,!0);return I.value+=2,H}function Ke(F,I){return ye(we(F,I))}function nt(F,I,H,q){for(var K=H.value,te=[];H.value<K+q-1;){var Ee=$e(I,H),Me=Ze(F,H),Le=Xe(F,H);H.value+=3;var De=Ze(F,H),ke=Ze(F,H);te.push({name:Ee,pixelType:Me,pLinear:Le,xSampling:De,ySampling:ke})}return H.value+=1,te}function It(F,I){var H=ft(F,I),q=ft(F,I),K=ft(F,I),te=ft(F,I),Ee=ft(F,I),Me=ft(F,I),Le=ft(F,I),De=ft(F,I);return{redX:H,redY:q,greenX:K,greenY:te,blueX:Ee,blueY:Me,whiteX:Le,whiteY:De}}function Ht(F,I){var H=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],q=Xe(F,I);return H[q]}function jt(F,I){var H=je(F,I),q=je(F,I),K=je(F,I),te=je(F,I);return{xMin:H,yMin:q,xMax:K,yMax:te}}function Qt(F,I){var H=["INCREASING_Y"],q=Xe(F,I);return H[q]}function rn(F,I){var H=ft(F,I),q=ft(F,I);return[H,q]}function Yt(F,I){var H=ft(F,I),q=ft(F,I),K=ft(F,I);return[H,q,K]}function Ut(F,I,H,q,K){if(q==="string"||q==="stringvector"||q==="iccProfile")return He(I,H,K);if(q==="chlist")return nt(F,I,H,K);if(q==="chromaticities")return It(F,H);if(q==="compression")return Ht(F,H);if(q==="box2i")return jt(F,H);if(q==="lineOrder")return Qt(F,H);if(q==="float")return ft(F,H);if(q==="v2f")return rn(F,H);if(q==="v3f")return Yt(F,H);if(q==="int")return Ze(F,H);if(q==="rational")return be(F,H);if(q==="timecode")return Je(F,H);if(q==="preview")return H.value+=K,"skipped";H.value+=K}function Tr(F,I,H){const q={};if(F.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";q.version=F.getUint8(4);const K=F.getUint8(5);q.spec={singleTile:!!(K&2),longName:!!(K&4),deepFormat:!!(K&8),multiPart:!!(K&16)},H.value=8;for(var te=!0;te;){var Ee=$e(I,H);if(Ee==0)te=!1;else{var Me=$e(I,H),Le=je(F,H),De=Ut(F,I,H,Me,Le);De===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Me}'.`):q[Ee]=De}}if(K!=0)throw console.error("EXRHeader:",q),"THREE.EXRLoader: provided file is currently unsupported.";return q}function pr(F,I,H,q,K){const te={size:0,viewer:I,array:H,offset:q,width:F.dataWindow.xMax-F.dataWindow.xMin+1,height:F.dataWindow.yMax-F.dataWindow.yMin+1,channels:F.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:F.channels[0].pixelType,uncompress:null,getter:null,format:null,[Bp?"colorSpace":"encoding"]:null};switch(F.compression){case"NO_COMPRESSION":te.lines=1,te.uncompress=N;break;case"RLE_COMPRESSION":te.lines=1,te.uncompress=U;break;case"ZIPS_COMPRESSION":te.lines=1,te.uncompress=le;break;case"ZIP_COMPRESSION":te.lines=16,te.uncompress=le;break;case"PIZ_COMPRESSION":te.lines=32,te.uncompress=Pe;break;case"PXR24_COMPRESSION":te.lines=16,te.uncompress=Te;break;case"DWAA_COMPRESSION":te.lines=32,te.uncompress=Re;break;case"DWAB_COMPRESSION":te.lines=256,te.uncompress=Re;break;default:throw"EXRLoader.parse: "+F.compression+" is unsupported"}if(te.scanlineBlockSize=te.lines,te.type==1)switch(K){case ii:te.getter=Ke,te.inputSize=2;break;case Mi:te.getter=we,te.inputSize=2;break}else if(te.type==2)switch(K){case ii:te.getter=ft,te.inputSize=4;break;case Mi:te.getter=se,te.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+te.type+" for "+F.compression+".";te.blockCount=(F.dataWindow.yMax+1)/te.scanlineBlockSize;for(var Ee=0;Ee<te.blockCount;Ee++)tt(I,q);te.outputChannels=te.channels==3?4:te.channels;const Me=te.width*te.height*te.outputChannels;switch(K){case ii:te.byteArray=new Float32Array(Me),te.channels<te.outputChannels&&te.byteArray.fill(1,0,Me);break;case Mi:te.byteArray=new Uint16Array(Me),te.channels<te.outputChannels&&te.byteArray.fill(15360,0,Me);break;default:console.error("THREE.EXRLoader: unsupported type: ",K);break}return te.bytesPerLine=te.width*te.inputSize*te.channels,te.outputChannels==4?te.format=Ei:te.format=EM,Bp?te.colorSpace="srgb-linear":te.encoding=3e3,te}const Kt=new DataView(e),vn=new Uint8Array(e),kn={value:0},sn=Tr(Kt,e,kn),yt=pr(sn,Kt,vn,kn,this.type),Kn={value:0},Bi={R:0,G:1,B:2,A:3,Y:0};for(let F=0;F<yt.height/yt.scanlineBlockSize;F++){const I=je(Kt,kn);yt.size=je(Kt,kn),yt.lines=I+yt.scanlineBlockSize>yt.height?yt.height-I:yt.scanlineBlockSize;const q=yt.size<yt.lines*yt.bytesPerLine?yt.uncompress(yt):N(yt);kn.value+=yt.size;for(let K=0;K<yt.scanlineBlockSize;K++){const te=K+F*yt.scanlineBlockSize;if(te>=yt.height)break;for(let Ee=0;Ee<yt.channels;Ee++){const Me=Bi[sn.channels[Ee].name];for(let Le=0;Le<yt.width;Le++){Kn.value=(K*(yt.channels*yt.width)+Ee*yt.width+Le)*yt.inputSize;const De=(yt.height-1-te)*(yt.width*yt.outputChannels)+Le*yt.outputChannels+Me;yt.byteArray[De]=yt.getter(q,Kn)}}}}return{header:sn,width:yt.width,height:yt.height,data:yt.byteArray,format:yt.format,[Bp?"colorSpace":"encoding"]:yt[Bp?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){Bp?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const vw=new WeakMap;class Sae extends Ii{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Es(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(vw.has(e)){const l=vw.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),vw.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Ft;e.index&&t.setIndex(new dn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new dn(o,a))}return t}_loadLibrary(e,t){const r=new Es(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=wae.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function wae(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,d=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(f,d,m,c),_=v.attributes.map(y=>y.array.buffer);v.index&&_.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},_)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(d)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let d,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)d=new o.Mesh,m=a.DecodeBufferToMesh(l,d);else if(v===o.POINT_CLOUD)d=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const _={index:null,attributes:[]};for(const y in u){const g=self[f[y]];let x,S;if(c.useUniqueIDs)S=u[y],x=a.GetAttributeByUniqueId(d,S);else{if(S=a.GetAttributeId(d,o[u[y]]),S===-1)continue;x=a.GetAttribute(d,S)}_.attributes.push(i(o,a,d,y,g,x))}return v===o.TRIANGULAR_MESH&&(_.index=r(o,a,d)),o.destroy(d),_}function r(o,a,l){const u=l.num_faces()*3,f=u*4,d=o._malloc(f);a.GetTrianglesUInt32Array(l,f,d);const m=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:m,itemSize:1}}function i(o,a,l,c,u,f){const d=f.num_components(),v=l.num_points()*d,_=v*u.BYTES_PER_ELEMENT,y=s(o,u),g=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,f,y,_,g);const x=new u(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:x,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let t1;const yw=()=>{if(t1)return t1;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const d=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const _=f.charCodeAt(v);d[v]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let m=0;for(let v=0;v<f.length;++v)d[m++]=d[v]<60?r[d[v]]:(d[v]-60)*64+d[++v];return d.buffer.slice(0,m)}function l(f,d,m,v,_,y){const g=s.exports.sbrk,x=m+3&-4,S=g(x*v),A=g(_.length),M=new Uint8Array(s.exports.memory.buffer);M.set(_,A);const C=f(S,m,v,A,_.length);if(C===0&&y&&y(S,x,v),d.set(M.subarray(S,S+m*v)),g(S-g(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return t1={ready:o,supported:!0,decodeVertexBuffer(f,d,m,v,_){l(s.exports.meshopt_decodeVertexBuffer,f,d,m,v,s.exports[c[_]])},decodeIndexBuffer(f,d,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,d,m,v)},decodeIndexSequence(f,d,m,v){l(s.exports.meshopt_decodeIndexSequence,f,d,m,v)},decodeGltfBuffer(f,d,m,v,_,y){l(s.exports[u[_]],f,d,m,v,s.exports[c[y]])}},t1};function Aae(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(m){if(m instanceof Error)throw m}),d=n[d.id].value),d}),c=r("<"+a+">.init",c),u&&(u=r("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:u},s(f)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var d=n[a].getTransferables&&n[a].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(f,d)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Eae(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var m9=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return m9=function(){return n},n},Mae=0,Cae=0,_w=!1,dm=Object.create(null),hm=Object.create(null),n2=Object.create(null);function X0(n){if((!n||typeof n.init!="function")&&!_w)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!m9())return Eae(n);i==null&&(i="#default");var s="workerModule"+ ++Mae,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(_w=!0,c=X0({workerId:i,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+P1(c)+`
)}`}),_w=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=aL(i,"registerModule",l.workerModuleData);var f=function(){a=null,hm[i].delete(f)};(hm[i]||(hm[i]=new Set)).add(f)}return a.then(function(d){var m=d.isCallable;if(m)return aL(i,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:P1(t),getTransferables:r&&P1(r)},l}function bae(n){hm[n]&&hm[n].forEach(function(e){e()}),dm[n]&&(dm[n].terminate(),delete dm[n])}function P1(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Tae(n){var e=dm[n];if(!e){var t=P1(Aae);e=dm[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=n2[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete n2[s],o(i)}}return e}function aL(n,e,t){return new Promise(function(r,i){var s=++Cae;n2[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},Tae(n).postMessage({messageId:s,action:e,data:t})})}function g9(){var n=function(e){function t(J,Y,X,$,re,ie,ae,ue){var fe=1-ae;ue.x=fe*fe*J+2*fe*ae*X+ae*ae*re,ue.y=fe*fe*Y+2*fe*ae*$+ae*ae*ie}function r(J,Y,X,$,re,ie,ae,ue,fe,_e){var Oe=1-fe;_e.x=Oe*Oe*Oe*J+3*Oe*Oe*fe*X+3*Oe*fe*fe*re+fe*fe*fe*ae,_e.y=Oe*Oe*Oe*Y+3*Oe*Oe*fe*$+3*Oe*fe*fe*ie+fe*fe*fe*ue}function i(J,Y){for(var X=/([MLQCZ])([^MLQCZ]*)/g,$,re,ie,ae,ue;$=X.exec(J);){var fe=$[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(_e){return parseFloat(_e)});switch($[1]){case"M":ae=re=fe[0],ue=ie=fe[1];break;case"L":(fe[0]!==ae||fe[1]!==ue)&&Y("L",ae,ue,ae=fe[0],ue=fe[1]);break;case"Q":{Y("Q",ae,ue,ae=fe[2],ue=fe[3],fe[0],fe[1]);break}case"C":{Y("C",ae,ue,ae=fe[4],ue=fe[5],fe[0],fe[1],fe[2],fe[3]);break}case"Z":(ae!==re||ue!==ie)&&Y("L",ae,ue,re,ie);break}}}function s(J,Y,X){X===void 0&&(X=16);var $={x:0,y:0};i(J,function(re,ie,ae,ue,fe,_e,Oe,We,xe){switch(re){case"L":Y(ie,ae,ue,fe);break;case"Q":{for(var W=ie,Ae=ae,ge=1;ge<X;ge++)t(ie,ae,_e,Oe,ue,fe,ge/(X-1),$),Y(W,Ae,$.x,$.y),W=$.x,Ae=$.y;break}case"C":{for(var ve=ie,me=ae,Ge=1;Ge<X;Ge++)r(ie,ae,_e,Oe,We,xe,ue,fe,Ge/(X-1),$),Y(ve,me,$.x,$.y),ve=$.x,me=$.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(J,Y){var X=J.getContext?J.getContext("webgl",c):J,$=l.get(X);if(!$){let Oe=function(ve){var me=ie[ve];if(!me&&(me=ie[ve]=X.getExtension(ve),!me))throw new Error(ve+" not supported");return me},We=function(ve,me){var Ge=X.createShader(me);return X.shaderSource(Ge,ve),X.compileShader(Ge),Ge},xe=function(ve,me,Ge,Se){if(!ae[ve]){var Fe={},Ne={},Ie=X.createProgram();X.attachShader(Ie,We(me,X.VERTEX_SHADER)),X.attachShader(Ie,We(Ge,X.FRAGMENT_SHADER)),X.linkProgram(Ie),ae[ve]={program:Ie,transaction:function(N){X.useProgram(Ie),N({setUniform:function(le,Pe){for(var Te=[],Re=arguments.length-2;Re-- >0;)Te[Re]=arguments[Re+2];var $e=Ne[Pe]||(Ne[Pe]=X.getUniformLocation(Ie,Pe));X["uniform"+le].apply(X,[$e].concat(Te))},setAttribute:function(le,Pe,Te,Re,$e){var He=Fe[le];He||(He=Fe[le]={buf:X.createBuffer(),loc:X.getAttribLocation(Ie,le),data:null}),X.bindBuffer(X.ARRAY_BUFFER,He.buf),X.vertexAttribPointer(He.loc,Pe,X.FLOAT,!1,0,0),X.enableVertexAttribArray(He.loc),re?X.vertexAttribDivisor(He.loc,Re):Oe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(He.loc,Re),$e!==He.data&&(X.bufferData(X.ARRAY_BUFFER,$e,Te),He.data=$e)}})}}}ae[ve].transaction(Se)},W=function(ve,me){fe++;try{X.activeTexture(X.TEXTURE0+fe);var Ge=ue[ve];Ge||(Ge=ue[ve]=X.createTexture(),X.bindTexture(X.TEXTURE_2D,Ge),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST)),X.bindTexture(X.TEXTURE_2D,Ge),me(Ge,fe)}finally{fe--}},Ae=function(ve,me,Ge){var Se=X.createFramebuffer();_e.push(Se),X.bindFramebuffer(X.FRAMEBUFFER,Se),X.activeTexture(X.TEXTURE0+me),X.bindTexture(X.TEXTURE_2D,ve),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,ve,0);try{Ge(Se)}finally{X.deleteFramebuffer(Se),X.bindFramebuffer(X.FRAMEBUFFER,_e[--_e.length-1]||null)}},ge=function(){ie={},ae={},ue={},fe=-1,_e.length=0};var re=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext,ie={},ae={},ue={},fe=-1,_e=[];X.canvas.addEventListener("webglcontextlost",function(ve){ge(),ve.preventDefault()},!1),l.set(X,$={gl:X,isWebGL2:re,getExtension:Oe,withProgram:xe,withTexture:W,withTextureFramebuffer:Ae,handleContextLoss:ge})}Y($)}function f(J,Y,X,$,re,ie,ae,ue){ae===void 0&&(ae=15),ue===void 0&&(ue=null),u(J,function(fe){var _e=fe.gl,Oe=fe.withProgram,We=fe.withTexture;We("copy",function(xe,W){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,re,ie,0,_e.RGBA,_e.UNSIGNED_BYTE,Y),Oe("copy",o,a,function(Ae){var ge=Ae.setUniform,ve=Ae.setAttribute;ve("aUV",2,_e.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ge("1i","image",W),_e.bindFramebuffer(_e.FRAMEBUFFER,ue||null),_e.disable(_e.BLEND),_e.colorMask(ae&8,ae&4,ae&2,ae&1),_e.viewport(X,$,re,ie),_e.scissor(X,$,re,ie),_e.drawArrays(_e.TRIANGLES,0,3)})})})}function d(J,Y,X){var $=J.width,re=J.height;u(J,function(ie){var ae=ie.gl,ue=new Uint8Array($*re*4);ae.readPixels(0,0,$,re,ae.RGBA,ae.UNSIGNED_BYTE,ue),J.width=Y,J.height=X,f(ae,ue,0,0,$,re)})}var m=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function v(J,Y,X,$,re,ie){ie===void 0&&(ie=1);var ae=new Uint8Array(J*Y),ue=$[2]-$[0],fe=$[3]-$[1],_e=[];s(X,function(ve,me,Ge,Se){_e.push({x1:ve,y1:me,x2:Ge,y2:Se,minX:Math.min(ve,Ge),minY:Math.min(me,Se),maxX:Math.max(ve,Ge),maxY:Math.max(me,Se)})}),_e.sort(function(ve,me){return ve.maxX-me.maxX});for(var Oe=0;Oe<J;Oe++)for(var We=0;We<Y;We++){var xe=Ae($[0]+ue*(Oe+.5)/J,$[1]+fe*(We+.5)/Y),W=Math.pow(1-Math.abs(xe)/re,ie)/2;xe<0&&(W=1-W),W=Math.max(0,Math.min(255,Math.round(W*255))),ae[We*J+Oe]=W}return ae;function Ae(ve,me){for(var Ge=1/0,Se=1/0,Fe=_e.length;Fe--;){var Ne=_e[Fe];if(Ne.maxX+Se<=ve)break;if(ve+Se>Ne.minX&&me-Se<Ne.maxY&&me+Se>Ne.minY){var Ie=g(ve,me,Ne.x1,Ne.y1,Ne.x2,Ne.y2);Ie<Ge&&(Ge=Ie,Se=Math.sqrt(Ge))}}return ge(ve,me)&&(Se=-Se),Se}function ge(ve,me){for(var Ge=0,Se=_e.length;Se--;){var Fe=_e[Se];if(Fe.maxX<=ve)break;var Ne=Fe.y1>me!=Fe.y2>me&&ve<(Fe.x2-Fe.x1)*(me-Fe.y1)/(Fe.y2-Fe.y1)+Fe.x1;Ne&&(Ge+=Fe.y1<Fe.y2?1:-1)}return Ge!==0}}function _(J,Y,X,$,re,ie,ae,ue,fe,_e){ie===void 0&&(ie=1),ue===void 0&&(ue=0),fe===void 0&&(fe=0),_e===void 0&&(_e=0),y(J,Y,X,$,re,ie,ae,null,ue,fe,_e)}function y(J,Y,X,$,re,ie,ae,ue,fe,_e,Oe){ie===void 0&&(ie=1),fe===void 0&&(fe=0),_e===void 0&&(_e=0),Oe===void 0&&(Oe=0);for(var We=v(J,Y,X,$,re,ie),xe=new Uint8Array(We.length*4),W=0;W<We.length;W++)xe[W*4+Oe]=We[W];f(ae,xe,fe,_e,J,Y,1<<3-Oe,ue)}function g(J,Y,X,$,re,ie){var ae=re-X,ue=ie-$,fe=ae*ae+ue*ue,_e=fe?Math.max(0,Math.min(1,((J-X)*ae+(Y-$)*ue)/fe)):0,Oe=J-(X+_e*ae),We=Y-($+_e*ue);return Oe*Oe+We*We}var x=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:_,generateIntoFramebuffer:y}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",M="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),R=null,T=!1,b={},L=new WeakMap;function O(J){if(!T&&!j(J))throw new Error("WebGL generation not supported")}function k(J,Y,X,$,re,ie,ae){if(ie===void 0&&(ie=1),ae===void 0&&(ae=null),!ae&&(ae=R,!ae)){var ue=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ue)throw new Error("OffscreenCanvas or DOM canvas not supported");ae=R=ue.getContext("webgl",{depth:!1})}O(ae);var fe=new Uint8Array(J*Y*4);u(ae,function(xe){var W=xe.gl,Ae=xe.withTexture,ge=xe.withTextureFramebuffer;Ae("readable",function(ve,me){W.texImage2D(W.TEXTURE_2D,0,W.RGBA,J,Y,0,W.RGBA,W.UNSIGNED_BYTE,null),ge(ve,me,function(Ge){V(J,Y,X,$,re,ie,W,Ge,0,0,0),W.readPixels(0,0,J,Y,W.RGBA,W.UNSIGNED_BYTE,fe)})})});for(var _e=new Uint8Array(J*Y),Oe=0,We=0;Oe<fe.length;Oe+=4)_e[We++]=fe[Oe];return _e}function z(J,Y,X,$,re,ie,ae,ue,fe,_e){ie===void 0&&(ie=1),ue===void 0&&(ue=0),fe===void 0&&(fe=0),_e===void 0&&(_e=0),V(J,Y,X,$,re,ie,ae,null,ue,fe,_e)}function V(J,Y,X,$,re,ie,ae,ue,fe,_e,Oe){ie===void 0&&(ie=1),fe===void 0&&(fe=0),_e===void 0&&(_e=0),Oe===void 0&&(Oe=0),O(ae);var We=[];s(X,function(xe,W,Ae,ge){We.push(xe,W,Ae,ge)}),We=new Float32Array(We),u(ae,function(xe){var W=xe.gl,Ae=xe.isWebGL2,ge=xe.getExtension,ve=xe.withProgram,me=xe.withTexture,Ge=xe.withTextureFramebuffer,Se=xe.handleContextLoss;if(me("rawDistances",function(Fe,Ne){(J!==Fe._lastWidth||Y!==Fe._lastHeight)&&W.texImage2D(W.TEXTURE_2D,0,W.RGBA,Fe._lastWidth=J,Fe._lastHeight=Y,0,W.RGBA,W.UNSIGNED_BYTE,null),ve("main",S,A,function(Ie){var st=Ie.setAttribute,N=Ie.setUniform,U=!Ae&&ge("ANGLE_instanced_arrays"),le=!Ae&&ge("EXT_blend_minmax");st("aUV",2,W.STATIC_DRAW,0,C),st("aLineSegment",4,W.DYNAMIC_DRAW,1,We),N.apply(void 0,["4f","uGlyphBounds"].concat($)),N("1f","uMaxDistance",re),N("1f","uExponent",ie),Ge(Fe,Ne,function(Pe){W.enable(W.BLEND),W.colorMask(!0,!0,!0,!0),W.viewport(0,0,J,Y),W.scissor(0,0,J,Y),W.blendFunc(W.ONE,W.ONE),W.blendEquationSeparate(W.FUNC_ADD,Ae?W.MAX:le.MAX_EXT),W.clear(W.COLOR_BUFFER_BIT),Ae?W.drawArraysInstanced(W.TRIANGLES,0,3,We.length/4):U.drawArraysInstancedANGLE(W.TRIANGLES,0,3,We.length/4)})}),ve("post",o,M,function(Ie){Ie.setAttribute("aUV",2,W.STATIC_DRAW,0,C),Ie.setUniform("1i","tex",Ne),W.bindFramebuffer(W.FRAMEBUFFER,ue),W.disable(W.BLEND),W.colorMask(Oe===0,Oe===1,Oe===2,Oe===3),W.viewport(fe,_e,J,Y),W.scissor(fe,_e,J,Y),W.drawArrays(W.TRIANGLES,0,3)})}),W.isContextLost())throw Se(),new Error("webgl context lost")})}function j(J){var Y=!J||J===R?b:J.canvas||J,X=L.get(Y);if(X===void 0){T=!0;var $=null;try{var re=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=k(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,J);X=ie&&re.length===ie.length&&ie.every(function(ae,ue){return ae===re[ue]}),X||($="bad trial run results",console.info(re,ie))}catch(ae){X=!1,$=ae.message}$&&console.warn("WebGL SDF generation not supported:",$),T=!1,L.set(Y,X)}return X}var Q=Object.freeze({__proto__:null,generate:k,generateIntoCanvas:z,generateIntoFramebuffer:V,isSupported:j});function ne(J,Y,X,$,re,ie){re===void 0&&(re=Math.max($[2]-$[0],$[3]-$[1])/2),ie===void 0&&(ie=1);try{return k.apply(Q,arguments)}catch(ae){return console.info("WebGL SDF generation failed, falling back to JS",ae),v.apply(x,arguments)}}function G(J,Y,X,$,re,ie,ae,ue,fe,_e){re===void 0&&(re=Math.max($[2]-$[0],$[3]-$[1])/2),ie===void 0&&(ie=1),ue===void 0&&(ue=0),fe===void 0&&(fe=0),_e===void 0&&(_e=0);try{return z.apply(Q,arguments)}catch(Oe){return console.info("WebGL SDF generation failed, falling back to JS",Oe),_.apply(x,arguments)}}return e.forEachPathCommand=i,e.generate=ne,e.generateIntoCanvas=G,e.javascript=x,e.pathToLineSegments=s,e.webgl=Q,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Rae(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(Se,Fe){r[Se]=1<<Fe+1,i[r[Se]]=Se}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|s|r.PDI|l,u=null;function f(){if(!u){u=new Map;var Se=function(Ne){if(t.hasOwnProperty(Ne)){var Ie=0;t[Ne].split(",").forEach(function(st){var N=st.split("+"),U=N[0],le=N[1];U=parseInt(U,36),le=le?parseInt(le,36):0,u.set(Ie+=U,r[Ne]);for(var Pe=0;Pe<le;Pe++)u.set(++Ie,r[Ne])})}};for(var Fe in t)Se(Fe)}}function d(Se){return f(),u.get(Se.codePointAt(0))||r.L}function m(Se){return i[d(Se)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(Se,Fe){var Ne=36,Ie=0,st=new Map,N=Fe&&new Map,U;return Se.split(",").forEach(function le(Pe){if(Pe.indexOf("+")!==-1)for(var Te=+Pe;Te--;)le(U);else{U=Pe;var Re=Pe.split(">"),$e=Re[0],He=Re[1];$e=String.fromCodePoint(Ie+=parseInt($e,Ne)),He=String.fromCodePoint(Ie+=parseInt(He,Ne)),st.set($e,He),Fe&&N.set(He,$e)}}),{map:st,reverseMap:N}}var y,g,x;function S(){if(!y){var Se=_(v.pairs,!0),Fe=Se.map,Ne=Se.reverseMap;y=Fe,g=Ne,x=_(v.canonical,!1).map}}function A(Se){return S(),y.get(Se)||null}function M(Se){return S(),g.get(Se)||null}function C(Se){return S(),x.get(Se)||null}var R=r.L,T=r.R,b=r.EN,L=r.ES,O=r.ET,k=r.AN,z=r.CS,V=r.B,j=r.S,Q=r.ON,ne=r.BN,G=r.NSM,J=r.AL,Y=r.LRO,X=r.RLO,$=r.LRE,re=r.RLE,ie=r.PDF,ae=r.LRI,ue=r.RLI,fe=r.FSI,_e=r.PDI;function Oe(Se,Fe){for(var Ne=125,Ie=new Uint32Array(Se.length),st=0;st<Se.length;st++)Ie[st]=d(Se[st]);var N=new Map;function U(Pr,mi){var or=Ie[Pr];Ie[Pr]=mi,N.set(or,N.get(or)-1),or&a&&N.set(a,N.get(a)-1),N.set(mi,(N.get(mi)||0)+1),mi&a&&N.set(a,(N.get(a)||0)+1)}for(var le=new Uint8Array(Se.length),Pe=new Map,Te=[],Re=null,$e=0;$e<Se.length;$e++)Re||Te.push(Re={start:$e,end:Se.length-1,level:Fe==="rtl"?1:Fe==="ltr"?0:cf($e,!1)}),Ie[$e]&V&&(Re.end=$e,Re=null);for(var He=re|$|X|Y|s|_e|ie|V,be=function(Pr){return Pr+(Pr&1?1:2)},Je=function(Pr){return Pr+(Pr&1?2:1)},Ze=0;Ze<Te.length;Ze++){Re=Te[Ze];var je=[{_level:Re.level,_override:0,_isolate:0}],ze=void 0,Xe=0,tt=0,ft=0;N.clear();for(var se=Re.start;se<=Re.end;se++){var ye=Ie[se];if(ze=je[je.length-1],N.set(ye,(N.get(ye)||0)+1),ye&a&&N.set(a,(N.get(a)||0)+1),ye&He)if(ye&(re|$)){le[se]=ze._level;var we=(ye===re?Je:be)(ze._level);we<=Ne&&!Xe&&!tt?je.push({_level:we,_override:0,_isolate:0}):Xe||tt++}else if(ye&(X|Y)){le[se]=ze._level;var Ke=(ye===X?Je:be)(ze._level);Ke<=Ne&&!Xe&&!tt?je.push({_level:Ke,_override:ye&X?T:R,_isolate:0}):Xe||tt++}else if(ye&s){ye&fe&&(ye=cf(se+1,!0)===1?ue:ae),le[se]=ze._level,ze._override&&U(se,ze._override);var nt=(ye===ue?Je:be)(ze._level);nt<=Ne&&Xe===0&&tt===0?(ft++,je.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:se})):Xe++}else if(ye&_e){if(Xe>0)Xe--;else if(ft>0){for(tt=0;!je[je.length-1]._isolate;)je.pop();var It=je[je.length-1]._isolInitIndex;It!=null&&(Pe.set(It,se),Pe.set(se,It)),je.pop(),ft--}ze=je[je.length-1],le[se]=ze._level,ze._override&&U(se,ze._override)}else ye&ie?(Xe===0&&(tt>0?tt--:!ze._isolate&&je.length>1&&(je.pop(),ze=je[je.length-1])),le[se]=ze._level):ye&V&&(le[se]=Re.level);else le[se]=ze._level,ze._override&&ye!==ne&&U(se,ze._override)}for(var Ht=[],jt=null,Qt=Re.start;Qt<=Re.end;Qt++){var rn=Ie[Qt];if(!(rn&l)){var Yt=le[Qt],Ut=rn&s,Tr=rn===_e;jt&&Yt===jt._level?(jt._end=Qt,jt._endsWithIsolInit=Ut):Ht.push(jt={_start:Qt,_end:Qt,_level:Yt,_startsWithPDI:Tr,_endsWithIsolInit:Ut})}}for(var pr=[],Kt=0;Kt<Ht.length;Kt++){var vn=Ht[Kt];if(!vn._startsWithPDI||vn._startsWithPDI&&!Pe.has(vn._start)){for(var kn=[jt=vn],sn=void 0;jt&&jt._endsWithIsolInit&&(sn=Pe.get(jt._end))!=null;)for(var yt=Kt+1;yt<Ht.length;yt++)if(Ht[yt]._start===sn){kn.push(jt=Ht[yt]);break}for(var Kn=[],Bi=0;Bi<kn.length;Bi++)for(var F=kn[Bi],I=F._start;I<=F._end;I++)Kn.push(I);for(var H=le[Kn[0]],q=Re.level,K=Kn[0]-1;K>=0;K--)if(!(Ie[K]&l)){q=le[K];break}var te=Kn[Kn.length-1],Ee=le[te],Me=Re.level;if(!(Ie[te]&s)){for(var Le=te+1;Le<=Re.end;Le++)if(!(Ie[Le]&l)){Me=le[Le];break}}pr.push({_seqIndices:Kn,_sosType:Math.max(q,H)%2?T:R,_eosType:Math.max(Me,Ee)%2?T:R})}}for(var De=0;De<pr.length;De++){var ke=pr[De],he=ke._seqIndices,at=ke._sosType,Qe=ke._eosType,et=le[he[0]]&1?T:R;if(N.get(G))for(var vt=0;vt<he.length;vt++){var wt=he[vt];if(Ie[wt]&G){for(var _t=at,lt=vt-1;lt>=0;lt--)if(!(Ie[he[lt]]&l)){_t=Ie[he[lt]];break}U(wt,_t&(s|_e)?Q:_t)}}if(N.get(b))for(var At=0;At<he.length;At++){var mt=he[At];if(Ie[mt]&b)for(var Tt=At-1;Tt>=-1;Tt--){var on=Tt===-1?at:Ie[he[Tt]];if(on&o){on===J&&U(mt,k);break}}}if(N.get(J))for(var Ct=0;Ct<he.length;Ct++){var an=he[Ct];Ie[an]&J&&U(an,T)}if(N.get(L)||N.get(z))for(var Xt=1;Xt<he.length-1;Xt++){var cn=he[Xt];if(Ie[cn]&(L|z)){for(var yn=0,Rt=0,Sn=Xt-1;Sn>=0&&(yn=Ie[he[Sn]],!!(yn&l));Sn--);for(var qt=Xt+1;qt<he.length&&(Rt=Ie[he[qt]],!!(Rt&l));qt++);yn===Rt&&(Ie[cn]===L?yn===b:yn&(b|k))&&U(cn,yn)}}if(N.get(b))for(var Bt=0;Bt<he.length;Bt++){var Mn=he[Bt];if(Ie[Mn]&b){for(var Li=Bt-1;Li>=0&&Ie[he[Li]]&(O|l);Li--)U(he[Li],b);for(Bt++;Bt<he.length&&Ie[he[Bt]]&(O|l|b);Bt++)Ie[he[Bt]]!==b&&U(he[Bt],b)}}if(N.get(O)||N.get(L)||N.get(z))for(var sr=0;sr<he.length;sr++){var qi=he[sr];if(Ie[qi]&(O|L|z)){U(qi,Q);for(var pa=sr-1;pa>=0&&Ie[he[pa]]&l;pa--)U(he[pa],Q);for(var ma=sr+1;ma<he.length&&Ie[he[ma]]&l;ma++)U(he[ma],Q)}}if(N.get(b))for(var ga=0,Rc=at;ga<he.length;ga++){var Y0=he[ga],Dh=Ie[Y0];Dh&b?Rc===R&&U(Y0,R):Dh&o&&(Rc=Dh)}if(N.get(a)){var va=T|b|k,of=va|R,zo=[];{for(var dl=[],Go=0;Go<he.length;Go++)if(Ie[he[Go]]&a){var Jt=Se[he[Go]],Oh=void 0;if(A(Jt)!==null)if(dl.length<63)dl.push({char:Jt,seqIndex:Go});else break;else if((Oh=M(Jt))!==null)for(var ya=dl.length-1;ya>=0;ya--){var af=dl[ya].char;if(af===Oh||af===M(C(Jt))||A(C(af))===Jt){zo.push([dl[ya].seqIndex,Go]),dl.length=ya;break}}}zo.sort(function(Pr,mi){return Pr[0]-mi[0]})}for(var Fh=0;Fh<zo.length;Fh++){for(var K0=zo[Fh],Nn=K0[0],Pc=K0[1],Z0=!1,di=0,Uh=Nn+1;Uh<Pc;Uh++){var Ic=he[Uh];if(Ie[Ic]&of){Z0=!0;var es=Ie[Ic]&va?T:R;if(es===et){di=es;break}}}if(Z0&&!di){di=at;for(var kh=Nn-1;kh>=0;kh--){var Q0=he[kh];if(Ie[Q0]&of){var ts=Ie[Q0]&va?T:R;ts!==et?di=ts:di=et;break}}}if(di){if(Ie[he[Nn]]=Ie[he[Pc]]=di,di!==et){for(var hi=Nn+1;hi<he.length;hi++)if(!(Ie[he[hi]]&l)){d(Se[he[hi]])&G&&(Ie[he[hi]]=di);break}}if(di!==et){for(var Ho=Pc+1;Ho<he.length;Ho++)if(!(Ie[he[Ho]]&l)){d(Se[he[Ho]])&G&&(Ie[he[Ho]]=di);break}}}}for(var Rs=0;Rs<he.length;Rs++)if(Ie[he[Rs]]&a){for(var Nh=Rs,zh=Rs,Di=at,Bc=Rs-1;Bc>=0;Bc--)if(Ie[he[Bc]]&l)Nh=Bc;else{Di=Ie[he[Bc]]&va?T:R;break}for(var Lc=Qe,Dc=Rs+1;Dc<he.length;Dc++)if(Ie[he[Dc]]&(a|l))zh=Dc;else{Lc=Ie[he[Dc]]&va?T:R;break}for(var pi=Nh;pi<=zh;pi++)Ie[he[pi]]=Di===Lc?Di:et;Rs=zh}}}for(var Rr=Re.start;Rr<=Re.end;Rr++){var lf=le[Rr],ho=Ie[Rr];if(lf&1?ho&(R|b|k)&&le[Rr]++:ho&T?le[Rr]++:ho&(k|b)&&(le[Rr]+=2),ho&l&&(le[Rr]=Rr===0?Re.level:le[Rr-1]),Rr===Re.end||d(Se[Rr])&(j|V))for(var hl=Rr;hl>=0&&d(Se[hl])&c;hl--)le[hl]=Re.level}}return{levels:le,paragraphs:Te};function cf(Pr,mi){for(var or=Pr;or<Se.length;or++){var ar=Ie[or];if(ar&(T|J))return 1;if(ar&(V|R)||mi&&ar===_e)return 0;if(ar&s){var ns=q0(or);or=ns===-1?Se.length:ns}}return 0}function q0(Pr){for(var mi=1,or=Pr+1;or<Se.length;or++){var ar=Ie[or];if(ar&V)break;if(ar&_e){if(--mi===0)return or}else ar&s&&mi++}return-1}}var We="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",xe;function W(){if(!xe){var Se=_(We,!0),Fe=Se.map,Ne=Se.reverseMap;Ne.forEach(function(Ie,st){Fe.set(st,Ie)}),xe=Fe}}function Ae(Se){return W(),xe.get(Se)||null}function ge(Se,Fe,Ne,Ie){var st=Se.length;Ne=Math.max(0,Ne==null?0:+Ne),Ie=Math.min(st-1,Ie==null?st-1:+Ie);for(var N=new Map,U=Ne;U<=Ie;U++)if(Fe[U]&1){var le=Ae(Se[U]);le!==null&&N.set(U,le)}return N}function ve(Se,Fe,Ne,Ie){var st=Se.length;Ne=Math.max(0,Ne==null?0:+Ne),Ie=Math.min(st-1,Ie==null?st-1:+Ie);var N=[];return Fe.paragraphs.forEach(function(U){var le=Math.max(Ne,U.start),Pe=Math.min(Ie,U.end);if(le<Pe){for(var Te=Fe.levels.slice(le,Pe+1),Re=Pe;Re>=le&&d(Se[Re])&c;Re--)Te[Re]=U.level;for(var $e=U.level,He=1/0,be=0;be<Te.length;be++){var Je=Te[be];Je>$e&&($e=Je),Je<He&&(He=Je|1)}for(var Ze=$e;Ze>=He;Ze--)for(var je=0;je<Te.length;je++)if(Te[je]>=Ze){for(var ze=je;je+1<Te.length&&Te[je+1]>=Ze;)je++;je>ze&&N.push([ze+le,je+le])}}}),N}function me(Se,Fe,Ne,Ie){var st=Ge(Se,Fe,Ne,Ie),N=[].concat(Se);return st.forEach(function(U,le){N[le]=(Fe.levels[U]&1?Ae(Se[U]):null)||Se[U]}),N.join("")}function Ge(Se,Fe,Ne,Ie){for(var st=ve(Se,Fe,Ne,Ie),N=[],U=0;U<Se.length;U++)N[U]=U;return st.forEach(function(le){for(var Pe=le[0],Te=le[1],Re=N.slice(Pe,Te+1),$e=Re.length;$e--;)N[Te-$e]=Re[$e]}),N}return e.closingToOpeningBracket=M,e.getBidiCharType=d,e.getBidiCharTypeName=m,e.getCanonicalBracket=C,e.getEmbeddingLevels=Oe,e.getMirroredCharacter=Ae,e.getMirroredCharactersMap=ge,e.getReorderSegments=ve,e.getReorderedIndices=Ge,e.getReorderedString=me,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const v9=/\bvoid\s+main\s*\(\s*\)\s*{/g;function r2(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=Nt[i];return s?r2(s):r}return n.replace(e,t)}const zr=[];for(let n=0;n<256;n++)zr[n]=(n<16?"0":"")+n.toString(16);function Pae(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(zr[n&255]+zr[n>>8&255]+zr[n>>16&255]+zr[n>>24&255]+"-"+zr[e&255]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[t&63|128]+zr[t>>8&255]+"-"+zr[t>>16&255]+zr[t>>24&255]+zr[r&255]+zr[r>>8&255]+zr[r>>16&255]+zr[r>>24&255]).toUpperCase()}const eu=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Iae=Date.now(),lL=new WeakMap,cL=new Map;let Bae=1e10;function i2(n,e){const t=Fae(e);let r=lL.get(n);if(r||lL.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let d=cL[f];if(!d){const m=Lae(this,c,e,t);d=cL[f]=m}c.vertexShader=d.vertexShader,c.fragmentShader=d.fragmentShader,eu(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Iae}}),this[i]&&this[i](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:Bae++}),u.uuid=Pae(),u.uniforms=eu({},c.uniforms,e.uniforms),u.defines=eu({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=eu({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(eu(this.extensions,c.extensions),eu(this.defines,c.defines),eu(this.uniforms,kM.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=i2(n.isDerivedMaterial?n.getDepthMaterial():new y0({depthPacking:IM}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=i2(n.isDerivedMaterial?n.getDistanceMaterial():new h_,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function Lae(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:m,timeUniform:v}=r;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||m)&&(e=r2(e)),(d||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=r2(t)),m){let _=m({vertexShader:e,fragmentShader:t});e=_.vertexShader,t=_.fragmentShader}if(d){let _=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(_.push(y),"")),f=`${d}
${_.join(`
`)}
${f}`}if(v){const _=`
uniform float ${v};
`;s=_+s,c=_+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,y,g,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,g))?y:`troika_${y}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=uL(e,i,s,o,a),t=uL(t,i,c,u,f),{vertexShader:e,fragmentShader:t}}function uL(n,e,t,r,i){return(r||i||t)&&(n=n.replace(v9,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function Dae(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Oae=0;const fL=new Map;function Fae(n){const e=JSON.stringify(n,Dae);let t=fL.get(e);return t==null&&fL.set(e,t=++Oae),t}function Uae(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(x,S){function A(){const M=C=>{console.error(`Failure loading font ${x}${x===r?"":"; trying fallback"}`,C),x!==r&&(x=r,A())};try{const C=new XMLHttpRequest;C.open("get",x,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)M(new Error(C.statusText));else if(C.status>0)try{const R=n(C.response);S(R)}catch(R){M(R)}},C.onerror=M,C.send()}catch(C){M(C)}}A()}function u(x,S){x||(x=r);let A=i[x];A?A.pending?A.pending.push(S):S(A):(i[x]={pending:[S]},c(x,M=>{let C=i[x].pending;i[x]=M,C.forEach(R=>R(M))}))}function f({text:x="",font:S=r,sdfGlyphSize:A=64,fontSize:M=1,letterSpacing:C=0,lineHeight:R="normal",maxWidth:T=s,direction:b,textAlign:L="left",textIndent:O=0,whiteSpace:k="normal",overflowWrap:z="normal",anchorX:V=0,anchorY:j=0,includeCaretPositions:Q=!1,chunkedBoundsSize:ne=8192,colorRanges:G=null},J,Y=!1){const X=_(),$={fontLoad:0,typesetting:0};x.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),x=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,C=+C,T=+T,R=R||"normal",O=+O,u(S,re=>{const ie=isFinite(T);let ae=null,ue=null,fe=null,_e=null,Oe=null,We=null,xe=null,W=0,Ae=0,ge=k!=="nowrap";const{ascender:ve,descender:me,unitsPerEm:Ge,lineGap:Se,capHeight:Fe,xHeight:Ne}=re;$.fontLoad=_()-X;const Ie=_(),st=M/Ge;R==="normal"&&(R=(ve-me+Se)/Ge),R=R*M;const N=(R-(ve-me)*st)/2,U=-(ve*st+N),le=Math.min(R,(ve-me)*st),Pe=(ve+me)/2*st-le/2;let Te=O,Re=new y;const $e=[Re];re.forEachGlyph(x,M,C,(Je,Ze,je)=>{const ze=x.charAt(je),Xe=Je.advanceWidth*st,tt=Re.count;let ft;if("isEmpty"in Je||(Je.isWhitespace=!!ze&&new RegExp(a).test(ze),Je.canBreakAfter=!!ze&&l.test(ze),Je.isEmpty=Je.xMin===Je.xMax||Je.yMin===Je.yMax||o.test(ze)),!Je.isWhitespace&&!Je.isEmpty&&Ae++,ge&&ie&&!Je.isWhitespace&&Ze+Xe+Te>T&&tt){if(Re.glyphAt(tt-1).glyphObj.canBreakAfter)ft=new y,Te=-Ze;else for(let ye=tt;ye--;)if(ye===0&&z==="break-word"){ft=new y,Te=-Ze;break}else if(Re.glyphAt(ye).glyphObj.canBreakAfter){ft=Re.splitAt(ye+1);const we=ft.glyphAt(0).x;Te-=we;for(let Ke=ft.count;Ke--;)ft.glyphAt(Ke).x-=we;break}ft&&(Re.isSoftWrapped=!0,Re=ft,$e.push(Re),W=T)}let se=Re.glyphAt(Re.count);se.glyphObj=Je,se.x=Ze+Te,se.width=Xe,se.charIndex=je,ze===`
`&&(Re=new y,$e.push(Re),Te=-(Ze+Xe+C*M)+O)}),$e.forEach(Je=>{for(let Ze=Je.count;Ze--;){let{glyphObj:je,x:ze,width:Xe}=Je.glyphAt(Ze);if(!je.isWhitespace){Je.width=ze+Xe,Je.width>W&&(W=Je.width);return}}});let He=0,be=0;if(V&&(typeof V=="number"?He=-V:typeof V=="string"&&(He=-W*(V==="left"?0:V==="center"?.5:V==="right"?1:m(V)))),j){if(typeof j=="number")be=-j;else if(typeof j=="string"){let Je=$e.length*R;be=j==="top"?0:j==="top-baseline"?-U:j==="top-cap"?-U-Fe*st:j==="top-ex"?-U-Ne*st:j==="middle"?Je/2:j==="bottom"?Je:j==="bottom-baseline"?Je-N+me*st:m(j)*Je}}if(!Y){const Je=e.getEmbeddingLevels(x,b);ae=new Uint16Array(Ae),ue=new Float32Array(Ae*2),fe={},We=[s,s,-s,-s],xe=[];let Ze=U;Q&&(Oe=new Float32Array(x.length*3)),G&&(_e=new Uint8Array(Ae*3));let je=0,ze=-1,Xe=-1,tt,ft;if($e.forEach((se,ye)=>{let{count:we,width:Ke}=se;if(we>0){let nt=0;for(let Yt=we;Yt--&&se.glyphAt(Yt).glyphObj.isWhitespace;)nt++;let It=0,Ht=0;if(L==="center")It=(W-Ke)/2;else if(L==="right")It=W-Ke;else if(L==="justify"&&se.isSoftWrapped){let Yt=0;for(let Ut=we-nt;Ut--;)se.glyphAt(Ut).glyphObj.isWhitespace&&Yt++;Ht=(W-Ke)/Yt}if(Ht||It){let Yt=0;for(let Ut=0;Ut<we;Ut++){let Tr=se.glyphAt(Ut);const pr=Tr.glyphObj;Tr.x+=It+Yt,Ht!==0&&pr.isWhitespace&&Ut<we-nt&&(Yt+=Ht,Tr.width+=Ht)}}const jt=e.getReorderSegments(x,Je,se.glyphAt(0).charIndex,se.glyphAt(se.count-1).charIndex);for(let Yt=0;Yt<jt.length;Yt++){const[Ut,Tr]=jt[Yt];let pr=1/0,Kt=-1/0;for(let vn=0;vn<we;vn++)if(se.glyphAt(vn).charIndex>=Ut){let kn=vn,sn=vn;for(;sn<we;sn++){let yt=se.glyphAt(sn);if(yt.charIndex>Tr)break;sn<we-nt&&(pr=Math.min(pr,yt.x),Kt=Math.max(Kt,yt.x+yt.width))}for(let yt=kn;yt<sn;yt++){const Kn=se.glyphAt(yt);Kn.x=Kt-(Kn.x+Kn.width-pr)}break}}let Qt;const rn=Yt=>Qt=Yt;for(let Yt=0;Yt<we;Yt++){let Ut=se.glyphAt(Yt);Qt=Ut.glyphObj;const Tr=Qt.index,pr=Je.levels[Ut.charIndex]&1;if(pr){const Kt=e.getMirroredCharacter(x[Ut.charIndex]);Kt&&re.forEachGlyph(Kt,0,0,rn)}if(Q){const{charIndex:Kt}=Ut,vn=Ut.x+He,kn=Ut.x+Ut.width+He;Oe[Kt*3]=pr?kn:vn,Oe[Kt*3+1]=pr?vn:kn,Oe[Kt*3+2]=Ze+Pe+be;const sn=Kt-ze;sn>1&&v(Oe,ze,sn),ze=Kt}if(G){const{charIndex:Kt}=Ut;for(;Kt>Xe;)Xe++,G.hasOwnProperty(Xe)&&(ft=G[Xe])}if(!Qt.isWhitespace&&!Qt.isEmpty){const Kt=je++;fe[Tr]||(fe[Tr]={path:Qt.path,pathBounds:[Qt.xMin,Qt.yMin,Qt.xMax,Qt.yMax]});const vn=Ut.x+He,kn=Ze+be;ue[Kt*2]=vn,ue[Kt*2+1]=kn;const sn=vn+Qt.xMin*st,yt=kn+Qt.yMin*st,Kn=vn+Qt.xMax*st,Bi=kn+Qt.yMax*st;sn<We[0]&&(We[0]=sn),yt<We[1]&&(We[1]=yt),Kn>We[2]&&(We[2]=Kn),Bi>We[3]&&(We[3]=Bi),Kt%ne===0&&(tt={start:Kt,end:Kt,rect:[s,s,-s,-s]},xe.push(tt)),tt.end++;const F=tt.rect;if(sn<F[0]&&(F[0]=sn),yt<F[1]&&(F[1]=yt),Kn>F[2]&&(F[2]=Kn),Bi>F[3]&&(F[3]=Bi),ae[Kt]=Tr,G){const I=Kt*3;_e[I]=ft>>16&255,_e[I+1]=ft>>8&255,_e[I+2]=ft&255}}}}Ze-=R}),Oe){const se=x.length-ze;se>1&&v(Oe,ze,se)}}$.typesetting=_()-Ie,J({glyphIds:ae,glyphPositions:ue,glyphData:fe,caretPositions:Oe,caretHeight:le,glyphColors:_e,chunkedBounds:xe,fontSize:M,unitsPerEm:Ge,ascender:ve*st,descender:me*st,capHeight:Fe*st,xHeight:Ne*st,lineHeight:R,topBaseline:U,blockBounds:[He,be-$e.length*R,He+W,be],visibleBounds:We,timings:$})})}function d(x,S){f(x,A=>{const[M,C,R,T]=A.blockBounds;S({width:R-M,height:T-C})},{metricsOnly:!0})}function m(x){let S=x.match(/^([\d.]+)%$/),A=S?parseFloat(S[1]):NaN;return isNaN(A)?0:A/100}function v(x,S,A){const M=x[S*3],C=x[S*3+1],R=x[S*3+2],T=(C-M)/A;for(let b=0;b<A;b++){const L=(S+b)*3;x[L]=M+T*b,x[L+1]=M+T*(b+1),x[L+2]=R}}function _(){return(self.performance||Date).now()}function y(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return y.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(x){let S=y.flyweight;return S.data=this.data,S.index=x,S},splitAt(x){let S=new y;return S.data=this.data.splice(x*g.length),S}},y.flyweight=g.reduce((x,S,A,M)=>(Object.defineProperty(x,S,{get(){return this.data[this.index*g.length+A]},set(C){this.data[this.index*g.length+A]=C}}),x),{data:null,index:0}),{typeset:f,measure:d,loadFont:u}}const Ru=()=>(self.performance||Date).now(),N_=g9();let dL;function kae(n,e,t,r,i,s,o,a,l,c,u=!0){return u?zae(n,e,t,r,i,s,o,a,l,c).then(null,f=>(dL||(console.warn("WebGL SDF generation failed, falling back to JS",f),dL=!0),pL(n,e,t,r,i,s,o,a,l,c))):pL(n,e,t,r,i,s,o,a,l,c)}const I1=[],Nae=5;let s2=0;function y9(){const n=Ru();for(;I1.length&&Ru()-n<Nae;)I1.shift()();s2=I1.length?setTimeout(y9,0):0}const zae=(...n)=>new Promise((e,t)=>{I1.push(()=>{const r=Ru();try{N_.webgl.generateIntoCanvas(...n),e({timing:Ru()-r})}catch(i){t(i)}}),s2||(s2=setTimeout(y9,0))}),Gae=4,Hae=2e3,hL={};let Vae=0;function pL(n,e,t,r,i,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+Vae++%Gae;let f=hL[u];return f||(f=hL[u]={workerModule:X0({name:u,workerId:u,dependencies:[g9,Ru],init(d,m){const v=d().javascript.generate;return function(..._){const y=m();return{textureData:v(..._),timing:m()-y}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,r,i,s).then(({textureData:d,timing:m})=>{const v=Ru(),_=new Uint8Array(d.length*4);for(let y=0;y<d.length;y++)_[y*4+c]=d[y];return N_.webglUtils.renderImageData(o,_,a,l,n,e,1<<3-c),m+=Ru()-v,--f.requests===0&&(f.idleTimer=setTimeout(()=>{bae(u)},Hae)),{timing:m}})}function Wae(n){n._warm||(N_.webgl.isSupported(n),n._warm=!0)}const $ae=N_.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function jae(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:a},f={},d=0;d<l;d++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var v=o.readUint(i,s);s+=4;var _=o.readUint(i,s);s+=4,f[m]={offset:v,length:_}}for(d=0;d<c.length;d++){var y=c[d];f[y]&&(u[y.trim()]=e[y.trim()].parse(i,f[y].offset,f[y].length,u))}return u},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(i,c,4);c+=4,a.readUint(i,c),c+=4;var d=a.readUint(i,c);if(c+=4,a.readUint(i,c),c+=4,f==s)return d}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var c=i[s++]<<8|i[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(i,s),s+=4;var d=c.readUshort(i,s);s+=2;var m=c.readUshort(i,s);s+=2;var v=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,f+d),u.featureList=e._lctf.readFeatureList(i,f+m),u.lookupList=e._lctf.readLookupList(i,f+v,l),u},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var d=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+d,o);c.push(m)}return c},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(i,s),s+=2,c.flag=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;for(var f=c.ltype,d=0;d<u;d++){var m=a.readUshort(i,s);s+=2;var v=o(i,f,l+m,c);c.tabs.push(v)}return c},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var c=o.readUshort(i,s);s+=2;var u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var d=o.readUshort(i,s);for(s+=2,f=0;f<d;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+d);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+d)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+c);var u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var d=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var d=[];for(u=0;u<f.length-1;u++)d.push(e.CFF.readDict(i,s+f[u],s+f[u+1]));s+=f[f.length-1];var m=d[0],v=[];s=e.CFF.readIndex(i,s,v);var _=[];for(u=0;u<v.length-1;u++)_.push(a.readASCII(i,s+v[u],v[u+1]-v[u]));if(s+=v[v.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,v=[],s=e.CFF.readIndex(i,s,v);var y=[];for(u=0;u<v.length-1;u++)y.push(a.readBytes(i,s+v[u],v[u+1]-v[u]));m.CharStrings=y}if(m.ROS){s=m.FDArray;var g=[];for(s=e.CFF.readIndex(i,s,g),m.FDArray=[],u=0;u<g.length-1;u++){var x=e.CFF.readDict(i,s+g[u],s+g[u+1]);e.CFF._readFDict(i,x,_),m.FDArray.push(x)}s+=g[g.length-1],s=m.FDSelect,m.FDSelect=[];var S=i[s];if(s++,S!=3)throw S;var A=a.readUshort(i,s);for(s+=2,u=0;u<A+1;u++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,_),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)a.push(i[s+u]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var d=0;for(c==1?(d=i[s],s++):(d=a.readUshort(i,s),s+=2),u=0;u<=d;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,f=null,d=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(d=a.readShort(i,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(d=l-139,u=1),247<=l&&l<=250&&(d=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(d=256*-(l-251)-c-108,u=2),l==255&&(d=a.readInt(i,s+1)/65535,u=5),o.val=d??"o"+f,o.size=u},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,m=null,v=null;u<=20&&(m=u,d=1),u==12&&(m=100*u+f,d=2),u!=19&&u!=20||(m=u,d=2),21<=u&&u<=27&&(m=u,d=1),u==28&&(v=l.readShort(i,s+1),d=3),29<=u&&u<=31&&(m=u,d=1),32<=u&&u<=246&&(v=u-139,d=1),247<=u&&u<=250&&(v=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(v=256*-(u-251)-f-108,d=2),u==255&&(v=l.readInt(i,s+1)/65535,d=5),c.push(v??"o"+m),s+=d}return c},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,m=null,v=null;if(u==28&&(v=a.readShort(i,s+1),d=3),u==29&&(v=a.readInt(i,s+1),d=5),32<=u&&u<=246&&(v=u-139,d=1),247<=u&&u<=250&&(v=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(v=256*-(u-251)-f-108,d=2),u==255)throw v=a.readInt(i,s+1)/65535,d=5,"unknown number";if(u==30){var _=[];for(d=1;;){var y=i[s+d];d++;var g=y>>4,x=15&y;if(g!=15&&_.push(g),x!=15&&_.push(x),x==15)break}for(var S="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],M=0;M<_.length;M++)S+=A[_[M]];v=parseFloat(S)}u<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],d=1,u==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),m!=null?(l[m]=c.length==1?c[0]:c,c=[]):c.push(v),s+=d}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var d=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var v=a.readUint(i,s);s+=4;var _="p"+d+"e"+m,y=u.indexOf(v);if(y==-1){var g;y=l.tables.length,u.push(v);var x=a.readUshort(i,v);x==0?g=e.cmap.parse0(i,v):x==4?g=e.cmap.parse4(i,v):x==6?g=e.cmap.parse6(i,v):x==12?g=e.cmap.parse12(i,v):console.debug("unknown format: "+x,d,m,v),l.tables.push(g)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=y}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(i[s+c]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;var f=u/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(i,u+0),d=o.readUint(i,u+4),m=o.readUint(i,u+8);a.groups.push([f,d,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var d=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<d;u++){var m=a[l];if(l++,c.flags.push(m),(8&m)!=0){var v=a[l];l++;for(var _=0;_<v;_++)c.flags.push(m),u++}}for(c.xs=[],u=0;u<d;u++){var y=(2&c.flags[u])!=0,g=(16&c.flags[u])!=0;y?(c.xs.push(g?a[l]:-a[l]),l++):g?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<d;u++)y=(4&c.flags[u])!=0,g=(32&c.flags[u])!=0,y?(c.ys.push(g?a[l]:-a[l]),l++):g?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var x=0,S=0;for(u=0;u<d;u++)x+=c.xs[u],S+=c.ys[u],c.xs[u]=x,c.ys[u]=S}else{var A;c.parts=[];do{A=o.readUshort(a,l),l+=2;var M={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(M),M.glyphIndex=o.readUshort(a,l),l+=2,1&A){var C=o.readShort(a,l);l+=2;var R=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,R=o.readInt8(a,l),l++;2&A?(M.m.tx=C,M.m.ty=R):(M.p1=C,M.p2=R),8&A?(M.m.a=M.m.d=o.readF2dot14(a,l),l+=2):64&A?(M.m.a=o.readF2dot14(a,l),l+=2,M.m.d=o.readF2dot14(a,l),l+=2):128&A&&(M.m.a=o.readF2dot14(a,l),l+=2,M.m.b=o.readF2dot14(a,l),l+=2,M.m.c=o.readF2dot14(a,l),l+=2,M.m.d=o.readF2dot14(a,l),l+=2)}while(32&A);if(256&A){var T=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<T;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,f+c)}if(s==1&&u.fmt==1){var d=l.readUshort(i,o);o+=2;var m=e._lctf.numOfOnes(d);d!=0&&(u.pos=e.GPOS.readValueRecord(i,o,d))}else if(s==2&&u.fmt>=1&&u.fmt<=2){d=l.readUshort(i,o),o+=2;var v=l.readUshort(i,o);o+=2,m=e._lctf.numOfOnes(d);var _=e._lctf.numOfOnes(v);if(u.fmt==1){u.pairsets=[];var y=l.readUshort(i,o);o+=2;for(var g=0;g<y;g++){var x=c+l.readUshort(i,o);o+=2;var S=l.readUshort(i,x);x+=2;for(var A=[],M=0;M<S;M++){var C=l.readUshort(i,x);x+=2,d!=0&&(k=e.GPOS.readValueRecord(i,x,d),x+=2*m),v!=0&&(z=e.GPOS.readValueRecord(i,x,v),x+=2*_),A.push({gid2:C,val1:k,val2:z})}u.pairsets.push(A)}}if(u.fmt==2){var R=l.readUshort(i,o);o+=2;var T=l.readUshort(i,o);o+=2;var b=l.readUshort(i,o);o+=2;var L=l.readUshort(i,o);for(o+=2,u.classDef1=e._lctf.readClassDef(i,c+R),u.classDef2=e._lctf.readClassDef(i,c+T),u.matrix=[],g=0;g<b;g++){var O=[];for(M=0;M<L;M++){var k=null,z=null;d!=0&&(k=e.GPOS.readValueRecord(i,o,d),o+=2*m),v!=0&&(z=e.GPOS.readValueRecord(i,o,v),o+=2*_),O.push({val1:k,val2:z})}u.matrix.push(O)}}}else{if(s==9&&u.fmt==1){var V=l.readUshort(i,o);o+=2;var j=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=V;else if(a.ltype!=V)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,c+j)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,o),o+=2;else if(u.fmt==2){var d=l.readUshort(i,o);o+=2,u.newg=l.readUshorts(i,o,d),o+=2*u.newg.length}}else if(s==4){u.vals=[],d=l.readUshort(i,o),o+=2;for(var m=0;m<d;m++){var v=l.readUshort(i,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+v))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var _=l.readUshort(i,o);o+=2,u.cDef=e._lctf.readClassDef(i,c+_),u.scset=[];var y=l.readUshort(i,o);for(o+=2,m=0;m<y;m++){var g=l.readUshort(i,o);o+=2,u.scset.push(g==0?null:e.GSUB.readSubClassSet(i,c+g))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(m=0;m<3;m++){d=l.readUshort(i,o),o+=2;for(var x=[],S=0;S<d;S++)x.push(e._lctf.readCoverage(i,c+l.readUshort(i,o+2*S)));o+=2*d,m==0&&(u.backCvg=x),m==1&&(u.inptCvg=x),m==2&&(u.ahedCvg=x)}d=l.readUshort(i,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,o,d)}}else{if(s==7&&u.fmt==1){var A=l.readUshort(i,o);o+=2;var M=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=A;else if(a.ltype!=A)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,c+M)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],c=o(i,s);s+=2;for(var u=0;u<c;u++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),c=o(i,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(i,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(i,s,u),s+=2*a[l[c]].length}return u=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,o,a);var u=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},d=0;d<u;d++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var v=m>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(i,s),s+=4;var d=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(d),v.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var d=0;d<f;d++)c.push(l.readUshort(i,s+(d<<1))<<1);if(u==1)for(d=0;d<f;d++)c.push(l.readUint(i,s+(d<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},c=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,m=0;m<c;m++){var v=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var S=a.readUshort(i,s);s+=2;var A,M=f[g],C=d+12*c+S;if(v==0)A=a.readUnicode(i,C,x/2);else if(v==3&&_==0)A=a.readUnicode(i,C,x/2);else if(_==0)A=a.readASCII(i,C,x);else if(_==1)A=a.readUnicode(i,C,x/2);else if(_==3)A=a.readUnicode(i,C,x/2);else{if(v!=1)throw"unknown encoding "+_+", platformID: "+v;A=a.readASCII(i,C,x),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var R="p"+v+","+y.toString(16);l[R]==null&&(l[R]={}),l[R][M!==void 0?M:g]=A,l[R]._lang=y}for(var T in l)if(l[T].postScriptName!=null&&l[T]._lang==1033)return l[T];for(var T in l)if(l[T].postScriptName!=null&&l[T]._lang==0)return l[T];for(var T in l)if(l[T].postScriptName!=null&&l[T]._lang==3084)return l[T];for(var T in l)if(l[T].postScriptName!=null)return l[T];for(var T in l){u=T;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,d=1&i.flags[c],m=1&i.flags[u],v=1&i.flags[f],_=i.xs[c],y=i.ys[c];if(c==a)if(d){if(!m){e.U.P.moveTo(s,_,y);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else m?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+_)/2,(i.ys[u]+y)/2);d?m&&e.U.P.lineTo(s,_,y):v?e.U.P.qcurveTo(s,_,y,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,_,y,(_+i.xs[f])/2,(y+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},c=i.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],m=l.crds[f+1];o.crds.push(d*u.a+m*u.b+u.tx),o.crds.push(d*u.c+m*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,f=[],d=0;d<u.length;d++){var m=u[d];if(m.tag=="kern"){a=!0;for(var v=0;v<m.tab.length;v++)if(!f[m.tab[v]]){f[m.tab[v]]=!0;for(var _=c[m.tab[v]],y=0;y<_.tabs.length;y++)if(_.tabs[y]!=null){var g,x=_.tabs[y];if((!x.coverage||(g=e._lctf.coverageIndex(x.coverage,s))!=-1)&&_.ltype!=1){if(_.ltype==2){var S=null;if(x.fmt==1){var A=x.pairsets[g];for(d=0;d<A.length;d++)A[d].gid2==o&&(S=A[d])}else if(x.fmt==2){var M=e.U._getGlyphClass(s,x.classDef1),C=e.U._getGlyphClass(o,x.classDef2);S=x.matrix[M][C]}if(S){var R=0;return S.val1&&S.val1[2]&&(R+=S.val1[2]),S.val2&&S.val2[0]&&(R+=S.val2[0]),R}}}}}}}if(i.kern&&!a){var T=i.kern.glyph1.indexOf(s);if(T!=-1){var b=i.kern.rval[T].glyph2.indexOf(o);if(b!=-1)return i.kern.rval[T].vals[b]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[u];else if(o.ltype==4)for(var d=f.vals[u],m=0;m<d.length;m++){var v=d[m],_=v.chain.length;if(!(_>l)){for(var y=!0,g=0,x=0;x<_;x++){for(;i[s+g+(1+x)]==-1;)g++;v.chain[x]!=i[s+g+(1+x)]&&(y=!1)}if(y){for(i[s]=v.nglyph,x=0;x<_+g;x++)i[s+x+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var S=e._lctf.getInterval(f.cDef,i[s]),A=f.cDef[S+2],M=f.scset[A],C=0;C<M.length;C++){var R=M[C],T=R.input;if(!(T.length>l)){for(y=!0,x=0;x<T.length;x++){var b=e._lctf.getInterval(f.cDef,i[s+1+x]);if(S==-1&&f.cDef[b+2]!=T[x]){y=!1;break}}if(y){var L=R.substLookupRecords;for(m=0;m<L.length;m+=2)L[m],L[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var O=f.lookupRec;for(C=0;C<O.length;C+=2){S=O[C];var k=a[O[C+1]];e.U._applySubs(i,s+S,k,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,d=e.U.glyphToPath(i,u),m=0;m<d.crds.length;m+=2)a.crds.push(d.crds[m]+l),a.crds.push(d.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<d.cmds.length;m++)a.cmds.push(d.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,c,u){i.cmds.push("C"),i.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,d=s.width,m=s.open,v=0,_=s.x,y=s.y,g=0,x=0,S=0,A=0,M=0,C=0,R=0,T=0,b=0,L=0,O={val:0,size:0};v<i.length;){e.CFF.getCharString(i,v,O);var k=O.val;if(v+=O.size,k=="o1"||k=="o18")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(k=="o3"||k=="o23")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(k=="o4")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),y+=c.pop(),e.U.P.moveTo(l,_,y),m=!0;else if(k=="o5")for(;c.length>0;)_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y);else if(k=="o6"||k=="o7")for(var z=c.length,V=k=="o6",j=0;j<z;j++){var Q=c.shift();V?_+=Q:y+=Q,V=!V,e.U.P.lineTo(l,_,y)}else if(k=="o8"||k=="o24"){z=c.length;for(var ne=0;ne+6<=z;)g=_+c.shift(),x=y+c.shift(),S=g+c.shift(),A=x+c.shift(),_=S+c.shift(),y=A+c.shift(),e.U.P.curveTo(l,g,x,S,A,_,y),ne+=6;k=="o24"&&(_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y))}else{if(k=="o11")break;if(k=="o1234"||k=="o1235"||k=="o1236"||k=="o1237")k=="o1234"&&(x=y,S=(g=_+c.shift())+c.shift(),L=A=x+c.shift(),C=A,T=y,_=(R=(M=(b=S+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,g,x,S,A,b,L),e.U.P.curveTo(l,M,C,R,T,_,y)),k=="o1235"&&(g=_+c.shift(),x=y+c.shift(),S=g+c.shift(),A=x+c.shift(),b=S+c.shift(),L=A+c.shift(),M=b+c.shift(),C=L+c.shift(),R=M+c.shift(),T=C+c.shift(),_=R+c.shift(),y=T+c.shift(),c.shift(),e.U.P.curveTo(l,g,x,S,A,b,L),e.U.P.curveTo(l,M,C,R,T,_,y)),k=="o1236"&&(g=_+c.shift(),x=y+c.shift(),S=g+c.shift(),L=A=x+c.shift(),C=A,R=(M=(b=S+c.shift())+c.shift())+c.shift(),T=C+c.shift(),_=R+c.shift(),e.U.P.curveTo(l,g,x,S,A,b,L),e.U.P.curveTo(l,M,C,R,T,_,y)),k=="o1237"&&(g=_+c.shift(),x=y+c.shift(),S=g+c.shift(),A=x+c.shift(),b=S+c.shift(),L=A+c.shift(),M=b+c.shift(),C=L+c.shift(),R=M+c.shift(),T=C+c.shift(),Math.abs(R-_)>Math.abs(T-y)?_=R+c.shift():y=T+c.shift(),e.U.P.curveTo(l,g,x,S,A,b,L),e.U.P.curveTo(l,M,C,R,T,_,y));else if(k=="o14"){if(c.length>0&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),c.length==4){var G=c.shift(),J=c.shift(),Y=c.shift(),X=c.shift(),$=e.CFF.glyphBySE(o,Y),re=e.CFF.glyphBySE(o,X);e.U._drawCFF(o.CharStrings[$],s,o,a,l),s.x=G,s.y=J,e.U._drawCFF(o.CharStrings[re],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(k=="o19"||k=="o20")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,v+=u+7>>3;else if(k=="o21")c.length>2&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),y+=c.pop(),_+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,y),m=!0;else if(k=="o22")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),_+=c.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,y),m=!0;else if(k=="o25"){for(;c.length>6;)_+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,_,y);g=_+c.shift(),x=y+c.shift(),S=g+c.shift(),A=x+c.shift(),_=S+c.shift(),y=A+c.shift(),e.U.P.curveTo(l,g,x,S,A,_,y)}else if(k=="o26")for(c.length%2&&(_+=c.shift());c.length>0;)g=_,x=y+c.shift(),_=S=g+c.shift(),y=(A=x+c.shift())+c.shift(),e.U.P.curveTo(l,g,x,S,A,_,y);else if(k=="o27")for(c.length%2&&(y+=c.shift());c.length>0;)x=y,S=(g=_+c.shift())+c.shift(),A=x+c.shift(),_=S+c.shift(),y=A,e.U.P.curveTo(l,g,x,S,A,_,y);else if(k=="o10"||k=="o29"){var ie=k=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var ae=c.pop(),ue=ie.Subrs[ae+ie.Bias];s.x=_,s.y=y,s.nStems=u,s.haveWidth=f,s.width=d,s.open=m,e.U._drawCFF(ue,s,o,a,l),_=s.x,y=s.y,u=s.nStems,f=s.haveWidth,d=s.width,m=s.open}}else if(k=="o30"||k=="o31"){var fe=c.length,_e=(ne=0,k=="o31");for(ne+=fe-(z=-3&fe);ne<z;)_e?(x=y,S=(g=_+c.shift())+c.shift(),y=(A=x+c.shift())+c.shift(),z-ne==5?(_=S+c.shift(),ne++):_=S,_e=!1):(g=_,x=y+c.shift(),S=g+c.shift(),A=x+c.shift(),_=S+c.shift(),z-ne==5?(y=A+c.shift(),ne++):y=A,_e=!0),e.U.P.curveTo(l,g,x,S,A,_,y),ne+=4}else{if((k+"").charAt(0)=="o")throw console.debug("Unknown operation: "+k,i),k;c.push(k)}}}s.x=_,s.y=y,s.nStems=u,s.haveWidth=f,s.width=d,s.open=m};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Xae(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(k,z){for(var V=new t(31),j=0;j<31;++j)V[j]=z+=1<<k[j-1];var Q=new r(V[30]);for(j=1;j<30;++j)for(var ne=V[j];ne<V[j+1];++ne)Q[ne]=ne-V[j]<<5|j;return[V,Q]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],d=new t(32768),m=0;m<32768;++m){var v=(43690&m)>>>1|(21845&m)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,d[m]=((65280&v)>>>8|(255&v)<<8)>>>1}var _=function(k,z,V){for(var j=k.length,Q=0,ne=new t(z);Q<j;++Q)++ne[k[Q]-1];var G,J=new t(z);for(Q=0;Q<z;++Q)J[Q]=J[Q-1]+ne[Q-1]<<1;if(V){G=new t(1<<z);var Y=15-z;for(Q=0;Q<j;++Q)if(k[Q])for(var X=Q<<4|k[Q],$=z-k[Q],re=J[k[Q]-1]++<<$,ie=re|(1<<$)-1;re<=ie;++re)G[d[re]>>>Y]=X}else for(G=new t(j),Q=0;Q<j;++Q)k[Q]&&(G[Q]=d[J[k[Q]-1]++]>>>15-k[Q]);return G},y=new e(288);for(m=0;m<144;++m)y[m]=8;for(m=144;m<256;++m)y[m]=9;for(m=256;m<280;++m)y[m]=7;for(m=280;m<288;++m)y[m]=8;var g=new e(32);for(m=0;m<32;++m)g[m]=5;var x=_(y,9,1),S=_(g,5,1),A=function(k){for(var z=k[0],V=1;V<k.length;++V)k[V]>z&&(z=k[V]);return z},M=function(k,z,V){var j=z/8|0;return(k[j]|k[j+1]<<8)>>(7&z)&V},C=function(k,z){var V=z/8|0;return(k[V]|k[V+1]<<8|k[V+2]<<16)>>(7&z)},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=function(k,z,V){var j=new Error(z||R[k]);if(j.code=k,Error.captureStackTrace&&Error.captureStackTrace(j,T),!V)throw j;return j},b=function(k,z,V){var j=k.length;if(!j||V&&!V.l&&j<5)return z||new e(0);var Q=!z||V,ne=!V||V.i;V||(V={}),z||(z=new e(3*j));var G,J=function(ze){var Xe=z.length;if(ze>Xe){var tt=new e(Math.max(2*Xe,ze));tt.set(z),z=tt}},Y=V.f||0,X=V.p||0,$=V.b||0,re=V.l,ie=V.d,ae=V.m,ue=V.n,fe=8*j;do{if(!re){V.f=Y=M(k,X,1);var _e=M(k,X+1,3);if(X+=3,!_e){var Oe=k[(Ne=((G=X)/8|0)+(7&G&&1)+4)-4]|k[Ne-3]<<8,We=Ne+Oe;if(We>j){ne&&T(0);break}Q&&J($+Oe),z.set(k.subarray(Ne,We),$),V.b=$+=Oe,V.p=X=8*We;continue}if(_e==1)re=x,ie=S,ae=9,ue=5;else if(_e==2){var xe=M(k,X,31)+257,W=M(k,X+10,15)+4,Ae=xe+M(k,X+5,31)+1;X+=14;for(var ge=new e(Ae),ve=new e(19),me=0;me<W;++me)ve[o[me]]=M(k,X+3*me,7);X+=3*W;var Ge=A(ve),Se=(1<<Ge)-1,Fe=_(ve,Ge,1);for(me=0;me<Ae;){var Ne,Ie=Fe[M(k,X,Se)];if(X+=15&Ie,(Ne=Ie>>>4)<16)ge[me++]=Ne;else{var st=0,N=0;for(Ne==16?(N=3+M(k,X,3),X+=2,st=ge[me-1]):Ne==17?(N=3+M(k,X,7),X+=3):Ne==18&&(N=11+M(k,X,127),X+=7);N--;)ge[me++]=st}}var U=ge.subarray(0,xe),le=ge.subarray(xe);ae=A(U),ue=A(le),re=_(U,ae,1),ie=_(le,ue,1)}else T(1);if(X>fe){ne&&T(0);break}}Q&&J($+131072);for(var Pe=(1<<ae)-1,Te=(1<<ue)-1,Re=X;;Re=X){var $e=(st=re[C(k,X)&Pe])>>>4;if((X+=15&st)>fe){ne&&T(0);break}if(st||T(2),$e<256)z[$++]=$e;else{if($e==256){Re=X,re=null;break}var He=$e-254;if($e>264){var be=i[me=$e-257];He=M(k,X,(1<<be)-1)+c[me],X+=be}var Je=ie[C(k,X)&Te],Ze=Je>>>4;if(Je||T(3),X+=15&Je,le=f[Ze],Ze>3&&(be=s[Ze],le+=C(k,X)&(1<<be)-1,X+=be),X>fe){ne&&T(0);break}Q&&J($+131072);for(var je=$+He;$<je;$+=4)z[$]=z[$-le],z[$+1]=z[$+1-le],z[$+2]=z[$+2-le],z[$+3]=z[$+3-le];$=je}}V.l=re,V.p=Re,V.b=$,re&&(Y=1,V.m=ae,V.d=ie,V.n=ue)}while(!Y);return $==z.length?z:function(ze,Xe,tt){(Xe==null||Xe<0)&&(Xe=0),(tt==null||tt>ze.length)&&(tt=ze.length);var ft=new(ze instanceof t?t:ze instanceof r?r:e)(tt-Xe);return ft.set(ze.subarray(Xe,tt)),ft}(z,0,$)},L=new e(0),O=typeof TextDecoder<"u"&&new TextDecoder;try{O.decode(L,{stream:!0})}catch{}return n.convert_streams=function(k){var z=new DataView(k),V=0;function j(){var xe=z.getUint16(V);return V+=2,xe}function Q(){var xe=z.getUint32(V);return V+=4,xe}function ne(xe){Oe.setUint16(We,xe),We+=2}function G(xe){Oe.setUint32(We,xe),We+=4}for(var J={signature:Q(),flavor:Q(),length:Q(),numTables:j(),reserved:j(),totalSfntSize:Q(),majorVersion:j(),minorVersion:j(),metaOffset:Q(),metaLength:Q(),metaOrigLength:Q(),privOffset:Q(),privLength:Q()},Y=0;Math.pow(2,Y)<=J.numTables;)Y++;Y--;for(var X=16*Math.pow(2,Y),$=16*J.numTables-X,re=12,ie=[],ae=0;ae<J.numTables;ae++)ie.push({tag:Q(),offset:Q(),compLength:Q(),origLength:Q(),origChecksum:Q()}),re+=16;var ue,fe=new Uint8Array(12+16*ie.length+ie.reduce(function(xe,W){return xe+W.origLength+4},0)),_e=fe.buffer,Oe=new DataView(_e),We=0;return G(J.flavor),ne(J.numTables),ne(X),ne(Y),ne($),ie.forEach(function(xe){G(xe.tag),G(xe.origChecksum),G(re),G(xe.origLength),xe.outOffset=re,(re+=xe.origLength)%4!=0&&(re+=4-re%4)}),ie.forEach(function(xe){var W,Ae=k.slice(xe.offset,xe.offset+xe.compLength);if(xe.compLength!=xe.origLength){var ge=new Uint8Array(xe.origLength);W=new Uint8Array(Ae,2),b(W,ge)}else ge=new Uint8Array(Ae);fe.set(ge,xe.outOffset);var ve=0;(re=xe.outOffset+xe.origLength)%4!=0&&(ve=4-re%4),fe.set(new Uint8Array(ve).buffer,xe.outOffset+xe.origLength),ue=re+ve}),_e.slice(0,ue)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function Jae(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,c=32;let u;function f(M){if(!u){const C={R:s,L:i,D:o,C:l,U:c,T:a};u=new Map;for(let R in r){let T=0;r[R].split(",").forEach(b=>{let[L,O]=b.split("+");L=parseInt(L,36),O=O?parseInt(O,36):0,u.set(T+=L,C[R]);for(let k=O;k--;)u.set(++T,C[R])})}}return u.get(M)||c}const d=1,m=2,v=3,_=4,y=[null,"isol","init","fina","medi"];function g(M){const C=new Uint8Array(M.length);let R=c,T=d,b=-1;for(let L=0;L<M.length;L++){const O=M.codePointAt(L);let k=f(O)|0,z=d;k&a||(R&(i|o|l)?k&(s|o|l)?(z=v,(T===d||T===v)&&C[b]++):k&(i|c)&&(T===m||T===_)&&C[b]--:R&(s|c)&&(T===m||T===_)&&C[b]--,T=C[L]=z,R=k,b=L,O>65535&&L++)}return C}function x(M,C){const R=[];for(let b=0;b<C.length;b++){const L=C.codePointAt(b);L>65535&&b++,R.push(n.U.codeToGlyph(M,L))}const T=M.GSUB;if(T){const{lookupList:b,featureList:L}=T;let O;const k=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,z=[];L.forEach(V=>{if(k.test(V.tag))for(let j=0;j<V.tab.length;j++){if(z[V.tab[j]])continue;z[V.tab[j]]=!0;const Q=b[V.tab[j]],ne=/^(isol|init|fina|medi)$/.test(V.tag);ne&&!O&&(O=g(C));for(let G=0;G<R.length;G++)(!O||!ne||y[O[G]]===V.tag)&&n.U._applySubs(R,G,Q,b)}})}return R}function S(...M){for(let C=0;C<M.length;C++)if(typeof M[C]=="number")return M[C]}function A(M){const C=Object.create(null),R=M["OS/2"],T=M.hhea,b=M.head.unitsPerEm,L=S(R&&R.sTypoAscender,T&&T.ascender,b),O={unitsPerEm:b,ascender:L,descender:S(R&&R.sTypoDescender,T&&T.descender,0),capHeight:S(R&&R.sCapHeight,L),xHeight:S(R&&R.sxHeight,L),lineGap:S(R&&R.sTypoLineGap,T&&T.lineGap),forEachGlyph(k,z,V,j){let Q=0;const ne=1/O.unitsPerEm*z,G=x(M,k);let J=0,Y=-1;return G.forEach((X,$)=>{if(X!==-1){let re=C[X];if(!re){const{cmds:ie,crds:ae}=n.U.glyphToPath(M,X);let ue="",fe=0;for(let W=0,Ae=ie.length;W<Ae;W++){const ge=t[ie[W]];ue+=ie[W];for(let ve=1;ve<=ge;ve++)ue+=(ve>1?",":"")+ae[fe++]}let _e,Oe,We,xe;if(ae.length){_e=Oe=1/0,We=xe=-1/0;for(let W=0,Ae=ae.length;W<Ae;W+=2){let ge=ae[W],ve=ae[W+1];ge<_e&&(_e=ge),ve<Oe&&(Oe=ve),ge>We&&(We=ge),ve>xe&&(xe=ve)}}else _e=We=Oe=xe=0;re=C[X]={index:X,advanceWidth:M.hmtx.aWidth[X],xMin:_e,yMin:Oe,xMax:We,yMax:xe,path:ue,pathCommandCount:ie.length}}Y!==-1&&(Q+=n.U.getPairAdjustment(M,Y,X)*ne),j.call(null,re,Q,J),re.advanceWidth&&(Q+=re.advanceWidth*ne),V&&(Q+=V*z),Y=X}J+=k.codePointAt(J)>65535?2:1}),Q}};return O}return function(C){const R=new Uint8Array(C,0,4),T=n._bin.readASCII(R,0,4);if(T==="wOFF")C=e(C);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return A(n.parse(C)[0])}}const Yae=X0({name:"Typr Font Parser",dependencies:[jae,Xae,Jae],init(n,e,t){const r=n(),i=e();return t(r,i)}}),vd={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Kae=new it;function Yf(){return(self.performance||Date).now()}const mL=Object.create(null);function _9(n,e){n=qae({},n);const t=Yf();if(n.font=ele(n.font||vd.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||vd.sdfGlyphSize,n.colorRanges!=null){let f={};for(let d in n.colorRanges)if(n.colorRanges.hasOwnProperty(d)){let m=n.colorRanges[d];typeof m!="number"&&(m=Kae.set(m).getHex()),f[d]=m}n.colorRanges=f}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=vd,{sdfGlyphSize:s}=n,o=r/s*4;let a=mL[s];if(!a){const f=document.createElement("canvas");f.width=r,f.height=s*256/o,a=mL[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new Tn(f,void 0,void 0,void 0,mn,mn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,Zae(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(n.font);u||a.glyphsByFont.set(n.font,u=new Map),nle(n).then(f=>{const{glyphIds:d,glyphPositions:m,fontSize:v,unitsPerEm:_,timings:y}=f,g=[],x=new Float32Array(d.length*4),S=v/_;let A=0,M=0;const C=Yf();d.forEach((O,k)=>{let z=u.get(O);if(!z){const{path:ne,pathBounds:G}=f.glyphData[O],J=Math.max(G[2]-G[0],G[3]-G[1])/s*(vd.sdfMargin*s+.5),Y=a.glyphCount++,X=[G[0]-J,G[1]-J,G[2]+J,G[3]+J];u.set(O,z={path:ne,atlasIndex:Y,sdfViewBox:X}),g.push(z)}const{sdfViewBox:V}=z,j=m[M++],Q=m[M++];x[A++]=j+V[0]*S,x[A++]=Q+V[1]*S,x[A++]=j+V[2]*S,x[A++]=Q+V[3]*S,d[k]=z.atlasIndex}),y.quads=(y.quads||0)+(Yf()-C);const R=Yf();y.sdf={};const T=c.height,b=Math.ceil(a.glyphCount/o),L=Math.pow(2,Math.ceil(Math.log2(b*s)));L>T&&(console.info(`Increasing SDF texture size ${T}->${L}`),$ae(c,r,L),l.dispose()),Promise.all(g.map(O=>x9(O,a,n.gpuAccelerateSDF).then(({timing:k})=>{y.sdf[O.atlasIndex]=k}))).then(()=>{g.length&&!a.contextLost&&(S9(a),l.needsUpdate=!0),y.sdfTotal=Yf()-R,y.total=Yf()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:x,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{a.contextLost||Wae(c)})}function x9({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=vd,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),f=u%(a/r)*r,d=Math.floor(u/(a/r))*r,m=e%4;return kae(r,r,n,t,c,l,i,f,d,m,o)}function Zae(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(x9(s,n,!0))})}),Promise.all(r).then(()=>{S9(n),n.sdfTexture.needsUpdate=!0})})}function Qae({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;_9({font:n,sdfGlyphSize:t,text:i},r)}function qae(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let n1;function ele(n){return n1||(n1=typeof document>"u"?{}:document.createElement("a")),n1.href=n,n1.href}function S9(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const tle=X0({name:"Typesetter",dependencies:[vd,Yae,Uae,Rae],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),nle=X0({name:"Typesetter",dependencies:[tle],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),gL={};function rle(n){let e=gL[n];if(!e){const t=new da(1,1,n,n),r=t.clone(),i=t.attributes,s=r.attributes,o=new Ft,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new gt([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...t.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=gL[n]=o}return e}const ile="aTroikaGlyphBounds",vL="aTroikaGlyphIndex",sle="aTroikaGlyphColor";class ole extends cC{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ts,this.boundingBox=new uo}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===si?t/2:0,e===Ai?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=rle(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){xw(this,ile,e,4),xw(this,vL,t,1),xw(this,sle,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=i/2,f=i*2,d=Math.abs(t),m=e[0]/d,v=e[2]/d,_=s((m+u)/f)!==s((v+u)/f)?-d:o(l(m)*d,l(v)*d),y=s((m-u)/f)!==s((v-u)/f)?d:a(l(m)*d,l(v)*d),g=s((m+i)/f)!==s((v+i)/f)?d*2:a(d-c(m)*d,d-c(v)*d);r.min.set(_,e[1],t<0?-g:0),r.max.set(y,e[3],t<0?0:g)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(vL).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function xw(n,e,t,r){const i=n.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(n.setAttribute(e,new Hu(t,r)),delete n._maxInstanceCount,n.dispose()):i&&n.deleteAttribute(e)}const ale=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,lle=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,cle=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ule=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function fle(n){const e=i2(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ve},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new hn(0,0,0,0)},uTroikaClipRect:{value:new hn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ve},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new it},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new zt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:ale,vertexTransform:lle,fragmentDefs:cle,fragmentColorTransform:ule,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(v9,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const fb=new Wi({color:16777215,side:Ai,transparent:!0}),yL=8421504,_L=new Pt,r1=new Z,Sw=new Z,Lp=[],dle=new Z,ww="+x+y";function xL(n){return Array.isArray(n)?n[0]:n}let w9=()=>{const n=new Un(new da(1,1),fb);return w9=()=>n,n},A9=()=>{const n=new Un(new da(1,1,32,1),fb);return A9=()=>n,n};const hle={type:"syncstart"},ple={type:"synccomplete"},E9=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],mle=E9.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let M9=class extends Un{constructor(){const e=new ole;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=yL,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ww,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(hle),_9({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(ple),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Lo}onAfterRender(e,t,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=fb.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=fle(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return xL(this.material).getDepthMaterial()}get customDistanceMaterial(){return xL(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let c=0,u=0,f=0,d,m,v,_=0,y=0;if(t){let{outlineWidth:x,outlineOffsetX:S,outlineOffsetY:A,outlineBlur:M,outlineOpacity:C}=this;c=this._parsePercent(x)||0,u=Math.max(0,this._parsePercent(M)||0),d=C,_=this._parsePercent(S)||0,y=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(v=this.strokeColor,r.uTroikaStrokeColor.value.set(v??yL),m=this.strokeOpacity,m==null&&(m=1)),d=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(_,y),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=d??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let g=this.clipRect;if(g&&Array.isArray(g)&&g.length===4)r.uTroikaClipRect.value.fromArray(g);else{const x=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new it;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||ww;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==ww&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,d]=l;r1.set(0,0,0)[u]=c==="-"?1:-1,Sw.set(0,0,0)[d]=f==="-"?-1:1,_L.lookAt(dle,r1.cross(Sw),Sw),a.setFromMatrix4(_L)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ve){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new Ve){return r1.copy(e),this.localPositionToTextCoords(this.worldToLocal(r1),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?A9():w9(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const d=s[1]+c.getY(u)*(s[3]-s[1]);let m=0;i&&(m=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(u,f,d,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Lp.length=0,o.raycast(e,Lp);for(let u=0;u<Lp.length;u++)Lp[u].object=this,t.push(Lp[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,mle.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};E9.forEach(n=>{const e="_private_"+n;Object.defineProperty(M9.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const o2=B.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},c)=>{const u=Ti(({invalidate:v})=>v),[f]=B.useState(()=>new M9),[d,m]=B.useMemo(()=>{const v=[];let _="";return B.Children.forEach(s,y=>{typeof y=="string"||typeof y=="number"?_+=y:v.push(y)}),[v,_]},[s]);return rF(()=>new Promise(v=>Qae({font:r,characters:o},v)),["troika-text",r,o]),B.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),B.useEffect(()=>()=>f.dispose(),[f]),B.createElement("primitive",Rn({object:f,ref:c,font:r,text:m,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:n},l),d)});let i1=null;function C9(n,e,t){return r=>{t&&t(r),n&&(i1||(i1=new Sae),i1.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(i1)),e&&r.setMeshoptDecoder(typeof yw=="function"?yw():yw)}}function Dy(n,e=!0,t=!0,r){return Eh(ub,n,C9(e,t,r))}Dy.preload=(n,e=!0,t=!0,r)=>Eh.preload(ub,n,C9(e,t,r));Dy.clear=n=>Eh.clear(ub,n);const gle=B.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=B.useRef(null),c=B.useRef(Math.random()*1e4);return Ah(u=>{var f,d;if(!e||t===0)return;const m=c.current+u.clock.getElapsedTime();l.current.rotation.x=Math.cos(m/4*t)/8*r,l.current.rotation.y=Math.sin(m/4*t)/8*r,l.current.rotation.z=Math.sin(m/4*t)/20*r;let v=Math.sin(m/4*t)/10;v=zl.mapLinear(v,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(d=s==null?void 0:s[1])!==null&&d!==void 0?d:.1),l.current.position.y=v*i,l.current.updateMatrix()}),B.createElement("group",o,B.createElement("group",{ref:ose([l,a]),matrixAutoUpdate:!1},n))}),Aw={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},vle="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",SL=n=>Array.isArray(n);function b9({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s,o,a;let l=null,c=!1,u;if(t){if(!(t in Aw))throw new Error("Preset must be one of: "+Object.keys(Aw).join(", "));n=Aw[t],e=vle}if(c=SL(n),u=SL(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(o=s.split("?"))==null||(a=o.shift())==null?void 0:a.toLowerCase(),l=c?k5:u==="hdr"?_ae:u==="exr"?xae:null,!l)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=Eh(l,c?[n]:n,_=>{_.setPath==null||_.setPath(e),i&&i(_)}),d=c?f[0]:f;d.mapping=c?Qa:Wd;const m=3001,v=3e3;return"colorSpace"in d?d.colorSpace=r??c?"srgb":"srgb-linear":d.encoding=r??c?m:v,d}const yle=n=>n.current&&n.current.isScene,_le=n=>yle(n)?n.current:n;function db(n,e,t,r,i=0){const s=_le(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function hb({scene:n,background:e=!1,blur:t,map:r}){const i=Ti(s=>s.scene);return B.useLayoutEffect(()=>{if(r)return db(e,n,i,r,t)},[i,n,r,e,t]),null}function T9({background:n=!1,scene:e,blur:t,...r}){const i=b9(r),s=Ti(o=>o.scene);return B.useLayoutEffect(()=>db(n,e,s,i,t),[i,n,e,s,t]),null}function xle({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:u,preset:f=void 0,extensions:d}){const m=Ti(S=>S.gl),v=Ti(S=>S.scene),_=B.useRef(null),[y]=B.useState(()=>new Gu),g=B.useMemo(()=>{const S=new NM(r);return S.texture.type=Mi,S},[r]);B.useLayoutEffect(()=>(i===1&&_.current.update(m,y),db(o,l,v,g.texture,a)),[n,y,g.texture,l,v,o,i,m]);let x=1;return Ah(()=>{(i===1/0||x<i)&&(_.current.update(m,y),x++)}),B.createElement(B.Fragment,null,QX(B.createElement(B.Fragment,null,n,B.createElement("cubeCamera",{ref:_,args:[e,t,g]}),c||f?B.createElement(T9,{background:!0,files:c,preset:f,path:u,extensions:d}):s?B.createElement(hb,{background:!0,map:s,extensions:d}):null),y))}function Sle(n){var e,t,r,i;const s=b9(n),o=n.map||s;B.useMemo(()=>iF({GroundProjectedEnvImpl:koe}),[]);const a=B.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return B.createElement(B.Fragment,null,B.createElement(hb,Rn({},n,{map:o})),B.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function wle(n){return n.ground?B.createElement(Sle,n):n.map?B.createElement(hb,n):n.children?B.createElement(xle,n):B.createElement(T9,n)}const Ale=B.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:r=1,height:i=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:d,...m},v)=>{const _=B.useRef(null),y=Ti(V=>V.scene),g=Ti(V=>V.gl),x=B.useRef(null);r=r*(Array.isArray(n)?n[0]:n||1),i=i*(Array.isArray(n)?n[1]:n||1);const[S,A,M,C,R,T,b]=B.useMemo(()=>{const V=new ws(l,l),j=new ws(l,l);j.texture.generateMipmaps=V.texture.generateMipmaps=!1;const Q=new da(r,i).rotateX(Math.PI/2),ne=new Un(Q),G=new y0;G.depthTest=G.depthWrite=!1,G.onBeforeCompile=X=>{X.uniforms={...X.uniforms,ucolor:{value:new it(u)}},X.fragmentShader=X.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),X.fragmentShader=X.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const J=new As(vae),Y=new As(yae);return Y.depthTest=J.depthTest=!1,[V,Q,G,ne,J,Y,j]},[l,r,i,n,u]),L=V=>{C.visible=!0,C.material=R,R.uniforms.tDiffuse.value=S.texture,R.uniforms.h.value=V*1/256,g.setRenderTarget(b),g.render(C,x.current),C.material=T,T.uniforms.tDiffuse.value=b.texture,T.uniforms.v.value=V*1/256,g.setRenderTarget(S),g.render(C,x.current),C.visible=!1};let O=0,k,z;return Ah(()=>{x.current&&(e===1/0||O<e)&&(O++,k=y.background,z=y.overrideMaterial,_.current.visible=!1,y.background=null,y.overrideMaterial=M,g.setRenderTarget(S),g.render(y,x.current),L(s),c&&L(s*.4),g.setRenderTarget(null),_.current.visible=!0,y.overrideMaterial=z,y.background=k)}),B.useImperativeHandle(v,()=>_.current,[]),B.createElement("group",Rn({"rotation-x":Math.PI/2},m,{ref:_}),B.createElement("mesh",{renderOrder:d,geometry:A,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},B.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:t,depthWrite:f})),B.createElement("orthographicCamera",{ref:x,args:[-r/2,r/2,i/2,-i/2,o,a]}))}),ks=B.memo(({isPerf:n,color:e,colorBlind:t,customData:r,isMemory:i,isShadersInfo:s,metric:o,fontSize:a,offsetY:l=0,offsetX:c,round:u,hasInstance:f})=>{const{width:d,height:m}=Ti(y=>y.viewport),v=B.useRef(null),_=B.useRef(null);return Yre("log",function([g,x]){var S;if(!g||!v.current||(r&&(v.current.text=(Math.round(qs().customData*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)),!o))return;let A=g[o];if(s?A=(S=x.info.programs)==null?void 0:S.length:o==="matriceCount"?A=gs.value:!n&&x.info.render&&(A=(i?x.info.memory:x.info.render)[o]),o==="fps"&&(v.current.color=qs().overclockingFps?ni(t).overClock.toString():`rgb(${ni(t).fps.toString()})`),v.current.text=(Math.round(A*Math.pow(10,u))/Math.pow(10,u)).toFixed(u),f){const M=x.info.instance;if(typeof M>"u"&&o!=="matriceCount")return;let C;o==="matriceCount"?C=gd.value:C=M[o],C>0?(v.current.fontSize=a/1.15,_.current.fontSize=A>0?a/1.4:a,v.current.position.y=m/2-l-a/1.9,_.current.text=" 	"+(Math.round(C*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)):(_.current.text&&(_.current.text=""),v.current.position.y=m/2-l-a,v.current.fontSize=a)}gs.value-=1,v.current.updateMatrix(),v.current.matrixWorld.copy(v.current.matrix)}),ce.jsxs(B.Suspense,{fallback:null,children:[ce.jsxs(o2,{textAlign:"justify",matrixAutoUpdate:!1,ref:v,fontSize:a,position:[-d/2+c+a,m/2-l-a,0],color:e,characters:"0123456789",onUpdate:y=>{y.updateMatrix(),gs.value-=1,y.matrixWorld.copy(y.matrix)},children:[ce.jsx("meshBasicMaterial",{blending:ja}),"0"]}),f&&ce.jsx(o2,{textAlign:"justify",matrixAutoUpdate:!1,ref:_,fontSize:8,position:[-d/2+c+a,m/2-l-a*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:y=>{y.updateMatrix(),gs.value-=1,y.matrixWorld.copy(y.matrix)},children:ce.jsx("meshBasicMaterial",{blending:ja})})]})}),Ele=({colorBlind:n,customData:e,minimal:t,matrixUpdate:r})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(ks,{colorBlind:n,color:`rgb(${ni(n).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),ce.jsx(ks,{color:`rgb(${ni(n).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),ce.jsx(ks,{color:`rgb(${ni(n).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),t?null:ce.jsxs(ce.Fragment,{children:[ce.jsx(ks,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),ce.jsx(ks,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),ce.jsx(ks,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),ce.jsx(ks,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),ce.jsx(ks,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),ce.jsx(ks,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),ce.jsx(ks,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),r&&ce.jsx(ks,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),e&&ce.jsx(ks,{color:`rgb(${ni(n).custom.toString()})`,customData:e,fontSize:14,offsetY:0,offsetX:t?200:320,round:e.round||2})]}),Mle=({colorBlind:n,minimal:e,chart:t={length:120,hz:60}})=>{const r=B.useMemo(()=>({fps:new Float32Array(t.length*3),cpu:new Float32Array(t.length*3),gpu:new Float32Array(t.length*3)}),[t]),i=B.useRef(null),s=B.useRef(null),o=B.useRef(null),a=B.useRef(null),l=B.useMemo(()=>new Z(0,0,0),[]),c=(u,f=1,d,m)=>{let v=0;const{width:_,height:y}=m,g=qs().chart.data[u];if(!g||g.length===0)return;const x=e?2:6,S=e?12:50;let A=g.length;for(let M=0;M<A;M++){let C=(qs().chart.circularId+M+1)%A;g[C]!==void 0&&(g[C]>v&&(v=g[C]*f),l.set(x+M/(A-1)*(_-x*2)-_/2,Math.min(100,g[C])*f/100*(y-x*2-S)-y/2,0),l.toArray(d.attributes.position.array,M*3))}d.attributes.position.needsUpdate=!0};return Ah(function({viewport:f}){c("fps",1,i.current,f),s.current&&s.current.color.set(qs().overclockingFps?ni(n).overClock.toString():`rgb(${ni(n).fps.toString()})`),c("gpu",5,o.current,f),c("cpu",5,a.current,f)}),ce.jsxs(ce.Fragment,{children:[ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),gs.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:i,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.fps,itemSize:3,usage:M1,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{ref:s,color:`rgb(${ni(n).fps.toString()})`,transparent:!0,opacity:.5})]}),ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),gs.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:o,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.gpu,itemSize:3,usage:M1,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{color:`rgb(${ni(n).gpu.toString()})`,transparent:!0,opacity:.5})]}),ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),gs.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:a,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:t.length,array:r.cpu,itemSize:3,usage:M1,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{color:`rgb(${ni(n).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},Cle=({colorBlind:n,chart:e,customData:t,matrixUpdate:r,showGraph:i=!0,antialias:s=!0,minimal:o})=>{const a=B.useRef(void 0),l=lo(c=>c.paused);return ce.jsxs(iie,{style:{display:"flex",position:"absolute",height:`${o?37:i?100:60}px`,minWidth:`${o?"100px":t?"370px":"310px"}`},children:[ce.jsx(MF,{ref:a,orthographic:!0,dpr:s?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:c})=>{c.traverse(u=>{u.matrixWorldAutoUpdate=!1,u.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${o?37:i?100:60}px`},children:l?null:ce.jsxs(ce.Fragment,{children:[ce.jsx(ble,{}),ce.jsx(Ele,{customData:t,minimal:o,matrixUpdate:r}),i&&ce.jsx(Mle,{colorBlind:n,minimal:o,chart:e})]})}),l&&ce.jsxs(sie,{children:[ce.jsx(zie,{})," PAUSED"]})]})},ble=()=>(Ah(function({gl:e,scene:t,camera:r}){r.updateMatrix(),gs.value-=1,r.matrixWorld.copy(r.matrix),r.matrixWorldInverse.copy(r.matrixWorld).invert(),e.render(t,r),gd.value=0,gs.value=0},1/0),null),Tle=B.forwardRef(({portal:n,className:e,children:t,name:r,...i},s)=>{const o=Ti(u=>u.gl),a=B.useRef(null),l=B.useRef(null),c=(n==null?void 0:n.current)!=null?n.current:o.domElement.parentNode;return B.useLayoutEffect(()=>{if(!a.current||!c)return;const u=document.createElement("div"),f=l.current=vM(u);return c.appendChild(u),()=>{f.unmount(),l.current=null,c.removeChild(u)}},[c]),B.useLayoutEffect(()=>{const u=l.current;u&&u.render(ce.jsx("div",{ref:s,className:e,children:t}))}),ce.jsx("group",{name:r,...i,ref:a})});function Rle(n){let e=0;for(let r in n.attributes){const i=n.getAttribute(r);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}const t=n.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}const wL=(n,e)=>{const t=i=>{switch(i){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},r=i=>{switch(i){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:n,url:e.image.currentSrc,encoding:r(e.encoding),wrapT:t(e.wrapT),flipY:e.flipY.toString()}},Ple=({program:n,material:e,setTexNumber:t})=>{const r=lo(o=>o.gl),[i,s]=B.useState(null);return B.useEffect(()=>{if(r){const o=n==null?void 0:n.getUniforms();let a=0;const l=new Map;o.seq.forEach(c=>{if(!c.id.includes("uTroika")&&c.id!=="isOrthographic"&&c.id!=="uvTransform"&&c.id!=="lightProbe"&&c.id!=="projectionMatrix"&&c.id!=="viewMatrix"&&c.id!=="normalMatrix"&&c.id!=="modelMatrix"&&c.id!=="modelViewMatrix"){let u=[],f={name:c.id};c.cache&&(c.cache.forEach(d=>{typeof d<"u"&&u.push(d.toString().substring(0,4))}),f.value=u.join(),e[c.id]&&e[c.id].image&&e[c.id].image&&(a++,f.value=wL(c.id,e[c.id])),f.value||(f.value="empty"),l.set(c.id,f))}}),e.uniforms&&Object.keys(e.uniforms).forEach(c=>{const u=e.uniforms[c];if(u.value){const{value:f}=u;let d={name:c};if(c.includes("uTroika"))return;if(f.isTexture)a++,d.value=wL(c,f);else{let m=JSON.stringify(f);try{m=JSON.stringify(f)}catch{m=f.toString()}d.value=m}l.set(c,d)}}),a>0&&t(a),s(l)}},[]),ce.jsx(Mk,{children:i&&Array.from(i.values()).map(o=>ce.jsx("span",{children:typeof o.value=="string"?ce.jsx("li",{children:ce.jsxs("span",{children:[o.name," :"," ",ce.jsxs("b",{children:[o.value.substring(0,30),o.value.length>30?"...":""]})]})}):ce.jsxs(ce.Fragment,{children:[ce.jsx("li",{children:ce.jsxs("b",{children:[o.value.name,":"]})}),ce.jsxs("div",{children:[Object.keys(o.value).map(a=>a!=="name"?ce.jsx("div",{children:a==="url"?ce.jsx("a",{href:o.value[a],target:"_blank",children:ce.jsx("img",{src:o.value[a]})}):ce.jsxs("li",{children:[a,": ",ce.jsx("b",{children:o.value[a]})]})},a):null),ce.jsxs(Ck,{onClick:()=>{var a;console.info(e[o.value.name]||((a=e==null?void 0:e.uniforms[o.value.name])==null?void 0:a.value))},children:["console.info(",o.value.name,");"]})]})]})},o.name))})},Ile=({el:n})=>{lo(r=>r.log);const e=lo(r=>r.gl),t=r=>{if(!e)return 0;const i=Math.round(r.drawCounts.total/(e.info.render.triangles+e.info.render.lines+e.info.render.points)*100*10)/10;return isFinite(i)&&i||0};return ce.jsx(ce.Fragment,{children:n.drawCounts.total>0&&ce.jsxs(ti,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[n.drawCounts.type==="Triangle"?ce.jsx(Pk,{style:{top:"-1px"}}):ce.jsx(bk,{style:{top:"-1px"}}),n.drawCounts.total,ce.jsxs("small",{children:[n.drawCounts.type,"s"]}),e&&ce.jsxs(Gi,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[n.visible&&!n.material.wireframe?t(n):0,"%"]})]})})},Ble=({el:n})=>{const[e,t]=B.useState(n.visible),[r,i]=B.useState(n.expand),[s,o]=B.useState(0),{meshes:a,program:l,material:c}=n;return ce.jsxs(aie,{children:[ce.jsxs(rie,{onClick:()=>{n.expand=!r,Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!1}),i(!r)},children:[ce.jsx(jC,{style:{marginRight:"6px"},children:r?ce.jsx("span",{children:ce.jsx(Tk,{})}):ce.jsx("span",{children:ce.jsx(Rk,{})})}),l&&ce.jsxs("span",{children:[ce.jsx(lie,{children:l.name}),ce.jsxs(ti,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ce.jsx(Bie,{style:{top:"-1px"}}),Object.keys(a).length,ce.jsx("small",{children:Object.keys(a).length>1?"users":"user"})]}),s>0&&ce.jsxs(ti,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s>1?ce.jsx(NE,{style:{top:"-1px"}}):ce.jsx(NE,{style:{top:"-1px"}}),s,ce.jsx("small",{children:"tex"})]}),ce.jsx(Ile,{el:n}),c.glslVersion==="300 es"&&ce.jsxs(ti,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ce.jsx(Hie,{style:{top:"-1px"}}),"300",ce.jsx("small",{children:"es"}),ce.jsx(Gi,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),ce.jsx(oie,{onPointerEnter:()=>{Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!1})},onClick:u=>{u.stopPropagation(),Object.keys(a).forEach(f=>{const d=a[f],m=!e;d.visible=m,n.visible=m,t(m)})},children:e?ce.jsx(bie,{}):ce.jsx(Mie,{})})]}),ce.jsxs("div",{style:{maxHeight:r?"9999px":0,overflow:"hidden"},children:[ce.jsxs(IB,{children:[ce.jsx(vie,{})," Uniforms:"]}),ce.jsx(Ple,{program:l,material:c,setTexNumber:o}),ce.jsxs(IB,{children:[ce.jsx(_ie,{})," Geometries:"]}),ce.jsx(Mk,{children:a&&Object.keys(a).map(u=>a[u]&&a[u].geometry&&ce.jsxs(die,{children:[ce.jsxs("span",{children:[a[u].geometry.type,": "]}),a[u].userData&&a[u].userData.drawCount&&ce.jsxs("b",{children:[ce.jsxs("div",{children:[a[u].userData.drawCount.count,ce.jsxs("small",{children:[" ",a[u].userData.drawCount.type,"s"]})]}),ce.jsx("br",{}),ce.jsxs("div",{children:[Math.round(Rle(a[u].geometry)/1024*1e3)/1e3,"Kb",ce.jsx("small",{children:" memory used"})]})]})]},u))}),ce.jsxs(Ck,{onClick:()=>{console.info(c)},children:["console.info(",c.type,")"]})]})]})},Lle=()=>{lo(e=>e.triggerProgramsUpdate);const n=lo(e=>e.programs);return ce.jsx(uie,{children:n&&Array.from(n.values()).map(e=>e&&e?ce.jsx(Ble,{el:e},e.material.uuid):null)})},ni=n=>({overClock:"#ff6eff",fps:n?"100, 143, 255":"238,38,110",cpu:n?"254, 254, 98":"66,226,46",gpu:n?"254,254,254":"253,151,31",custom:n?"86,180,233":"40,255,255"}),Dle=({showGraph:n,colorBlind:e})=>{const t=lo(i=>i.overclockingFps),r=lo(i=>i.fpsLimit);return ce.jsxs(Gi,{style:n?{color:t?ni(e).overClock.toString():`rgb(${ni(e).fps})`}:{},children:["FPS ",t?`${r}`:""]})},Ole=({showGraph:n,colorBlind:e,customData:t,minimal:r})=>{const i=lo(s=>s.gl);return i?ce.jsxs(nie,{children:[ce.jsxs(ti,{children:[ce.jsx(Die,{}),ce.jsx(Gi,{style:n?{color:`rgb(${ni(e).gpu.toString()})`}:{},children:"GPU"}),ce.jsx(ow,{children:"ms"})]}),ce.jsxs(ti,{children:[ce.jsx(Wie,{}),ce.jsx(Gi,{style:n?{color:`rgb(${ni(e).cpu.toString()})`}:{},children:"CPU"}),ce.jsx(ow,{children:"ms"})]}),ce.jsxs(ti,{children:[ce.jsx(Pie,{}),ce.jsx(Dle,{showGraph:n,colorBlind:e})]}),!r&&i&&ce.jsxs(ti,{children:[ce.jsx(jie,{}),ce.jsx(Gi,{children:i.info.render.calls===1?"call":"calls"})]}),!r&&i&&ce.jsxs(ti,{children:[ce.jsx(Pk,{}),ce.jsx(Gi,{children:"Triangles"})]}),t&&ce.jsxs(ti,{children:[ce.jsx(mie,{}),ce.jsx(Gi,{style:n?{color:`rgb(${ni(e).custom})`}:{},children:t.name}),t.info&&ce.jsx(ow,{children:t.info})]})]}):null},Fle=({showGraph:n,colorBlind:e,deepAnalyze:t,customData:r,matrixUpdate:i,openByDefault:s,minimal:o})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(Ole,{showGraph:n,colorBlind:e,customData:r,minimal:o}),!o&&ce.jsx(kle,{matrixUpdate:i,openByDefault:s,deepAnalyze:t,showGraph:n})]}),Ule=({matrixUpdate:n})=>ce.jsxs("div",{children:[ce.jsxs(ti,{children:[ce.jsx(Fie,{}),ce.jsx(Gi,{children:"Geometries"})]}),ce.jsxs(ti,{children:[ce.jsx(NE,{}),ce.jsx(Gi,{children:"Textures"})]}),ce.jsxs(ti,{children:[ce.jsx(bk,{}),ce.jsx(Gi,{children:"shaders"})]}),ce.jsxs(ti,{children:[ce.jsx(kie,{}),ce.jsx(Gi,{children:"Lines"})]}),ce.jsxs(ti,{children:[ce.jsx(Sie,{}),ce.jsx(Gi,{children:"Points"})]}),n&&ce.jsxs(ti,{children:[ce.jsx(Aie,{}),ce.jsx(Gi,{children:"Matrices"})]})]}),AL=({tab:n,title:e,set:t})=>{const r=lo(i=>i.tab);return ce.jsx(jC,{className:`${r===n?" __perf_toggle_tab_active":""}`,onClick:()=>{t(!0),cs({tab:n})},children:ce.jsx("span",{children:e})})},kle=({openByDefault:n,showGraph:e,deepAnalyze:t,matrixUpdate:r})=>{const[i,s]=oe.useState(n);return ce.jsxs("span",{children:[ce.jsx(Nle,{show:i,showGraph:e,matrixUpdate:r}),n&&!t?null:ce.jsxs(fie,{className:"__perf_toggle",children:[t&&ce.jsx(AL,{tab:"programs",title:"Programs",set:s}),t&&ce.jsx(AL,{tab:"infos",title:"Infos",set:s}),ce.jsx(jC,{onClick:()=>{s(!i)},children:i?ce.jsxs("span",{children:[ce.jsx(Tk,{})," Minimize"]}):ce.jsxs("span",{children:[ce.jsx(Rk,{})," More"]})})]})]})},Nle=({show:n,showGraph:e,matrixUpdate:t})=>{const r=lo(i=>i.tab);return ce.jsxs(ce.Fragment,{children:[ce.jsx(Ule,{matrixUpdate:t}),n&&ce.jsx("div",{children:ce.jsx(cie,{style:{marginTop:e?"38px":0},children:r==="programs"&&ce.jsx(Lle,{})})})]})},zle=({showGraph:n=!0,colorBlind:e=!1,openByDefault:t=!0,className:r,overClock:i=!1,style:s,position:o="top-right",chart:a,logsPerSecond:l,deepAnalyze:c=!1,antialias:u=!0,customData:f,matrixUpdate:d,minimal:m})=>{const v=B.useRef(null);return ce.jsxs(ce.Fragment,{children:[ce.jsx(eie,{logsPerSecond:l,chart:a,overClock:i,deepAnalyze:c,matrixUpdate:d}),ce.jsx(Tle,{name:"r3f-perf",children:ce.jsxs(tie,{className:(r?" ".concat(r):" ")+` ${o||""} ${m?"minimal":""}`,style:{minHeight:m?"37px":n?"100px":"60px",...s},ref:v,children:[ce.jsx(Cle,{perfContainerRef:v,colorBlind:e,chart:a,showGraph:n,antialias:u,customData:f,minimal:m,matrixUpdate:d}),ce.jsx(Fle,{colorBlind:e,showGraph:n,deepAnalyze:c,openByDefault:t,customData:f,matrixUpdate:d,minimal:m})]})})]})};function Da(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function R9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},oh={duration:.5,overwrite:!1,delay:0},pb,ai,nr,to=1e8,En=1/to,a2=Math.PI*2,Gle=a2/4,Hle=0,P9=Math.sqrt,Vle=Math.cos,Wle=Math.sin,kr=function(e){return typeof e=="string"},rr=function(e){return typeof e=="function"},sl=function(e){return typeof e=="number"},mb=function(e){return typeof e>"u"},fa=function(e){return typeof e=="object"},Yi=function(e){return e!==!1},gb=function(){return typeof window<"u"},s1=function(e){return rr(e)||kr(e)},I9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},li=Array.isArray,l2=/(?:-?\.?\d|\.)+/gi,B9=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,yd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ew=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,L9=/[+-]=-?[.\d]+/,D9=/[^,'"\[\]\s]+/gi,$le=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Wn,Vs,c2,vb,Ms={},Oy={},O9,F9=function(e){return(Oy=Yu(e,Ms))&&Qi},yb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Fy=function(e,t){return!t&&console.warn(e)},U9=function(e,t){return e&&(Ms[e]=t)&&Oy&&(Oy[e]=t)||Ms},t0=function(){return 0},jle={suppressEvents:!0,isStart:!0,kill:!1},B1={suppressEvents:!0,kill:!1},Xle={suppressEvents:!0},_b={},oc=[],u2={},k9,fs={},Mw={},EL=30,L1=[],xb="",Sb=function(e){var t=e[0],r,i;if(fa(t)||rr(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=L1.length;i--&&!L1[i].targetTest(t););r=L1[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new lN(e[i],r)))||e.splice(i,1);return e},Pu=function(e){return e._gsap||Sb(no(e))[0]._gsap},N9=function(e,t,r){return(r=e[t])&&rr(r)?e[t]():mb(r)&&e.getAttribute&&e.getAttribute(t)||r},Ki=function(e,t){return(e=e.split(",")).forEach(t)||e},ur=function(e){return Math.round(e*1e5)/1e5||0},Hr=function(e){return Math.round(e*1e7)/1e7||0},Dd=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},Jle=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},Uy=function(){var e=oc.length,t=oc.slice(0),r,i;for(u2={},oc.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},z9=function(e,t,r,i){oc.length&&!ai&&Uy(),e.render(t,r,i||ai&&t<0&&(e._initted||e._startAt)),oc.length&&!ai&&Uy()},G9=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(D9).length<2?t:kr(e)?e.trim():e},H9=function(e){return e},co=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Yle=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Yu=function(e,t){for(var r in t)e[r]=t[r];return e},ML=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=fa(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},ky=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},pm=function(e){var t=e.parent||Wn,r=e.keyframes?Yle(li(e.keyframes)):co;if(Yi(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},Kle=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},V9=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},z_=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},yc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Iu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Zle=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},f2=function(e,t,r,i){return e._startAt&&(ai?e._startAt.revert(B1):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Qle=function n(e){return!e||e._ts&&n(e.parent)},CL=function(e){return e._repeat?ah(e._tTime,e=e.duration()+e._rDelay)*e:0},ah=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},Ny=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},G_=function(e){return e._end=Hr(e._start+(e._tDur/Math.abs(e._ts||e._rts||En)||0))},H_=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Hr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),G_(e),r._dirty||Iu(r,e)),e},W9=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Ny(e.rawTime(),t),(!t._dur||J0(0,t.totalDuration(),r)-t._tTime>En)&&t.render(r,!0)),Iu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-En}},Qo=function(e,t,r,i){return t.parent&&yc(t),t._start=Hr((sl(r)?r:r||e!==Wn?Gs(e,r,t):e._time)+t._delay),t._end=Hr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),V9(e,t,"_first","_last",e._sort?"_start":0),d2(t)||(e._recent=t),i||W9(e,t),e._ts<0&&H_(e,e._tTime),e},$9=function(e,t){return(Ms.ScrollTrigger||yb("scrollTrigger",t))&&Ms.ScrollTrigger.create(t,e)},j9=function(e,t,r,i,s){if(Ab(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!ai&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&k9!==hs.frame)return oc.push(e),e._lazy=[s,i],1},qle=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},d2=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},ece=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&qle(e)&&!(!e._initted&&d2(e))||(e._ts<0||e._dp._ts<0)&&!d2(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=J0(0,e._tDur,t),u=ah(l,a),e._yoyo&&u&1&&(o=1-o),u!==ah(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||ai||i||e._zTime===En||!t&&e._zTime){if(!e._initted&&j9(e,t,i,r,l))return;for(f=e._zTime,e._zTime=t||(r?En:0),r||(r=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&f2(e,t,r,!0),e._onUpdate&&!r&&ro(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&ro(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&yc(e,1),!r&&!ai&&(ro(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},tce=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},lh=function(e,t,r,i){var s=e._repeat,o=Hr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Hr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&H_(e,e._tTime=e._tDur*a),e.parent&&G_(e),r||Iu(e.parent,e),e},bL=function(e){return e instanceof Hi?Iu(e):lh(e,e._dur)},nce={_start:0,endTime:t0,totalDuration:t0},Gs=function n(e,t,r){var i=e.labels,s=e._recent||nce,o=e.duration()>=to?s.endTime(!1):e._dur,a,l,c;return kr(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(li(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},mm=function(e,t,r){var i=sl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Yi(l.vars.inherit)&&l.parent;o.immediateRender=Yi(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new _r(t[0],o,t[s+1])},Tc=function(e,t){return e||e===0?t(e):t},J0=function(e,t,r){return r<e?e:r>t?t:r},ri=function(e,t){return!kr(e)||!(t=$le.exec(e))?"":t[1]},rce=function(e,t,r){return Tc(r,function(i){return J0(e,t,i)})},h2=[].slice,X9=function(e,t){return e&&fa(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&fa(e[0]))&&!e.nodeType&&e!==Vs},ice=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return kr(i)&&!t||X9(i,1)?(s=r).push.apply(s,no(i)):r.push(i)})||r},no=function(e,t,r){return nr&&!t&&nr.selector?nr.selector(e):kr(e)&&!r&&(c2||!ch())?h2.call((t||vb).querySelectorAll(e),0):li(e)?ice(e,r):X9(e)?h2.call(e,0):e?[e]:[]},p2=function(e){return e=no(e)[0]||Fy("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return no(t,r.querySelectorAll?r:r===e?Fy("Invalid scope")||vb.createElement("div"):e)}},J9=function(e){return e.sort(function(){return .5-Math.random()})},Y9=function(e){if(rr(e))return e;var t=fa(e)?e:{each:e},r=Bu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,f=i;return kr(i)?u=f={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],f=i[1]),function(d,m,v){var _=(v||t).length,y=o[_],g,x,S,A,M,C,R,T,b;if(!y){if(b=t.grid==="auto"?0:(t.grid||[1,to])[1],!b){for(R=-to;R<(R=v[b++].getBoundingClientRect().left)&&b<_;);b--}for(y=o[_]=[],g=l?Math.min(b,_)*u-.5:i%b,x=b===to?0:l?_*f/b-.5:i/b|0,R=0,T=to,C=0;C<_;C++)S=C%b-g,A=x-(C/b|0),y[C]=M=c?Math.abs(c==="y"?A:S):P9(S*S+A*A),M>R&&(R=M),M<T&&(T=M);i==="random"&&J9(y),y.max=R-T,y.min=T,y.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(b>_?_-1:c?c==="y"?_/b:b:Math.max(b,_/b))||0)*(i==="edges"?-1:1),y.b=_<0?s-_:s,y.u=ri(t.amount||t.each)||0,r=r&&_<0?sN(r):r}return _=(y[d]-y.min)/y.max||0,Hr(y.b+(r?r(_):_)*y.v)+y.u}},m2=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Hr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(sl(r)?0:ri(r))}},K9=function(e,t){var r=li(e),i,s;return!r&&fa(e)&&(i=r=e.radius||to,e.values?(e=no(e.values),(s=!sl(e[0]))&&(i*=i)):e=m2(e.increment)),Tc(t,r?rr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=to,u=0,f=e.length,d,m;f--;)s?(d=e[f].x-a,m=e[f].y-l,d=d*d+m*m):d=Math.abs(e[f]-a),d<c&&(c=d,u=f);return u=!i||c<=i?e[u]:o,s||u===o||sl(o)?u:u+ri(o)}:m2(e))},Z9=function(e,t,r,i){return Tc(li(e)?!t:r===!0?!!(r=0):!i,function(){return li(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},sce=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},oce=function(e,t){return function(r){return e(parseFloat(r))+(t||ri(r))}},ace=function(e,t,r){return q9(e,t,0,1,r)},Q9=function(e,t,r){return Tc(r,function(i){return e[~~t(i)]})},lce=function n(e,t,r){var i=t-e;return li(e)?Q9(e,n(0,e.length),t):Tc(r,function(s){return(i+(s-e)%i)%i+e})},cce=function n(e,t,r){var i=t-e,s=i*2;return li(e)?Q9(e,n(0,e.length-1),t):Tc(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},n0=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?D9:l2),r+=e.substr(t,i-t)+Z9(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},q9=function(e,t,r,i,s){var o=t-e,a=i-r;return Tc(s,function(l){return r+((l-e)/o*a||0)})},uce=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=kr(e),a={},l,c,u,f,d;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(li(e)&&!li(t)){for(u=[],f=e.length,d=f-2,c=1;c<f;c++)u.push(n(e[c-1],e[c]));f--,s=function(v){v*=f;var _=Math.min(d,~~v);return u[_](v-_)},r=t}else i||(e=Yu(li(e)?[]:{},e));if(!u){for(l in t)wb.call(a,e,l,"get",t[l]);s=function(v){return Cb(v,a)||(o?e.p:e)}}}return Tc(r,s)},TL=function(e,t,r){var i=e.labels,s=to,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},ro=function(e,t,r){var i=e.vars,s=i[t],o=nr,a=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&oc.length&&Uy(),a&&(nr=a),u=l?s.apply(c,l):s.call(c),nr=o,u},Vp=function(e){return yc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ai),e.progress()<1&&ro(e,"onInterrupt"),e},_d,eN=[],tN=function(e){if(gb()&&e){e=!e.name&&e.default||e;var t=e.name,r=rr(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:t0,render:Cb,add:wb,kill:Cce,modifier:Mce,rawVars:0},o={targetTest:0,get:0,getSetter:Mb,aliases:{},register:0};if(ch(),e!==i){if(fs[t])return;co(i,co(ky(e,s),o)),Yu(i.prototype,Yu(s,ky(e,o))),fs[i.prop=t]=i,e.targetTest&&(L1.push(i),_b[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}U9(t,i),e.register&&e.register(Qi,i,Zi)}else e&&eN.push(e)},An=255,Wp={aqua:[0,An,An],lime:[0,An,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,An],navy:[0,0,128],white:[An,An,An],olive:[128,128,0],yellow:[An,An,0],orange:[An,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[An,0,0],pink:[An,192,203],cyan:[0,An,An],transparent:[An,An,An,0]},Cw=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*An+.5|0},nN=function(e,t,r){var i=e?sl(e)?[e>>16,e>>8&An,e&An]:0:Wp.black,s,o,a,l,c,u,f,d,m,v;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Wp[e])i=Wp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&An,i&An,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&An,e&An]}else if(e.substr(0,3)==="hsl"){if(i=v=e.match(l2),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,i.length>3&&(i[3]*=1),i[0]=Cw(l+1/3,s,o),i[1]=Cw(l,s,o),i[2]=Cw(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(B9),r&&i.length<4&&(i[3]=1),i}else i=e.match(l2)||Wp.transparent;i=i.map(Number)}return t&&!v&&(s=i[0]/An,o=i[1]/An,a=i[2]/An,f=Math.max(s,o,a),d=Math.min(s,o,a),u=(f+d)/2,f===d?l=c=0:(m=f-d,c=u>.5?m/(2-f-d):m/(f+d),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},rN=function(e){var t=[],r=[],i=-1;return e.split(ac).forEach(function(s){var o=s.match(yd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},RL=function(e,t,r){var i="",s=(e+i).match(ac),o=t?"hsla(":"rgba(",a=0,l,c,u,f;if(!s)return e;if(s=s.map(function(d){return(d=nN(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(u=rN(e),l=r.c,l.join(i)!==u.c.join(i)))for(c=e.replace(ac,"1").split(yd),f=c.length-1;a<f;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(c=e.split(ac),f=c.length-1;a<f;a++)i+=c[a]+s[a];return i+c[f]},ac=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Wp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),fce=/hsl[a]?\(/,iN=function(e){var t=e.join(" "),r;if(ac.lastIndex=0,ac.test(t))return r=fce.test(t),e[1]=RL(e[1],r),e[0]=RL(e[0],r,rN(e[1])),!0},r0,hs=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,c,u,f,d,m,v=function _(y){var g=n()-i,x=y===!0,S,A,M,C;if(g>e&&(r+=g-t),i+=g,M=i-r,S=M-o,(S>0||x)&&(C=++f.frame,d=M-f.time*1e3,f.time=M=M/1e3,o+=S+(S>=s?4:s-S),A=1),x||(l=c(_)),A)for(m=0;m<a.length;m++)a[m](M,d,C,y)};return f={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(y){return d/(1e3/(y||60))},wake:function(){O9&&(!c2&&gb()&&(Vs=c2=window,vb=Vs.document||{},Ms.gsap=Qi,(Vs.gsapVersions||(Vs.gsapVersions=[])).push(Qi.version),F9(Oy||Vs.GreenSockGlobals||!Vs.gsap&&Vs||{}),u=Vs.requestAnimationFrame,eN.forEach(tN)),l&&f.sleep(),c=u||function(y){return setTimeout(y,o-f.time*1e3+1|0)},r0=1,v(2))},sleep:function(){(u?Vs.cancelAnimationFrame:clearTimeout)(l),r0=0,c=t0},lagSmoothing:function(y,g){e=y||1/0,t=Math.min(g||33,e)},fps:function(y){s=1e3/(y||240),o=f.time*1e3+s},add:function(y,g,x){var S=g?function(A,M,C,R){y(A,M,C,R),f.remove(S)}:y;return f.remove(y),a[x?"unshift":"push"](S),ch(),S},remove:function(y,g){~(g=a.indexOf(y))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},f}(),ch=function(){return!r0&&hs.wake()},tn={},dce=/^[\d.\-M][\d.\-,\s]/,hce=/["']/g,pce=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(hce,"").trim():+c,i=l.substr(a+1).trim();return t},mce=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},gce=function(e){var t=(e+"").split("("),r=tn[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[pce(t[1])]:mce(e).split(",").map(G9)):tn._CE&&dce.test(e)?tn._CE("",e):r},sN=function(e){return function(t){return 1-e(1-t)}},oN=function n(e,t){for(var r=e._first,i;r;)r instanceof Hi?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Bu=function(e,t){return e&&(rr(e)?e:tn[e]||gce(e))||t},sf=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Ki(e,function(a){tn[a]=Ms[a]=s,tn[o=a.toLowerCase()]=r;for(var l in s)tn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=tn[a+"."+l]=s[l]}),s},aN=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},bw=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/a2*(Math.asin(1/i)||0),a=function(u){return u===1?1:i*Math.pow(2,-10*u)*Wle((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:aN(a);return s=a2/s,l.config=function(c,u){return n(e,c,u)},l},Tw=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:aN(r);return i.config=function(s){return n(e,s)},i};Ki("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;sf(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});tn.Linear.easeNone=tn.none=tn.Linear.easeIn;sf("Elastic",bw("in"),bw("out"),bw());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};sf("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);sf("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});sf("Circ",function(n){return-(P9(1-n*n)-1)});sf("Sine",function(n){return n===1?1:-Vle(n*Gle)+1});sf("Back",Tw("in"),Tw("out"),Tw());tn.SteppedEase=tn.steps=Ms.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-En;return function(a){return((i*J0(0,o,a)|0)+s)*r}}};oh.ease=tn["quad.out"];Ki("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return xb+=n+","+n+"Params,"});var lN=function(e,t){this.id=Hle++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:N9,this.set=t?t.getSetter:Mb},i0=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,lh(this,+t.duration,1,1),this.data=t.data,nr&&(this._ctx=nr,nr.data.push(this)),r0||hs.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,lh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(ch(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(H_(this,r),!s._dp||s.parent||W9(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Qo(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===En||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),z9(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+CL(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+CL(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?ah(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-En?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Ny(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-En?0:this._rts,this.totalTime(J0(-Math.abs(this._delay),this._tDur,i),!0),G_(this),Zle(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ch(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==En&&(this._tTime-=En)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Qo(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Yi(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ny(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=Xle);var i=ai;return ai=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ai=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,bL(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,bL(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Gs(this,r),Yi(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Yi(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-En:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-En,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-En)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=rr(r)?r:H9,a=function(){var c=i.then;i.then=null,rr(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Vp(this)},n}();co(i0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-En,_prom:0,_ps:!1,_rts:1});var Hi=function(n){R9(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Yi(r.sortChildren),Wn&&Qo(r.parent||Wn,Da(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&$9(Da(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return mm(0,arguments,this),this},t.from=function(i,s,o){return mm(1,arguments,this),this},t.fromTo=function(i,s,o,a){return mm(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,pm(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new _r(i,s,Gs(this,o),1),this},t.call=function(i,s,o){return Qo(this,_r.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new _r(i,o,Gs(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,pm(o).immediateRender=Yi(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,f){return a.startAt=o,pm(a).immediateRender=Yi(a.immediateRender),this.staggerTo(i,s,a,l,c,u,f)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:Hr(i),f=this._zTime<0!=i<0&&(this._initted||!c),d,m,v,_,y,g,x,S,A,M,C,R;if(this!==Wn&&u>l&&i>=0&&(u=l),u!==this._tTime||o||f){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),d=u,A=this._start,S=this._ts,g=!S,f&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(C=this._yoyo,y=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,s,o);if(d=Hr(u%y),u===l?(_=this._repeat,d=c):(_=~~(u/y),_&&_===u/y&&(d=c,_--),d>c&&(d=c)),M=ah(this._tTime,y),!a&&this._tTime&&M!==_&&this._tTime-M*y-this._dur<=0&&(M=_),C&&_&1&&(d=c-d,R=1),_!==M&&!this._lock){var T=C&&M&1,b=T===(C&&_&1);if(_<M&&(T=!T),a=T?0:u%c?c:u,this._lock=1,this.render(a||(R?0:Hr(_*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&ro(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,b&&(this._lock=2,a=T?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;oN(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=tce(this,Hr(a),Hr(d)),x&&(u-=d-(d=x._start))),this._tTime=u,this._time=d,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!_&&(ro(this,"onStart"),this._tTime!==u))return this;if(d>=a&&i>=0)for(m=this._first;m;){if(v=m._next,(m._act||d>=m._start)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(d-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(d-m._start)*m._ts,s,o),d!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=-En);break}}m=v}else{m=this._last;for(var L=i<0?i:d;m;){if(v=m._prev,(m._act||L<=m._end)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(L-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(L-m._start)*m._ts,s,o||ai&&(m._initted||m._startAt)),d!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=L?-En:En);break}}m=v}}if(x&&!s&&(this.pause(),x.render(d>=a?0:-En)._zTime=d>=a?1:-1,this._ts))return this._start=A,G_(this),this.render(i,s,o);this._onUpdate&&!s&&ro(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(A===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&yc(this,1),!s&&!(i<0&&!a)&&(u||a||!l)&&(ro(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(sl(s)||(s=Gs(this,s,i)),!(i instanceof i0)){if(li(i))return i.forEach(function(a){return o.add(a,s)}),this;if(kr(i))return this.addLabel(i,s);if(rr(i))i=_r.delayedCall(0,i);else return this}return this!==i?Qo(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-to);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof _r?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return kr(i)?this.removeLabel(i):rr(i)?this.killTweensOf(i):(z_(this,i),i===this._recent&&(this._recent=this._last),Iu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Hr(hs.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Gs(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=_r.delayedCall(0,s||t0,o);return a.data="isPause",this._hasPause=1,Qo(this,a,Gs(this,i))},t.removePause=function(i){var s=this._first;for(i=Gs(this,i);s;)s._start===i&&s.data==="isPause"&&yc(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Wl!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=no(i),l=this._first,c=sl(s),u;l;)l instanceof _r?Jle(l._targets,a)&&(c?(!Wl||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Gs(o,i),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,d=l.immediateRender,m,v=_r.to(o,co({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||En,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==y&&lh(v,y,0,1).render(v._time,!0,!0),m=1}u&&u.apply(v,f||[])}},s));return d?v.render(0):v},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,co({startAt:{time:Gs(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),TL(this,Gs(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),TL(this,Gs(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+En)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return Iu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Iu(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=to,c,u,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Qo(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;lh(o,o===Wn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Wn._ts&&(z9(Wn,Ny(i,Wn)),k9=hs.frame),hs.frame>=EL){EL+=xs.autoSleep||120;var s=Wn._first;if((!s||!s._ts)&&xs.autoSleep&&hs._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||hs.sleep()}}},e}(i0);co(Hi.prototype,{_lock:0,_hasPause:0,_forcing:0});var vce=function(e,t,r,i,s,o,a){var l=new Zi(this._pt,e,t,0,1,pN,null,s),c=0,u=0,f,d,m,v,_,y,g,x;for(l.b=r,l.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=n0(i)),o&&(x=[r,i],o(x,e,t),r=x[0],i=x[1]),d=r.match(Ew)||[];f=Ew.exec(i);)v=f[0],_=i.substring(c,f.index),m?m=(m+1)%5:_.substr(-5)==="rgba("&&(m=1),v!==d[u++]&&(y=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:_||u===1?_:",",s:y,c:v.charAt(1)==="="?Dd(y,v)-y:parseFloat(v)-y,m:m&&m<4?Math.round:0},c=Ew.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(L9.test(i)||g)&&(l.e=0),this._pt=l,l},wb=function(e,t,r,i,s,o,a,l,c,u){rr(i)&&(i=i(s||0,e,o));var f=e[t],d=r!=="get"?r:rr(f)?c?e[t.indexOf("set")||!rr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,m=rr(f)?c?wce:dN:Eb,v;if(kr(i)&&(~i.indexOf("random(")&&(i=n0(i)),i.charAt(1)==="="&&(v=Dd(d,i)+(ri(d)||0),(v||v===0)&&(i=v))),!u||d!==i||g2)return!isNaN(d*i)&&i!==""?(v=new Zi(this._pt,e,t,+d||0,i-(d||0),typeof f=="boolean"?Ece:hN,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!f&&!(t in e)&&yb(t,i),vce.call(this,e,t,d,i,m,l||xs.stringFilter,c))},yce=function(e,t,r,i,s){if(rr(e)&&(e=gm(e,s,t,r,i)),!fa(e)||e.style&&e.nodeType||li(e)||I9(e))return kr(e)?gm(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=gm(e[a],s,t,r,i);return o},cN=function(e,t,r,i,s,o){var a,l,c,u;if(fs[e]&&(a=new fs[e]).init(s,a.rawVars?t[e]:yce(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Zi(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==_d))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Wl,g2,Ab=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.onUpdateParams,f=i.callbackScope,d=i.runBackwards,m=i.yoyoEase,v=i.keyframes,_=i.autoRevert,y=e._dur,g=e._startAt,x=e._targets,S=e.parent,A=S&&S.data==="nested"?S.vars.targets:x,M=e._overwrite==="auto"&&!pb,C=e.timeline,R,T,b,L,O,k,z,V,j,Q,ne,G,J;if(C&&(!v||!s)&&(s="none"),e._ease=Bu(s,oh.ease),e._yEase=m?sN(Bu(m===!0?s:m,oh.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!C&&!!i.runBackwards,!C||v&&!i.stagger){if(V=x[0]?Pu(x[0]).harness:0,G=V&&i[V.prop],R=ky(i,_b),g&&(g._zTime<0&&g.progress(1),t<0&&d&&a&&!_?g.render(-1,!0):g.revert(d&&y?B1:jle),g._lazy=0),o){if(yc(e._startAt=_r.set(x,co({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!g&&Yi(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:u,callbackScope:f,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ai||!a&&!_)&&e._startAt.revert(B1),a&&y&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(d&&y&&!g){if(t&&(a=!1),b=co({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Yi(l),immediateRender:a,stagger:0,parent:S},R),G&&(b[V.prop]=G),yc(e._startAt=_r.set(x,b)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ai?e._startAt.revert(B1):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,En,En);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&Yi(l)||l&&!y,T=0;T<x.length;T++){if(O=x[T],z=O._gsap||Sb(x)[T]._gsap,e._ptLookup[T]=Q={},u2[z.id]&&oc.length&&Uy(),ne=A===x?T:A.indexOf(O),V&&(j=new V).init(O,G||R,e,ne,A)!==!1&&(e._pt=L=new Zi(e._pt,O,j.name,0,1,j.render,j,0,j.priority),j._props.forEach(function(Y){Q[Y]=L}),j.priority&&(k=1)),!V||G)for(b in R)fs[b]&&(j=cN(b,R,e,ne,O,A))?j.priority&&(k=1):Q[b]=L=wb.call(e,O,b,"get",R[b],ne,A,0,i.stringFilter);e._op&&e._op[T]&&e.kill(O,e._op[T]),M&&e._pt&&(Wl=e,Wn.killTweensOf(O,Q,e.globalTime(t)),J=!e.parent,Wl=0),e._pt&&l&&(u2[z.id]=1)}k&&mN(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!J,v&&t<=0&&C.render(to,!0,!0)},_ce=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,u,f,d;if(!l)for(l=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(c=f[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return g2=1,e.vars[t]="+=0",Ab(e,a),g2=0,1;l.push(c)}for(d=l.length;d--;)u=l[d],c=u._pt||u,c.s=(i||i===0)&&!s?i:c.s+(i||0)+o*c.c,c.c=r-c.s,u.e&&(u.e=ur(r)+ri(u.e)),u.b&&(u.b=c.s+ri(u.b))},xce=function(e,t){var r=e[0]?Pu(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Yu({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Sce=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(li(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},gm=function(e,t,r,i,s){return rr(e)?e.call(t,r,i,s):kr(e)&&~e.indexOf("random(")?n0(e):e},uN=xb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",fN={};Ki(uN+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return fN[n]=1});var _r=function(n){R9(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:pm(i))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,d=l.stagger,m=l.overwrite,v=l.keyframes,_=l.defaults,y=l.scrollTrigger,g=l.yoyoEase,x=i.parent||Wn,S=(li(r)||I9(r)?sl(r[0]):"length"in i)?[r]:no(r),A,M,C,R,T,b,L,O;if(a._targets=S.length?Sb(S):Fy("GSAP target "+r+" not found. https://greensock.com",!xs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||d||s1(c)||s1(u)){if(i=a.vars,A=a.timeline=new Hi({data:"nested",defaults:_||{},targets:x&&x.data==="nested"?x.vars.targets:S}),A.kill(),A.parent=A._dp=Da(a),A._start=0,d||s1(c)||s1(u)){if(R=S.length,L=d&&Y9(d),fa(d))for(T in d)~uN.indexOf(T)&&(O||(O={}),O[T]=d[T]);for(M=0;M<R;M++)C=ky(i,fN),C.stagger=0,g&&(C.yoyoEase=g),O&&Yu(C,O),b=S[M],C.duration=+gm(c,Da(a),M,b,S),C.delay=(+gm(u,Da(a),M,b,S)||0)-a._delay,!d&&R===1&&C.delay&&(a._delay=u=C.delay,a._start+=u,C.delay=0),A.to(b,C,L?L(M,b,S):0),A._ease=tn.none;A.duration()?c=u=0:a.timeline=0}else if(v){pm(co(A.vars.defaults,{ease:"none"})),A._ease=Bu(v.ease||i.ease||"none");var k=0,z,V,j;if(li(v))v.forEach(function(Q){return A.to(S,Q,">")}),A.duration();else{C={};for(T in v)T==="ease"||T==="easeEach"||Sce(T,v[T],C,v.easeEach);for(T in C)for(z=C[T].sort(function(Q,ne){return Q.t-ne.t}),k=0,M=0;M<z.length;M++)V=z[M],j={ease:V.e,duration:(V.t-(M?z[M-1].t:0))/100*c},j[T]=V.v,A.to(S,j,k),k+=j.duration;A.duration()<c&&A.to({},{duration:c-A.duration()})}}c||a.duration(c=A.duration())}else a.timeline=0;return m===!0&&!pb&&(Wl=Da(a),Wn.killTweensOf(S),Wl=0),Qo(x,Da(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!c&&!v&&a._start===Hr(x._time)&&Yi(f)&&Qle(Da(a))&&x.data!=="nested")&&(a._tTime=-En,a.render(Math.max(0,-u)||0)),y&&$9(Da(a),y),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,u=i<0,f=i>l-En&&!u?l:i<En?0:i,d,m,v,_,y,g,x,S,A;if(!c)ece(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=f,S=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(_*100+i,s,o);if(d=Hr(f%_),f===l?(v=this._repeat,d=c):(v=~~(f/_),v&&v===f/_&&(d=c,v--),d>c&&(d=c)),g=this._yoyo&&v&1,g&&(A=this._yEase,d=c-d),y=ah(this._tTime,_),d===a&&!o&&this._initted)return this._tTime=f,this;v!==y&&(S&&this._yEase&&oN(S,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(Hr(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(j9(this,u?i:d,o,s,f))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(A||this._ease)(d/c),this._from&&(this.ratio=x=1-x),d&&!a&&!s&&!v&&(ro(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(x,m.d),m=m._next;S&&S.render(i<0?i:!d&&g?-En:S._dur*S._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&f2(this,i,s,o),ro(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!s&&this.parent&&ro(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&f2(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&yc(this,1),!s&&!(u&&!a)&&(f||a||g)&&(ro(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){r0||hs.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Ab(this,l),c=this._ease(l/this._dur),_ce(this,i,s,o,a,c,l)?this.resetTo(i,s,o,a):(H_(this,0),this.parent||V9(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Vp(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Wl&&Wl.vars.overwrite!==!0)._first||Vp(this),this.parent&&o!==this.timeline.totalDuration()&&lh(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?no(i):a,c=this._ptLookup,u=this._pt,f,d,m,v,_,y,g;if((!s||s==="all")&&Kle(a,l))return s==="all"&&(this._pt=0),Vp(this);for(f=this._op=this._op||[],s!=="all"&&(kr(s)&&(_={},Ki(s,function(x){return _[x]=1}),s=_),s=xce(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){d=c[g],s==="all"?(f[g]=s,v=d,m={}):(m=f[g]=f[g]||{},v=s);for(_ in v)y=d&&d[_],y&&((!("kill"in y.d)||y.d.kill(_)===!0)&&z_(this,y,"_pt"),delete d[_]),m!=="all"&&(m[_]=1)}return this._initted&&!this._pt&&u&&Vp(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return mm(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return mm(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Wn.killTweensOf(i,s,o)},e}(i0);co(_r.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ki("staggerTo,staggerFrom,staggerFromTo",function(n){_r[n]=function(){var e=new Hi,t=h2.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Eb=function(e,t,r){return e[t]=r},dN=function(e,t,r){return e[t](r)},wce=function(e,t,r,i){return e[t](i.fp,r)},Ace=function(e,t,r){return e.setAttribute(t,r)},Mb=function(e,t){return rr(e[t])?dN:mb(e[t])&&e.setAttribute?Ace:Eb},hN=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Ece=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},pN=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},Cb=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Mce=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},Cce=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?z_(this,t,"_pt"):t.dep||(r=1),t=i;return!r},bce=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},mN=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Zi=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||hN,this.d=l||this,this.set=c||Eb,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=bce,this.m=r,this.mt=s,this.tween=i},n}();Ki(xb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return _b[n]=1});Ms.TweenMax=Ms.TweenLite=_r;Ms.TimelineLite=Ms.TimelineMax=Hi;Wn=new Hi({sortChildren:!1,defaults:oh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});xs.stringFilter=iN;var Lu=[],D1={},Tce=[],PL=0,Rce=0,Rw=function(e){return(D1[e]||Tce).map(function(t){return t()})},v2=function(){var e=Date.now(),t=[];e-PL>2&&(Rw("matchMediaInit"),Lu.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=Vs.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),Rw("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),PL=e,Rw("matchMedia"))},gN=function(){function n(t,r){this.selector=r&&p2(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Rce++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){rr(r)&&(s=i,i=r,r=rr);var o=this,a=function(){var c=nr,u=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=p2(s)),nr=o,f=i.apply(o,arguments),rr(f)&&o._r.push(f),nr=c,o.selector=u,o.isReverted=!1,f};return o.last=a,r===rr?a(o):r?o[r]=a:a},e.ignore=function(r){var i=nr;nr=null,r(this),nr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof _r&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,c){return c.g-l.g||-1/0}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof _r)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i)for(var a=Lu.length;a--;)Lu[a].id===this.id&&Lu.splice(a,1)},e.revert=function(r){this.kill(r||{})},n}(),Pce=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){fa(r)||(r={matches:r});var o=new gN(0,s||this.scope),a=o.conditions={},l,c,u;nr&&!o.selector&&(o.selector=nr.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?u=1:(l=Vs.matchMedia(r[c]),l&&(Lu.indexOf(o)<0&&Lu.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(v2):l.addEventListener("change",v2)));return u&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),zy={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return tN(i)})},timeline:function(e){return new Hi(e)},getTweensOf:function(e,t){return Wn.getTweensOf(e,t)},getProperty:function(e,t,r,i){kr(e)&&(e=no(e)[0]);var s=Pu(e||{}).get,o=r?H9:G9;return r==="native"&&(r=""),e&&(t?o((fs[t]&&fs[t].get||s)(e,t,r,i)):function(a,l,c){return o((fs[a]&&fs[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if(e=no(e),e.length>1){var i=e.map(function(u){return Qi.quickSetter(u,t,r)}),s=i.length;return function(u){for(var f=s;f--;)i[f](u)}}e=e[0]||{};var o=fs[t],a=Pu(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var f=new o;_d._pt=0,f.init(e,r?u+r:u,_d,0,[e]),f.render(1,f),_d._pt&&Cb(1,_d)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Qi.to(e,Yu((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Wn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Bu(e.ease,oh.ease)),ML(oh,e||{})},config:function(e){return ML(xs,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!fs[a]&&!Ms[a]&&Fy(t+" effect requires "+a+" plugin.")}),Mw[t]=function(a,l,c){return r(no(a),co(l||{},s),c)},o&&(Hi.prototype[t]=function(a,l,c){return this.add(Mw[t](a,fa(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){tn[e]=Bu(t)},parseEase:function(e,t){return arguments.length?Bu(e,t):tn},getById:function(e){return Wn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Hi(e),i,s;for(r.smoothChildTiming=Yi(e.smoothChildTiming),Wn.remove(r),r._dp=0,r._time=r._tTime=Wn._time,i=Wn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof _r&&i.vars.onComplete===i._targets[0]))&&Qo(r,i,i._start-i._delay),i=s;return Qo(Wn,r,0),r},context:function(e,t){return e?new gN(e,t):nr},matchMedia:function(e){return new Pce(e)},matchMediaRefresh:function(){return Lu.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||v2()},addEventListener:function(e,t){var r=D1[e]||(D1[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=D1[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:lce,wrapYoyo:cce,distribute:Y9,random:Z9,snap:K9,normalize:ace,getUnit:ri,clamp:rce,splitColor:nN,toArray:no,selector:p2,mapRange:q9,pipe:sce,unitize:oce,interpolate:uce,shuffle:J9},install:F9,effects:Mw,ticker:hs,updateRoot:Hi.updateRoot,plugins:fs,globalTimeline:Wn,core:{PropTween:Zi,globals:U9,Tween:_r,Timeline:Hi,Animation:i0,getCache:Pu,_removeLinkedListItem:z_,reverting:function(){return ai},context:function(e){return e&&nr&&(nr.data.push(e),e._ctx=nr),nr},suppressOverwrites:function(e){return pb=e}}};Ki("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return zy[n]=_r[n]});hs.add(Hi.updateRoot);_d=zy.to({},{duration:0});var Ice=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Bce=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Ice(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},Pw=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(kr(s)&&(l={},Ki(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Bce(a,s)}}}},Qi=zy.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)ai?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Pw("roundProps",m2),Pw("modifiers"),Pw("snap",K9))||zy;_r.version=Hi.version=Qi.version="3.12.2";O9=1;gb()&&ch();tn.Power0;tn.Power1;tn.Power2;tn.Power3;tn.Power4;tn.Linear;tn.Quad;tn.Cubic;tn.Quart;tn.Quint;tn.Strong;tn.Elastic;tn.Back;tn.SteppedEase;tn.Bounce;tn.Sine;tn.Expo;tn.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var IL,$l,Od,bb,Su,BL,Tb,Lce=function(){return typeof window<"u"},ol={},au=180/Math.PI,Fd=Math.PI/180,Kf=Math.atan2,LL=1e8,Rb=/([A-Z])/g,Dce=/(left|right|width|margin|padding|x)/i,Oce=/[\s,\(]\S/,ea={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},y2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Fce=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Uce=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},kce=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},vN=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},yN=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Nce=function(e,t,r){return e.style[t]=r},zce=function(e,t,r){return e.style.setProperty(t,r)},Gce=function(e,t,r){return e._gsap[t]=r},Hce=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},Vce=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},Wce=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},jn="transform",Io=jn+"Origin",$ce=function n(e,t){var r=this,i=this.target,s=i.style;if(e in ol&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ea[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=Ua(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Ua(i,e);else return ea.transform.split(",").forEach(function(o){return n.call(r,o,t)});if(this.props.indexOf(jn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Io,t,"")),e=jn}(s||t)&&this.props.push(e,t,s[e])},_N=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},jce=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Rb,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Tb(),(!s||!s.isStart)&&!r[jn]&&(_N(r),i.uncache=1)}},xN=function(e,t){var r={target:e,props:[],revert:jce,save:$ce};return e._gsap||Qi.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},SN,_2=function(e,t){var r=$l.createElementNS?$l.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$l.createElement(e);return r.style?r:$l.createElement(e)},oa=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Rb,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,uh(t)||t,1)||""},DL="O,Moz,ms,Ms,Webkit".split(","),uh=function(e,t,r){var i=t||Su,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(DL[o]+e in s););return o<0?null:(o===3?"ms":o>=0?DL[o]:"")+e},x2=function(){Lce()&&window.document&&(IL=window,$l=IL.document,Od=$l.documentElement,Su=_2("div")||{style:{}},_2("div"),jn=uh(jn),Io=jn+"Origin",Su.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",SN=!!uh("perspective"),Tb=Qi.core.reverting,bb=1)},Iw=function n(e){var t=_2("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Od.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Od.removeChild(t),this.style.cssText=s,o},OL=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},wN=function(e){var t;try{t=e.getBBox()}catch{t=Iw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Iw||(t=Iw.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+OL(e,["x","cx","x1"])||0,y:+OL(e,["y","cy","y1"])||0,width:0,height:0}:t},AN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&wN(e))},s0=function(e,t){if(t){var r=e.style;t in ol&&t!==Io&&(t=jn),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(Rb,"-$1").toLowerCase())):r.removeAttribute(t)}},jl=function(e,t,r,i,s,o){var a=new Zi(e._pt,t,r,0,1,o?yN:vN);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},FL={deg:1,rad:1,turn:1},Xce={grid:1,flex:1},_c=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Su.style,l=Dce.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,d=i==="px",m=i==="%",v,_,y,g;return i===o||!s||FL[i]||FL[o]?s:(o!=="px"&&!d&&(s=n(e,t,r,"px")),g=e.getCTM&&AN(e),(m||o==="%")&&(ol[t]||~t.indexOf("adius"))?(v=g?e.getBBox()[l?"width":"height"]:e[u],ur(m?s/v*f:s/100*v)):(a[l?"width":"height"]=f+(d?o:i),_=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===$l||!_.appendChild)&&(_=$l.body),y=_._gsap,y&&m&&y.width&&l&&y.time===hs.time&&!y.uncache?ur(s/y.width*f):((m||o==="%")&&!Xce[oa(_,"display")]&&(a.position=oa(e,"position")),_===e&&(a.position="static"),_.appendChild(Su),v=Su[u],_.removeChild(Su),a.position="absolute",l&&m&&(y=Pu(_),y.time=hs.time,y.width=_[u]),ur(d?v*s/f:v&&s?f/v*s:0))))},Ua=function(e,t,r,i){var s;return bb||x2(),t in ea&&t!=="transform"&&(t=ea[t],~t.indexOf(",")&&(t=t.split(",")[0])),ol[t]&&t!=="transform"?(s=a0(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Hy(oa(e,Io))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Gy[t]&&Gy[t](e,t,r)||oa(e,t)||N9(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?_c(e,t,s,r)+r:s},Jce=function(e,t,r,i){if(!r||r==="none"){var s=uh(t,e,1),o=s&&oa(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=oa(e,"borderTopColor"))}var a=new Zi(this._pt,e.style,t,0,1,pN),l=0,c=0,u,f,d,m,v,_,y,g,x,S,A,M;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=oa(e,t)||i,e.style[t]=r),u=[r,i],iN(u),r=u[0],i=u[1],d=r.match(yd)||[],M=i.match(yd)||[],M.length){for(;f=yd.exec(i);)y=f[0],x=i.substring(l,f.index),v?v=(v+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(v=1),y!==(_=d[c++]||"")&&(m=parseFloat(_)||0,A=_.substr((m+"").length),y.charAt(1)==="="&&(y=Dd(m,y)+A),g=parseFloat(y),S=y.substr((g+"").length),l=yd.lastIndex-S.length,S||(S=S||xs.units[t]||A,l===i.length&&(i+=S,a.e+=S)),A!==S&&(m=_c(e,t,_,S)||0),a._pt={_next:a._pt,p:x||c===1?x:",",s:m,c:g-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?yN:vN;return L9.test(i)&&(a.e=0),this._pt=a,a},UL={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Yce=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=UL[r]||r,t[1]=UL[i]||i,t.join(" ")},Kce=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],ol[a]&&(l=1,a=a==="transformOrigin"?Io:jn),s0(r,a);l&&(s0(r,jn),o&&(o.svg&&r.removeAttribute("transform"),a0(r,1),o.uncache=1,_N(i)))}},Gy={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Zi(e._pt,t,r,0,0,Kce);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},o0=[1,0,0,1,0,0],EN={},MN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},kL=function(e){var t=oa(e,jn);return MN(t)?o0:t.substr(7).match(B9).map(ur)},Pb=function(e,t){var r=e._gsap||Pu(e),i=e.style,s=kL(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?o0:s):(s===o0&&!e.offsetParent&&e!==Od&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Od.appendChild(e)),s=kL(e),l?i.display=l:s0(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Od.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},S2=function(e,t,r,i,s,o){var a=e._gsap,l=s||Pb(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,d=a.yOffset||0,m=l[0],v=l[1],_=l[2],y=l[3],g=l[4],x=l[5],S=t.split(" "),A=parseFloat(S[0])||0,M=parseFloat(S[1])||0,C,R,T,b;r?l!==o0&&(R=m*y-v*_)&&(T=A*(y/R)+M*(-_/R)+(_*x-y*g)/R,b=A*(-v/R)+M*(m/R)-(m*x-v*g)/R,A=T,M=b):(C=wN(e),A=C.x+(~S[0].indexOf("%")?A/100*C.width:A),M=C.y+(~(S[1]||S[0]).indexOf("%")?M/100*C.height:M)),i||i!==!1&&a.smooth?(g=A-c,x=M-u,a.xOffset=f+(g*m+x*_)-g,a.yOffset=d+(g*v+x*y)-x):a.xOffset=a.yOffset=0,a.xOrigin=A,a.yOrigin=M,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[Io]="0px 0px",o&&(jl(o,a,"xOrigin",c,A),jl(o,a,"yOrigin",u,M),jl(o,a,"xOffset",f,a.xOffset),jl(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",A+" "+M)},a0=function(e,t){var r=e._gsap||new lN(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=oa(e,Io)||"0",u,f,d,m,v,_,y,g,x,S,A,M,C,R,T,b,L,O,k,z,V,j,Q,ne,G,J,Y,X,$,re,ie,ae;return u=f=d=_=y=g=x=S=A=0,m=v=1,r.svg=!!(e.getCTM&&AN(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[jn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[jn]!=="none"?l[jn]:"")),i.scale=i.rotate=i.translate="none"),R=Pb(e,r.svg),r.svg&&(r.uncache?(G=e.getBBox(),c=r.xOrigin-G.x+"px "+(r.yOrigin-G.y)+"px",ne=""):ne=!t&&e.getAttribute("data-svg-origin"),S2(e,ne||c,!!ne||r.originIsAbsolute,r.smooth!==!1,R)),M=r.xOrigin||0,C=r.yOrigin||0,R!==o0&&(O=R[0],k=R[1],z=R[2],V=R[3],u=j=R[4],f=Q=R[5],R.length===6?(m=Math.sqrt(O*O+k*k),v=Math.sqrt(V*V+z*z),_=O||k?Kf(k,O)*au:0,x=z||V?Kf(z,V)*au+_:0,x&&(v*=Math.abs(Math.cos(x*Fd))),r.svg&&(u-=M-(M*O+C*z),f-=C-(M*k+C*V))):(ae=R[6],re=R[7],Y=R[8],X=R[9],$=R[10],ie=R[11],u=R[12],f=R[13],d=R[14],T=Kf(ae,$),y=T*au,T&&(b=Math.cos(-T),L=Math.sin(-T),ne=j*b+Y*L,G=Q*b+X*L,J=ae*b+$*L,Y=j*-L+Y*b,X=Q*-L+X*b,$=ae*-L+$*b,ie=re*-L+ie*b,j=ne,Q=G,ae=J),T=Kf(-z,$),g=T*au,T&&(b=Math.cos(-T),L=Math.sin(-T),ne=O*b-Y*L,G=k*b-X*L,J=z*b-$*L,ie=V*L+ie*b,O=ne,k=G,z=J),T=Kf(k,O),_=T*au,T&&(b=Math.cos(T),L=Math.sin(T),ne=O*b+k*L,G=j*b+Q*L,k=k*b-O*L,Q=Q*b-j*L,O=ne,j=G),y&&Math.abs(y)+Math.abs(_)>359.9&&(y=_=0,g=180-g),m=ur(Math.sqrt(O*O+k*k+z*z)),v=ur(Math.sqrt(Q*Q+ae*ae)),T=Kf(j,Q),x=Math.abs(T)>2e-4?T*au:0,A=ie?1/(ie<0?-ie:ie):0),r.svg&&(ne=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!MN(oa(e,jn)),ne&&e.setAttribute("transform",ne))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(m*=-1,x+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,x+=x<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=d+o,r.scaleX=ur(m),r.scaleY=ur(v),r.rotation=ur(_)+a,r.rotationX=ur(y)+a,r.rotationY=ur(g)+a,r.skewX=x+a,r.skewY=S+a,r.transformPerspective=A+o,(r.zOrigin=parseFloat(c.split(" ")[2])||0)&&(i[Io]=Hy(c)),r.xOffset=r.yOffset=0,r.force3D=xs.force3D,r.renderTransform=r.svg?Qce:SN?CN:Zce,r.uncache=0,r},Hy=function(e){return(e=e.split(" "))[0]+" "+e[1]},Bw=function(e,t,r){var i=ri(t);return ur(parseFloat(t)+parseFloat(_c(e,"x",r+"px",i)))+i},Zce=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,CN(e,t)},tu="0deg",Dp="0px",nu=") ",CN=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,f=r.rotationX,d=r.skewX,m=r.skewY,v=r.scaleX,_=r.scaleY,y=r.transformPerspective,g=r.force3D,x=r.target,S=r.zOrigin,A="",M=g==="auto"&&e&&e!==1||g===!0;if(S&&(f!==tu||u!==tu)){var C=parseFloat(u)*Fd,R=Math.sin(C),T=Math.cos(C),b;C=parseFloat(f)*Fd,b=Math.cos(C),o=Bw(x,o,R*b*-S),a=Bw(x,a,-Math.sin(C)*-S),l=Bw(x,l,T*b*-S+S)}y!==Dp&&(A+="perspective("+y+nu),(i||s)&&(A+="translate("+i+"%, "+s+"%) "),(M||o!==Dp||a!==Dp||l!==Dp)&&(A+=l!==Dp||M?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+nu),c!==tu&&(A+="rotate("+c+nu),u!==tu&&(A+="rotateY("+u+nu),f!==tu&&(A+="rotateX("+f+nu),(d!==tu||m!==tu)&&(A+="skew("+d+", "+m+nu),(v!==1||_!==1)&&(A+="scale("+v+", "+_+nu),x.style[jn]=A||"translate(0, 0)"},Qce=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,f=r.scaleX,d=r.scaleY,m=r.target,v=r.xOrigin,_=r.yOrigin,y=r.xOffset,g=r.yOffset,x=r.forceCSS,S=parseFloat(o),A=parseFloat(a),M,C,R,T,b;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Fd,c*=Fd,M=Math.cos(l)*f,C=Math.sin(l)*f,R=Math.sin(l-c)*-d,T=Math.cos(l-c)*d,c&&(u*=Fd,b=Math.tan(c-u),b=Math.sqrt(1+b*b),R*=b,T*=b,u&&(b=Math.tan(u),b=Math.sqrt(1+b*b),M*=b,C*=b)),M=ur(M),C=ur(C),R=ur(R),T=ur(T)):(M=f,T=d,C=R=0),(S&&!~(o+"").indexOf("px")||A&&!~(a+"").indexOf("px"))&&(S=_c(m,"x",o,"px"),A=_c(m,"y",a,"px")),(v||_||y||g)&&(S=ur(S+v-(v*M+_*R)+y),A=ur(A+_-(v*C+_*T)+g)),(i||s)&&(b=m.getBBox(),S=ur(S+i/100*b.width),A=ur(A+s/100*b.height)),b="matrix("+M+","+C+","+R+","+T+","+S+","+A+")",m.setAttribute("transform",b),x&&(m.style[jn]=b)},qce=function(e,t,r,i,s){var o=360,a=kr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?au:1),c=l-i,u=i+c+"deg",f,d;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*LL)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*LL)%o-~~(c/o)*o)),e._pt=d=new Zi(e._pt,t,r,i,c,Fce),d.e=u,d.u="deg",e._props.push(r),d},NL=function(e,t){for(var r in t)e[r]=t[r];return e},eue=function(e,t,r){var i=NL({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,u,f,d,m,v;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[jn]=t,a=a0(r,1),s0(r,jn),r.setAttribute("transform",c)):(c=getComputedStyle(r)[jn],o[jn]=t,a=a0(r,1),o[jn]=c);for(l in ol)c=i[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=ri(c),v=ri(u),f=m!==v?_c(r,l,c,v):parseFloat(c),d=parseFloat(u),e._pt=new Zi(e._pt,a,l,f,d-f,y2),e._pt.u=v||0,e._props.push(l));NL(a,i)};Ki("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});Gy[e>1?"border"+n:n]=function(a,l,c,u,f){var d,m;if(arguments.length<4)return d=o.map(function(v){return Ua(a,v,c)}),m=d.join(" "),m.split(d[0]).length===5?d[0]:m;d=(u+"").split(" "),m={},o.forEach(function(v,_){return m[v]=d[_]=d[_]||d[(_-1)/2|0]}),a.init(l,m,f)}});var bN={name:"css",register:x2,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,u,f,d,m,v,_,y,g,x,S,A,M,C,R,T;bb||x2(),this.styles=this.styles||xN(e),T=this.styles.props,this.tween=r;for(_ in t)if(_!=="autoRound"&&(u=t[_],!(fs[_]&&cN(_,t,r,i,e,s)))){if(m=typeof u,v=Gy[_],m==="function"&&(u=u.call(r,i,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=n0(u)),v)v(this,e,_,u,r)&&(R=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),u+="",ac.lastIndex=0,ac.test(c)||(y=ri(c),g=ri(u)),g?y!==g&&(c=_c(e,_,c,g)+g):y&&(u+=y),this.add(a,"setProperty",c,u,i,s,0,0,_),o.push(_),T.push(_,0,a[_]);else if(m!=="undefined"){if(l&&_ in l?(c=typeof l[_]=="function"?l[_].call(r,i,e,s):l[_],kr(c)&&~c.indexOf("random(")&&(c=n0(c)),ri(c+"")||(c+=xs.units[_]||ri(Ua(e,_))||""),(c+"").charAt(1)==="="&&(c=Ua(e,_))):c=Ua(e,_),d=parseFloat(c),x=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),x&&(u=u.substr(2)),f=parseFloat(u),_ in ea&&(_==="autoAlpha"&&(d===1&&Ua(e,"visibility")==="hidden"&&f&&(d=0),T.push("visibility",0,a.visibility),jl(this,a,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),_!=="scale"&&_!=="transform"&&(_=ea[_],~_.indexOf(",")&&(_=_.split(",")[0]))),S=_ in ol,S){if(this.styles.save(_),A||(M=e._gsap,M.renderTransform&&!t.parseTransform||a0(e,t.parseTransform),C=t.smoothOrigin!==!1&&M.smooth,A=this._pt=new Zi(this._pt,a,jn,0,1,M.renderTransform,M,0,-1),A.dep=1),_==="scale")this._pt=new Zi(this._pt,M,"scaleY",M.scaleY,(x?Dd(M.scaleY,x+f):f)-M.scaleY||0,y2),this._pt.u=0,o.push("scaleY",_),_+="X";else if(_==="transformOrigin"){T.push(Io,0,a[Io]),u=Yce(u),M.svg?S2(e,u,0,C,0,this):(g=parseFloat(u.split(" ")[2])||0,g!==M.zOrigin&&jl(this,M,"zOrigin",M.zOrigin,g),jl(this,a,_,Hy(c),Hy(u)));continue}else if(_==="svgOrigin"){S2(e,u,1,C,0,this);continue}else if(_ in EN){qce(this,M,_,d,x?Dd(d,x+u):u);continue}else if(_==="smoothOrigin"){jl(this,M,"smooth",M.smooth,u);continue}else if(_==="force3D"){M[_]=u;continue}else if(_==="transform"){eue(this,u,e);continue}}else _ in a||(_=uh(_)||_);if(S||(f||f===0)&&(d||d===0)&&!Oce.test(u)&&_ in a)y=(c+"").substr((d+"").length),f||(f=0),g=ri(u)||(_ in xs.units?xs.units[_]:y),y!==g&&(d=_c(e,_,c,g)),this._pt=new Zi(this._pt,S?M:a,_,d,(x?Dd(d,x+f):f)-d,!S&&(g==="px"||_==="zIndex")&&t.autoRound!==!1?kce:y2),this._pt.u=g||0,y!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=Uce);else if(_ in a)Jce.call(this,e,_,c,x?x+u:u);else if(_ in e)this.add(e,_,c||e[_],x?x+u:u,i,s);else if(_!=="parseTransform"){yb(_,u);continue}S||(_ in a?T.push(_,0,a[_]):T.push(_,1,c||e[_])),o.push(_)}}R&&mN(this)},render:function(e,t){if(t.tween._time||!Tb())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Ua,aliases:ea,getSetter:function(e,t,r){var i=ea[t];return i&&i.indexOf(",")<0&&(t=i),t in ol&&t!==Io&&(e._gsap.x||Ua(e,"x"))?r&&BL===r?t==="scale"?Hce:Gce:(BL=r||{})&&(t==="scale"?Vce:Wce):e.style&&!mb(e.style[t])?Nce:~t.indexOf("-")?zce:Mb(e,t)},core:{_removeProperty:s0,_getMatrix:Pb}};Qi.utils.checkPrefix=uh;Qi.core.getStyleSaver=xN;(function(n,e,t,r){var i=Ki(n+","+e+","+t,function(s){ol[s]=1});Ki(e,function(s){xs.units[s]="deg",EN[s]=1}),ea[i[13]]=n+","+e,Ki(r,function(s){var o=s.split(":");ea[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ki("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){xs.units[n]="px"});Qi.registerPlugin(bN);var w2=Qi.registerPlugin(bN)||Qi;w2.core.Tween;const tue=""+new URL("whoosh-1abbc624.mp3",import.meta.url).href,nue=""+new URL("type-f2791c09.mp3",import.meta.url).href,rue=""+new URL("mouseClick-524524bf.mp3",import.meta.url).href,iue=""+new URL("scroll-1f7a2413.mp3",import.meta.url).href;function sue(){const n=B.useRef(),{camera:e}=Ti(),[t,r]=B.useState(!1),i=new Z(0,0,2),s=new Z(-3,1.5,4);new Audio(tue);const o=new Audio(nue),a=new Audio(rue),l=new Audio(iue),{perfVisible:c}=EB("perfcontrols",{perfVisible:!0}),{laptopPosition:u,laptopRotation:f,screenColor:d}=EB("laptop",{position:{value:{x:-2,y:2},step:.1},rotation:{value:{x:0,y:0},step:.1},screenColor:{value:"#00d9ff"}}),m=Dy("https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/macbook/model.gltf");Dy("https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/right-hand-white-webxr-tracking-ready/model.gltf");const v=()=>{o.play()},_=()=>{a.play()},y=()=>{l.play()},g=()=>{w2.to(e.position,{duration:.75,x:i.x,y:i.y,z:i.z,ease:"power2.inOut",onUpdate:()=>e.lookAt(0,.15,0)}),r(!0)},x=()=>{w2.to(e.position,{duration:.75,x:s.x,y:s.y,z:s.z,ease:"power2.inOut",onUpdate:()=>e.lookAt(0,.15,0)}),r(!1)};return B.useEffect(()=>{const S=A=>{A.data==="iframeClicked"?_():A.data==="iframeScrolled"&&y()};return window.addEventListener("message",S),()=>{window.removeEventListener("message",S)}},[]),ce.jsxs(ce.Fragment,{children:[ce.jsx(wle,{preset:"city"}),c&&ce.jsx(zle,{position:"top-left"}),ce.jsx(Aoe,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:ce.jsxs(gle,{rotationIntensity:t?0:.5,children:[ce.jsx("rectAreaLight",{width:2.5,height:1.65,intensity:65,color:d,rotation:[-.1,Math.PI,0],position:[0,.55,-1.15]}),ce.jsx("primitive",{onClick:v,ref:n,object:m.scene,"position-y":-1.2,"rotation-y":-Math.PI*.02,children:ce.jsx(sse,{transform:!0,wrapperClass:"htmlScreen",distanceFactor:1.17,position:[0,1.56,-1.4],"rotation-x":-.256,children:ce.jsx("iframe",{id:"iframeContent",src:"../../assets/iframeWeb.html",onPointerOver:g,onPointerOut:x})})}),!t&&ce.jsx(o2,{font:"./bangers-v20-latin-regular.woff",fontSize:1,position:[2,.75,.75],"rotation-y":-1.25,maxWidth:2,children:"JASON MUN"})]})}),ce.jsx(Ale,{"position-y":-1.4,opacity:.4,scale:5,blur:2.4})]})}function oue(){return ce.jsx(ce.Fragment,{})}function zL(){return ce.jsx("div",{className:"loading-container",children:ce.jsx("div",{className:"loading-content",children:ce.jsxs("div",{className:"loading-circle",children:[ce.jsx("span",{className:"loading-text",children:"Jason Mun"}),ce.jsx("div",{className:"spinner"})]})})})}const aue=Lw.createRoot(document.querySelector("#root"));aue.render(ce.jsx(ce.Fragment,{children:ce.jsxs(B.Suspense,{fallback:ce.jsx(zL,{}),children:[ce.jsxs(MF,{camera:{fov:45,near:.1,far:2e3,position:[-3,1.5,4]},children:[ce.jsx(sue,{}),ce.jsx(oue,{})]}),ce.jsx(zL,{})]})}));
//# sourceMappingURL=index-d02b2d4b.js.map
